Summary,Issue Type,Status,Project name,Project type,Description
Missing condition picker when editing a text on a subpage,Bug,Awaiting Review,Sakai,software,Missing condition picker when editing a text on a subpage
Missing condition picker when editing a text on a subpage,Bug,Resolved,S2U UNIDIGITAL 2023,software,Missing condition picker when editing a text on a subpage
"Web services: integrateGradebook is probably outdated, make it call Assignments code directly",Improvement,Awaiting Review,Sakai,software,"In the Assignments.java web service thereâ€™s this integrateGradebook function with this comment:{noformat}//  This is a copy of the code  inAssignmentAction.java{noformat}Iâ€™m pretty sure thatâ€™s no longer the case, mainly because the assingments method is now part of the AssignmentToolUtils class.
Iâ€™d say it would be a good idea to re-use that method (maybe via the AssignmentService), make the WS call it directly and avoid outdate/duplicated code."
UserProcessor missing placeholder in log.debug ,Bug,Awaiting Review,Sakai,software,Not seeing info in log.debug
Dates are missing when creating a new Assigment from Lessons,Bug,Awaiting Review,Sakai,software,"Dates are missing when creating a new Assigment from Lessons.

See attached image."
Error in assignments when using gradebook categories,Bug,Awaiting Review,Sakai,software,"The problem occurs when Sakai tries to parse the points (String) to Double type. This problem affects languages that use commas instead of dots on decimals.

The internal logic attempts to compare the points of the task and the points of the category. The problem arises when using commas (commonly used in Spanish) which prevents saving. It appears that it tries to convert the string with commas to a Double, which generates an error that prevents saving the task."
LTI should support sending the institutional id as the lis_person_sourcedid,Feature Request,Awaiting Review,Sakai,software,"Other tools support using the institutional id (via CandidateDetailProvider) typically during exports which are then later used for things like grade entry into an SIS.

It is also possible that during LTI exchanges that the institutional id would make sense to be transmitted, a likely parameter for ""lis_person_sourcedid""."
Resources: Link migration not working for URL content,Bug,Resolved,Sakai,software,"On a site which uses the course year as part of its ID, like â€˜SAK_12345_2023â€™
Upload a file to the Resources tool and access to its details to copy the item address (URL)
Then create a new URL item using the previous address

If later you create a new site for the upcoming academic course ('SAK_12345_2024') and import the data from the previous site, the URL content will keep pointing to the previous site.
But instead it should automatically update with the corresponding year (there is an existing method for that in the code)."
Rubrics: Unable to delete a rubric,Bug,In Progress,Sakai,software,"When attempting to delete a rubric, the screen grays out as if the modal was going to open, but no modal ever opens."
Assignments-Sakai Grader: console error if on student without submission and selecting to navigate between students with a submission,Bug,Awaiting Review,Sakai,software,"If the instructor is grading assignments and is on a student without a submission and decides they only want to navigate between students with a submission, the page gets out of sync and there is a console error. 

{noformat}grader.js?version=df3fb799:4 
 Uncaught 
TypeError: Cannot read properties of undefined (reading 'hydrated')
    at Gt._hydrateNext (grader.js?version=df3fb799:4:63614)
    at Gt._next (grader.js?version=df3fb799:783:13850)
    at dt.handleEvent (chunk-3B44UYHW.js:6:6020)
_hydrateNext	@	grader.js?version=df3fb799:4
_next	@	grader.js?version=df3fb799:783
handleEvent	@	chunk-3B44UYHW.js:6{noformat}

!image-20240729-003320.png|width=503,height=225,alt=""image-20240729-003320.png""!"
Sakai Grader: TypeError: Cannot read properties of null (reading 'focus'),Bug,Awaiting Review,Sakai,software,"Every time the Sakai Grader is closed or saved, there is a console error. 

{noformat}Uncaught (in promise) TypeError: Cannot read properties of null (reading 'focus')
    at SakaiGrader.js:273:47
{noformat}



!image-20240729-002313.png|width=853,height=684,alt=""image-20240729-002313.png""!"
"Lessons: When you send the grade in Spanish to the gradebook, it arrives without decimal",Bug,Open,Sakai,software,"Currently, grades submitted in Spanish to the gradebook are arriving without the corresponding decimal values. "
T&Q: Incorrect maximum question limit in random draw from multiple pools,Bug,Open,Sakai,software,"When creating an assessment in Test & Quizzes tool, if you choose the ""Random draw from multiple question pools"" option, you can select several question pools and decide how many questions in total to randomly display from these pools. 

At most, you can select the total number of questions across all pools. However, when editing the part again later, the maximum number is calculated as the total number of questions in the first selected pool, not the sum of all pools."
"LTI-Assignments: Add push notification when grading, so the SakaiGrader gets updated comments",Bug,Verified,Sakai,software,This builds on [https://sakaiproject.atlassian.net/browse/SAK-46953|https://sakaiproject.atlassian.net/browse/SAK-46953|smart-link] and adds comments to push notifications from the LTI tool in the iframe to the off screen SakaiGrader.
Reset Pass instructions should be unescaped to allow for HTML,Bug,Resolved,Sakai,software,Admins many want to set a link in their instructions like <a href=â€https://xxxxxxâ€>Go to institutional password reset</a>
LTI Assignments cannot be graded unless SakaiGrader is used,Bug,Verified,Sakai,software,"The screen that is shown when you are grading student submissions _without_ using SakaiGrader does not know about the LTI assignment type.

Note that since this appears to me a â€œcompatibility modeâ€ with an old view of the tool, the fix is simply to launch the tool using the resource link launch (i.e. not the submission review launch like in the SakaiGrader.   Also, the grade and comments are not synchronized in the browser."
Frequent webcomponents build failures during npm install,Bug,In Progress,Sakai,software,"Since the merging of SAK-50230, I have frequently experienced failed maven builds of webcomponents/tool/pom.xml during the npm install steps. The signature of these failures are random, though upstream warning messages like the following:Â 

{noformat}npm WARN tar TAR_ENTRY_ERROR EPERM: operation not permitted, {some_pathname_within_webcomponents}{noformat}

Refer to the attached â€œmvn-wc-build-failâ€ files for examples of webcomponent build failures.

To make builds more resilient against this issue, the npm cache likely now needs to be cleared before â€œnpm installâ€ runs. Since introducing this step in webcomponents/tool/pom.xml, Iâ€™ve not yet experienced another build failure nor the warnings cited above.

The OS I use is Oracle Linux 8.10 (a Red Hat distribution)."
Link migration not working for Peer Assignment instructions,Bug,Resolved,Sakai,software,"On a site which uses the course year for its ID, like â€˜SAK_12345_2023â€™
Link a resource on the peer assignment instructions.

Resource URL example:
{color:#0747a6}https://trunk-maria.nightly.sakaiproject.org/access/content/group/SAK_12345_2023/image.png{color}

If later you create a new site for the upcoming academic course ('SAK_12345_2024') and import the data from the previous site, the link will keep pointing to the previous site.
But instead the URL should be automatically updated with the corresponding year (there is an existing method for that in the code)."
LTI: choose custom icon input is too wide,Bug,Open,Sakai,software,"[https://sakaiproject.atlassian.net/browse/SAK-49346|https://sakaiproject.atlassian.net/browse/SAK-49346|smart-link] fixed the text field in the external tools form when the admin fills it out, but it didnâ€™t fix the text field in the pop-up when adding a tool to Lessons or editing it on the navigation.

!image-20240723-232119.png|width=903,height=550,alt=""image-20240723-232119.png""!



!image-20240723-232140.png|width=844,height=435,alt=""image-20240723-232140.png""!"
Dashboard: Announcement widget blank for any admin account,Bug,Open,Sakai,software,"The announcements widget on the user dashboard is always blank for any user who is a member of the administrative workspace.  This was likely due to it originally pulling from all sites that the user has access to, which for the admin is all of them. Now that the widgets should only be pulling from pinned sites, an admin user should also have a working Announcements widget. "
Test & Quizzes: Unique names are not checked when creating global variables manually,Bug,Open,Sakai,software,"In the process of creating a calculated question in the Test & Quizzes tool, when ""Extract Variables, Global Variables, Calculations, and Formulas from Question Text"" is clicked, it ensures that a global variable, a variable, and a formula do not share the same name. However, when creating a global variable manually, this check does not occur. As a result, errors occur due to name duplication."
T&Q: Calculated question rounding error for answer key,Bug,Open,Sakai,software,"The Answer key can display an incorrect value due to a rounding error for an edge case like the following.

For example, suppose a very precise and correct answer for a formula is â€œ2.6454798891706â€. Now suppose the formula is configured to display 3 decimal places for the correct answer. The answer key currently presents the correct answer with a rounding error.

* Currently: The answer key displays as 2.646.
* Expected: The answer key should display as 2.645.

This rounding error happens because SamigoExpressionParser.parse returns the string â€œ2.6455â€ as the answer, which is rounded again downstream (by some client code) to 2.646. These kinds of rounding errors could be prevented by modifying the parse method to return a string with an extra decimal place of precision (e.g., â€œ2.6548â€ would be rounded to the expected â€œ2.645â€).

For what itâ€™s worth, I encountered this problem by testing the following trigonometry example from the T&Q help document, How do I create a calculated question?Â 

Solve: COS({a}) * ({c} - {b}) = {{z}}

A studentâ€™s case arose where variable values resulted in:

COS(4.087) * (3.652 - 8.171)

Using a [+scientific calculator+|https://www.desmos.com/scientific] --with angles set to radians (instead of degrees)-- I discovered that a precise answer like 2.6454798891706 would be presented in the answer key as 2.646 instead of 2.645 (with the default setting of 3 decimal places)."
LTI-Assignments: console error when opening grading page for a group assignment: TypeError: Invalid protocol,Bug,Resolved,Sakai,software,"I created an assignment for a group submission. One student per group submitted and then the instructor attempted to grade.

See the assignments_LTI13 video starting at 8:13. I did not see any server errors, only the console error:

{noformat}classApi.js:36 
 Uncaught 
TypeError: Invalid protocol
    at classApi.js:36:13
    at F (classApi.js:142:43)
    at Temporal.Instant.toZonedDateTimeISO (classApi.js:437:42)
    at Temporal.Instant.toZonedDateTimeISO (classApi.js:10:16)
    at set epochMillis (SakaiDatePicker.js:47:37)
    at n.set [as epochMillis] (reactive-element.ts:756:14)
    at n._$AK (reactive-element.ts:1218:12)
    at n.attributeChangedCallback (reactive-element.ts:1148:10)
    at v.j (lit-html.ts:1910:39)
    at v._$AI (lit-html.ts:1883:12)
{noformat}

!image-20240722-221920.png|width=351,height=151,alt=""image-20240722-221920.png""!

This is also affecting 1.1 group assignments. See the video."
Dashboard tool should be more explicit about flex layout,Bug,Closed,Sakai,software,[https://sakaiproject.atlassian.net/browse/SAK-49917|https://sakaiproject.atlassian.net/browse/SAK-49917|smart-link] removed several important flex options to improve the mobile display. I believe removing them was a mistake.
Assignments: Date Picker doesn't include time on Firefox,Bug,Resolved,Sakai,software,When using Firefox. the new date picker in Assignments is not correct. It does not include the time or the Today link. 
Dashboard: Discussions widget not removing sites if user is no longer a member,Bug,Open,Sakai,software,"This is not a problem on Trunk, but is affecting 23.x

If a user is removed from a site, the discussions widget is not removing the site if there unread discussion posts or messages from before the user was removed."
LTI description is out of date in /direct,Bug,Closed,Sakai,software,"Discovered while testing [https://sakaiproject.atlassian.net/browse/SAK-23981|https://sakaiproject.atlassian.net/browse/SAK-23981|smart-link] The LTI description still refers to 2.x, which has been deprecated. 

!image-20240721-140543.png|width=967,height=78,alt=""image-20240721-140543.png""!

[https://ed.link/community/lti-a-history/|https://ed.link/community/lti-a-history/|smart-link] 

Note that [https://sakaiproject.atlassian.net/browse/SAK-23981|https://sakaiproject.atlassian.net/browse/SAK-23981|smart-link] needs to be back merged before this JIRA.  After that is merged, this should be easy to back merge as far back as you like. â€“ Chuck"
Rubrics: Rubrics locked after linked test is deleted,Bug,Resolved,Sakai,software,Rubric is still locked even after the test linked to it is deleted.
Test and Quizzes: Statistics are not displayed,Bug,Open,Sakai,software,Description: Statistics are not displayed after the student fills out a quiz - a table of the submitted text is displayed instead.
LTI - Remove k1 / pre-k1 cruft from portlet-util,Bug,Verified,Sakai,software,This removes some legacy code that allowed for an older version of the event tracking service to be used.  That old version was from pre 2009 - so it wonâ€™t be going back.  Also move a utility cover into basiclti-common to further cleanup portlet-util from code that did not belong there.
Update Apache commons lang 3.15.0,Bug,Resolved,Sakai,software,[https://commons.apache.org/proper/commons-lang/changes-report.html#a3.15.0|https://commons.apache.org/proper/commons-lang/changes-report.html#a3.15.0|smart-link] 
Rubrics: Unable to create rubric - SyntaxError: JSON.parse: unexpected end of data at line 1 column 1 of the JSON data,Bug,Open,Sakai,software,"I tested in Edge and Firefox to make sure this wasnâ€™t browser specific, but the ability to create a rubric is gone. I initially added a rubric, went into assignments and created an assignment. As a student, I realized the rubric wasnâ€™t there, went back into the instructor view, checked rubrics and the rubric I had initially created was gone and there is no button to create one now. I then went into Firefox and the button to create a rubric is gone there also.

There are no server errors but there is a console error:

{noformat}SyntaxError: JSON.parse: unexpected end of data at line 1 column 1 of the JSON data SakaiRubricsList.js:94:29
    getRubrics SakaiRubricsList.js:94
{noformat}

I created a second site and created a rubric in that site which actually stuck. The first site is still missing the rubric and the button to create one. Is it possible that this is another one of those where the issue only happens the first time on a fresh server?"
toolTitles in portal head need to be escaped if using quotes,Bug,Closed,Sakai,software,toolTitles appears in portal head as a JS array but doesnâ€™t properly escape quotes
"Upgrade to the latest version of ckeditor, CKEditor 5. CKEditor4 has been end of life since June 2023 and is no longer supported unless you buy a commercial support package.",Bug,Open,Sakai,software,"CKEditor reached the end of its supported life June 2023. This means that unless each buy a commercial support package, the Extended Support Model license, then there will be no more bug or security fixes. The solution to this is to either move to ckeditor 5 or maybe another editor altogether. This ticket will be used to explore the migration to CKEditor 5. It will cover plugins and theming and hopefully highlight any issues or compromises we will have to make."
SCORM: Error viewing results,Bug,Resolved,Sakai,software,"When viewing the next page of results in the SCORM player, there is a stacktrace displayed to the user. 

The logs show: 18-Jul-2024 13:29:57.519 ERROR [http-nio-20313-exec-19] o.s.w.m.h.ErrorPage.<init> org.apache.wicket.core.request.handler.ListenerInvocationNotAllowedException: Component rejected interface invocationComponent: [AjaxPagingNavigationIncrementLink [Component id = next]]

at org.apache.wicket.core.request.handler.ListenerRequestHandler.invoke(ListenerRequestHandler.java:245)

at org.apache.wicket.core.request.handler.ListenerRequestHandler.invokeListener(ListenerRequestHandler.java:209)

at org.apache.wicket.core.request.handler.ListenerRequestHandler.respond(ListenerRequestHandler.java:202)

at org.apache.wicket.request.cycle.RequestCycle$HandlerExecutor.respond(RequestCycle.java:910)

at org.apache.wicket.request.RequestHandlerExecutor.execute(RequestHandlerExecutor.java:63)

at org.apache.wicket.request.cycle.RequestCycle.execute(RequestCycle.java:294)

at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:255)

at org.apache.wicket.protocol.http.WicketFilter.processRequestCycle(WicketFilter.java:277)

at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:208)

at org.apache.wicket.protocol.http.WicketServlet.doGet(WicketServlet.java:137)

at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)

at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)

at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)

at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)

at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:451)

at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)

at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)

at org.sakaiproject.scorm.ui.player.ScormSecurityFilter.doFilter(ScormSecurityFilter.java:41)

at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)

at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)

at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661)

at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425)

at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330)

at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294)

at org.sakaiproject.tool.impl.ActiveToolComponent$MyActiveTool.forward(ActiveToolComponent.java:508)

at org.sakaiproject.portal.charon.SkinnableCharonPortal.forwardTool(SkinnableCharonPortal.java:1377)

at org.sakaiproject.portal.charon.handlers.SiteHandler.doToolBuffer(SiteHandler.java:1294)

at org.sakaiproject.portal.charon.handlers.SiteHandler.bufferContent(SiteHandler.java:1128)

at org.sakaiproject.portal.charon.handlers.SiteHandler.doSite(SiteHandler.java:537)

at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:289)

at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:187)

at org.sakaiproject.portal.charon.SkinnableCharonPortal.doGet(SkinnableCharonPortal.java:795)

at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)

at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)

at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)

at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)

at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:501)

at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)

at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)

at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)

at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)

at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)

at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)

at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)

at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)

at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)

at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)

at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:768)

at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)

at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)

at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)

at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)

at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)

at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)

at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)

at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)

at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)

at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)

at java.base/java.lang.Thread.run(Thread.java:829)"
Date Manager: Tests & Quizzes blank due date warning,Bug,Open,Sakai,software,"If you have a test with auto-submit enabled, the due date cannot be blank. If you go to the test settings and try to null the due date (with autosubmit enabled), there is an error: â€œThe Due Date must be set to force submission of saved student work after the Due Date.â€

In Date Manager, if you null the due date of a test with autosubmit enabled, the message is â€œDue Date is required if the assessment has a Late Submission Deadline.â€ This is misleading, since itâ€™s not the late submission deadline (I have no late submissions enabled), but the auto-submit. 

The error should reference the auto-submit when that is enabled. "
Assignments: Moment is Broken in Grader,Bug,Verified,Sakai,software,"Re-submission and re-submission date is broken in Grader.  It looks like a problem with the moment polyfill.

I did some testing and it looks like the millisecond number being passed into the moment code is correct and something is going wrong in the polyfill.  Here is a line reference:

[https://github.com/sakaiproject/sakai/blob/master/webcomponents/tool/src/main/frontend/packages/sakai-date-picker/src/SakaiDatePicker.js#L46|https://github.com/sakaiproject/sakai/blob/master/webcomponents/tool/src/main/frontend/packages/sakai-date-picker/src/SakaiDatePicker.js#L46|smart-link] 

P.S. This is a lot easier now that tracebacks are more accurate and source code is available in web developer console."
Assignments-Rubrics: console errors when releasing grades from submissions page,Bug,Open,Sakai,software,"Found while verifying [https://sakaiproject.atlassian.net/browse/SAK-50010|https://sakaiproject.atlassian.net/browse/SAK-50010|smart-link] 

Assignments with a rubric, if theyâ€™re saved after grading and then on the submissions page the instructor clicks to release grades, there are console errors.

These errors do not appear if the instructor grades and releases within the submission, only if the Release Grades is clicked on the Submissions page.

These errors only display if there is a rubric attached to the assignment.

{noformat}TypeError: Cannot read properties of null (reading '_embedded')
TypeError: Cannot read properties of undefined (reading 'evaluations')
{noformat}



!image-20240717-225555.png|width=902,height=300,alt=""image-20240717-225555.png""!"
"In Conversations, Good Post and Reactions don't work on replies to a topic",Bug,Resolved,Sakai,software,"In Conversations, if you try to select the Good Post link, or add a Reaction to a reply post, there is a console error and the Good Post and/or Reaction does not get applied. 

This only happens when you try to add Good Post or Reaction on a reply to a topic, not on the initial topic post itself. "
Lessons: Assignment title can't remove due date/open date,Bug,Open,Sakai,software,"Assignment title is not properly updated when edited. Happens only for assignment lesson item, not other. Refer to attached video."
Lessons: Undescriptive error message when editing item,Bug,Open,Sakai,software,Error message displayed is not descriptive since it does not mention the exact field the error was encountered.Â 
Grader: Unable to save comments in Safari,Bug,Open,Sakai,software,"Iâ€™m only seeing this when using Safari. 

When using Grader, comments are not being saved. I do notice that the comments box in Safari is not the same as in other browsers, it inâ€™t the CKEditor (CKE load fails when the grader is loaded as indicated by console log messages). It also still keeps the echo of the prior student comments in the text editor. "
Update UnboundID LDAP SDK for Java 7.0.1,Bug,Resolved,Sakai,software,"We have just released version 7.0.1 of the [+UnboundID LDAP SDK for Java+|https://github.com/pingidentity/ldapsdk]. It is available for download from [+GitHub+|https://github.com/pingidentity/ldapsdk/releases] and [+SourceForge+|https://sourceforge.net/projects/ldap-sdk/files/], and it is available in the [+Maven Central Repository+|https://central.sonatype.com/artifact/com.unboundid/unboundid-ldapsdk/7.0.1]. You can find the release notes for this release (and all previous versions) at [https://docs.ldap.com/ldap-sdk/docs/release-notes.html|https://docs.ldap.com/ldap-sdk/docs/release-notes.html|smart-link] , but hereâ€™s a summary of the changes:

* We added a new {{MaximumIdleDurationLDAPConnectionPoolHealthCheck}} class that can be used to replace connections that have remained idle for longer than a specified length of time. We generally recommend setting a maximum connection age for the pool so that connections are automatically replaced after a given amount of time regardless of their activity, but the new health check can be used as an alternative if you want to keep active connections around as long as possible while also ensuring that idle connections are closed by the LDAP SDK before they might be closed by the LDAP server or by intermediate network equipment.
* We updated the in-memory directory server to improve its concurrency when processing operations that donâ€™t need to make changes to the data, including binds, searches, and compares.
* We added new {{Filter.createSubstringAssertion}} methods that can be used to create properly encoded string representations of substring assertions. This can be particularly helpful when you want to create an extensible matching filter using a substring matching rule.
* We updated the {{KeyStoreKeyManager}} and {{TrustStoreTrustManager}} classes to make it possible to use an alternative security provider when accessing the associated key or trust store. Weâ€™ve also made it possible to indicate whether the LDAP SDK should be allowed to access non-FIPS-compliant key stores when operating in FIPS 140-2-compliant mode.
* We fixed an issue in which the {{parallel-update}} tool would use an in-memory buffer to hold information about information to write to the reject file, but it would not automatically flush that buffer when changes are rejected. In some cases, this could introduce a significant delay between the time that a change is rejected and the time that a record of it was written to the specified log file.
* We fixed an issue with the {{manage-certificates}} tool that could prevent it from accessing the JVMâ€™s default trust store in cases where the LDAP SDK is operating in FIPS 140-2-compliant mode and the tool is invoked programmatically (as opposed to running it from the command line).
* We updated the command-line tool framework to make it possible for tools to expose arguments for generating a debug log file. All of the tools included with the LDAP SDK have been updated to provide this option, and you can use the {{--help-debug}} argument to see the applicable arguments.
* We updated the debug logging framework to make it possible to write debug messages, which are formatted as JSON objects, using a multi-line representation rather than the default single-line representation. People looking at the log messages may find the multi-line format easier to read.
* We added a new {{StaticUtils.setSystemPropertyIfNotAlreadyDefined}} method that can be used to set the value of a specified system property in the JVM, but only if itâ€™s not already set (in which case its current value will be preserved).
* We added client-side support for a new â€œverify passwordâ€ extended request in the Ping Identity Directory Server that properly authorized clients (under a restricted set of circumstances) can use to determine whether a given password is valid for a specified user without performing any other password policy processing.
* We updated the OID registry to include records for a number of collation matching rules supported in the Ping Identity Directory Server, ForgeRock OpenDJ, Oracle OUD, and other servers."
LTI Tools set to open in a new window require you to click a button to open the new window,Bug,Closed,Sakai,software,"The behavior of LTI tools set to open in a new window seems to have changed. In prior versions, selecting the â€œAlways open in popupâ€ setting for an LTI tool that is located in the site navigation resulted in a new window opening up when the tool link in the left nav is selected. (The behavior was similar to what happens now if you put a Web Content link in the left nav and tell it to open in a new window. Clicking on the item in the tool menu launches the new window automatically. )

However, the current behavior for LTI tools set to open in a new window is to display a button that says â€œOpen tool in a new windowâ€ and the user has to click that button to launch the tool. This is a change in behavior and requires more clicking to get to the tool, so some of our clients have complained about it.  

*Dev notes:* In investigating this, the new behavior was introduced in [https://sakaiproject.atlassian.net/browse/SAK-47878|https://sakaiproject.atlassian.net/browse/SAK-47878|smart-link] which is in master/25 and went back to 23.0 and 22.4.  The code in that Jira had two flaws: (1) It did not consult the toolâ€™s assertion about launching in a new page which can be (always, never, or let the content decide) and (2) the sakai-lti-popup webcomponent simply had no â€œplease auto press the button featureâ€.  The fix is simple and should back-merge easily to 22-x and 23-x."
"LTI-Assignments: LTI Tool Ignores the ""Always launch in Popup"" setting",Bug,Open,Sakai,software,"When adding an LTI tool, (doesnâ€™t matter if itâ€™s 1.1 or 1.3), the Launch in Popup settings seem to work well for all placements, (Lessons, Rich text editor, navigation), except for Assignments.

In Assignments, even if the setting is set to Always launch in Popup for the tool, if the checkbox within assignments (Load this tool in a new tab) is not checked, the tool will always load in an iframe.

If the checkbox is checked in assignments, then the student has to click twice to get to the tool (but it does open in a new tab/window): 1. Go to External Tool 2. Launch External Tool in New Window

* If the tool was added by an admin to always launch in popup, canâ€™t that setting be passed to assignments?
* When the assignment recognizes the tool is to be opened in a new window, canâ€™t that be done when clicking Go to External Tool?"
LTI: Modify order of items in the form to add an LTI tool,Feature Request,Open,Sakai,software,"There have been many improvements to LTI tools on trunk and for 1.3 tools it seems it is assumed that the Dynamic Registration will point to a ""resource picker"" with one or more tools (Deep Link launch). If the admin adds a single LTI tool (Resource Link launch), the admin needs to do multiple updates before the tool can be saved.

Once the Dynamic Registration process has finished, by default, the following values are set:

# *Allow tool title to be changed*: Allow
# *Allow launch URL to be changed*: Allow
# *Launch URL*
# *Indicate where in the Sakai User interface that these tools should appear*: all are checked except navigation
# *The launch URL for this tool must support at least one launch message type. Most tools support one or the other, but some tools do support both messages at one URL*.: The tool URL supports a ""resource picker"" experience with one or more tools (Deep Link launch)

Logically, the admin would go from top to bottom to modify the values as needed. Once 1 and 2 have been changed to Do not allow, the launch URL is changed, modifying where the tools should appear and the launch type, it gets complicated. 

It doesnâ€™t seem to matter which order they are modified, but #1 and #2 *automatically change back to â€œAllowâ€*. If the admin isnâ€™t aware that these values have changed (since they were modified first and assumed to be kept), the tool will be saved with the tool title and launch URL allowing to be changed.

If #5 were at the top, the launch type could be selected first, but this will only work if the selections for where the tools are to be placed arenâ€™t set by default. "
Discussions: Mark All Read,Feature Request,Open,Sakai,software,"If an instructor or student has a large number of unread posts in Discussions, there isnâ€™t a quick way to mark all within a topic, forum, or site as â€˜readâ€™. Currently, it has to be done on a conversation or post basis. I would like to see a â€œMark All As Readâ€ button within a fourm and topic to mark all posts as read at once."
Test & Quizzes: Update calculated questions instructions,Bug,Verified,Sakai,software,"Currently, the calculated questions instructions state the following:

{quote}Define variables in the question text by surrounding the variable name with single curly braces ( e.g. {x} and {y} )
Define global variables in the question text by surrounding the variable name with single at ( e.g. @x1@ and @y1@ )
+When a student views the question, variable and global variable placeholders will be replaced with the variable values+{quote}

Where it says, ""global variable placeholders will be replaced with the variable values"" this does not happen. When you use @x1@, the student sees the formula with the {} variables replaced . To see the value of the global variable, it must be written as a calculation: [[@x1@]]. Personally, I like it to work this way. It allows the teacher to print both the formula and the value on the screen.

With this in mind, I find it more convenient to update the instructions rather than correct the behavior:

{quote}Define variables in the question text by surrounding the variable name with single curly braces ( e.g. {x} and {y} )
Define global variables in the question text by surrounding the variable name with single at ( e.g. @x1@ and @y1@ )
+When a student views the question, variable placeholders will be replaced with the variable values. Global variable placeholders will be replaced with the formulas.+{quote}

{quote}Define formula placeholders in the question text by surrounding the formula name with double curly braces ( e.g. {{z}} )
When the student views the question, formula placeholders will be replaced with input boxes
+Internal calculations using the variables can be added using double square brackets [[]]. The calculation result will be shown in the question text (e. g. [[{x}+{y}]] or [[@x1@ + @y1@]]). Global variable placeholders will be replaced with their values using double square brackets [[]] (e.g., [[@x1@]]).+{quote}



!image-20240712-114816.png|width=468,height=222,alt=""image-20240712-114816.png""!



!image-20240712-114825.png|width=685,height=313,alt=""image-20240712-114825.png""!"
Update MariaDB/J 2.7.12,Bug,Resolved,Sakai,software,"[https://github.com/mariadb-corporation/mariadb-connector-j/releases/tag/2.7.12|https://github.com/mariadb-corporation/mariadb-connector-j/releases/tag/2.7.12|smart-link] 

[https://github.com/mariadb-corporation/mariadb-connector-j/releases/tag/2.7.11|https://github.com/mariadb-corporation/mariadb-connector-j/releases/tag/2.7.11|smart-link] 

[https://github.com/mariadb-corporation/mariadb-connector-j/releases/tag/2.7.10|https://github.com/mariadb-corporation/mariadb-connector-j/releases/tag/2.7.10|smart-link] 

[https://github.com/mariadb-corporation/mariadb-connector-j/releases/tag/2.7.9|https://github.com/mariadb-corporation/mariadb-connector-j/releases/tag/2.7.9|smart-link] 

 "
Update SpotBugs Maven Plugin 4.8.6.2 & license plugin 4.5,Bug,Resolved,Sakai,software,"[https://github.com/spotbugs/spotbugs-maven-plugin/releases/tag/spotbugs-maven-plugin-4.8.6.0|https://github.com/spotbugs/spotbugs-maven-plugin/releases/tag/spotbugs-maven-plugin-4.8.6.0|smart-link] 

[https://github.com/spotbugs/spotbugs-maven-plugin/releases/tag/spotbugs-maven-plugin-4.8.6.1|https://github.com/spotbugs/spotbugs-maven-plugin/releases/tag/spotbugs-maven-plugin-4.8.6.1|smart-link] 

[https://github.com/spotbugs/spotbugs-maven-plugin/releases/tag/spotbugs-maven-plugin-4.8.6.2|https://github.com/spotbugs/spotbugs-maven-plugin/releases/tag/spotbugs-maven-plugin-4.8.6.2|smart-link] "
TYPE is a reserved word on Oracle,Bug,Resolved,Sakai,software,TYPE is a reserved word on Oracle. We need to change the column name
Grader/Rubric: Removing rubric with adjusted scores not fully cleared,Bug,Closed,Sakai,software,"This is a follow-up to [https://sakaiproject.atlassian.net/browse/SAK-50019|https://sakaiproject.atlassian.net/browse/SAK-50019|smart-link] but making sure to select *Adjust individual student scores* when associating the rubric with the assignment.

See the test plan for details."
Resources: Display Columns controls not hiding whole columns,Bug,Verified,Sakai,software,"If you select to remove a column from view, the headers all shift left, but the table still shows all of the columns.

!display-columns1.png|width=91.66666666666667%,alt=""display-columns1.png""!



!display-columns2.png|width=91.66666666666667%,alt=""display-columns2.png""!"
"LTI Tool Ignores the ""Always launch in Popup"" setting",Bug,Open,Sakai,software,"Some of our clients who have upgraded from 22.x to 23.2 are reporting that existing LTI tools which had been added as items in the left site navigation are no longer behaving as expected. Even though the â€œAlways launch in Popupâ€ setting is selected, the tools ignore that setting and launch within the content frame anyway. This is problematic because many publisher tools will not operate within a frame, and they require the new window in order to work correctly."
LTI: Pop-up when there are no tools available is oversized for the message displayed,Bug,Verified,Sakai,software,"With the recent changes on 25x to how LTI tools are added in Lessons, ( [https://sakaiproject.atlassian.net/browse/SAK-49560|https://sakaiproject.atlassian.net/browse/SAK-49560|smart-link] ), the pop-up also changed and it now seems to be a static height.

When there are no LTI tools to add on the server, the following message displays:

{quote}There are no External Tools available to this placement. These tools can be Application Stores, Applications that are self-configuring, or Learning Object Repositories.{quote}

In Lessons, the pop-up height is so big that there is a scrollbar on the Lessons page now. In Assignments and when using the CK Editor, the pop-up is still big for this message, but at least it fits into the window without scrollbars.

The pop-up needs to be closed with the 'X' in the upper right corner, there are no buttons to cancel/close at the bottom of the pop-up, so it would be nice if the pop-up height adjusted to the amount of content in the pop-up."
LTI: Cancel on pop-up picker console error: ReferenceError: doreload is not defined,Bug,Verified,Sakai,software,"With [https://sakaiproject.atlassian.net/browse/SAK-49560|https://sakaiproject.atlassian.net/browse/SAK-49560|smart-link] the pop-up picker for LTI tools changed (for any tool that can add an LTI tool) and there is now a console error:

{noformat}BltiPicker?returnVieâ€¦=&id=&forumId=:1094 
 Uncaught 
ReferenceError: doreload is not defined
    at HTMLDivElement.<anonymous> (BltiPicker?returnVieâ€¦d=&forumId=:1094:11)
    at Object.trigger (event-handler.js:292:15)
    at modal.js:251:20
    at v (index.js:254:5)
    at backdrop.js:93:7
    at v (index.js:254:5)
    at HTMLDivElement.r (index.js:276:5)
    at a (index.js:98:11)
    at index.js:282:7
{noformat}"
Lessons: Invalid character error when adding a pre-requisite ,Bug,Resolved,Sakai,software,Invalid character error displayed even when valid character (a number) is input as a prerequisite.Â 
Message-ID does not contain angle brackets,Bug,Closed,Sakai,software,"Message-ID must be in format <id@hostname> 

Bug introduced in [https://sakaiproject.atlassian.net/browse/SAK-45971|https://sakaiproject.atlassian.net/browse/SAK-45971|smart-link]

see [https://datatracker.ietf.org/doc/html/rfc2392#section-2|https://datatracker.ietf.org/doc/html/rfc2392#section-2|smart-link] "
Update OpenSearch 1.3.17,Bug,Resolved,Sakai,software,"2024-05-30 Version 1.3.17 Release Notes
Upgrades
OpenJDK Update (April 2024 Patch releases), update to Eclipse Temurin 11.0.23+9 (#13406)
Upgrade BouncyCastle dependencies from 1.75 to 1.78.1 resolving [CVE-2024-30172], [CVE-2024-30171] and [CVE-2024-29857]
Bump netty from 4.1.109.Final to 4.1.110.Final (#13802)

1.3.16
@github-actions github-actions released this Apr 23
Â· 3540 commits to main since this release
 1.3.16
 1870e73
2024-04-18 Version 1.3.16 Release Notes
Upgrades
Bump netty from 4.1.107.Final to 4.1.109.Final (#12924, #13233)

2024-03-01 Version 1.3.15 Release Notes
Upgrades
Bump netty from 4.1.100.Final to 4.1.104.Final (#11294, #11775), #12034)
Bump netty from 4.1.106.Final to 4.1.107.Final (#12372)
Bump org.apache.kerby:kerb-admin from 1.0.1 to 2.0.3 (#12194)"
Library Centralize Bootstrap Tooltip Initialization,Bug,Open,Sakai,software,"To improve maintainability and reduce redundancy in Sakai, centralize the initialization of Bootstrap tooltips. Instead of repeatedly adding the following code snippet across different parts of the application, initialize tooltips in a single, central location:"
Upgrade mockito version,Feature Request,Resolved,Sakai,software,Upgrade mockito version
Samigo TA should only see assessments that are assigned to the entire site or those assessments that belong to the groups they are a part of,Bug,In Progress,Sakai,software,Samigo TA should only see assessments assignt to all site or assessment from the groups which does belong to
"LTI Remove the ""allow settings"" checkbox from the New Tool UI",Improvement,Verified,Sakai,software,"The â€œAllow External Tool to store setting dataâ€ feature in Sakai has a long history of almost being a good thing.  We added a Sakai extension to use XML to store setting data LTI 2.0 had a JSON based settings service - and none of these ever â€œstuckâ€ long term.  Sakai has compatibility code (which will not be removed until later) 0 but the checkbox will be removed from the UI.  It wonâ€™t be removed from the service code, nor from the database at this time - just from the UI to reduce confusion.  It could be re-activated at any time - but it is doubtful."
LTI Update Windows Post Message Documentation,Improvement,Closed,Sakai,software,"The use of windows post messages in LTI has been evolving over the past decade.  The original work was done in Canvas along with an ex-Canvas employee who worked at Lumen Learning who wanted iframes to be really great from a UI perspective.  An informal ad hoc spec was created and some sample code was shared.  Ironically much of the original work was started at a meeting in North Quad at the University of Michigan School of Information and over lunch at the Jerk Pit. 

The early message types were supported in Canvas, Sakai, and Moodle.  Several of the message types like â€˜lti.frameResizeâ€™ became pretty widely supported because it was so useful and so easy to implement.

Over time, the actual 1EdTech specs started using post messages to solve little problems like the need to close the dynamic registration popup at the end of the process and handling the increasingly challenging â€œcookie in an iframe problemâ€.

The Sakai documentation has lagged behind Sakaiâ€™s support for these messages - so this Jira catches things up documentation-wise.  There is no functionality change except some code that was put in to support features that never arrives in any LMS and were never used in Sakai."
Calendar should support import or merging all day events,Bug,Verified,Sakai,software,"When importing or merging a calendar that has a DTSTART and DTEND with a VALUE field it should correctly parse the entry.

DTSTART;VALUE=DATE:20240617
DTEND;VALUE=DATE:20240624

see IETF spec for allowed values [https://datatracker.ietf.org/doc/html/rfc5545#section-3.3.4|https://datatracker.ietf.org/doc/html/rfc5545#section-3.3.4|smart-link] 

Currently it throws an exception:

{noformat}java.time.temporal.UnsupportedTemporalTypeException: Unit must not have an estimated duration
at java.base/java.time.Duration.plus(Duration.java:715) ~[?:?]
at java.base/java.time.Duration.from(Duration.java:338) ~[?:?]
at org.sakaiproject.calendar.impl.readers.IcalendarReader.importStreamFromDelimitedFile(IcalendarReader.java:136) [sakai-calendar-impl-25-SNAPSHOT.jar:?]{noformat}"
Update Apache Poi 5.3.0,Bug,Resolved,Sakai,software,"The Apache POI project is pleased to announce the release of POI 5.3.0.

This is primarily a bug fix release.

See the downloads page for source distributions:
[https://poi.apache.org/download.html|https://poi.apache.org/download.html|smart-link] 

Release Notes

h2. Changes

A full list of changes is available in the change log:
[https://poi.apache.org/changes.html.|https://poi.apache.org/changes.html.]

People interested should also follow the dev mailing list to track
further progress.

h2. Release Contents

This release comprises a source archive from which you can build POI
(poi-src-5.3.0-20240625.zip or poi-src-5.3.0-20240625.tgz)

Unpack the archive and use the following command to build all POI components
with JDK 1.8 or higher:

gradle jar

Pre-built versions of all POI components are also available in the central Maven
repository under Group ID ""org.apache.poi"" and Version ""5.3.0""

All release artifacts are accompanied by SHA checksums and PGP signatures
that you can use to verify the authenticity of your download.

The public key used for the PGP signature can be found at

[https://svn.apache.org/repos/asf/poi/tags/REL_5_3_0/KEYS|https://svn.apache.org/repos/asf/poi/tags/REL_5_3_0/KEYS]"
"Profile: When looking at another user's profile, the birthdate is not formatted correctly",Bug,Closed,Sakai,software,"If a user adds their birthdate to their profile, and another user views their profile, the date format is incorrect. 

I selected July 2, 2000 and it displays as July 2, 2000. When another user views my profile, it displays as 

02 07 2000

[https://sakaiproject.atlassian.net/browse/SAK-46625|https://sakaiproject.atlassian.net/browse/SAK-46625|smart-link] deals with the birth year being checked by default."
Profile: ckeditor standard version console error - This CKEditor 4.22.1 (Standard) version is not secure.,Bug,Closed,Sakai,software,"The ckeditor in Profile is displaying an error to the user and there is a console error.

Clicking Cancel on edit Personal Summary before clicking the x on the error message causes the error message to stay on the page.

!image-20240702-230133.png|width=372,height=203,alt=""image-20240702-230133.png""!

{noformat}This CKEditor 4.22.1 (Standard) version is not secure. Consider upgrading to the latest one, 4.24.0-lts: https://ckeditor.com/ckeditor-4-support/
(anonymous) @ ckeditor.js?version=64aa4df2:346
b.onreadystatechange @ ckeditor.js?version=64aa4df2:343
XMLHttpRequest.send (async)
a @ ckeditor.js?version=64aa4df2:343
(anonymous) @ ckeditor.js?version=64aa4df2:345
k @ ckeditor.js?version=64aa4df2:10
(anonymous) @ ckeditor.js?version=64aa4df2:12
(anonymous) @ ckeditor.js?version=64aa4df2:352
(anonymous) @ ckeditor.js?version=64aa4df2:358
setTimeout (async)
(anonymous) @ ckeditor.js?version=64aa4df2:358
(anonymous) @ ckeditor.js?version=64aa4df2:276
a.<computed> @ ckeditor.js?version=64aa4df2:11
k @ ckeditor.js?version=64aa4df2:10
(anonymous) @ ckeditor.js?version=64aa4df2:12
window.CKEDITOR.window.CKEDITOR.dom.CKEDITOR.editor.CKEDITOR.editor.fire @ ckeditor.js?version=64aa4df2:13
(anonymous) @ ckeditor.js?version=64aa4df2:1289
setTimeout (async)
(anonymous) @ ckeditor.js?version=64aa4df2:1289
(anonymous) @ ckeditor.js?version=64aa4df2:28
setTimeout (async)
setTimeout @ ckeditor.js?version=64aa4df2:28
a @ ckeditor.js?version=64aa4df2:1289
(anonymous) @ ckeditor.js?version=64aa4df2:28
setTimeout (async)
setTimeout @ ckeditor.js?version=64aa4df2:28
(anonymous) @ ckeditor.js?version=64aa4df2:1296
(anonymous) @ ckeditor.js?version=64aa4df2:31
callFunction @ ckeditor.js?version=64aa4df2:31
onload @ VM7361:1
{noformat}"
Improved LTI Admin UI when selecting launch options,Improvement,Verified,Sakai,software,"We should any some validation and or clarity around which options could be selected together or not.

Also consider any UI improvements that might prove helpful.

h4. Tools can generally accept direct LTI Launches or a Content-Item / Deep-Link Selection launches. It is not common, but some tools can handle both types of launch at one endpoint.

# The tool URL can receive an LTI Resource Link launch
# The tool can receive a Content-Item or Deep-Link launch
# Tool supports the privacy launch message (experimental)

h4. Indicate where these tools are placed in Sakai.

# Allow the tool to be placed in site-level navigation
# Allow the tool to be selected from Lessons
# Allow the tool to be used from the rich text editor
# Allow the tool to be one of the assignment types
# Allow the tool to provide a common cartridge (usually to be imported into a tool like Lessons)
# Allow the tool to provide a file (usually as part of a file picker)"
Update Lombok 1.18.34,Bug,Resolved,Sakai,software,"h3. v1.18.34 (June 28th, 2024)

* PLATFORM: Added support for Eclipse 2024-06; you'd get some {{NoSuchMethodError}} traces in your logs if using {{@Builder}} or {{@Singular}} prior to this fix. [Issue #3638|https://github.com/projectlombok/lombok/issues/3638].
* IMPROBABLE BREAKING CHANGE: Lombok now adds {{@lombok.Generated}} by default to methods and types it generates. This may result in accidentally increasing your test coverage percentage. [Issue #3667|https://github.com/projectlombok/lombok/issues/3667].
* IMPROBABLE BREAKING CHANGE: When {{lombok.config}} contains {{lombok.onX.flagUsage = WARNING}}, from now on warnings will actually be generated if onX is used.[Issue #2848|https://github.com/projectlombok/lombok/issues/2848]
* BUGFIX: When {{@SuperBuilder}} was used on a type with an generic array type, it would error {{wrong number of type arguments}}. [Issue #3694|https://github.com/projectlombok/lombok/issues/3694].
* FEATURE: Lombok generates javadoc for you for most of the methods it adds; with this release, javadoc is also added to generated constructors. [Issue #933|https://github.com/projectlombok/lombok/issues/933]."
Postem: Hitting cancel when adding a new feedback file takes you out to the site overview,Bug,Closed,Sakai,software,Hitting Cancel when adding a new Postem item takes you all the way out to the site overview when it should go back to the postem toolâ€™s listing
Announcements: Public access does not seem to work,Bug,Open,Sakai,software,"When an announcement is set to publicly viewable, it actually does not work. Whether using the directtool link or search as I did in the video, the message displays that the site is unavailable. (The portal disappearing is in [https://sakaiproject.atlassian.net/browse/SAK-50268|https://sakaiproject.atlassian.net/browse/SAK-50268|smart-link] ).

!image-20240629-233159.png|width=378,height=122,alt=""image-20240629-233159.png""!

Console errors displayed when trying to access the announcement:

{noformat}portal.init.js?version=ddec9a7a:26 
 Uncaught 
TypeError: Cannot read properties of null (reading 'addEventListener')
    at HTMLDocument.<anonymous> (portal.init.js?version=ddec9a7a:26:49)
(anonymous)	@	portal.init.js?version=ddec9a7a:26
{noformat}

{noformat}e4b0896e-5c8f-465e-aâ€¦=doShowmetadata:178 
 Uncaught 
TypeError: Cannot read properties of null (reading 'focus')
    at e4b0896e-5c8f-465e-aâ€¦Showmetadata:178:63
(anonymous)	@	e4b0896e-5c8f-465e-aâ€¦=doShowmetadata:178
setTimeout (async)		
(anonymous)	@	e4b0896e-5c8f-465e-aâ€¦=doShowmetadata:175
load (async)		
(anonymous)	@	e4b0896e-5c8f-465e-aâ€¦=doShowmetadata:171
{noformat}

!image-20240629-233251.png|width=930,height=331,alt=""image-20240629-233251.png""!

!image-20240629-233341.png|width=932,height=415,alt=""image-20240629-233341.png""!"
"Portal: If a user tries to access a site they are not a member of, the site not available message displays, but the portal is gone",Bug,Open,Sakai,software,"The video shows 2 different issues and I will create another Jira for the anonymous issue. This Jira deals with the portal disappearing when the user clicks on something for a site they are not a member of.

The instructor did a portal search of the word â€œtestâ€ and several entries were returned. The instructor clicked on one and when the page loaded, the portal was gone and the message displayed â€œThe site you requested is not available.â€



This happens whenever a â€œdirecttoolâ€ link is used and the user doesnâ€™t have access.

The following console errors displayed but I believe they belong to the other Jira Iâ€™m going to create:

{noformat}portal.init.js?version=ddec9a7a:26 
 Uncaught 
TypeError: Cannot read properties of null (reading 'addEventListener')
    at HTMLDocument.<anonymous> (portal.init.js?version=ddec9a7a:26:49)
(anonymous)	@	portal.init.js?version=ddec9a7a:26
{noformat}

{noformat}e4b0896e-5c8f-465e-aâ€¦=doShowmetadata:178 
 Uncaught 
TypeError: Cannot read properties of null (reading 'focus')
    at e4b0896e-5c8f-465e-aâ€¦Showmetadata:178:63
(anonymous)	@	e4b0896e-5c8f-465e-aâ€¦=doShowmetadata:178
setTimeout (async)		
(anonymous)	@	e4b0896e-5c8f-465e-aâ€¦=doShowmetadata:175
load (async)		
(anonymous)	@	e4b0896e-5c8f-465e-aâ€¦=doShowmetadata:171
{noformat}"
Add layout option to Home Dashboard,Feature Request,Open,Sakai,software,"The MOTD in Home appears expanded by default at the top of the Dashboard, with the other active widgets displayed below. However, if an institution has a large/lengthy MOTD showing, users may not realize that they should scroll down or collapse the MOTD section to see additional content. 

It would be a nice enhancement to have a layout option, similar to the one for the Site Information Description in the Course Dashboard, but for the MOTD instead. That way, an institution would have the option to select a different default layout, perhaps a 2 or 3 column layout, where the widgets are more easily seen next to the MOTD, regardless of the size of the message. Likewise, users could edit their own Home Dashboard to choose the layout that works best for them."
Profile remove deprecated hibernate template,Improvement,In QA,Sakai,software,"Spring's HibernateTemplate is deprecated and this transitions the profile tool to using the accepted hibernate best practice.

[https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/orm/hibernate5/HibernateTemplate.html|https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/orm/hibernate5/HibernateTemplate.html|smart-link] 

Additionally

* switch Entity caches in Profile to use hibernates 2nd level cache
* implement proper equals and hashcode for Entityâ€™s"
Filter all Dashboard widget content in Home site by pinned sites,Feature Request,Verified,Sakai,software,"After some discussion about various filtering options (term, published, pinned, user-selected, etc.), the T&L/UX group felt that using pinned sites as the filtering mechanism for controlling widget content in the Home site was the best option. The Course Cards widget currently uses pinned to filter which cards are displayed. The group felt that this rule should apply to all widgets in Home by default, so that they display only items coming from pinned sites."
Submission history UI enhancements,Feature Request,Open,Sakai,software,"At the last T&L/UX call, we discussed [https://sakaiproject.atlassian.net/browse/SAK-49836|https://sakaiproject.atlassian.net/browse/SAK-49836|smart-link] regarding the submission history in the New Sakai Grader. While the issue called out in that Jira (the timestamps for file attachments) has already been addressed, the T&L/UX group felt that additional improvements could be made to the history so that it is more condensed and easier to follow. 

Iâ€™m proposing the following UI changes for the instructor view of Grader:

* The addition of the time stamp for inline submissions. (Currently there are only time stamps for the file uploads.)
* The addition of a â€œsubmission historyâ€ section at the top which can be expanded to show prior submission attempts, along with their associated inline and/or file attachments and time stamps, grouped by submission date.
* The ability to click on an item in the submission history and view that item in the content area below. 
** This would allow the instructor to compare prior attempts with the current one. 
** To avoid confusion over which submission is currently being graded, the â€œGrade Submissionâ€ button would become disabled when viewing prior submissions, and a note at the top would remind the instructor that they are not viewing the most recent submission.
** The inline submission text would appear in â€œstudent viewâ€ mode with the instructor comments inserted if applicable, similar to the previous submission that is displayed in the student view when they go in to resubmit. 
* The currently selected item for viewing is indicated in bold text.

See mockups of the proposed changes below.



Submission with collapsed â€œSubmission Historyâ€ section:



!assignment-submission-history-collapsed.png|width=91.66666666666666%,alt=""assignment-submission-history-collapsed.png""!



Submission with expanded â€œSubmission Historyâ€ section:

!assignment-submission-history-expanded.png|width=91.66666666666666%,alt=""assignment-submission-history-expanded.png""!



Submission with expanded â€œSubmission Historyâ€ section and previous inline text selected for viewing:

!assignment-submission-history-expanded-previous-selected.png|width=91.66666666666666%,alt=""assignment-submission-history-expanded-previous-selected.png""!"
Rubrics/Gradebook: Criterion comments donâ€™t always display for students,Bug,Resolved,Sakai,software,"Refer to the attached screencast, RubricCommentsNotAlwaysDisplaying.mp4."
Admin: Site Title search for customized user home site titles does not work,Bug,Awaiting Information,Sakai,software,Customized site titles for user home pages are not searchable.
Navigation: Arrow key navigation does not work on certain pages,Bug,Open,Sakai,software,"This was only tested on *Administrative Workspace* > *Sites*. May affect other pages. The UI navigation buttons are supposed to be complemented by keyboard navigation (arrow keys). However, the arrow keys do not work."
Add email notification and calendar options to assessment Settings in Tests & Quizzes,Feature Request,Open,Sakai,software,"Recently, there was a new feature introduced which automatically sends email notifications to site participants  when an assessment becomes available. While this makes sense in theory, in practice it may be overwhelming for courses where there are a lot of assessments that all open on the same day. Unfortunately, there is no way for an instructor to control whether or not these email notifications go out, since there is no option in the UI to enable/disable this feature. 

The T&L/UX group recently discussed this issue, and we felt that the best approach would be surfacing the option in the UI, so that the instructor could choose to turn it on or off.

Therefore, we would like to propose adding this as a check box in the Settings screen within Tests& Quizzes, just after the Availability Date, since the email announcement is closely tied to that date. 

In addition, the T&L/UX also felt that adding the option to display the due date on the Calendar as a check box in Settings would also be beneficial for users. This option is currently only found in the Publish confirmation screen, which makes it impossible to enable/disable on a published assessment without retracting and republishing the item. Since the calendar entry is closely tied to the due date for the assessment, it makes sense to add it just beneath the Due Date section. 

See proposed mockup below:

!t&q-settings-email-notification-and-calendar.png|width=100%,alt=""t&q-settings-email-notification-and-calendar.png""!

Additionally, it is worth noting that there is another email notification option which can be selected on the Publish confirmation screen, which sends an email notification at the time of publishing (even though the assessment may or may not be available yet). See screenshot of current UI below:

!t&q-publish-email-notification-and-calendar.png|width=91.66666666666666%,alt=""t&q-publish-email-notification-and-calendar.png""!

T&L/UX questioned the usefulness of this option, since it may not be immediately actionable if the assessment availability date is the in the future. Also, if the notification is sent both upon publication, and upon availability, it could result in multiple notifications for the same item and students may feel as if they are being spammed. Originally, I was tempted to add this option to the Settings screen as well, so that it could at least be viewed alongside the other email notification and enabled/disabled from there. However, upon reflection, I think it is probably a rarely used option, and may be unnecessary given the new â€œemail upon availabilityâ€ feature. Iâ€™d be interested to hear from folks in the comments whether or not they use this â€œemail upon publishâ€ option, or whether it can be removed to avoid over-notifying users."
Assignments: Cannot modify default date values,Bug,Open,Sakai,software,"Choosing different open/due/accept until dates reverts back to the default date/time when saving.  Using the keyboard or date picker doesnâ€™t seem to matter.  Reproduced with Chrome, but didnâ€™t try other browsers."
LTI: Document annotator cannot be graded,Bug,Closed,Sakai,software,"*Note: This is not a Sakai issue - it is an issue with the Tsugi tool which is now fixed.*

The Document Annotator, both 1.1 and 1.3 versions cannot be graded currently.

1.3 has â€œuser_id is requiredâ€ on the grading page:

!image-20240626-001137.png|width=842,height=363,alt=""image-20240626-001137.png""!

â€˜1.1 doesnâ€™t have any place to grade (see the video)."
Tests & Quizzes: Pagination on Total Scores page is not active on initial page load,Bug,Resolved,Sakai,software,"The default pagination on the Tests & Quizzes Total Scores page is 200. However, if more than 200 students are in the class, all are appearing. This can cause a long load time for very large sites.

!image-20240625-133010.png|width=336,height=167,alt=""image-20240625-133010.png""!"
Library Fix Sass Deprecation Warnings ,Bug,Resolved,Sakai,software,Fix Sass Deprecation Warnings by Adding Units to Weight Parameters
Assignments / Groups - Cursor navigation Fails when First Group Has no Submission,Bug,Open,Sakai,software,"When you make a group assignment (in this use case I made two groups) and have the second group do a submission but not the first group.   Then go into to the grading list and select the first group (not submitted), It correctly says â€œNo Submissionâ€.  Press the â€œforward arrowâ€ and nothing happens and no javascript console error but it does not advance to the second group.  Then press the back arrow (you are at the first entry) and the UI incorrectly â€œadvancesâ€ to the second entry and shows that entry but not all is well - there is a trace back is shown in the JavaScript console error happens as shown in the attachment.

It then can navigate forwards and backwards with the second groupâ€™s submission seeming to be the first groupâ€™s submission (i.e. when you are on the first pressing forward arrow does nothing but pressing back arrow goes to the second entry).

This was identified during the testing of [https://sakaiproject.atlassian.net/browse/SAK-49323|https://sakaiproject.atlassian.net/browse/SAK-49323|smart-link]."
Profile: TypeError: $(...).qtip is not a function,Bug,Verified,Sakai,software,"Iâ€™m not seeing this issue on 23x. Anytime the click here link is clicked in a siteâ€™s roster and the profile page of that user displays, the following console error displays:

{noformat}jquery-3.7.1-ver-962â€¦1466C5E4F0E7A1.js:2 
 Uncaught 
TypeError: $(...).qtip is not a function
    at HTMLDocument.<anonymous> (6a813685-c417-4b41-bâ€¦6e3adf4a9?0:1185:38)
    at e (jquery-3.7.1-ver-962â€¦E4F0E7A1.js:2:27028)
    at t (jquery-3.7.1-ver-962â€¦E4F0E7A1.js:2:27330)
{noformat}"
Chatroom: Main chat room page does not follow dark mode theme. ,Bug,Open,Sakai,software,Main chat room page does not follow dark mode theme.
Site Info: Auto Groups Select Rosters does not follow dark mode,Bug,Resolved,Sakai,software,Page to select rosters does not follow dark mode theme.
Assignments: Page area where grades and points are set is not visible,Bug,Resolved,Sakai,software,Page area where points are set is invisible in dark mode.
Lessons: Starter page is not readable on dark mode,Bug,Open,Sakai,software,Main lesson screen for lessons is unreadable on dark mode.
Dark Mode: Multiple tables in multiple tools do not follow dark mode,Bug,Resolved,Sakai,software,Different Tables on different tools do not follow dark mode correctly. Full list of the tables and the tools they are found in are listed in the test plan. Screenshots are also attached with the patter dark-mode-tool-name-feature-name.
Samigo TA should only see groups they are a member of when grading an assessment,Bug,In Progress,Sakai,software,"Samigo TA should only see groups they are a member of when grading an assessment

On the selector for â€œEntiresiteâ€, groups to which the TA does not belong should not be displayed

!image-20240624-083921.png|width=688,height=195,alt=""image-20240624-083921.png""!"
Site Overview: Blockquoted text does not display,Bug,Closed,Sakai,software,"Blockquoted text does not diplay in the Site Overview tool. However, the correct display format is found in the *Site Info* â†’ *Edit Site Information â†’ Confirming edits* page.

*Note:* Even the real-time editor does not display the block quoted text correctly. 

CKEditor Example: [https://ckeditor.com/cke4/addon/blockquote|https://ckeditor.com/cke4/addon/blockquote|smart-link]  "
Email notification sent for inactive user when adding user to course site,Bug,Open,Sakai,software,Email being sent to inactive users when added to a course site with any role.
Portal: Organize Pinned respond to pin/unpin events in Sites drawer,Improvement,Open,Sakai,software,"If the pinned sites in the Organize Pinned tab of the Sites drawer displayed the current pinned sites from the Sites tab of the Sites drawer, this would be a significant UX improvement. 

Refer to the attached screencast for a demonstration of the issue to improve: OrganizePinnedUXImprovementProposal.mp4."
"Cannot add LTI tool in Lessons using ""Add Learning App""",Bug,Closed,Sakai,software,"When attempting to add a link to an LTI tool in Lessons, using the â€œAdd Learning Appâ€ to select from a store, the following error displays:

h1. HTTP Status 400 ? Bad Request

----

*Type*Â Status Report

*Message*Â NoSuchMethodException for panel name

*Description*Â The server cannot or will not process the request due to something that is perceived to be a client error (e.g., malformed request syntax, invalid request message framing, or deceptive request routing).

----

h3. Apache Tomcat/9.0.76



Attached is a video showing the issue.

[https://youtu.be/PVH2j0IiaK4|https://youtu.be/PVH2j0IiaK4|smart-link] "
Admin User Management: every other line is unreadable,Bug,Resolved,Sakai,software,"The users table in dark mode is not very readable on trunk. 23x is so much better. Probably need to check ALL tables now to see if this change affects all tools.

!image-20240620-212514.png|width=725,height=845,alt=""image-20240620-212514.png""!"
Add an Expand All / Collapse All option in Date Manager,Feature Request,Open,Sakai,software,"In the Date Manager, you have to click each tool section heading individually in order to view the dates for items within that section. If you have a lot of date-centric tools available in the site, it could require 7 to 10 clicks just to expand all the various sections and view the items within. It would be much quicker and easier for the instructor if there were an â€œExpand All / Collapse Allâ€ option at the the top of the list, so that all available tools may be quickly expanded and viewed at once. 

See mockups for proposed feature:

!expand.png|width=91.66666666666667%,alt=""expand.png""!



!collapse.png|width=91.66666666666667%,alt=""collapse.png""!"
Tools in Date Manager should be listed in a discernable order,Feature Request,Open,Sakai,software,"The tool sections in Date Manager appear to be listed in a random order. Perhaps it was intended to be in order of frequency of use? Even so, it isnâ€™t immediately obvious what the order is, so it appears a bit messy. It would be more logical to list them in alphabetical order, or at least include the ability to sort tools A-Z or Z-A. This would also make it easier to locate a particular tool if there is a long list of tools in a site. Or, even better, if  alphabetical was the default sort order, but the individual user could determine their own sort order, that would be ideal. Perhaps a â€œReorderâ€ link could be added to allow for individual ordering. 

!date-manager-tools.png|width=100%,alt=""date-manager-tools.png""!

Note: This issue is different from [https://sakaiproject.atlassian.net/browse/SAK-47701|https://sakaiproject.atlassian.net/browse/SAK-47701|smart-link] where the items _within_ each tool section were not in order. "
Unable to edit Discussion dates in Date Manager unless there is an existing date to be changed,Bug,Resolved,Sakai,software,"In the Date Manager, it is not possible to select the Date picker for items that have not already been assigned a date within the Discussion tool. However, if there is an existing date, it can be updated via Date Manager. This behavior is different than all of the other tools in Date Manager, where the picker can be selected to assign a new date to an item which did not have an existing date associated with it. It is also quite inconvenient, since it means that if an instructor wants to assign a date to a new forum or topic while updating other items in Date Manager, they have to leave that screen, go to Discussions, find the individual forum or topic, and assign a date there first. 

!date-picker.png|width=91.66666666666666%,alt=""date-picker.png""!"
Admin home: typo in link on home page,Bug,Verified,Sakai,software,"[https://trunk-maria.nightly.sakaiproject.org/portal/site/~admin|https://trunk-maria.nightly.sakaiproject.org/portal/site/~admin]

The link for Administration Workspace has a typo in it:

!image-20240619-214114.png|width=695,height=137,alt=""image-20240619-214114.png""!"
"Tests & Quizzes, Gradebook and Assignments: Download zip with all rubrics",Feature Request,Open,Sakai,software,"This feature implements an option to download all the graded rubrics with a single click, since until now you had to download all the rubrics one by one, which could be very annoying, especially when there were many users involved.

All the three screens were this feature has been added showed already a list of users, each with the icon to see and download the pdf of the evaluation."
LTI: Students can easily see their grade for an lti assignment even if it hasn't been released,Bug,Open,Sakai,software,"This probably affects 22x also, will test shortly and update this Jira if so.

When the instructor adds an LTI assignment and grades it but des not release it, the student can still easily figure out what their grade is due to the history kept in the assignment:


!image-20240618-223257.png|width=919,height=425,alt=""image-20240618-223257.png""!"
Update NPM libs across Sakai,Bug,Resolved,Sakai,software,"Update npm libs for webcomponents, vuecomponents, meetings, library"
Grader: Non-critical UX issues when removing and revising comments,Bug,Open,Sakai,software,"In reference to [https://sakaiproject.atlassian.net/browse/SAK-50178|https://sakaiproject.atlassian.net/browse/SAK-50178|smart-link],  this Jira pertains to the non-critical issues originally reported there and since extracted from there and represented here. Refer to the test plan for details."
Search: Add/Update Help Documentation for Search Tool ,Bug,Awaiting Information,Sakai,software,"When preparing to build out the â€œSearchâ€ tab for the Sakai 23 accessibility test script, I consulted some of the help documentation available in the Sakai 23 User Guide.

Â 

There are a number of advanced search options referenced in the Apache Lucine documentation on the following page:

Â 

[https://sakai.screenstepslive.com/s/sakai_help/m/114554/l/1629468-how-do-i-perform-an-advanced-search|https://sakai.screenstepslive.com/s/sakai_help/m/114554/l/1629468-how-do-i-perform-an-advanced-search|smart-link] 

Â 

many of which arenâ€™t working â€“ at least not as described

Â 

Moreover, the following page describes the Sakai tools that use the EntityContentProducer and are supposed to work with Apache Lucene:

Â 

[https://sakai.screenstepslive.com/s/sakai_help/m/114554/l/1629469-what-tool-content-is-included-in-search|https://sakai.screenstepslive.com/s/sakai_help/m/114554/l/1629469-what-tool-content-is-included-in-search|smart-link] 

Â 

However, during my testing, only the Chat, Lessons, and Resources Tools yielded any search results.

Â 

Weâ€™re in need of a developer to go through and test each of these advanced search options and Tools to verify whether the described functionality exists/applies to Sakai 23, while adding/updating help documentation to include any Sakai-specific terms/keystrokes which are needed to perform these advanced searches.

Â 

Advanced search options needing to be verified/updated with Sakai-specific terms/keystrokes:

Â 

Â·Â Â Â Â Â Â Â Â  Include the key word â€œSiteâ€ to narrow the search for a particular term to a specified Course Site

Â·Â Â Â Â Â Â Â Â  Include the key word â€œToolâ€ to narrow your search for a particular term to a specified Tool

Â·Â Â Â Â Â Â Â Â  Include the key word â€œTitleâ€ to search for items with that Title

Â·Â Â Â Â Â Â Â Â  Include the key word â€œTitleâ€ to narrow your search for a particular term appearing in an item with that Title

Â·Â Â Â Â Â Â Â Â  Combine multiple terms together with Boolean operators

Â·Â Â Â Â Â Â Â Â  Perform a single character wild card search

Â·Â Â Â Â Â Â Â Â  Perform a multiple character wild card search

Â·Â Â Â Â Â Â Â Â  Perform a fuzzy search for a term

Â·Â Â Â Â Â Â Â Â  Specify a fuzzy search parameter by entering a value between 0 and 1

Â·Â Â Â Â Â Â Â Â  Perform a proximity search for two terms within so many words of one another in a document

Â·Â Â Â Â Â Â Â Â  Perform an inclusive range query

Â·Â Â Â Â Â Â Â Â  Perform an exclusive range query

Â·Â Â Â Â Â Â Â Â  Boost a search term by adding a boost factor next to a term to make it more relevant

Â·Â Â Â Â Â Â Â Â  Boost a search phrase by adding a boost factor next to a phrase to make it more relevant

Â·Â Â Â Â Â Â Â Â  Exclude matches that include a certain term

Â·Â Â Â Â Â Â Â Â  Exclude matches that include a certain phrase

Â·Â Â Â Â Â Â Â Â  Form sub queries by grouping clauses

Â·Â Â Â Â Â Â Â Â  Group multiple clauses to a single field

Â·Â Â Â Â Â Â Â Â  Perform a search for a term containing special characters

Â 

List of Sakai Tools including â€œEntityContentProducerâ€ which need to be tested/verified as working (including what Sakai-specific name for each Tool should be used if different than the terms listed below):

Â 

Â·Â Â Â Â Â Â Â Â  Announcements

Â·Â Â Â Â Â Â Â Â  Chat

Â·Â Â Â Â Â Â Â Â  Tests & Quizzes

Â·Â Â Â Â Â Â Â Â  Lessons

Â·Â Â Â Â Â Â Â Â  Messages

Â·Â Â Â Â Â Â Â Â  Discussions

Â·Â Â Â Â Â Â Â Â  Profile

Â·Â Â Â Â Â Â Â Â  Resources

Â·Â Â Â Â Â Â Â Â  Wiki"
Announcements: Access options reset after returning from attachments view with anon role enabled,Bug,Verified,Sakai,software,"When creating an announcement, you can make it visible for the members of the site, for selected groups/roles or make it publicly available.

However, if you add the role for anonymous user on the site with permission to read announcements; the only access option will be â€˜*publicly viewable*â€™.

!access_options_diff.png|width=75%,alt=""access_options_diff.png""!

{panel:bgColor=#ffebe6}
The issue comes when you try to attach a file, once you get back to the â€˜Post Announcementâ€™ view all access options appear again (but shouldnâ€™t)
{panel}"
Test and quizzes - Random Fixed draw from question pool for test,Feature Request,Open,Sakai,software,"Feature request - the bug that was fixed in [+https://sakaiproject.atlassian.net/issues/SAK-43768+|https://sakaiproject.atlassian.net/issues/SAK-43768] had some valuable use cases. Can this option - to randomly draw from fixed positions across a number of question pools - be added as an additional option when drawing from a question pool? 



Currently in test and quizzes, one has two options for th random draw from a question bank:

# A student's questions are randomized each time an assessment is submitted
# A student's questions are randomized once for all submissions

Previously, option 2 had the following impact:

# If there for example 11 questions and one draws 1 question, a specific student would always get question no 4. The number was random, but fixed for all the tests, even if one coppied the test and quiz. The advantage is one could build questions that build ontop of each other. 

For example one has 4 qustion banks, with 11 questions each. In the old option the student alway got the same question. Thus in Question bank 1 the inputs for a numerical question was given, and one value was asked. Question bank 2 one could use the same inputs and ask a part b of the qustion. This happened because one knew that the student gets the same number in the 11 qeustion sequence. 

However this changed. It is now totally random.
# The second impact is that when republish an old test, a student get new values. I wanted to use the same test values, for student who did not get ie 50%, but they could use the same values. However this does not work anymore.

My suggestion is that there is a thirds option ie

# A student's questions are *fixed* randomized once for all submissions. Thus a student will always get the same question in any test where this option is used.

I hope this clear, as I build many numerical tests on this option."
Update filter wording for user dashboard course list to clarify display of pinned sites,Bug,Verified,Sakai,software,"The wording in the site filter is a little ambiguous. If we are only displaying pinned sites at any point, all the dropdown entries should reflect that."
"The discussions/forums dashboard widget shows the totals for all a user's sites, even if there have been no new messages or forum posts",Bug,Closed,Sakai,software,"The discussions/forums dashboard widget shows the totals for all a user's sites, even if there have been no new messages or forum posts. Only display site rows where something is there to see."
Lessons: Prerequisites are allowed to be set more than the score of the test,Bug,Open,Sakai,software,Description: Under the prerequisites and requirements section a prerequisite is allowed to be greater than the overall test score.
Remove the Styleable feature,Task,Resolved,Sakai,software,"Back in 2007, we invented the notion in Sakai of letting end-users control their look and feel through user controlled CSS features.  It was introduced into Sakai even before we were in github ðŸ™‚ 

[https://github.com/sakaiproject/sakai/commit/eb8724d2b102|https://github.com/sakaiproject/sakai/commit/eb8724d2b102|smart-link] 

This feature was part of our (very laudable) intention (which continues to this day) to be a platform to showcase what is possible in terms of accessibility.  Like many of our hopeful features, it never went anywhere and has become out of date.   It has been commented out of the portal since the switch to Trinity (Sakai 23) so it does not work at all on the modern released Sakai versions.

So we will remove it for Sakai 25."
Conversations: Edit guidelines does not spawn CkEditor text field,Bug,Open,Sakai,software,"sakai master (build: cc81ae9a) and sakai 22 (build: 7f98095e) are not affected!

Steps to reproduce:

# go to conversations tool â†’ settings
# toogle Enable Community Guidelines to ON
# Click on button â€œEdit Guidelinesâ€œ
# No CkEditor text field appears


!image-20240614-122127.png|width=54.95305164319249%,alt=""image-20240614-122127.png""!
# Clicking on the save button results in console error:

!image-20240614-122221.png|width=79.95305164319248%,alt=""image-20240614-122221.png""!"
Conversations: posting reaction to posts fails with network error,Bug,Open,Sakai,software,"sakai 22 seems to be not affected! (tested with build 7f98095e)



Steps to reproduce:

# create a question/discussion
# post a reply
# log in as another user and try to post reaction to the reply (Good Post)
# This fails with error message: â€œNetwork error while posting reactionsâ€œ and  http error 400


!image-20240614-112828.png|width=100%,alt=""image-20240614-112828.png""!



logs:



[http-nio-20023-exec-12] o.s.w.s.m.s.DefaultHandlerExceptionResolver.logException Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize Map key of type {{org.sakaiproject.conversations.api.Reaction}} from String ""undefined"": not a valid representation, problem: (com.fasterxml.jackson.databind.exc.InvalidFormatException) Cannot deserialize Map key of type {{org.sakaiproject.conversations.api.Reaction}} from String ""undefined"": not one of the values accepted for Enum class: [GOOD_ANSWER, GOOD_QUESTION, GOOD_IDEA, LOVE_IT, KEY]; nested exception is com.fasterxml.jackson.databind.exc.InvalidFormatException: Cannot deserialize Map key of type {{org.sakaiproject.conversations.api.Reaction}} from String ""undefined"": not a valid representation, problem: (com.fasterxml.jackson.databind.exc.InvalidFormatException) Cannot deserialize Map key of type {{org.sakaiproject.conversations.api.Reaction}} from String ""undefined"": not one of the values accepted for Enum class: [GOOD_ANSWER, GOOD_QUESTION, GOOD_IDEA, LOVE_IT, KEY]<EOL> at [Source: (org.springframework.util.StreamUtils$NonClosingInputStream); line: 1, column: 90]]



The problem seems to be that the request body contains the key â€œundefinedâ€œ, which is not  a recognized reaction"
Assignments List: Filter assignments by group,Bug,Resolved,Sakai,software,"The ""Filter by group"" selector in the Assignments List is incorrectly created and cannot be used. Additionally, its right spacing is visually too wide.

{noformat}# SAK-33971 Filter assignments by group in the Assignments List
# DEFAULT: false (disabled)
# Set to true to show the filter in the Assignments List view
assignment.group.filter.enabled=true{noformat}

Before:

!image-20240614-114414.png|width=1171,height=299,alt=""image-20240614-114414.png""!

After:

!image-20240614-114452.png|width=1166,height=300,alt=""image-20240614-114452.png""!"
Update UnboundID LDAP SDK for Java 7.0.0,Bug,Resolved,Sakai,software,"We have just released version 7.0.0 of the [+UnboundID LDAP SDK for Java+|https://github.com/pingidentity/ldapsdk]. It is available for download from [+GitHub+|https://github.com/pingidentity/ldapsdk/releases] and [+SourceForge+|https://sourceforge.net/projects/ldap-sdk/files/], and it is available in the [+Maven Central Repository+|https://central.sonatype.com/artifact/com.unboundid/unboundid-ldapsdk/7.0.0]. You can find the release notes for this release (and all previous versions) at [+https://docs.ldap.com/ldap-sdk/docs/release-notes.html+|https://docs.ldap.com/ldap-sdk/docs/release-notes.html], but hereâ€™s a summary of the changes:

* The LDAP SDK now requires Java 8 or later. Java 7 is no longer supported.
* We improved the behavior of LDAP connection pools when they are configured to invoke a health check when checking out a connection from the pool. Previously, if a connection was found to be invalid during checkout, the LDAP SDK would create a new connection to replace it, but would continue iterating through other connections in the pool trying to find an existing valid connection. It will now return the newly created connection immediately without checking other existing connections, which can substantially reduce the time to check out a connection in a scenario where many connections have been invalidated (e.g., by a server shutdown).
* We added a new {{compare-ldap-schemas}} command-line tool that can be used to identify differences between the schemas of two LDAP servers.
* We improved the behavior that the LDAP SDK uses when authenticating with the GSSAPI SASL mechanism. Previously, if you didnâ€™t explicitly provide a JAAS configuration file to use for the attempt, the LDAP SDK would create a new one for each bind attempt. This would create a lot of temporary files that would need to be cleaned up when the JVM exited, and they might not get cleaned up properly if they JVM exits abnormally (e.g., itâ€™s killed or if the JVM crashes). It would also require a small amount of additional memory for each bind attempt, since it has to remember another file to be deleted. Now, the LDAP SDK will be able to reuse the same generated configuration file for all GSSAPI bind requests that use the same JAAS settings, which will slightly improve performance, reduce memory usage, and reduce disk space consumption.
* We added experimental client-side support for the relax rules support as defined in [+draft-zeilenga-ldap-relax-03+|https://docs.ldap.com/specs/draft-zeilenga-ldap-relax-03.txt]. This draft doesnâ€™t specify an OID for the control, but at least a couple of servers (OpenLDAP and ForgeRock OpenDJ) have implemented support for the control with an OID of 1.3.6.1.4.1.4203.666.5.12, so the LDAP SDK uses that OID for the control.
* We added client-side support for a number of proprietary controls used by the ForgeRock OpenDJ directory server. These include:
** A transaction ID request control, which can be included in an operation request to provide a transaction ID that will appear in the access log message for that operation.
** A replication repair request control, which can be included in a write request to indicate that the associated change should not be replicated.
** Change sequence number request and response controls, which can be used with a write operation to obtain the replication CSN that the server assigned to that operation.
** Affinity request control, which can be included in related requests sent through an LDAP proxy server to consistently route them to the same LDAP server instance.
* We added connection pool health checks for use in conjunction with the Ping Identity Directory Server, including:
** One that will attempt to determine whether there are any active alerts in the server that cause it to consider itself to be either degraded or unavailable.
** One that will assess the replication backlog and can consider a server unavailable if it has too many outstanding changes, or if the oldest outstanding change was originally processed too long ago.
** One that will attempt to determine whether the server is in lockdown mode.
* We updated the {{CryptoHelper}} class to add convenience methods for generating SHA-256, SHA-384, and SHA-512 digests from byte arrays, strings, and files. There are also generic versions of these methods that can be used with user-specified digest algorithms.
* We added methods for normalizing JSON values and JSON object filters. This can help make it possible to compare two JSON object filters to determine whether two JSON object filters are equivalent.
* We updated the {{BouncyCastleFIPSHelper}} class to add a constant with the name of a system property that can be used to enable support for the MD5 digest algorithm, which may be needed if youâ€™re using the 1.0.2.4 or later version of the bc-fips jar file and need to use the MD5 message digest for some reason.
* We updated the documentation to include new and updated versions of a number of LDAP-related Internet Drafts, including:
** [+draft-ietf-kitten-scram-2fa-04+|https://docs.ldap.com/specs/draft-ietf-kitten-scram-2fa-04.txt]
** [+draft-melnikov-scram-bis-04+|https://docs.ldap.com/specs/draft-melnikov-scram-bis-04.txt]
** [+draft-melnikov-scram-sha-512-04+|https://docs.ldap.com/specs/draft-melnikov-scram-sha-512-04.txt]
** [+draft-melnikov-scram-sha3-512-04+|https://docs.ldap.com/specs/draft-melnikov-scram-sha3-512-04.txt]
** [+draft-coretta-oiddir-radit-00+|https://docs.ldap.com/specs/draft-coretta-oiddir-radit-00.txt]
** [+draft-coretta-oiddir-radsa-00+|https://docs.ldap.com/specs/draft-coretta-oiddir-radsa-00.txt]
** [+draft-coretta-oiddir-radua-00+|https://docs.ldap.com/specs/draft-coretta-oiddir-radua-00.txt]
** [+draft-coretta-oiddir-roadmap-00+|https://docs.ldap.com/specs/draft-coretta-oiddir-roadmap-00.txt]
** [+draft-coretta-oiddir-schema-01+|https://docs.ldap.com/specs/draft-coretta-oiddir-schema-01.txt]"
Tests and Quizzes: Groups to which the TA does not belong should not be displayed on the selector Who can access this assessment?,Bug,Resolved,Sakai,software,"On Availabitly and Submissions settings.

In the part when â€œWho can access this assessment?â€, on the selector â€œNo groups selectedâ€, groups to which the TA does not belong should not be displayed.

Tests & Quizzes should work on the same way that Assignments."
"LTI-Stealthed Tools: Modify the behavior so the instructor can use the stealthed tool (if added to their site) from Lessons, assignments and the CK Editor",Feature Request,Open,Sakai,software,"This actually affects all servers. There have already been many changes to External Tools recently and it would be good if stealthed tools could get looked at.

Since the placement options have changed in 25x and 23x, allowing the following, the stealthed tool still only places the tool in the navigation no matter what is selected:

* Allow the tool to be placed in site-level navigation
* Allow the tool to be selected from Lessons
* Allow the tool to be one of the assignment types
* Allow the tool to be used from the rich text editor

When a tool is stealthed and is added to a site, there is an option to add it to the navigation, but I did some testing with that box unchecked.

* The site that had the tool added actually displayed it in Site Info > Manage Tools and allowed the instructor to select it.
* In a site that did not have the tool added, it did not display in Site Info > Manage Tools

The CK Editor shopping cart recently had some nice changes ( [https://sakaiproject.atlassian.net/browse/SAK-50205|https://sakaiproject.atlassian.net/browse/SAK-50205|smart-link] ), showing resource URLs in the top part. If the Site Info > Manage Tools is smart enough to recognize when the tool should be listed and when it shouldnâ€™t, could the same be worked out for the CK Editor? 

Lessons is getting an update ( [https://sakaiproject.atlassian.net/browse/SAK-49560|https://sakaiproject.atlassian.net/browse/SAK-49560|smart-link] ). Could it be smart enough to recognize when a stealthed tool has been added to a site?

If the placements have been checked for navigation, and/or Lessons, and/or assignments, and/or the CK Editor, and the tool has been stealthed, I think the tools should be available for the instructor to use if the tool has been added to the site.

Doc with screen shots and info regarding stealthed tools:
[https://docs.google.com/document/d/1C6z4a9z-D-AetSgwH2pRjYrrrPRgp-Hq9E573tvPjuk/edit?usp=sharing|https://docs.google.com/document/d/1C6z4a9z-D-AetSgwH2pRjYrrrPRgp-Hq9E573tvPjuk/edit?usp=sharing|smart-link] "
Portal when forming the reset urls should only effect the path of a uri,Bug,Closed,Sakai,software,"When Portal is forming the reset urls for both page-reset and tool-reset it looks at the entire uri and performs string replacement, this is prone to errors.

For example give the following url:
{{https://tool.university.edu/portal/site/abcdef/tool/12345}}

The portal incorrectly create a reset url for that tool

{{https://tool-reset.university.edu/portal/site/abcdef/tool/12345}}

when it should be

{{https://tool.university.edu/portal/site/abcdef/tool-reset/12345}}

see [https://www.baeldung.com/spring-uricomponentsbuilder|https://www.baeldung.com/spring-uricomponentsbuilder|smart-link] "
Discussion and Rubrics: Comment box in rubric does not follow dark mode,Bug,Open,Sakai,software,Comment box under â€˜gradeâ€™ in the rubrics for discussions message post does not follow dark mode theme
Automatic Site publish option failing,Bug,Open,Sakai,software,"If a site is set to automatic publish, it is NOT being published. The unpublished site banner changes from showing the date that it would be automatically published to just showing â€œUnpublished siteâ€.

If a site is changed to automatic after the term start date, it is published, itâ€™s just start dates in the future (the primary use case of this) that are broken."
Add assignment by columns download (xlsx),Feature Request,Resolved,Sakai,software,"The original functionality was changed.

We should add another download button with the original functionality from Sakai 20.

It was changed here: [https://sakaiproject.atlassian.net/browse/SAK-45391|https://sakaiproject.atlassian.net/browse/SAK-45391|smart-link]  and later with Worklog"
Update Apache Commons Configuration 2.11.0,Bug,Resolved,Sakai,software,"[ANNOUNCE] Apache Commons Configuration 2.11.0
The Apache Commons Team is pleased to announce Commons Configuration 2.11.0.

The Commons Configuration software library provides a generic
configuration interface that enables an application to read
configuration data from a variety of sources.

Commons Configuration includes tools to assist in reading
configuration/preference files in various formats; requires Java 8.

This is a minor release with new features and updated dependencies;
requires Java 8 or above.

Historical list of changes:
[https://commons.apache.org/proper/commons-configuration/changes-report.html|https://commons.apache.org/proper/commons-configuration/changes-report.html|smart-link] 

For complete information on Apache Commons Configuration, including
instructions on how to submit bug reports, patches, or suggestions for
improvement, see the Apache Apache Commons Configuration website:

[https://commons.apache.org/proper/commons-configuration/|https://commons.apache.org/proper/commons-configuration/|smart-link] 

Download it from
[https://commons.apache.org/proper/commons-configuration//download_configuration.cgi|https://commons.apache.org/proper/commons-configuration//download_configuration.cgi|smart-link] 

Gary Gregory "
Update Apache Commons Net 3.11.1,Bug,Resolved,Sakai,software,"Release 3.11.1 â€“ 2024-06-07
Type	Changes	By
Fix	Allow longer data in pattern IMAPReply.UNTAGGED_RESPONSE. Thanks to Stuart Maclean, Gary Gregory.	ggregory
Fix	Fix Reproducible Builds issues #259. Thanks to HervÃ© Boutemy, Gary Gregory."
"Remove portal-chat, portal-video-chat, webrtc, etc from Sakai 25",Bug,Verified,Sakai,software,"A long time ago, before the invention of Slack, Zoom, and Teams, Sakai had an idea that it would add a multi-user chat that would hover over your Sakai sites and let you talk to your Sakai connections in text. Â Later some cool webrtc was added and with the right servers and configuration a simple Slack-like huddle could be created - all in Sakai. Â My first record of it is 2011 (screen shot included) and if you look at the â€˜git blameâ€™ for portal-charon/charon/src/webapp/scripts/chat.js you will see activity from 2011-2015 with a lot of really cool folks making it better and better over time.

This was some *really great work* by some really smart developers around the world - but in the modern era, its time as an LMS feature has passed. Â I shed a small tear when I seem how much talent and effort went into this - but ah well - time waits for no feature.

On a technical level, the last effort was 2015 and it has been commented out of the portal code since since 2022-10-27 because it was not â€œconverted to trinityâ€ and therefore not available at all in Sakai 23 and later.

It is my guess that this code is not running anywhere in production and thus can be deleted from Sakai 25.

If there are folks running this pre-trinity(23) and want it to run in trinity(23) - then a bunch of work needs to be done before Sakai 25. Â I am guessing that a lot of it is just broken having not been tested for at least two years and likely more like almost 10 years.

This does not affect the Chat tool (left nav placed in sites) at all. Â That will continue to work unchanged."
Rubrics: Hover text does not change for rubric and rating without re-opening the page,Bug,Open,Sakai,software,Hover text does not change for rubric and rating without re-opening the page.
LTI: Editor Shopping Cart Dialog shows tools that don't support resource link launch in top half of dialog,Bug,Closed,Sakai,software,"While this may seem related to the general LTI / Ckeditor issues identified in [https://sakaiproject.atlassian.net/browse/SAK-50202|https://sakaiproject.atlassian.net/browse/SAK-50202|smart-link]  and [https://sakaiproject.atlassian.net/browse/SAK-47327|https://sakaiproject.atlassian.net/browse/SAK-47327|smart-link] it is not related to the JavaScript â€œbootstrap missing errorâ€ that causes those overall problems.

But this issue was noticed while doing testing for those JIRAs.  It is actually a bug that was left incomplete in [https://sakaiproject.atlassian.net/browse/SAK-49540|https://sakaiproject.atlassian.net/browse/SAK-49540|smart-link].  If you review that Jira, pre-25 versions of Sakai had a weak notion of placements because of historical evolution and that Jira cleaned things up.  

The issue of the store-only (i.e. not resource link supporting tools) showing up in the list of tools that support resource link launches is the bug here (see attached screen shot).

This fix will not fix either [https://sakaiproject.atlassian.net/browse/SAK-47327|https://sakaiproject.atlassian.net/browse/SAK-47327|smart-link] or [https://sakaiproject.atlassian.net/browse/SAK-50202|https://sakaiproject.atlassian.net/browse/SAK-50202|smart-link]

Merge Notes - If [https://sakaiproject.atlassian.net/browse/SAK-49540|https://sakaiproject.atlassian.net/browse/SAK-49540|smart-link] has been merged - then this needs merging as well."
Gradebook: adding a GB item results in a rubric console error when there are no rubric in the site ,Bug,Open,Sakai,software,"Currently this is only on 25x. In a site with no rubrics, every time a Gradebook item is added, the following console error displays:

{noformat}rubric-association-râ€¦ersion=f67b1c25:195 
 
TypeError: Failed to fetch
    at v._getRubrics (/webcomponents/bundlâ€¦n=f67b1c25:195:4308)
    at v.connectedCallback (/webcomponents/bundlâ€¦n=f67b1c25:195:3190)
    at Object.close (modal-ver-384AD8158Fâ€¦96F3742CB.js:16:296)
    at Object.<anonymous> (modal-ver-384AD8158Fâ€¦96F3742CB.js:14:290)
    at d (jquery.js:529:14)
{noformat}"
Gradebook: server warnings for Quick Entry - o.a.w.Localizer.getStringIgnoreSettings - Resource keys,Bug,Open,Sakai,software,"When selecting a GB item on the Quick Entry page, the following warnings display in the server logs (currently 25x only):

{noformat}09-Jun-2024 08:50:24.092 WARN [http-nio-20313-exec-2] o.a.w.Localizer.getStringIgnoreSettings Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [BulkGradePanel [Component id = content]] - Resource key: quickentry.replacescore

09-Jun-2024 08:50:24.092 WARN [http-nio-20313-exec-2] o.a.w.Localizer.getStringIgnoreSettings Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [BulkGradePanel [Component id = content]] - Resource key: quickentry.scorecaption

09-Jun-2024 08:50:24.093 WARN [http-nio-20313-exec-2] o.a.w.Localizer.getStringIgnoreSettings Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [BulkGradePanel [Component id = content]] - Resource key: quickentry.replacecomment

09-Jun-2024 08:50:24.093 WARN [http-nio-20313-exec-2] o.a.w.Localizer.getStringIgnoreSettings Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [BulkGradePanel [Component id = content]] - Resource key: quickentry.commentcaption
{noformat}"
LTI: External tools not working in ckeditor - bootstrap is not defined,Bug,Closed,Sakai,software,"Issues with [https://sakaiproject.atlassian.net/browse/SAK-47327|https://sakaiproject.atlassian.net/browse/SAK-47327|smart-link] 

On 25x and 23x, if the user tries to add an external tool from the shopping cart modal, the user gets kicked out of announcements into the site info iframe (the outer frame with the portal is gone), thereâ€™s a console error:

{noformat}aHR0cHM6Ly90cnVuay1tâ€¦tiItemId=/blti/2:64 
 Uncaught 
ReferenceError: bootstrap is not defined
    at HTMLDocument.<anonymous> (aHR0cHM6Ly90cnVuay1tâ€¦temId=/blti/2:64:55)
    at i (jquery.js:3232:31)
    at Object.fireWith [as resolveWith] (jquery.js:3362:7)
    at Function.ready (jquery.js:3582:13)
    at HTMLDocument.K (jquery.js:3617:10){noformat}

The tool never gets placed. Using the back arrow in the site info page, the user gets taken back to the edit Announcement, but thereâ€™s no tool added.

The external tools do work because I added them in Lessons using Add External Tool just to make sure there was nothing wrong with the tools themselves."
Updated Help content for 23.3,Bug,Open,Sakai,software,We have updated Sakai Help content for the Syllabus tool that we would like to include in the 23.2 maintenance release. The most current collection of help files needs to be exported out of Screensteps via the API process to pick up these new changes.
SCORM - Set default permissions,Bug,Verified,Sakai,software,"The SCORM tool doesnâ€™t have any permissions for the instructor or student by default. I noticed when trying to test this that instructor couldnâ€™t upload a SCORM content package. Thereâ€™s no permissions tab in the tool where I could set this as the instructor. The only way was to log in as admin and update the permissions via the Realms tool. I would assume that instructor should have all permissions, and student role should have scorm.launch?

* scorm.configure
*  scorm.delete
* scorm.grade
* scorm.launch
* scorm.upload
* scorm.validate
* scorm.view.results"
Rubrics: Hard Delete of a site via Worksite Setup does not purge rbc_returned_* tables,Bug,Open,Sakai,software,"You need database access to confirm this bug!

* create a site and add assignments and rubrics tool.
* create rubrics and assignment â†’ link rubric to assignment
* submit as student to the assignment
* grade with rubrics and release to students via button: Save and Release to Student: [https://sakaiproject.atlassian.net/browse/SAK-50171|https://sakaiproject.atlassian.net/browse/SAK-50171|smart-link] 
* go to Worksite Setup and Hard Delete site
* The corresponding entries in tables e.g. _rbc__rubrics, rbc_tool_item_rbc_assoc, rbc_evaluation are deleted
* The corresponding entries in tables rbc_returned_evaluation, rbc_returned_criterion_out and rbc_returned_criterion_outs remain


Note: You need to hard Delete site via Worksite Setup. a soft delete and subsequent run of the job â€œ Expunge softly deleted sitesâ€œ with (hardDelete= true) does not call the affected method RubricServiceImpl.deleteSiteRubrics."
Course Cards widget - Term duplicates,Bug,Verified,Sakai,software,"This is related to the course cards widget introduced in [https://sakaiproject.atlassian.net/browse/SAK-48986|https://sakaiproject.atlassian.net/browse/SAK-48986|smart-link]

The Term drop-down menu has a duplicate entry for each course in a term. If I have 3 sites in SP24, Spring 2024 is listed in the drop-down three times. Each of those options shows all three sites. "
Profile: first launch of roster RuntimeException:Fatal error trying to execute custom action method: get-membership:show:getMembership:,Bug,Closed,Sakai,software,"The first time the instructor tried to launch the roster, there were console errors and a stacktrace. I received errors for the first time accessing roster in a manually created site, then again when accessing the roster in an official site. I tried to reproduce with another instructor in a new site, but didnâ€™t see the errors that time, so I think it may need to be the very first time for either type of site after a server refresh?

Stacktraces attachedâ€¦there is one for edge in a manually created site which is a little different than the firefox official site.

Firefox console error:

{noformat}Uncaught TypeError: data is null
    success roster.js:838
    jQuery 6
    searchIndexPromise roster.js:833
    init roster.js:831
    success roster.js:911
    jQuery 6
    success roster.js:899
    jQuery 6
    loadSiteDataAndInit roster.js:874
    loadRoster roster.js:973
    promise callback*loadRoster roster.js:955
    <anonymous> f800c696-4ad7-468f-9354-6f1441844966:1038
roster.js:838:9{noformat}

Edge console errors:

!image-20240605-230208.png|width=719,height=63,alt=""image-20240605-230208.png""!"
CLONE - Conversations:  o.h.e.j.s.SqlExceptionHelper.logExceptions (conn=248009) Duplicate entry,Bug,Open,Sakai,software,"This is an issue again on 25x and 23x. The first time a topic is accessed by the student, there are console errors:

{noformat}SyntaxError: JSON.parse: unexpected end of data at line 1 column 1 of the JSON data sakai-topic-3VH4WS2P.js:formatted:2139:25{noformat}

{noformat}Uncaught (in promise) TypeError: this.topic.posts is undefined
    set topic/< sakai-topic-3VH4WS2P.js:formatted:1688
{noformat}

The sql exceptions are also back:

05-Jun-2024 17:35:37.756 ERROR [http-nio-20313-exec-22] o.h.e.j.s.SqlExceptionHelper.logExceptions (conn=248009) Duplicate entry '923e597c-ef95-431e-b5fa-b820532e9f49-5f98cad9-c268-42d7-8cb7-...' for key 'UniqueTopicStatus'"
"Conversations: Private reply to public post displays ""1 Reply"", tool tip is ""undefined""",Bug,Open,Sakai,software,"This is an issue on 22x. When a user posts publicly, and the reply is private, other students can see the â€œ1 Replyâ€ with a tool tip â€œundefinedâ€. They cannot expand and display the private response.

On 25x when a user posts publicly but the response is private, the â€œ1 Replyâ€ doesnâ€™t even show up for other students.

Made this minor since (at this time) the private response can only be accessed by the user who made the initial post."
Tests & Quizzes: Combine site quiz availability emails,Improvement,Open,Sakai,software,"One of the new email notifications is when quizzes become available. Students and instructors receive an email that contains the site, quiz name, availability date, due date, time limit, number of submissions, etc.  

Some classes have all quizzes available from day 1, to allow students to work ahead as they want. Those students could be getting a large number of very repetative emails all at once. This would be very annoying, and likely result in students deleting them all without reading, or changing to notification option to not receive these, even though it would be useful for classes that have the quiz open dates staggared throughout the class. 

Instead of an email for each quiz, can a single email be generated for all tests that open at a time for a site? The emails do not currently include the direct link to the quiz, just the site, so it could list all the quizzes that came available at the current time in the class, then have the link to the site below all of them. 

There should still be an email for tests that open at the same time in different sites, just combined for the same site, same time. "
"When creating an assignment, the use rubric radio button is always selected. You have to deselect it or you automatically pick the first rubric in the list.",Bug,Closed,Sakai,software,"When creating an assignment, the â€œuse the following rubricâ€ button is always selected by default. You have to deselect it, or you end up associating the first rubric in the list. "
Rubrics: Group Data on PDF Export,Improvement,Open,Sakai,software,"In an individual assignment, when exporting the rubrics in PDF format, relevant information about each student is displayed:

!image-20240604-141917.png|width=1163,height=434,alt=""image-20240604-141917.png""!



In the case of being an assignment with assigned groups (one submission per group), no relevant information is shown about the group that made the submission. It would be important to show the information such as title and the members of it.

!image-20240604-142027.png|width=1028,height=357,alt=""image-20240604-142027.png""!"
Rationalize the tools automatically created in the !admin and ~admin sites,Bug,Verified,Sakai,software,"In Sakai the admin account has two sites. (1) The Administratorâ€™s Home Site (~admin) and the (2) The site where the actual administration is to be done (!admin).  One reason these are separate is that we can allow multiple users to administer the system without requiring sharing of the â€œadminâ€ log in password. 

When we build a new feature (say Plus) that requires an Administration tool, we make sure to add that tool to the !admin site - and often the tool is written in such a way that it notices when it is in the !admin site and presents any admin-only UI elements.

Over the years, a number of â€œadmin uiâ€ tools have been added to the â€œ~adminâ€ and â€œ!adminâ€ sites, leading to confusion for new administrators as to what site to use for what purpose.

This Jira proposes to remove unnecessary duplicate tools from the â€œ~adminâ€ Home Site and rename that site to â€œAdmin Homeâ€ to make things clearer.  There might be a few tools that we do leave as duplicate, perhaps to allow the â€œadminâ€ user to repair something wrong in the â€œ!adminâ€ site (i.e. they were removed from the !admin realm by another administrator)  - or perhaps not - we can discuss the right way to do this.

The overall goal is to have the administration tools only in !admin and not in ~admin as much as possible to reduce confusion.

As a side note, this will only apply to initial server setup of fresh installs (i.e. on the nighties) - there will be no conversion script for this as the administrators of existing servers can (and probably have) tweaked the configurations of these sites to their liking - so not need to adjust the already existing sites.

This is an easy back merge to 23.x but it is probably fine to to just have this in master and 25.   I folks like it and want it in 23 make a comment.

*Note:* This does not have a database conversion and that is on purpose.   For existing systems, anyone can simply edit their ~admin site by hand to accomplish everything in this JIRA.  And if we tried to automate what happens in this Jira in a conversion script, it might unnecessarily step on local modifications that sites have already made in ~admin."
Update Apache FreeMarker 2.3.33,Bug,Resolved,Sakai,software,"h4. [ANNOUNCE] Apache FreeMarker 2.3.33 is released
The Apache FreeMarker community is pleased to announce the release of
Apache FreeMarker 2.3.33.

Change log: [https://freemarker.apache.org/docs/versions_2_3_33.html|https://freemarker.apache.org/docs/versions_2_3_33.html|smart-link] 
Download: [https://freemarker.apache.org/freemarkerdownload.html|https://freemarker.apache.org/freemarkerdownload.html|smart-link] 

Apache FreeMarkerâ„¢ is a template engine: a Java library to generate
text output (HTML web pages, e-mails, configuration files, source
code, etc.) based on templates and changing data. Templates are
written in the FreeMarker Template Language (FTL), which is a simple,
specialized language. Usually, a general-purpose programming language
(like Java) is used to prepare the data (issue database queries, do
business calculations). Then, Apache FreeMarker displays that prepared
data using templates. In the template you are focusing on how to
present the data, and outside the template you are focusing on what
data to present."
Make grading service items hideable from the gradebook ui. This will enable tools to use the grading service for grade storage without showing it in the gradebook tool.,Bug,In Progress,Sakai,software,"As things stand in the assignment tool, if you grade an assignment the grade always results in an item being added to the gradebook tool. In some cases this may not be desirable, so this Jira is all about adding a checkbox indicating that the instructor wants it displaying in the gradebook. This means we will be able to  have â€œsilentâ€ grading service items where tools can store their grades in privacy."
Problem with timezone America/Ciudad de Mexico. Upgrading jstimezonedetect,Bug,Resolved,Sakai,software,"Problem with timezone America/Ciudad de Mexico. Should we always (GMT -6:00) and not (GMT -5:00)



!image-20240603-072826.png|width=920,height=30,alt=""image-20240603-072826.png""!"
Assignments: Classic Grader extension text is barely readable,Bug,Open,Sakai,software,"When using the Classic Grader in Assignments, the allow extension text is extremely hard to read, yellow text on a yellow background.

!image-20240602-170010.png|width=777,height=180,alt=""image-20240602-170010.png""!"
Assignments > Late status is not communicated to students or instructor,Bug,Open,Sakai,software,"*Update*: the label now appears on trunk, but not when the assignment was submitted or  when the instructor first checked the submissions after the due date. I did some other testing and came back to the assignments about 20 minutes later and thatâ€™s when I saw the labels (25x). I think the labels should be applied as soon as the due date has passed so students are aware that their submission is late and the instructor should see it when they grade.

22x: Iâ€™m still not seeing the late label for the students or instructor.

This was fixed before in [https://sakaiproject.atlassian.net/browse/SAK-47156|https://sakaiproject.atlassian.net/browse/SAK-47156|smart-link] but now we have a regression again. If an assignment is submitted late, neither the instructor or students see a â€œLateâ€ label."
"Remove the RSS, OPML, and ATOM portals from Sakai",Bug,Verified,Sakai,software,"A long time ago (2006) in a Galaxy far away (Ann Arbor), there was great optimism that interchange formats like RSS, OPML, and ATOM would allow us to knit together a dynamic post HTML semantic web.

[https://en.wikipedia.org/wiki/OMPL|https://en.wikipedia.org/wiki/OMPL|smart-link] 

[https://en.wikipedia.org/wiki/Atom_(web_standard)|https://en.wikipedia.org/wiki/Atom_(web_standard)|smart-link] 

Back then, Sakai wanted to be seen as leading the way to this beautiful semantic web future and so we added three specialized portals to allow folks to â€œsubscribeâ€ to their Sakai sites with a wide range of clients.  So we built these in anticipating of an emergent need that never emerged.  As a matter of fact they mostly broke over the years with no use and no testing. 

You can see this for yourself by logging in and then going to these urls:

[https://trunk-maria.nightly.sakaiproject.org/portal/atom/|https://trunk-maria.nightly.sakaiproject.org/portal/atom/]

[https://trunk-maria.nightly.sakaiproject.org/portal/rss/|https://trunk-maria.nightly.sakaiproject.org/portal/rss/]

[https://trunk-maria.nightly.sakaiproject.org/portal/opml/|https://trunk-maria.nightly.sakaiproject.org/portal/opml/]

Fascinating.

This Jira will delete these three portal variants for Sakai 25."
Bulk Membership: Add message that this tool cannot be used for official sites ,Feature Request,Open,Sakai,software,"The bulk membership tool needs a message at the top of the initial page that it cannot be used for official sites to manipulate provisioned users. Any actions taken on provisioned users (i.e. course management) will fail. This was discussed at the QA meeting. 

Official courses should have the membership options disabled on the screen.

Comment from [~accountid:70121:edd71bdf-212f-4544-92f7-2fc8fb688af3] in [https://sakaiproject.atlassian.net/browse/SAK-50149|https://sakaiproject.atlassian.net/browse/SAK-50149|smart-link] 

{quote}In an official site, the roster is externally maintained. Since users can't be removed from that site by Site Info -> Manage Participants, I would not expect it to be able to remove users through the Bulk Membership feature.{quote}"
Update Apache Net 3.11.0,Bug,Resolved,Sakai,software,"h3. Release 3.11.0 â€“ 2024-05-28

||Type||Changes||By||
|!fix.gif|width=20,height=20,alt=""Fix""!|Precompile regular expression in UnixFTPEntryParser.preParse(List<String>). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Guard against polynomial regular expression used on uncontrolled data in VMSVersioningFTPEntryParser.REGEX. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Guard against polynomial regular expression used on uncontrolled data in IMAPReply.TAGGED_RESPONSE. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Guard against polynomial regular expression used on uncontrolled data in IMAPReply.UNTAGGED_RESPONSE. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Cannot connect to FTP server with HTTP proxy. Fixes [NET-730|https://issues.apache.org/jira/browse/NET-730]. Thanks to Johannes Thalmair, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Base 64 Encoding with URL and Filename Safe Alphabet should not chunk per RFC 4648. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Deprecate org.apache.commons.net.util.Charsets.Charsets() for removal. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Deprecate org.apache.commons.net.util.TrustManagerUtils.TrustManagerUtils() for removal. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add protected getters to FTPSClient #204. Fixes [NET-726|https://issues.apache.org/jira/browse/NET-726]. Thanks to PJ Fanning, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add SubnetUtils.toString(). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add Maven property project.build.outputTimestamp for build reproducibility. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add FTP.DEFLATE_TRANSFER_MODE to support the ""deflate"" compression format in FTPClient.setFileTransferMode(int). Thanks to Georg Voss, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add org.apache.commons.net.SocketClient.checkOpenOutputStream(). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump commons-parent from 62 to 70 #238. Thanks to Dependabot, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump org.codehaus.mojo:exec-maven-plugin from 3.1.0 to 3.2.0, #221. Thanks to Dependabot.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump commons-lang3 from 3.13.0 to 3.14.0. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump commons-io from 2.15.0 to 2.16.1 #236, #240. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|"
Site Info: UX issues with click events in Tool Order,Bug,Open,Sakai,software,"Click events in the item drop down menu for stacked items in Tool Order frequently do not result in the intended action. Multiple clicks are needed. This is a problem in Sakai 23 and 25, but not in 22 and earlier. For more details, refer to the attached screencast, ToolOrder-ClickingUXProblem.mp4.

Note that this problem is not evident when using keystrokes to select a drop down menu item."
Lessons Checklist - item width and line breaks,Feature Request,Open,Sakai,software,"The Checklist item in the Lessons tool seems to have a set width of half the screen (on desktop) and there is no way to adjust how wide it appears on the page, even if you would like it to expand to display the full width of the content area. Rather than expanding to fit the length of the text, when there are items in the checklist that are longer than can fit in half of the screen, they break to more than one line and the items look very awkward since they break to the line below the checkbox itself. Likewise, if there are items that are very short, there is a lot of empty space on the right, since it doesnâ€™t shrink to fit the text. See image with examples below.

!checklist.png|width=91.66666666666667%,alt=""checklist.png""!

Ideally, the checkbox should automatically expand/shrink to best fit the text items included in it. And, if items must break to a second line, they should still keep the first line on the same row as the checkbox square. Obviously, if you place the checkbox into a column that is half width on the page, that will also limit the overall width of the checkbox and the items within it. However, it should not default to half page when placed in a full width section.  In addition, it would be nice if you had the option edit the item and specify the width of the checkbox manually, just in case the automatic sizing needs to be tweaked.

  "
Grader: UX issues when removing and revising comments,Bug,Closed,Sakai,software,"The appearance of Remove links for a comment (Feedback Comment or Private Note) added is not intuitive. They seem to be added if a comment is added but only after the grading panel is closed (saved or â€˜xâ€™ clicked) and then reopened. The appearance of the â€˜Removeâ€™ link would be more intuitive if it displayed anytime its corresponding comment displays.

More importantly, after adding a Feedback Comment or Private Note, its corresponding â€˜Removeâ€™ link when clicked should display a confirmation prompt before proceeding with removing the content, similar to the confirmation for removing a rubric evaluation. Clicking this link accidentally without a confirmation prompt would lead to the frustrating experience of losing text. *The lack of a confirmation modal is why Iâ€™ve marked this jira as Critical.*

Also, when the comment is removed, the â€œRemovedâ€ notice does not disappear when editing the comment.

Finally, if removing the comment by deleting all HTML via the Source view of the CKEditor without toggling back to the WYSIWYG view before clicking Done, the edit (removal) of the comment is not saved by clicking Done. (The removal of all content via the WYSIWYG view will currently save by clicking Done, as expected.) In terms of priority, I think the last of these issues is Minor (least important/consequential)."
Lessons: jquery.cluetip.css?version=ea20e348 net::ERR_ABORTED 404 (Not Found),Bug,Closed,Sakai,software,"Iâ€™m not seeing this on 23x (yet). When loading the Lessons page, the following console error displays:

{noformat}GET https://trunk-maria.nightly.sakaiproject.org/library/src/webapp/js/jquery/cluetip/1.2.10/css/jquery.cluetip.css?version=ea20e348 net::ERR_ABORTED 404 (Not Found)
{noformat}

Not sure if this is related to [https://sakaiproject.atlassian.net/browse/SAK-50100|https://sakaiproject.atlassian.net/browse/SAK-50100|smart-link] "
Assignments: Improve submission history with attachments and submission timestamp,Improvement,Open,Sakai,software,"In both Sakai Grader and Classic Grader, the Previous submissions shows only inline text. The timestamp provided for the prior inline submissions is the timestamp that the instructor feedback was saved. 

Classic Grader: 

!image-20240530-195010.png|width=644,height=479,alt=""image-20240530-195010.png""!

Sakai Grader:

!image-20240530-195051.png|width=361,height=451,alt=""image-20240530-195051.png""!

What isnâ€™t reflected in either of these histories is that in the 3:40:46 PM submission, my student added an attached file, then removed it when they resubmitted the most recent time. Also, the times listed for the prior submission is not the time the student submitted it, but the time the instructor graded it.

I believe for the history:

# The timestamp for the prior submission should be the submission timestamp. This would add the history of inline submission timestamps to Sakai Grader (See my comments on SAK-49836)  
# Any attached files should be listed or linked, so there is some record of the files if the student removed the first attached file(s) when they resubmitted. "
"Grader: In history, change ""Feedback Comments"" to ""Previous Submissions"" ",Bug,Verified,Sakai,software,"The History section in grader now has three headings - 

* Feedback Comments
* Previous Grades
* Instructor comments to previous submissions

The information below Feedback Comments is the studentâ€™s prior inline text submissions, not the instructorâ€™s feedback comments. This heading should be changed to reflect what it includes. "
Libsass support for arm64 (apple silicon),Bug,Resolved,Sakai,software,"Library wonâ€™t build on arch arm64 (apple silicon)

{{[ERROR] Failed to execute goal com.gitlab.haynes:libsass-maven-plugin:0.2.26:compile (default) on project library: Execution default of goal com.gitlab.haynes:libsass-maven-plugin:0.2.26:compile failed: An API incompatibility was encountered while executing com.gitlab.haynes:libsass-maven-plugin:0.2.26:compile: java.lang.UnsatisfiedLinkError: Can't load library: /var/folders/k9/66jt1wkn4b1b25qgw400_gdw0000gn/T/libjsass-2358364556327084222/libjsass.dylib}}"
DA returning two users if the user is internal and external,Bug,Closed,Sakai,software,User is internal and external (full record in sakai_user). DA searches for both but does not have a unique set.
Add coordinator node for ignite cluster info,Improvement,Resolved,Sakai,software,"Knowing the coordinator node in an ignite cluster can be helpful in some situations

{code:json}{
  ""IgniteNodeStatus"": ""CONNECTED"",
  ""IgniteCurrentNodeSize"": ""1"",
  ""IgniteClusterNodeList"": [
    ""id=bf2cf096-5d58-4f22-9df9-83388a490bc4, consistentId=sakai01, version=2.16.0#20231215-sha1:7bde6a42""
  ],
  ""IgniteInstanceName"": ""localhost"",
  ""IgniteClusterState"": ""ACTIVE"",
  ""IgniteConfiguredNodeSize"": ""1"",
  ""IgniteClusterId"": ""7f1252f1-4047-48a6-8c24-c0410a0cb904"",
  ""IgniteClusterTopologyVersion"": ""1"",
  ""IgniteCoordinatorNode"": ""bf2cf096-5d58-4f22-9df9-83388a490bc4""
}{code}"
Assignments: Rubrics are not published when pressing Release Grades,Bug,Open,Sakai,software,"When pressing Release Grades in the task list, in an assignment graded by rubric, the grade is published but the rubric remains in draft status, thus not visible to students."
Gradebook: Quick Entry console error Cannot read properties of null (reading 'removeAttribute'),Bug,Verified,Sakai,software,"This does not affect 23x. Clicking on Quick Entry and selecting a GB item displays the following console error. So far I have not noticed it causing an issue.

gradebook-quick-entry.js:54
 Uncaught
TypeError: Cannot read properties of null (reading 'removeAttribute')
    at enableUpdate (gradebook-quick-entry.js:54:48)
    at HTMLFormElement.<anonymous> (gradebook-quick-entry.js:62:13)
enableUpdate	@	gradebook-quick-entry.js:54
(anonymous)	@	gradebook-quick-entry.js:62

Iâ€™m seeing the following in the server logs:

{noformat}29-May-2024 19:47:09.053 WARN [http-nio-20313-exec-24] o.a.w.Localizer.getStringIgnoreSettings Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [BulkGradePanel [Component id = content]] - Resource key: quickentry.replacecomment

29-May-2024 19:47:09.053 WARN [http-nio-20313-exec-24] o.a.w.Localizer.getStringIgnoreSettings Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [BulkGradePanel [Component id = content]] - Resource key: quickentry.commentcaption

29-May-2024 19:50:03.448 WARN [http-nio-20313-exec-18] o.a.w.Localizer.getStringIgnoreSettings Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [BulkGradePanel [Component id = content]] - Resource key: quickentry.replacescore

29-May-2024 19:50:03.448 WARN [http-nio-20313-exec-18] o.a.w.Localizer.getStringIgnoreSettings Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [BulkGradePanel [Component id = content]] - Resource key: quickentry.scorecaption

{noformat}"
Gradebook: Custom Export has a small and a large X to close the modal,Bug,Closed,Sakai,software,"On 25x and 23x, when doing a custom export from the Gradebook, the modal looks a little funny because it has the small x and then a large X to close the modal. Compare to 22x which has only the small x.

It would look nicer if 25x and 23x lost the small x!

!image-20240529-234015.png|width=494,height=373,alt=""image-20240529-234015.png""!"
Upgrade Apache Ignite to 2.16.0,Improvement,Resolved,Sakai,software,"Upgrade Apache Ignite to 2.1.6.0

[https://cwiki.apache.org/confluence/display/IGNITE/Apache+Ignite+2.16|https://cwiki.apache.org/confluence/display/IGNITE/Apache+Ignite+2.16|smart-link] 

h2. WARNINGS

* Operations on atomic caches within transactions are finally forbidden. The system property IGNITE_ALLOW_ATOMIC_OPS_IN_TX has been removed.
* Removed CacheAtomicityMode#TRANSACTIONAL_SNAPSHOT cache mode.
* Mixed mode cache groups are now forbidden, but IGNITE_ALLOW_MIXED_CACHE_GROUPS system option may temporarily allow them.
* The ignite-ml and cassandra modules have been migrated to the Ignite extensions.

h2. Ignite

* Added ARM64 Docker images.
* Added CLIENT_CONNECTION_ATTRIBUTES system view.
* Added ability to configure metric exporter filter from Spring XML.
* Added cache dumps.
* Added extended debug logging of client connections.
* Added limit support to IndexQuery.
* Added logging of snapshot check procedure.
* Added metrics for operations on secondary indexes.
* Added performance statistics for IndexQuery.
* Added performance statistics info about query properties and processed rows count by query.
* Added size limit of the client session outbound message queue.
* Added topology snapshot info to services system view.
* Deprecated legacy authorization approach via Security Context.
* Deprecated rebalance related methods in the ClientCacheConfiguration.
* Fixed JavaNioAccess handling in JDK 14 and later.
* Fixed MappedFile.map for JDK 14 and newer.
* Fixed NPE during defragmentation OOM exception handling.
* Fixed NPE during transaction recovery.
* Fixed NPE on snapshot create operation for in-memory cluster.
* Fixed StoredCacheData removing when a node filter is set.
* Fixed WAL logging to an archived segment after node restart.
* Fixed an issue when IgniteLock cannot be acquired after release on JDK 17.
* Fixed an issue when TTL is not set for entries inserted with ""insert from select"" query.
* Fixed an issue when a transaction never finishes on timeout when deadlock detection is disabled.
* Fixed an issue where continuous queries caused excessive memory usage.
* Fixed assertion error in case of empty SQL query.
* Fixed assertion error on defragmentation.
* Fixed broken serialization of communication messages due to incorrect GridCacheQueryRequest class marshalling.
* Fixed continuous queries backup ack message sending for expired entries.
* Fixed deprecation of PartitionLossPolicy (READ_ONLY_ALL, READ_WRITE_ALL).
* Fixed doubled serialization of CQ event oldValue field for REMOVE/EXPIRY events.
* Fixed duplicate index error after CREATE INDEX IF NOT EXISTS on different tables.
* Fixed erroneous logging of failed index rebuild.
* Fixed exception message for transaction timeout before data lock acquired.
* Fixed failure on sqlOnHeapCache=enabled and more than one index used.
* Fixed histogram metric configuration restore on node restart.
* Fixed in-memory server node crashing by TcpIgniteClient.putAllConflict() if cache objects transformation applied.
* Fixed log message about sending and receiving partition file during snapshot restore.
* Fixed log message of snapshot create operation with the warning result.
* Fixed negative duration in the SQL query system view.
* Fixed node crash due to SecurityContext not found during discovery message processing.
* Fixed opencensus-exporter-trace-zipkin dependency scope.
* Fixed possibility to create two caches with the same schemas and index names.
* Fixed possible failures of cache operations when performed through a thin client with Partition Awareness enabled.
* Fixed server nodes crashing if the cache directory contains illegal chars.
* Fixed snapshot creation failing when check throws an exception.
* Fixed snapshot restore metrics is case of an error on prepare.
* Fixed snapshot restore rollback if start cache stage failed.
* Fixed startup on Java 21.
* Fixed the defragmentation can't be configured to use one thread issue.
* Fixed usage of sandbox to create CacheStore.
* Fixed usage of vulnerable init setting in H2 connection.
* Fixed writing post-handshake message in NIO server.
* Removed deprecated ""ssl.key.algorithm"" Ignite system property - ""ssl.KeyManagerFactory.algorithm"" is used instead.
* Removed the GridSslContextFactory from public API.
* Updated Snappy-java dependency version to 1.1.10.4.
* Updated Spring dependency version to 5.2.25.RELEASE.
* Updated guava dependency version to 32.1.2.
* Updated jetty dependency version to 9.4.53.v20231009.
* Updated postgresql dependency version to 42.6.0.
* Updated snappy dependency version to 1.1.10.4.
* Updated zookeeper dependency version to 3.8.3.
* Updated zstd dependency version to 1.5.5.

h2. SQL Calcite

* Added ENFORCE_JOIN_ORDER hint.
* Added FORCE_INDEX/NO_INDEX hints.
* Added events on query execution (EVT_CACHE_QUERY_OBJECT_READ, EVT_SQL_QUERY_EXECUTION).
* Added explicit commons-codec dependency.
* Added local flag support.
* Added long-runing queries and big result-set queries warnings.
* Added metrics for CalciteQueryExecutor thread pool.
* Added partition pruning.
* Added queries timeout support.
* Added sensitive information hiding when IGNITE_TO_STRING_INCLUDE_SENSITIVE property is set to false.
* Added support of setting partitions in SqlFieldsQuery.
* Fixed CREATE TABLE ... WITH affinity_key option validation.
* Fixed NPE on write query plan to performance statistics.
* Fixed SQL metrics (added parsing metrics for the Calcite-based engine, fixed execution metrics).
* Fixed failure on planning when cache size exceeds Integer.MAX_VALUE.
* Fixed list of reserved keywords.
* Fixed memory leak in MailboxRegistryImpl#remotes.
* Fixed performance statistics collection.
* Fixed placeholder values from ModifyNode.
* Fixed primary key inline size calculation.
* Fixed query leak on remote fragment initialization phase failure.
* Fixed the query freezes when partitions are set issue.
* Updated calcite dependency version to 1.34.0.

h2. Control utility

* Added JMX commands invoker.
* Added compact footer usage statistics to the idle_verify command.
* Added descriptions and values to the properties list command.
* Added node Consistent ID to the index validate command output.
* Added number of partitions processed by the index worker to the output of the index commands.
* Added support of SslContextFactory to CommandHandler (instead of GridSslBasicContextFactory).
* Added support of custom SSL factory.
* Added the cache create command.
* Added the multiple nodes argument to the 'indexes_force_rebuild' and 'schedule_indexes_rebuild' commands.
* Fixed connectable nodes list.
* Fixed control utility module location for slim and LGPL assemblies.
* Fixed idle_verify hash conflicts for expiring entries.
* Fixed result printing of performance statistics subcommands.
* Fixed the page size of cache scan command to meet the limit argument.

h2. Java thin client

* Added Service Awareness feature.
* Fixed Java thin client socket#open timeout to ClientConfiguration#timeout property.
* Fixed cache objects transformation in Java thin client.
* Fixed potential SocketChannel leak on failed connection.
* Removed artificial port range upper limit of 49151.

h2. Ignite .NET

* Fixed node crash due to OverflowException in Callbacks.ConsoleWrite.

h2. Ignite .NET thin client

* Added partition awareness support for types with affinity key."
Inability to copy RSS URLs using keyboard commands in the Announcements and Calendar tools.,Bug,Open,Sakai,software,"While keyboard testing, the RSS URL in the ""Announcements tool "" and generated link in the "" Calendar tool "", using the keyboard command ""Ctrl+C"" unable to copy these URLs as expected. Suggested feature request will be to add a new button to copy to clipboard functionality next to URL.

*Feature Request:*
To improve usability, please add a ""Copy"" button next to the URL in both the Announcements and Calendar tools. This will facilitate easy copying of the URLs without the need for cumbersome process to copy from keyboard.

Please refer the attachment for list of available icons in font awesome for copy to clipboard

*Expected Result:*
The URL should be copied to the clipboard using ""Ctrl+C"" and pasted using ""Ctrl+V"" into a new browser's address bar, allowing access upon pressing ""Enter"".

Â 

*Current Result:*
Unable to use the ""Ctrl+C / Ctrl+V"" keyboard commands to copy and paste the URL into the clipboard and a new browser.

Â 

*Additional Observations:*

* Attempted using Caret browsing (Fn+F7), which allowed highlighting and copying the link, but this is not a streamlined solution.
* A similar issue was observed in the Calendar tool when trying to copy generated links via the keyboard.

Â 


"
Rubric Criteria Summary accordians don't follow dark theme,Bug,Open,Sakai,software,"In the rubric statistics, the Criteria Summary does not follow dark mode. The accordians are white with light grey text. "
"SakaiPlus - Remove ""Single Tool Support""",Bug,Verified,Sakai,software,"SakaiPlus has been a feature of Sakai since the release of Sakai 23.  It was introduced in [https://sakaiproject.atlassian.net/browse/SAK-47852|https://sakaiproject.atlassian.net/browse/SAK-47852|smart-link].  There are two use cases to SakaiPlus.  The first use case is the â€œsakai.siteâ€ use case where an entire site is created and shown with full portal markup and navigation.   The second use case is the â€œsingle tool use caseâ€ where the parent LMS wants to include a tool like Conversations in an iframe inside the LMS.    The single tool use case has its own â€œportalâ€ URL at â€œ/plusâ€ and its own portal which is a reduced version of the portal with no site or tool navigation.

Since that time, a great deal of QA testing scripts have been developed and used.   For the â€œsakai.siteâ€ use case, the problems that were identified were fixed relatively easily.  But the â€œsingle tool caseâ€ encountered a lot of small bugs - particularly since the portal eliminated iframes, the tools just assume they are embedded in â€œ/portalâ€ and at times mess around with the markup or generate absolute urls.  Fixing these would have required digging into a lot of tool code and having if-then-else code to do one thing in the normal â€œ/portalâ€ markup and something completely different in the â€œ/plusâ€ portal.

Further, as we have exposed SakaiPlus to potential customers - there seems to be no real interest in the â€œsingle tool use caseâ€ and it turns out to be both simple and useful to tweak the â€œsakai.siteâ€ use case to feature one tool.  As a matter of fact, this is how Dr. Chuck uses it in his courses at the University of Michigan.  All tools except the Lessons tool are hidden from the students in the left navigation, but tools like Gradebook, Site Info and the Plus tool itself are very useful (and actually essential) for the instructor to configure, run and explore the Sakai environment.

Also, while it initially worked with enough cookie tweaks - it is difficult to maintain the Sakai session cookie inside of an iframe and likely to get more complex as browsers further crack down on trackers.

So with all of this I will be removing support for the â€œsingle toolâ€ use case for SakaiPlus for Sakai 25.  It is a bummer since 100â€™s of hours of developer work and QA efforts went into it - but it really havs no clear path forward toward a reliable implementation and with no real demand from the market - we are better served to improve the sakai.site and improve import/export/site copy - things that do make SakaiPlus more relevant in the market given what we have learned from potential adopters.

I have linked the JIRAs on the single tool that we identified - while the list seems short, at one point we just stopped QA testing because things broke so often.

Removing support for deep linking has a subtle side benefit when it comes to LTI Auto Provisioning.  When an endpoint supports both the deep link and resource link flows - it is often difficult to set up the messages section in the auto provision protocol.  By only supporting context launch, resource link launch and privacy launch (and not deep linking) it makes auto provisioning deterministic across platforms.

This patch also cleaned up and advanced the code for LTI Automatic Provisioning, handling the Context Launch and Site Navigation placement use case introduced in [https://sakaiproject.atlassian.net/browse/SAK-49540|https://sakaiproject.atlassian.net/browse/SAK-49540|smart-link]

Comments welcome."
GB: Double scrollbars at bottom of Gradebook are not user-friendly,Bug,Open,Sakai,software,"The double scrollbars at the bottom of the Gradebook are rather annoying if the instructor has a lot of work to do in the GB. Is there any way to reduce this to 1 scrollbar at the bottom? The only way I have found to get rid of both is to set the browser to maximize, which means the instructor cannot look at anything else while theyâ€™re grading."
Unable to add attachments when using onedrive integration,Bug,Open,Sakai,software,"{noformat}java.lang.ClassNotFoundException: org.apache.hc.core5.http2.HttpVersionPolicy


Caused by: java.lang.NoClassDefFoundError: org/apache/hc/core5/http2/HttpVersionPolicy
        at org.apache.hc.client5.http.config.TlsConfig$Builder.build(TlsConfig.java:211) ~[httpclient5-5.2.1.jar:5.2.1]
        at org.apache.hc.client5.http.config.TlsConfig.<clinit>(TlsConfig.java:47) ~[httpclient5-5.2.1.jar:5.2.1]
        at org.apache.hc.client5.http.impl.io.PoolingHttpClientConnectionManager.resolveTlsConfig(PoolingHttpClientConnectionManager.java:276) ~[httpclient5-5.2.1.jar:5.2.1]
        at org.apache.hc.client5.http.impl.io.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:441) ~[httpclient5-5.2.1.jar:5.2.1]
        at org.apache.hc.client5.http.impl.classic.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:162) ~[httpclient5-5.2.1.jar:5.2.1]
        at org.apache.hc.client5.http.impl.classic.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:172) ~[httpclient5-5.2.1.jar:5.2.1]
        at org.apache.hc.client5.http.impl.classic.ConnectExec.execute(ConnectExec.java:142) ~[httpclient5-5.2.1.jar:5.2.1]
        at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51) ~[httpclient5-5.2.1.jar:5.2.1]
        at org.apache.hc.client5.http.impl.classic.ProtocolExec.execute(ProtocolExec.java:192) ~[httpclient5-5.2.1.jar:5.2.1]
        at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51) ~[httpclient5-5.2.1.jar:5.2.1]
        at org.apache.hc.client5.http.impl.classic.HttpRequestRetryExec.execute(HttpRequestRetryExec.java:96) ~[httpclient5-5.2.1.jar:5.2.1]
        at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51) ~[httpclient5-5.2.1.jar:5.2.1]
        at org.apache.hc.client5.http.impl.classic.ContentCompressionExec.execute(ContentCompressionExec.java:152) ~[httpclient5-5.2.1.jar:5.2.1]
        at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51) ~[httpclient5-5.2.1.jar:5.2.1]
        at org.apache.hc.client5.http.impl.classic.RedirectExec.execute(RedirectExec.java:115) ~[httpclient5-5.2.1.jar:5.2.1]
        at org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51) ~[httpclient5-5.2.1.jar:5.2.1]
        at org.apache.hc.client5.http.impl.classic.InternalHttpClient.doExecute(InternalHttpClient.java:170) ~[httpclient5-5.2.1.jar:5.2.1]
        at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:123) ~[httpclient5-5.2.1.jar:5.2.1]
        at org.sakaiproject.onedrive.util.HTTPConnectionUtil.makePostCall(HTTPConnectionUtil.java:74) ~[?:?]
        at org.sakaiproject.onedrive.service.OneDriveServiceImpl.refreshToken(OneDriveServiceImpl.java:175) ~[?:?]
        at org.sakaiproject.onedrive.service.OneDriveServiceImpl.getDriveRootItems(OneDriveServiceImpl.java:225) ~[?:?]
        at org.sakaiproject.content.tool.FilePickerAction.buildSelectAttachmentContext(FilePickerAction.java:926) ~[?:?]
        at org.sakaiproject.content.tool.FilePickerAction.buildMainPanelContext(FilePickerAction.java:344) ~[?:?]
        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]
        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
        at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]
        at org.sakaiproject.cheftool.VelocityPortletPaneledAction.toolModeDispatch(VelocityPortletPaneledAction.java:409) ~[?:?]{noformat}"
Create site from template fails because of missing AcademicSession,Bug,Closed,Sakai,software,Creating a course site from a template has no AcademicSession. Regression from SAK-48061
"Remove mycalendar, sitemembers, sitedescription widgets from core",Bug,Resolved,Sakai,software,Three widgets that are part of core but not built. Does anyone use them?
Grader: Rubrics don't show comments until saved,Bug,Resolved,Sakai,software,"When using rubrics in Assignments (Grader and Classic), when an instructor enters comments for a criterion, there is no indication that there are comments until the grade is saved - the comments bubble remains non-filled. In Gradebook, the comments bubble is filled as soon as the comment window is closed. "
Feedback to students,Improvement,Resolved,Sakai,software,"Currently students get only a value on the individual questions.

There is currently no option where one does not want to show the answer, but indicate if the anwers of the student was correct or not.

For example, if a numeric question has 4 answers, and one is incorrect, the student does not know which one is incorrect. 

It would help, if the student get a correct tick (âœ“) or a incorrect cross (âœ˜) next to each answer as a feedback option.

This feedback is already available for the intructor side, but it seems not te be available for the student side."
File Upload: Limit File Types,Improvement,Open,Sakai,software,"At this stage one cannot limit the file types for Test and quizzes: File Upload

It would an advantage to add a option which file extention one would limit the files to.

One has to type in this by hand, as there are many file types.

For example if one ask for a PDF, the students tend to add also Zip files.

This causes that one has to Unzip the files by hand, and it causes a lot of extra effort.

Thank you very much for your effort."
CKEditor: Images/Videos do not show in CKeditor,Bug,Open,Sakai,software,"If you try to insert an image or an HTML5 video in the CKEditor (on any tool), the image/video does not render. The image will show nothing (or the alt text if inputted) and the video will be stuck loading. Issue only affects 25x. See attached screenshot."
Test and Quizzes: Timer setting not imported,Feature Request,Open,Sakai,software,When importing from a QTI XML the timer setting is ignored.
Test and Quizzes: Display point value setting not imported,Bug,Open,Sakai,software,When importing from a QTI XML the â€˜display point valueâ€™ setting is ignored.
Test and Quizzes: Clunky downloading page for exporting page in QTI,Bug,Open,Sakai,software,"File should open for download in the browser dialog box, instead opens a new link and original download page is stagnant which makes the UX confusing. 

NOTE: For other download options like â€˜markupâ€™ and â€˜content packagingâ€™ a browser dialog box opened - but it isnâ€™t visible due to limitations in the screen record feature in Windows in the attaached video."
Test and Quizzes: Error exporting question pool,Bug,Verified,Sakai,software,Question pool cannot be exported. Tried removing hotspot question from the question list - still did not work. Demo and server log in attachments.
Test and Quizzes: No check for empty markup text,Bug,Open,Sakai,software,No error message displayed even if user enters no markup text.
Gradebook: unify code for generating events,Improvement,Open,Sakai,software,"At the moment there are two different classes that generate the same type of Gradebook events:

* EventHelper (business/util) â†’ called from the business service
* GradingServiceImpl â†’ called from this own class

Most of them are similar, but besides the unnecessary duplication of code, the main reason for merging these is they provide a different gradebook identifier. One adds the uid and the other one the id. Apparently that divergence does not affect anything on the places where the events are processed, otherwise bugs would have been detected. Still this is something that might generate future problems and should be addressed.

In my opinion, the gradebook uid is the value that should be used when unified (see also S2U-26)."
Uploaded files are corrupted after mime detection,Bug,Verified,Sakai,software,"It appears that currently uploading any file is causing the first few characters to be removed. This results in broken binary files and text files missing the first few characters.

I believe this is from the changes around the tika detection in [https://sakaiproject.atlassian.net/browse/SAK-50105|https://sakaiproject.atlassian.net/browse/SAK-50105|smart-link] that arenâ€™t correctly resetting the file.

I confirmed that reverting this commit does fix these issues. "
Bulk Membership: Removal of users does not work in an official site,Bug,Resolved,Sakai,software,"Testing official sites with bulk membership ( [https://sakaiproject.atlassian.net/browse/S2U-43|https://sakaiproject.atlassian.net/browse/S2U-43|smart-link] )

In an official site, after the admin removes the users, they seem to disappear on refresh, but once you leave site info and then come back, the users are back also.

Deactivating users in an official site is also failing.

Manually-created sites are not affected - those users actually do get removed. "
Bulk Membership: Text updates for instructions,Feature Request,Open,Sakai,software,"Propose text changes to the different screens to make it more compact:

*Select action to apply:*

* *Current text:* The users written in the left text box, separated by lines, will have the selected action applied to them by clicking on the buttons that are below with respect to the list of sites that are in the right text box
* *Proposed text:* The user(s) will have the selected action applied in the site(s) listed.

!image-20240526-234700.png|width=933,height=527,alt=""image-20240526-234700.png""!

*Adding users - selecting roles:*

* *Current text:* Please select the role you want to apply to all the users for each site
* *Proposed text:* Select the role to apply to the user(s) for each site

!image-20240526-234842.png|width=933,height=330,alt=""image-20240526-234842.png""!

*Adding users - confirmation:*

It would be good if the role selected could also be added here since all users per site will have the same role, but with multiple sites, they may have a different role in another site.

* *Current text:* The following users on the left list will be added to all the sites contained in the right list
* *Proposed text:* The following user(s) will be added to the site(s) listed

!image-20240526-235144.png|width=50%,alt=""image-20240526-235144.png""!

*Removing users - confirmation: (* [https://sakaiproject.atlassian.net/browse/SAK-50143|https://sakaiproject.atlassian.net/browse/SAK-50143|smart-link] )

!image-20240526-235523.png|width=937,height=416,alt=""image-20240526-235523.png""!

*Deactivate users - confirmation: (* [https://sakaiproject.atlassian.net/browse/SAK-50144|https://sakaiproject.atlassian.net/browse/SAK-50144|smart-link] )

!image-20240526-235848.png|width=928,height=401,alt=""image-20240526-235848.png""!

*Activate users - confirmation: (*[https://sakaiproject.atlassian.net/browse/SAK-50145|https://sakaiproject.atlassian.net/browse/SAK-50145|smart-link] )

!image-20240527-000112.png|width=930,height=395,alt=""image-20240527-000112.png""!"
Blank alert message appearing in some file pickers,Bug,Open,Sakai,software,"In some file pickers thereâ€™s an empty box that just says â€œAlertâ€. This is because the alertMessage was set to a blank string in [https://sakaiproject.atlassian.net/browse/SAK-47869|https://sakaiproject.atlassian.net/browse/SAK-47869|smart-link]. I believe that either that SAK should be reverted since it seems like itâ€™s failing QA or this needs a fix to change this default to be null rather than an empty string. 

Assigning this to [~accountid:557058:d4bf1967-6188-4b29-bf4a-95cf874b4a08] to make a decision on that.

The fix for this specifically is just this but this is not necessary if the other is reverted. 

{noformat}diff --git a/content/content-tool/tool/src/java/org/sakaiproject/content/tool/FilePickerAction.java b/content/content-tool/tool/src/java/org/sakaiproject/content/tool/FilePickerAction.java
index da18920cd52..7235759847a 100755
--- a/content/content-tool/tool/src/java/org/sakaiproject/content/tool/FilePickerAction.java
+++ b/content/content-tool/tool/src/java/org/sakaiproject/content/tool/FilePickerAction.java
@@ -581,7 +581,7 @@ public class FilePickerAction extends PagedResourceHelperAction

                ToolSession toolSession = sessionManager.getCurrentToolSession();
                context.put(""maxUploadFileSize"", toolSession.getAttribute(STATE_FILE_UPLOAD_MAX_SIZE));
-               context.put(""alertMessage"", """");
+               context.put(""alertMessage"", null);
                context.put(""googledriveJson"", toolSession.getAttribute(STATE_GOOGLEDRIVE_JSON));
                toolSession.removeAttribute(STATE_GOOGLEDRIVE_JSON); {noformat}



!image-20240526-185451.png|width=813,height=226,alt=""image-20240526-185451.png""!"
Test and Quizzes: Page to add markup does not follow dark mode theme,Bug,Open,Sakai,software,Description field in form to create quiz via markup does not follow dark mode theme.
Bulk Membership: Activate rewording for the actions and confirmation pages,Feature Request,Open,Sakai,software,"Testing of the new feature [https://sakaiproject.atlassian.net/browse/S2U-43|https://sakaiproject.atlassian.net/browse/S2U-43|smart-link]

When users are (re)activated in a site: 

* change the Activate text for the action to Reactivate since these users are expected to be inactive in the site currently
* the message displayed needs to be reworded

*Confirmation page:*

* *Current text*: The following users on the left list will be activated to all the sites contained in the right list
* *Proposed text*: The following user(s) will be reactivated in the following site(s)

*Summary page:*

Summary of <userID>:

* *Current text*: Has been activated from the site<siteID>
* *Proposed text*: Has been reactivated in <siteID>

!image-20240525-145000.png|width=798,height=347,alt=""image-20240525-145000.png""!

!image-20240525-145858.png|width=50%,alt=""image-20240525-145858.png""!

!image-20240525-145911.png|width=300,height=80,alt=""image-20240525-145911.png""!"
Bulk Membership: Deactivate users confirmation screen rewording of message displayed,Feature Request,Open,Sakai,software,"Testing of the new feature [https://sakaiproject.atlassian.net/browse/S2U-43|https://sakaiproject.atlassian.net/browse/S2U-43|smart-link]

When users are deactivated in a site, the message displayed needs to be reworded.

Current text: The following users on the left list will be deactivated to all the sites contained in the right list

Proposed text: The following user(s) will be deactivated in the following site(s)

!image-20240525-143503.png|width=703,height=267,alt=""image-20240525-143503.png""!"
Bulk Membership: Remove users confirmation screen rewording of message displayed,Feature Request,Open,Sakai,software,"Testing of the new feature [https://sakaiproject.atlassian.net/browse/S2U-43|https://sakaiproject.atlassian.net/browse/S2U-43|smart-link] 

When users are removed from a site, the message displayed needs to be reworded.

Current text: The following users on the left list will be removed to all the sites contained in the right list

Proposed text: The following user(s) will be removed from the following site(s)

!image-20240525-141821.png|width=723,height=269,alt=""image-20240525-141821.png""!"
Bulk Membership: Modify the results screen to take less clicks to see results,Feature Request,Open,Sakai,software,"From testing the new feature [https://sakaiproject.atlassian.net/browse/S2U-43|https://sakaiproject.atlassian.net/browse/S2U-43|smart-link] 

Since an action selected on the first screen will apply to all users listed in the users text area and will also apply to all sites listed in the sites text area, the results page could use less clicks to see the summaries.

All summaries are collapsed to start with and they all contain the same information with only the username being different in each summary.

Propose the following changes to this screen:

* Summary of site(s) which had users were added (wording to change depending on action taken)
** display the list of site(s) affected
** under each site display the list of users with a subheading of â€œUsers added in the <role> roleâ€ - only one role can be added per site so would apply to all users for that site
** the action â€œaddedâ€ would change depending on the action actually selected

!image-20240525-133700.png|width=815,height=341,alt=""image-20240525-133700.png""!

!image-20240525-133753.png|width=821,height=272,alt=""image-20240525-133753.png""!

Wording changes are needed for the other actions' summary pages."
Test and Quizzes: Multiple timers are hard to keep up with on a mobile phone,Bug,Open,Sakai,software,"Multiple timers make it hard to keep up with while taking a quiz on a mobile phone, and result in an inelegant UX."
Upgrade Sitemembers and Sitedescription widgets to Wicket 9,Bug,Resolved,Sakai,software,Should upgrade to Wicket 9
Overview: when using View As... the user is then taken to the first tool listed in the nav instead of the Overview page,Bug,Open,Sakai,software,"Currently 23x does not have the View As dropdown on the Overview page (see [https://sakaiproject.atlassian.net/browse/SAK-49731|https://sakaiproject.atlassian.net/browse/SAK-49731|smart-link] ) but I imagine once that Jira is merged, 23x will be affected also.

If the instructor sets a different page as the first page in the navigation, and then goes to Overview and selects View Asâ€¦, instead of the Overview page displaying in the student/TA view, the first tool listed in the navigation is displayed. 

The expected behavior is that the instructor will see the page theyâ€™re currently on when they select View Asâ€¦"
Portal: replacing default profile picture fails with console error,Bug,Open,Sakai,software,"Steps to reproduce:

# Set property profile2.avatar.initials.enabled to true (default = true)
# log in and edit profile image (profile image must not be already set!)
# Click browse, choose image and click open
# image canâ€™t be loaded â†’ browser error message: this. cropper is undefined

!image-20240523-150038.png|width=91.66666666666666%,alt=""image-20240523-150038.png""!

Note: The problem seems to not occur if profile2.avatar.initials.enabled=false but a profile picture is already set!







The problem is probably located in file SakaiPictureChanger.js:

!image-20240523-145956.png|width=791,height=431,alt=""image-20240523-145956.png""!

In the method _loadExisting() profile image details are fetched (/direct/profile-image/details) and if isDefault == false this._attachCropper(); is called. Setting profile2.avatar.initials.enabled=false results in isDefault == true, setting property to true results in isDefault == false."
Portal: Default value of themes property autoDetectDark does not match with documentation,Bug,Open,Sakai,software,"Steps to reproduce:

# Set Theme in browser to Dark
# Do not set {{portal.themes.autoDetectDark}} 
default.sakai.properties â†’ {{DEFAULT: false}}
# log in with user / use become user function â†’ ! user must log in for the first time (after transition to light/dark themes)
# Theme is set according to the browser setting



The problem is probably located in class {{SkinnableCharonPortal}}. There the default value for the property 
{{portal.themes.autoDetectDark}} is set to true

!image-20240523-133709.png|width=100%,alt=""image-20240523-133709.png""!"
Group submissions disabled when editing an assignment,Bug,Open,Sakai,software,"When an asssignment is saved with site submission and itâ€™s edited again, the group submission is disabled and canâ€™t be enabled."
Portal: Source map error,Bug,Open,Sakai,software,"Warning in Firefox browser console:

Source map error: request failed with status 404 Resource URL: [https://trunk-maria.nightly.sakaiproject.org/library/webjars/momentjs/2.29.1/min/moment-with-locales.min.js?version=ae752555|https://trunk-maria.nightly.sakaiproject.org/library/webjars/momentjs/2.29.1/min/moment-with-locales.min.js?version=ae752555] Source Map URL: moment-with-locales.min.js.map

Source map error: map is undefined Resource URL: [https://trunk-maria.nightly.sakaiproject.org/library/webjars/momentjs/2.29.1/min/moment-with-locales.min.js?version=ae752555|https://trunk-maria.nightly.sakaiproject.org/library/webjars/momentjs/2.29.1/min/moment-with-locales.min.js?version=ae752555] Source Map URL: moment-with-locales.min.js.map

Learn more link: [https://firefox-source-docs.mozilla.org/devtools-user/debugger/source_map_errors/?utm_source=mozilla&utm_medium=firefox-console-errors&utm_campaign=default|https://firefox-source-docs.mozilla.org/devtools-user/debugger/source_map_errors/?utm_source=mozilla&utm_medium=firefox-console-errors&utm_campaign=default|smart-link] "
Portal: -ms-high-constrast is in the process of being deprecated,Bug,Open,Sakai,software,"Iâ€™m on Win10 and in Edge the following warnings display:

[Deprecation] -ms-high-constrast is in the process of being deprecated. Please see [https://blogs.windows.com/msedgedev/2020/09/17/styling-for-windows-high-contrast-with-new-standards-for-forced-colors/|https://blogs.windows.com/msedgedev/2020/09/17/styling-for-windows-high-contrast-with-new-standards-for-forced-colors/|smart-link]  for tips on updating to the new Forced Colors Mode standard.

This is on every page I have visited so far."
Test and Quizzes: Auto save and timer hangs on occasion,Bug,Open,Sakai,software,"Timer and autosave behaves oddly total quiz time = sum of individual quiz times. Sometimes there is a â€˜work is submittingâ€™ page which is stuck for a lot of minutes (refer to screenshot), or just page hangs (refer to video)."
Add redirect to /portal in the new ROOT webapp,Bug,Resolved,Sakai,software,"Since the beginning of Sakai, we have left the ROOT webapp alone.  Now in Sakai 23.2 and later in order to install our service worker at the top of the domain across all webapps, the sakai build deploys the ROOT webapp.  This new webapp now includes the serviceworker and a favicon.  It should have an index.html that redirects to /portal as well.  Now a lot of schools have come up with a way to disregard the ROOT web app using Apache, NGINX, or some other proxy.  If on the other hand you let â€œ/â€ go directly to the new ROOT webapp, â€œ/â€ gives a 404 not found.  A simple fix is to add a an index.html to avoid the 404 in the out-of-the-box straight deploy to Tomcat port 8080 for developers.  More complex scenarios can work themselves out - but the simple case should work."
Test and Quizzes: Quiz Timer is allowed to be less than individual question,Bug,Open,Sakai,software,Quiz is allowed to be published without notifying the user that the total quiz time is less than the sum of the individual question times.
Test and Quizzes: Dark mode timer isnâ€™t clearly visible,Bug,Open,Sakai,software,Dark mode timer for overall quiz is not visible clearly. Refer to screenshot.
Commons: Empty content posts with spaces / newline are created,Bug,Open,Sakai,software,"Common tab:

Empty text is being posted without any content. Spaces and enters should be trimmed if no other content is present. If no other content is available, please refer to the attachment for more information."
Commons: Not able to create new post using High Priority,Bug,Resolved,Sakai,software,"In the common tab, creating a new post with high priority is not possible. A prompt appears and says â€œFailed to store post. Status: timeout. Error: timeoutâ€. But when we hard refresh the page, we can view high priority posts. Refer to the attached video to reproduce the issue."
SiteStats Wicket 9 Upgrade,Bug,Open,Sakai,software,Upgrade to Wicket 9 from Wicket 6
Lessons: Up arrow covers Next button,Bug,Open,Sakai,software,"In Lessons, a â€œJump to Topâ€ arrow appears if thereâ€™s enough content to scroll down. However, it covers up much of the Next button, making page navigation tricky. 

In 22.x, this occurs slightly, but the arrow only appears when the user hovers between the Next button and the Powered by Sakai icon. Users can click the Next button easily to move to the next subpage.

On 23.x and Trunk, the arrow appears as the user scrolls down the page, and at the lowest point, covers most of the Next button. 

Can the arrow be shifted left so it appears beside the Next button? Or additional padding added below the Next/Previous buttons so the arrow is below them, rather than overlapping?"
"Tests & Quizzes: Switching a part from ""Random draw from question pool"" to ""Questions authored one-by-one"" adds questions to the part",Bug,Open,Sakai,software,"This issue was mentioned in  step 4 of [https://sakaiproject.atlassian.net/browse/S2U-20|https://sakaiproject.atlassian.net/browse/S2U-20|smart-link], but is not related to that feature.

If you have a test, and change the settings for a part from â€œRandom draw from question poolâ€ to â€œQuestions authored one-by-oneâ€, the questions from that pool are added to that part. This is an issue since you canâ€™t change the part back to â€œRandom draw from question poolâ€, since the questions are in-use now. See attached video."
"Tests & Quizzes: Exporting and then importing a test removes the ""Random draw from multiple question pools"" selection",Bug,Open,Sakai,software,"If you export a test with the ""Random draw from multiple question pools"" selected for one of the parts, and then import the file, the part has changed from ""Random draw from multiple question pools"" to ""Random draw from question pool"". See attached video for explanation/steps."
Show archive download zips in reverse date order,Task,Closed,Sakai,software,"To make it simpler to download the zip file just created, show the Archive zips in reverse date order.

It would be preferable to make the tool show a sortable table but this is a simple change which improves usability."
Consistently use @Deprecated annotation,Bug,Open,Sakai,software,"Lots of warnings in the build logs:

{noformat}Warning: RNING] /home/runner/work/sakai/sakai/citations/citations-api/api/src/java/org/sakaiproject/citation/api/Citation.java:[73,16] [dep-ann] deprecated item is not annotated with @Deprecated
Warning: RNING] /home/runner/work/sakai/sakai/citations/citations-api/api/src/java/org/sakaiproject/citation/api/Citation.java:[245,16] [dep-ann] deprecated item is not annotated with @Deprecated
Warning: RNING] /home/runner/work/sakai/sakai/citations/citations-api/api/src/java/org/sakaiproject/citation/cover/ConfigurationService.java:[32,7] [dep-ann] deprecated item is not annotated with @Deprecated
Warning: RNING] /home/runner/work/sakai/sakai/citations/citations-api/api/src/java/org/sakaiproject/citation/cover/CitationService.java:[32,7] [dep-ann] deprecated item is not annotated with @Deprecated
Warning: RNING] /home/runner/work/sakai/sakai/citations/citations-api/api/src/java/org/sakaiproject/citation/cover/SearchManager.java:[123,23] [dep-ann] deprecated item is not annotated with @Deprecated
Warning: RNING] /home/runner/work/sakai/sakai/citations/citations-api/api/src/java/org/sakaiproject/citation/cover/SearchManager.java:[25,7] [dep-ann] deprecated item is not annotated with @Deprecated{noformat}

_Using the @Deprecated annotation to deprecate a class, method, or field ensures that all compilers will issue warnings when code uses that program element. In contrast, there is no guarantee that all compilers will always issue warnings based on the @deprecated Javadoc tag, though the Sun compilers currently do so._"
Wiki: Allow instructors to see manually-created sections in the section/group drop-down,Feature Request,Open,Sakai,software,"See [https://sakaiproject.atlassian.net/browse/S2U-39|https://sakaiproject.atlassian.net/browse/S2U-39|smart-link] 

If an instructor creates manual sections, those sections are not listed in the drop-down. Since there is no option to add an instructor to a manually-created section, they are unable to assign a Wiki page to a manually-created section. Instructors should be able to see all manually-created sections and all groups ( [https://sakaiproject.atlassian.net/browse/SAK-50117|https://sakaiproject.atlassian.net/browse/SAK-50117|smart-link] ) in their site even if they have not been added to those sections/groups. "
Wiki: Allow instructors to see all groups even if they're not in the group,Feature Request,Open,Sakai,software,"See [https://sakaiproject.atlassian.net/browse/S2U-39|https://sakaiproject.atlassian.net/browse/S2U-39|smart-link] and [https://sakaiproject.atlassian.net/browse/SAK-50088|https://sakaiproject.atlassian.net/browse/SAK-50088|smart-link] 

In both an official site and a manually-created site, the instructor does not have any groups listed when trying to assign the Wiki page to groups if the instructor is not part of that group.

Instructors shouldnâ€™t need to be part of a group - they should be able to see all groups in their site."
User's Home Dashboard: Display a list of terms and sites within terms to allow users to choose for which sites they would like to see data,Feature Request,Open,Sakai,software,"Currently, the Grades widget only pulls information for pinned sites, but the other widgets pull everything for the user. [~accountid:70121:edd71bdf-212f-4544-92f7-2fc8fb688af3] and [~accountid:557058:89b0bd66-0f67-42a4-b388-c7dbb7ceaa2d] had some suggestions on what would make this better for both the student and instructor.

* Letting the user choose the term and/or sites to display in the Dashboard is a better way to go (rather than only showing pinned)
* A multi-select option to let the user choose which terms are displayed in the Dashboard widgets
* An option to drill down within a term and select by individual site as well, and let the user choose the term and/or sites they want to see

Wilma suggested: Maybe something similar to the view selection in Gradebook where you can select categories and/or items

!image-20240517-230216.png|width=289,height=447,alt=""image-20240517-230216.png""!

Christinaâ€™s comment on the ability to allow users to choose which terms they see vs only displaying pinned sites data: students who accidentally unpin a site (they do it all the time) don't lose the Discussions/Messages count, grades, and other info for that site. They usually think it 'disappeared' so having it removed from those widgets would make them more convinced that they were booted from the class."
Edge Push Notifications enabling not working as expected,Bug,Open,Sakai,software,"Found the behavior is different in Edge when testing [https://sakaiproject.atlassian.net/browse/SAK-50050|https://sakaiproject.atlassian.net/browse/SAK-50050|smart-link] and [https://sakaiproject.atlassian.net/browse/SAK-49287|https://sakaiproject.atlassian.net/browse/SAK-49287|smart-link] 

Edge has 3 different settings for notifications:



!image-20240517-223137.png|width=339,height=138,alt=""image-20240517-223137.png""!

* Block: Bullhorns behaves as expected, when the user clicks to enable a message is displayed that permissions have been set to block
* Ask: this is what does not work as expected. The user clicks Enable and the message displays with the Accept Notifications, but clicking the button to Accept Notifications does not seem to do anything. If you watch the browser carefully, though, you see a bell with a strikethrough appear in the address bar. Clicking that bell then gives the user the option to Allow notifications

!image-20240517-223552.png|width=341,height=285,alt=""image-20240517-223552.png""!

In my opinion, if this behavior canâ€™t be fixed to work like the other browsers, there needs to be extra information in the help files for Edge. [~accountid:557058:89b0bd66-0f67-42a4-b388-c7dbb7ceaa2d] [~accountid:70121:edd71bdf-212f-4544-92f7-2fc8fb688af3] what do you think?"
Roster: Photo pop-up displayed on photo grid do not automatically close when clicking off the card or clicking another card,Bug,Open,Sakai,software,Description: Photo cards do not hide when the mouse is clicked outside of the photo card - or when a new card is clicked.
Admin: Importing multiple users via CSV fails,Bug,Resolved,Sakai,software,"Importing a CSV creates columns in the wrong order - hence users arenâ€™t created. Refer to attachments for demo, sample CSV used, and the server log after file was imported and â€˜continueâ€™ was pressed. 

Currently only faced issue in trunk, and recently since 1-2 days ago. "
Rubrics: â€œEditâ€ and â€œRemoveâ€ options are still using generic â€œnew Rubricâ€ reference when edit Rubric page first loads,Bug,Resolved,Sakai,software,"While testing SAK-49934 I observed a minor glitch, where the edit â€œRubricâ€ and â€œRemoveâ€ Rubric options are still referencing the generic â€œnew Rubricâ€ name when the various options to edit the Rubric are first being displayed.

Â 

Â After selecting the â€œAdd Rubricâ€ option, able to use the â€œAdd Rubric, New Rubricâ€ dialogue that pops up to name the new Rubric, before tabbing to the â€œSaveâ€ button and pressing enterâ€¦

Â 

When the page refreshes, and the various options for editing the new Rubric are displayed, able to navigate through the different edit options for Rubric, Criterion, and Ratingsâ€¦

Â 

This is what JAWS announces as you down arrow through that section of the edit Rubric page:

Â 

â€œLink, Name

Link, Origin

Link, Author

Link, Modified

Actions

Button expanded

(name of new Rubric)

Edit Rubric, new Rubric button collapsed

(name of Course Site)

(Instructorâ€™s name)

(creation date)

Save as draft button

Switch to weighted grading button

Make public (name of new Rubric) button

Copy (name of new Rubric) button

Remove, new Rubric button collapsed

Export (name of new Rubric) button

Â 

Note: The â€œEditâ€ and â€œRemoveâ€ options are still using the generic â€œnew Rubricâ€ reference when the edit Rubric page first loads, while the rest of the options have inserted the actual name of the Rubric. However, as soon as you refresh the page, these get updated and display the name of the new Rubric (see attached demo video for more context)"
Rubricsâ€ â€œEditâ€ and â€œRemoveâ€ options still using the generic â€œnew Rubricâ€ reference when edit Rubric page first loads,Bug,Open,Sakai,software,"While testing SAK-49934 I observed a minor glitch, where the edit â€œRubricâ€ and â€œRemoveâ€ Rubric options are still referencing the generic â€œnew Rubricâ€ name when the edit Rubric options are first displayed.

Â 

After selecting the â€œAdd Rubricâ€ option, then using the â€œAdd Rubric, New Rubricâ€ dialogue to name the new Rubric and tab to the â€œSaveâ€ button and pressing enterâ€¦

Â 

When the page refreshes, and the various edit options for the new Rubric are first displayed, here is what JAWS announces as you begin to arrow through the different edit options:

Â 

â€œLink, Name

Link, Origin

Link, Author

Link, Modified

Actions

Button expanded

(name of new Rubric)

Edit Rubric, new Rubric button collapsed

(name of Course Site)

(Instructorâ€™s name)

(creation date)

Save as draft button

Switch to weighted grading button

Make public (name of new Rubric) button

Copy (name of new Rubric) button

Remove, new Rubric button collapsed

Export (name of new Rubric) buttonâ€

Â 

Note: the â€œEditâ€ and â€œRemoveâ€ options are still using the generic â€œnew Rubricâ€ reference â€“ all other options have inserted the actual name of the Rubric. However, as soon as you refresh the page, these get updated and display the name of the new Rubric (refer to the attached demo video)"
Site Info: Date Manager UX issues,Bug,Closed,Sakai,software,"Vis-a-vis Sakai 22 and earlier, the accordions in Site Info > Date Manager in Sakai 23 & 25 are missing the intended arrows to the left of the tool title signifying the collapsed/expanded state. Furthermore, the clickable area for collapsing or expanding the accordion has been limited to clicking on the tool title."
User Dashboard: Discussions widget should show a site if Discussions or Messages tools present,Bug,Open,Sakai,software,"The Discussions widget shows new posts in Discussions and Messages, but a site is only listed in the widget if the Discussions tool is present. If the Discussions tool isnâ€™t there but Messages is, the widget should still list the site since seeing unread messages is still very useful."
User Dashboard: Customize number of sites displayed in Messages widget,Feature Request,Open,Sakai,software,"It looks like the number of sites listed in the user Dashboard Discussions widget is 5. If users have more than 5 classes, they canâ€™t easily see their new messages and discussions. Can there be an option to expand that number, even if it stretches the page for the user? Perhaps in the Options for the widget?"
User Dashboard: Limit by Term,Feature Request,Resolved,Sakai,software,"As we upgraded to 23 this week, we had a large number of instructors find the Discussions widget on the Dashboard unusable because of the sheer number of classes (one instructor had 22 pages of sites listed in the widget).  

Can there be a way to limit the Discussion and Tasks widgets by term? Perhaps a checklist of terms in the Edit Dashboard page? "
"Site Archive: Pagination needed, search option, and sorting on the Download Archives page",Feature Request,Open,Sakai,software,"I was trying to verify [https://sakaiproject.atlassian.net/browse/SAK-48939|https://sakaiproject.atlassian.net/browse/SAK-48939|smart-link] on trunk, but the Download Archives page is filled with old archives, thereâ€™s no pagination, no search and no sort, so Iâ€™m unable to access the zip created from my site."
Kernel tests not running if maven auto detects junit5 on the classpath,Bug,Resolved,Sakai,software,"Kernel tests are currently not running

Maven performs auto detection of junit using dependency analysis:

* *JUnit 5 (Jupiter):* If the {{junit-jupiter-engine}} dependency is found in your project, Surefire will automatically use the {{JUnitPlatformProvider}} to execute JUnit 5 tests.
* *JUnit 4:* If the {{junit-jupiter-engine}} is not present, but {{junit:junit}} is, Surefire will use the {{JUnit4Provider}} to run JUnit 4 tests.
* *Both JUnit 4 and JUnit 5:* If both dependencies are present, the {{JUnitPlatformProvider}} will be used, and it can run both JUnit 4 and JUnit 5 tests if the {{junit-vintage-engine}} dependency is also included."
"Change labeling and appearance of the ""test"" notifications option for push notifications",Feature Request,Open,Sakai,software,"At the T&L/UX call today (5/15/2024) we looked at some of the latest updates to the push notifications options in Sakai. The addition of a â€œtestâ€ notification option was based on discussion at the last T&L/UX call. However, while the group liked the new feature to send a test notification, we thought that the apearance of the Test button was too pronounced. Also, the label of â€œTestâ€ could easily be confused with a notification from Tests & Quizzes. 

Below are images of the current UI: 

!send-test-notifications1-current.png|width=352,height=347,alt=""send-test-notifications1-current.png""!

!send-test-notifications2-current.png|width=352,height=369,alt=""send-test-notifications2-current.png""!

I propose that the â€œtestâ€ option be changed to a text link (instead of a button). Also, I propose that the label be changed to â€œNotificationâ€ (rather than Test) so that it is clearly distinct from notifications coming from the Tests & Quizzes tool.

See images of the proposed changes below.

!send-test-notifications1-proposed.png|width=354,height=335,alt=""send-test-notifications1-proposed.png""!

!send-test-notifications2-proposed.png|width=354,height=362,alt=""send-test-notifications2-proposed.png""!"
"""Launch"" text is hardcoded on LTI",Bug,Open,Sakai,software,"Launch text is hardcoded

[https://github.com/sakaiproject/sakai/blob/master/basiclti/basiclti-portlet/src/java/org/sakaiproject/portlets/IMSBLTIPortlet.java#L223|https://github.com/sakaiproject/sakai/blob/master/basiclti/basiclti-portlet/src/java/org/sakaiproject/portlets/IMSBLTIPortlet.java#L223|smart-link] "
Roster: Print View is kept,Bug,Open,Sakai,software,"This is not easy to spot by a user looking at it (Iâ€™m not sure which should be different on Print view). But if you click on the Print view on roster, the list is modified and it never goes back to the original version.

You can see it on SAK-50101, and the result is the html shows <img instead of <div

Maybe it might be good to link the rendering with the blocking of the Print button"
Roster: Photo Grid is broken,Bug,Resolved,Sakai,software,"Photo grid view on roster is displaying names in a vertical way.



!image-20240515-095320.png|width=1634,height=835,alt=""image-20240515-095320.png""!



This seems to be fixed on 23, so if anybody knows when was this fixed please let me know."
Lessons: import from another site console error wait.gif 404 (Not Found),Bug,Closed,Sakai,software,"I was trying to verify several import Jiras on 23x and noticed a console error in Lessons after the import and the page did not look right. While I was looking in Jira to see if the error had been reported and working on reproducing in trunk, at some point, the data for Lessons did show up.

GET [https://qa23-maria.nightly.sakaiproject.org/lessonbuilder-tool/css/images/wait.gif|https://qa23-maria.nightly.sakaiproject.org/lessonbuilder-tool/css/images/wait.gif] 404 (Not Found)"
Lessons: Uncaught ReferenceError: SPNR is not defined,Bug,Closed,Sakai,software,"Both 25x and 23x are affected. Actions in Lessons seem to cause the  following console error on submit. This seems to be the same issue as in [https://sakaiproject.atlassian.net/browse/SAK-49354|https://sakaiproject.atlassian.net/browse/SAK-49354|smart-link] and [https://sakaiproject.atlassian.net/browse/SAK-50075|https://sakaiproject.atlassian.net/browse/SAK-50075|smart-link] 


{noformat}show-page.js?version=baea36e1:2988 
 Uncaught ReferenceError: SPNR is not defined
    at checkSubpageForm (show-page.js:2988:5)
    at HTMLButtonElement.onclick (ShowPage:1574:281)
checkSubpageForm	@	show-page.js?version=baea36e1:2988
onclick	@	ShowPage?sakai.tool.â€¦c-ad7ea884db48:1574
{noformat}

Saw this when creating a subpage and when creating a question"
Cannot add new Lessons items directly above the Comments item on a page,Bug,Open,Sakai,software,"If you have the Comments Lessons item on a page, and you use the + icon next the item to try to add another item to the page directly above the Comments, it does not add the item in the expected location. Instead, it adds the item at the very bottom of the page. While it is possible to reorder the page and move the new item to the correct location, the user should not have to take this extra step if they have added it using the + icon in a specific location. Other Lessons items and links do allow you to add the new item directly above as expected.

!Comments Tool.mp4|width=1920,height=1040,alt=""Comments Tool.mp4""!"
WebApi: init method of Dashboardcontroller fails if certain sakai properties are set,Bug,Resolved,Sakai,software,"Steps to reproduce:

# uncomment/set one or more of the following sakai properties: 
## _dashboard.home.widgets_
## _dashboard.course.widgets_
## _dashboard.course.widget.layout1_
## _dashboard.course.widget.layout2_
## _dashboard.course.widget.layout3_

# start/restart sakai
# startup fails with error message:
{{ContextLoader [ERROR] Context initialization failed }}
{{org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dashboardController': Invocation of init method failed; nested exception is java.lang.UnsupportedOperationException: remove}}



The issue is probably located in the init() method of class {{DashboardController}}.java. 

!image-20240514-142416.png|width=100%,alt=""image-20240514-142416.png""!

The method serverConfigurationService.getStringList(â€¦) returns a List, which is created using {{Arrays.asList}} method. You cannot add or remove elements from the list returned by {{Arrays.asList()}}.
This change {{new ArrayList<>(serverConfigurationService.getStringList(""dashboard.course.widgets"", null));}} should fix the error."
Grades widget for student: grades not displaying for tools external to the GB,Bug,Verified,Sakai,software,"Tools that send grades to the GB are not displaying their score in the Dashboard Grades widget for the student.

Affected tools:

* Assignments
* Tests & Quizzes
* Lessons - tested graded Question



!image-20240513-224911.png|width=50%,alt=""image-20240513-224911.png""!



!image-20240513-230016.png|width=349,height=132,alt=""image-20240513-230016.png""!"
Discussion Topic: Linking to GB automatically checks the box to add task in Dashboard Tasks widget,Bug,Open,Sakai,software,"The tasks widget on Dashboard has been removed on 25x and 23x, and it is not possible to add it. Creating a graded Discussion topic automatically checks the check box to add the topic to the tasks widget on the Dashboard. 

# the checkbox should not be automatically checked
# the checkbox shouldnâ€™t even display since the tasks widget is not available
!image-20240513-214715.png|width=760,height=176,alt=""image-20240513-214715.png""!"
Gradebook: Titles can overflow and grid can become misaligned,Bug,Resolved,Sakai,software,"In the Gradebook column header, long titles and category names can overflow into adjacent cells. Also, narrowing the column width can cause misalignment of the grid. (see attached video)Â 

Note: the test videoâ€™s build of master ootb most recent commit is 0d97ba3033b of Tue May 7 17:34:53 2024 +0200.

Also sakai.property to permit column width adjustment must be set to true."
SCORM: Update to Wicket 9,Bug,Resolved,Sakai,software,Upgrade from Wicket 8.15 to 9
Academic Term Manager: wicket8 to wicket9 upgrade,Bug,Resolved,Sakai,software,Should use latest Wicket 9
Updated Help content for 23.2,Bug,Closed,Sakai,software,We have a number of additional Sakai Help content updates that we would like to include in the 23.2 maintenance release. The most current collection of help files needs to be exported out of Screensteps via the API process to pick up these new changes.
Roster: first load of roster tool stacktraces (manually-created site) - org.hibernate.exception.ConstraintViolationException,Bug,Open,Sakai,software,"Iâ€™m seeing different stacktraces depending on if itâ€™s a manually-created site or an official site. The stacktraces only seem to occur on the first load of the roster tool. (Currently am not seeing this on 23x)

Stacktrace for manually-created site:

{noformat}12-May-2024 11:57:09.763 INFO [http-nio-20313-exec-38] o.s.p.l.ProfilePrivacyLogicImpl.getPrivacyRecordForUser Created default privacy record for user: ab2cb0f0-e256-4416-adae-cbbd711261f6

12-May-2024 11:57:09.764 ERROR [http-nio-20313-exec-44] o.h.e.j.s.SqlExceptionHelper.logExceptions (conn=175149) Duplicate entry 'ab2cb0f0-e256-4416-adae-cbbd711261f6' for key 'PRIMARY'

12-May-2024 11:57:09.781 ERROR [http-nio-20313-exec-44] o.s.r.i.SakaiProxyImpl.getSearchIndex Exception whilst retrieving search index for site 'c9f7498f-129a-4d23-b0a2-c4b70edee6f6'. Returning null ...

javax.persistence.RollbackException: Error while committing the transaction

	at org.hibernate.internal.ExceptionConverterImpl.convertCommitException(ExceptionConverterImpl.java:81) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:104) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.springframework.orm.hibernate5.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:645) ~[spring-orm-5.3.34.jar:5.3.34]

	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743) ~[spring-tx-5.3.34.jar:5.3.34]

	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711) ~[spring-tx-5.3.34.jar:5.3.34]

	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654) ~[spring-tx-5.3.34.jar:5.3.34]

	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407) ~[spring-tx-5.3.34.jar:5.3.34]

	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.34.jar:5.3.34]

	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.34.jar:5.3.34]

	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241) ~[spring-aop-5.3.34.jar:5.3.34]

	at com.sun.proxy.$Proxy236.addNewPrivacyRecord(Unknown Source) ~[?:?]

	at org.sakaiproject.profile2.logic.ProfilePrivacyLogicImpl.getPrivacyRecordForUser(ProfilePrivacyLogicImpl.java:83) ~[?:?]

	at org.sakaiproject.profile2.logic.ProfilePrivacyLogicImpl.getPrivacyRecordForUser(ProfilePrivacyLogicImpl.java:48) ~[?:?]

	at org.sakaiproject.profile2.logic.ProfilePrivacyLogicImpl.isActionAllowed(ProfilePrivacyLogicImpl.java:144) ~[?:?]

	at org.sakaiproject.roster.impl.SakaiProxyImpl.getRosterMember(SakaiProxyImpl.java:798) ~[classes/:?]

	at org.sakaiproject.roster.impl.SakaiProxyImpl.getAndCacheSortedMembership(SakaiProxyImpl.java:936) ~[classes/:?]

	at org.sakaiproject.roster.impl.SakaiProxyImpl.getMembership(SakaiProxyImpl.java:504) ~[classes/:?]

	at org.sakaiproject.roster.impl.SakaiProxyImpl.getSearchIndex(SakaiProxyImpl.java:1301) [classes/:?]

	at org.sakaiproject.roster.tool.entityprovider.RosterSiteEntityProvider.getSearchIndex(RosterSiteEntityProvider.java:346) [classes/:?]

	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]

	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]

	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]

	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]

	at org.sakaiproject.entitybroker.rest.EntityActionsManager.handleCustomActionExecution(EntityActionsManager.java:209) [entitybroker-restimpl-25-SNAPSHOT.jar:25-SNAPSHOT]

	at org.sakaiproject.entitybroker.rest.EntityActionsManager.handleCustomActionRequest(EntityActionsManager.java:99) [entitybroker-restimpl-25-SNAPSHOT.jar:25-SNAPSHOT]

	at org.sakaiproject.entitybroker.rest.EntityHandlerImpl.handleEntityAccess(EntityHandlerImpl.java:409) [entitybroker-restimpl-25-SNAPSHOT.jar:25-SNAPSHOT]

	at org.sakaiproject.entitybroker.util.servlet.DirectServlet.dispatch(DirectServlet.java:189) [entitybroker-utils-25-SNAPSHOT.jar:25-SNAPSHOT]

	at org.sakaiproject.entitybroker.servlet.SakaiDirectServlet.dispatch(SakaiDirectServlet.java:148) [classes/:?]

	at org.sakaiproject.entitybroker.util.servlet.DirectServlet.handleRequest(DirectServlet.java:159) [entitybroker-utils-25-SNAPSHOT.jar:25-SNAPSHOT]

	at org.sakaiproject.entitybroker.util.servlet.DirectServlet.service(DirectServlet.java:134) [entitybroker-utils-25-SNAPSHOT.jar:25-SNAPSHOT]

	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) [servlet-api.jar:4.0.FR]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.sakaiproject.oauth.filter.OAuthPostFilter.doFilter(OAuthPostFilter.java:76) [oauth-api-25-SNAPSHOT.jar:25-SNAPSHOT]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:501) [sakai-kernel-api-25-SNAPSHOT.jar:25-SNAPSHOT]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.sakaiproject.oauth.filter.OAuthPreFilter.doFilter(OAuthPreFilter.java:74) [oauth-api-25-SNAPSHOT.jar:25-SNAPSHOT]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) [tomcat-websocket.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) [catalina.jar:9.0.76]

	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) [catalina.jar:9.0.76]

	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) [catalina.jar:9.0.76]

	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) [catalina.jar:9.0.76]

	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) [catalina.jar:9.0.76]

	at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:768) [catalina.jar:9.0.76]

	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) [catalina.jar:9.0.76]

	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) [catalina.jar:9.0.76]

	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) [tomcat-coyote.jar:9.0.76]

	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) [tomcat-coyote.jar:9.0.76]

	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) [tomcat-coyote.jar:9.0.76]

	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) [tomcat-coyote.jar:9.0.76]

	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) [tomcat-coyote.jar:9.0.76]

	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-util.jar:9.0.76]

	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-util.jar:9.0.76]

	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-util.jar:9.0.76]

	at java.base/java.lang.Thread.run(Thread.java:829) [?:?]

Caused by: javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not execute statement

	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:154) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:181) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.internal.ExceptionConverterImpl.convertCommitException(ExceptionConverterImpl.java:65) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	... 61 more

Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement

	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:59) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:37) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3375) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3937) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:107) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:684) ~[?:?]

	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	... 60 more

Caused by: java.sql.SQLIntegrityConstraintViolationException: (conn=175149) Duplicate entry 'ab2cb0f0-e256-4416-adae-cbbd711261f6' for key 'PRIMARY'

	at org.mariadb.jdbc.internal.util.exceptions.ExceptionFactory.createException(ExceptionFactory.java:70) ~[mariadb-java-client-2.7.8.jar:?]

	at org.mariadb.jdbc.internal.util.exceptions.ExceptionFactory.create(ExceptionFactory.java:158) ~[mariadb-java-client-2.7.8.jar:?]

	at org.mariadb.jdbc.MariaDbStatement.executeExceptionEpilogue(MariaDbStatement.java:262) ~[mariadb-java-client-2.7.8.jar:?]

	at org.mariadb.jdbc.ServerSidePreparedStatement.executeInternal(ServerSidePreparedStatement.java:440) ~[mariadb-java-client-2.7.8.jar:?]

	at org.mariadb.jdbc.ServerSidePreparedStatement.execute(ServerSidePreparedStatement.java:391) ~[mariadb-java-client-2.7.8.jar:?]

	at org.mariadb.jdbc.ServerSidePreparedStatement.executeUpdate(ServerSidePreparedStatement.java:378) ~[mariadb-java-client-2.7.8.jar:?]

	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.0.1.jar:?]

	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.0.1.jar:?]

	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3375) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3937) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:107) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:684) ~[?:?]

	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	... 60 more

Caused by: org.mariadb.jdbc.internal.util.exceptions.MariaDbSqlException: Duplicate entry 'ab2cb0f0-e256-4416-adae-cbbd711261f6' for key 'PRIMARY'

	at org.mariadb.jdbc.internal.util.exceptions.MariaDbSqlException.of(MariaDbSqlException.java:34) ~[mariadb-java-client-2.7.8.jar:?]

	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.exceptionWithQuery(AbstractQueryProtocol.java:195) ~[mariadb-java-client-2.7.8.jar:?]

	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.exceptionWithQuery(AbstractQueryProtocol.java:178) ~[mariadb-java-client-2.7.8.jar:?]

	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.executePreparedQuery(AbstractQueryProtocol.java:1143) ~[mariadb-java-client-2.7.8.jar:?]

	at org.mariadb.jdbc.ServerSidePreparedStatement.executeInternal(ServerSidePreparedStatement.java:433) ~[mariadb-java-client-2.7.8.jar:?]

	at org.mariadb.jdbc.ServerSidePreparedStatement.execute(ServerSidePreparedStatement.java:391) ~[mariadb-java-client-2.7.8.jar:?]

	at org.mariadb.jdbc.ServerSidePreparedStatement.executeUpdate(ServerSidePreparedStatement.java:378) ~[mariadb-java-client-2.7.8.jar:?]

	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.0.1.jar:?]

	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.0.1.jar:?]

	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3375) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3937) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:107) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:684) ~[?:?]

	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	... 60 more

Caused by: java.sql.SQLException: Duplicate entry 'ab2cb0f0-e256-4416-adae-cbbd711261f6' for key 'PRIMARY'

	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.readErrorPacket(AbstractQueryProtocol.java:1693) ~[mariadb-java-client-2.7.8.jar:?]

	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.readPacket(AbstractQueryProtocol.java:1555) ~[mariadb-java-client-2.7.8.jar:?]

	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.getResult(AbstractQueryProtocol.java:1518) ~[mariadb-java-client-2.7.8.jar:?]

	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.executePreparedQuery(AbstractQueryProtocol.java:1140) ~[mariadb-java-client-2.7.8.jar:?]

	at org.mariadb.jdbc.ServerSidePreparedStatement.executeInternal(ServerSidePreparedStatement.java:433) ~[mariadb-java-client-2.7.8.jar:?]

	at org.mariadb.jdbc.ServerSidePreparedStatement.execute(ServerSidePreparedStatement.java:391) ~[mariadb-java-client-2.7.8.jar:?]

	at org.mariadb.jdbc.ServerSidePreparedStatement.executeUpdate(ServerSidePreparedStatement.java:378) ~[mariadb-java-client-2.7.8.jar:?]

	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.0.1.jar:?]

	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.0.1.jar:?]

	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3375) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3937) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:107) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:684) ~[?:?]

	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]

	... 60 more{noformat}"
Roster: first load of roster tool stacktraces (official site): RuntimeException:Fatal error trying to execute custom action method: get-membership,Bug,Resolved,Sakai,software,"Iâ€™m seeing different stacktraces depending on if itâ€™s a manually-created site or an official site. The stacktraces only seem to occur on the first load of the roster tool. For an official site, the roster does not seem to load (but the direct URI loads the users - this course had 187 participants), but if you leave the page and re-enter, then it loads. (Currently am not seeing this on 23x)

For an official site:

{noformat}12-May-2024 12:18:24.645 ERROR [http-nio-20313-exec-43] o.s.e.i.e.SakaiExternalIntegrationProvider.handleEntityError Direct request failure: RuntimeException:Fatal error trying to execute custom action method: get-membership:show:getMembership:Direct request failure: RuntimeException:Fatal error trying to execute custom action method: get-membership:show:getMembership:

 Sakai version: 25-SNAPSHOT(171476d4)

Server: trunk-maria.nightly.sakaiproject.org(ip-172-31-7-189) [ip-172-31-7-189-1715490540374]

Request URI: /direct/roster-membership/73525db5-3570-48f8-8ff2-4dde7387b910/get-membership.json

 Path Info: /roster-membership/73525db5-3570-48f8-8ff2-4dde7387b910/get-membership.json

 Context path: /direct

 Method: GET


Server: ip-172-31-7-189-1715490540374

 User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:125.0) Gecko/20100101 Firefox/125.0

 Browser ID: Win-Mozilla

 IP address: 184.17.253.201

 User ID: a3701a30-c89a-49f7-8244-6e450e383dbb

 User EID: instructor

 User Display ID: instructor

Full stacktrace:

RuntimeException:Fatal error trying to execute custom action method: get-membership:show:getMembership:

12-May-2024 12:18:24.645 WARN [http-nio-20313-exec-43] o.s.e.u.s.DirectServlet.dispatch Direct request failure: RuntimeException:Fatal error trying to execute custom action method: get-membership:show:getMembership:Direct request failure: RuntimeException:Fatal error trying to execute custom action method: get-membership:show:getMembership:

 Sakai version: 25-SNAPSHOT(171476d4){noformat}"
Wiki: Group support - jquery console error,Bug,Verified,Sakai,software,"See [https://sakaiproject.atlassian.net/browse/S2U-39|https://sakaiproject.atlassian.net/browse/S2U-39|smart-link] 

I created 2 different sites:

* Official site with 3 sections and 5 groups
* Manually-created site with 3 groups

When creating new wiki pages, only the official site gives the option to Display this page to selected Groups only, but it only lists sections, not the groups. The manually-created site with groups only doesnâ€™t even display the option. In both cases there is a jquery error in the browser console.

{noformat}56495b4b-a045-44f0-9â€¦2-c4b70edee6f6:1132 
 Uncaught TypeError: $(...).multiselect is not a function
    at HTMLDocument.<anonymous> (56495b4b-a045-44f0-9â€¦4b70edee6f6:1132:26)
    at i (jquery.js:3232:31)
    at Object.fireWith [as resolveWith] (jquery.js:3362:7)
    at Function.ready (jquery.js:3582:13)
    at HTMLDocument.K (jquery.js:3617:10){noformat}"
Library Import Font Awesome-4 with SASS Math Compatibility,Bug,Resolved,Sakai,software,Importing font-awesome with math sass fixes.
Lessons-embed: Console errors Uncaught TypeError and DOMException,Bug,Open,Sakai,software,"From [https://sakaiproject.atlassian.net/browse/SAK-49916|https://sakaiproject.atlassian.net/browse/SAK-49916|smart-link]

When embedding content in Lessons, it works but there are a couple of console errors each time:

{noformat}Uncaught TypeError: Cannot read properties of null (reading 'indexOf')
    at getRequestUrl (jquery.oembed.js:130:21)
    at embedCode (jquery.oembed.js:225:30)
    at HTMLAnchorElement.<anonymous> (jquery.oembed.js:87:21)
    at Function.each (/library/webjars/jquery/1.12.4/jquery.min.js?version=a361bb2e:2:2881)
    at a.fn.init.each (/library/webjars/jquery/1.12.4/jquery.min.js?version=a361bb2e:2:846)
    at $.fn.oembed (jquery.oembed.js:19:21)
    at HTMLInputElement.<anonymous> (show-page.js:485:20)
    at HTMLInputElement.dispatch (/library/webjars/jquery/1.12.4/jquery.min.js?version=a361bb2e:3:12444)
    at r.handle (/library/webjars/jquery/1.12.4/jquery.min.js?version=a361bb2e:3:9173){noformat}

{noformat}instrument.ts:124 
 DOMException: Failed to read a named property 'href' from 'Location': Blocked a frame with origin ""https://www.sakailms.org"" from accessing a cross-origin frame.
    at viewMode (https://static.parastorage.com/services/pro-gallery-tpa/1.747.0/WixProGalleryViewerWidget.bundle.min.js:95:223028)
    at t.componentDidMount (https://static.parastorage.com/services/pro-gallery-tpa/1.747.0/WixProGalleryViewerWidget.bundle.min.js:95:223418)
    at Ki (https://static.parastorage.com/unpkg/react-dom@18.2.0/umd/react-dom.production.min.js:179:501)
    at Ii (https://static.parastorage.com/unpkg/react-dom@18.2.0/umd/react-dom.production.min.js:179:278)
    at Ik (https://static.parastorage.com/unpkg/react-dom@18.2.0/umd/react-dom.production.min.js:178:329)
    at Sk (https://static.parastorage.com/unpkg/react-dom@18.2.0/umd/react-dom.production.min.js:197:312)
    at yb (https://static.parastorage.com/unpkg/react-dom@18.2.0/umd/react-dom.production.min.js:196:166)
    at Oi (https://static.parastorage.com/unpkg/react-dom@18.2.0/umd/react-dom.production.min.js:187:246)
    at S (https://static.parastorage.com/unpkg/react@18.2.0/umd/react.production.min.js:17:25)
    at MessagePort.U (https://static.parastorage.com/unpkg/react@18.2.0/umd/react.production.min.js:21:60){noformat}"
"Lessons-embed: Remove message""â€œFirst, we will try this as the URL of a video/audio sharing site....""",Bug,Open,Sakai,software,"From [https://sakaiproject.atlassian.net/browse/SAK-49916|https://sakaiproject.atlassian.net/browse/SAK-49916|smart-link] 

Since content is being embedded and skipping the preview, the message â€œFirst, we will try this as the URL of a video/audio sharing site. Please see if this shows the contents of the site properlyâ€ should be removed from the page. "
Gradebook: The grading table and student table has uneven padding in TA,Bug,Verified,Sakai,software,"The Table for student names and numbers has uneven padding.  It needs to be adjusted.

!Screenshot from 2024-05-11 15-45-17.png|width=480,height=137,alt=""Screenshot from 2024-05-11 15-45-17.png""!"
Gradebook: Unhide column handle is misaligned,Bug,Verified,Sakai,software,"In Gradebook, an item can be set to hidden and when doing so an unhide handle (left/right triangles) are rendered to allow for unhiding of the column(s). These triangles are being split to two lines. (see attached video)"
Students able to unenroll themselves from non-joinable sites in Membership,Bug,Open,Sakai,software,"Students appear to be able to select a site and unjoin or unenroll themselves in the Membership tool from manually created sites which are not joinable. The issue does not affect â€œofficial enrollmentsâ€ that are provisioned using sections. However, some schools do not rely on provisioned sites, so this would be an issue for anyone that enrolls people without using the automatic section feature. It seems dangerous to let students unenroll themselves from their classes, since they might mistake that for dropping a course, or they could unenroll themselves and then not be able to rejoin, since the site isn't joinable. Interestingly, faculty users don't have the ability to select non-joinable, manually created sites for unjoining.

!image (11).png|width=554,height=244,alt=""image (11).png""!



!image (12).png|width=83.33333333333333%,alt=""image (12).png""!"
Assignments: Quick grade modal in Assignment by Student view,Feature Request,Open,Sakai,software,"This feature is being introduced at UPV (code ready for sakai 22).
~context:~
Currently, in the grading view, you can easily review all student submissions +for the same task+.

From the Assignment by Student view, you can see submissions +from different tasks+, grouped by each student.
Each submission has a button to access the grading view. However, going back and forth multiple times can be a tedious process. 
__

This aims to speed up the workflow, at least for simple cases where teacher feedback isnâ€™t needed, just the grade.
This is achieved by adding a second button that opens a modal, which contains a simplified grader.

The modal header includes the title and two buttons: one to access the full grader and another to close/cancel the action.
Then we find the grader webcomponent, but only its essential parts are being shown:

* User info
* Text submission from the student
* Uploaded files (which will be downloaded on click)
* The grade input
* Save buttons"
Portal: Display user's current role in site,Feature Request,Open,Sakai,software,"[https://sakaiproject.atlassian.net/browse/S2U-44|https://sakaiproject.atlassian.net/browse/S2U-44|smart-link] introduces a new feature. Currently the role is not displaying (SAK-50079), but the text for the roles should be changed:

* â€œYou are Instructorâ€ should be â€œYou are an instructorâ€
* â€œYou are Studentâ€ should be â€œYou are a studentâ€
* â€œYou are Teaching Assistantâ€ should be â€œYou are a teaching assistantâ€"
Portal: Display the user's role of the current site is not displaying the role,Bug,Open,Sakai,software,"Testing [https://sakaiproject.atlassian.net/browse/S2U-44|https://sakaiproject.atlassian.net/browse/S2U-44|smart-link], the property is enabled on master (portal.display.current.role=true) and looking at the html, I can see the role, but it is not displaying in the banner."
Assignments: Originality Service Name missing from Grader,Bug,Closed,Sakai,software,"The originality service name should be visible within the Grader. Currently, it is visible from the submission list and classic grader.

!turnitin.png|width=423,height=449,alt=""turnitin.png""!"
Question Pool: Survey-matrix preview does not display the matrix,Bug,Open,Sakai,software,"Testing the preview option in Question Pools, the survey matrix does not display. Not sure if the preview work for all questions was done in [https://sakaiproject.atlassian.net/browse/S2U-10|https://sakaiproject.atlassian.net/browse/S2U-10|smart-link] but I canâ€™t find any other Jira for this."
"Question Pools: Question previews ""boxed"" description size not consistent",Bug,Open,Sakai,software,"Testing the preview feature of question pools. Not sure if all the work for previews was done in [https://sakaiproject.atlassian.net/browse/S2U-10|https://sakaiproject.atlassian.net/browse/S2U-10|smart-link] but I couldnâ€™t find another Jira for this.

Each question has a â€œboxedâ€ description of the question and there is padding. However, the â€œboxâ€ size is inconsistent between questions and for a few questions there doesnâ€™t seem to be any padding on the right side. 

!image-20240508-233600.png|width=835,height=622,alt=""image-20240508-233600.png""!"
Question Pool: calculated question solution cancel button console error,Bug,Verified,Sakai,software,"This is from testing the new [https://sakaiproject.atlassian.net/browse/S2U-10|https://sakaiproject.atlassian.net/browse/S2U-10|smart-link] feature.

Questions other than the calculated question use the Preview link in Question Pools and have a Return button to get back to the question pool. The calculated question uses the Solution link and there is no Return button, only a Cancel button. Clicking Cancel does take the user back to the question pool but there is a console error:

{quote} solution:1182
 Uncaught ReferenceError: SPNR is not defined
    at HTMLInputElement.onclick (solution:1182:147)
onclick	@	solution:1182{quote}"
Lessons: CSS console error on Bulk Edit Subpages,Bug,Closed,Sakai,software,"When viewing the Bulk Edit Subpage page in Lessons, there is an error in the console: 

GET [https://trunk-maria.nightly.sakaiproject.org/lessonbuilder-tool/css/Simplepagetool.css?version=0d97ba30|https://trunk-maria.nightly.sakaiproject.org/lessonbuilder-tool/css/Simplepagetool.css?version=0d97ba30] net::ERR_ABORTED 404"
Rubrics: Can not grade if Adjust Scores is selected,Bug,Verified,Sakai,software,"If a rubric is linked to a GB item with the option selected to adjust individual student scores, the rubric does not open and can not be graded. This doesnâ€™t occur if the Adjust setting isnâ€™t marked. 



When attempting to grade the rubric with Adjust Scores set, there is a console error: 

chunk-PQ5WNHE6.js:236 Uncaught (in promise) TypeError: Cannot read properties of undefined (reading 'toLocaleString')
    at chunk-PQ5WNHE6.js:236:51
    at Array.map (<anonymous>)
    at g.render (chunk-PQ5WNHE6.js:168:28)
    at g.update (chunk-XRRZXP5N.js:6:6733)
    at g.performUpdate (chunk-XRRZXP5N.js:2:5863)
    at g.scheduleUpdate (chunk-XRRZXP5N.js:2:5413)
    at g._$EP (chunk-XRRZXP5N.js:2:5321)"
Grader: navigation is lost when accessing from Assignments > Assignments by Student view,Bug,Closed,Sakai,software,"Navigation is lost when trying to go back to the student list from the new grader, it actually redirects to the single task view. The old grader successfully manages these 2 cases."
Roster: No functionality to re-attempt student guess / reroll button issue,Feature Request,Open,Sakai,software,This perhaps diverges from the exact feature specification but there is no way to reattempt a guess - once you have guessed incorrectly. â€˜Rerollâ€™ functionality does not enable this either - although perhaps it should.
Global update Spring Web to 5.3.34,Bug,Resolved,Sakai,software,"Currently Sakai doesnâ€™t use {{org.springframework.web.util.UriComponentsBuilder}} where a url is used as a param. So it is our estimate that Sakai is not impacted by this vulnerability and will upgrade the lib.

An http parameter may contain a URL value and could cause the web application to redirect the request to the specified URL. By modifying the URL value to a malicious site, an attacker may successfully launch a phishing scam and steal user credentials. Because the server name in the modified link is identical to the original site, phishing attempts have a more trustworthy appearance. Whether this issue poses a vulnerability will be subject to the intended behavior of the application. For example, a search engine might intentionally provide redirects to arbitrary URLs.

[https://cwe.mitre.org/data/definitions/601.html|https://cwe.mitre.org/data/definitions/601.html|smart-link] 
"
Roster: Unresponsive layout for name that face,Bug,Open,Sakai,software,"Resizing the browser changes the layout incorrectly. Correct layout is in the linked JIRA, the current layout attached in the image."
Roster: Two check button which does not match the UX,Bug,Open,Sakai,software,User Interface does not match the interface outlined [+here+|https://sakaiproject.atlassian.net/browse/S2U-42]. There are two â€˜checksâ€™ buttons instead of one. Button is also inactive during the duration of the game.Â 
Date Manager: export / import csv feature for batch updates,Feature Request,Resolved,Sakai,software,"Contributed from UPV, teachers requested this feature as they wanted to batch update elements from the date manager, but when there are hundreds of entries itâ€™s a bit of a pain to do it manually."
T&Q: Event log download needs to have user-friendly text for the Errors column instead of the variable value,Bug,Open,Sakai,software,"Testing [https://sakaiproject.atlassian.net/browse/S2U-24|https://sakaiproject.atlassian.net/browse/S2U-24|smart-link] and the downloaded csv, the Errors column contains â€œ{color:#bf2600}no_error_user_submit{color}â€ and it should be the same text as shown on the web page â€œNo Errors (User submit)â€"
T&Q: Navigation in questions tab is missing,Bug,Verified,Sakai,software,I am checking out the new features in Tests & Quizzes and I believe [https://sakaiproject.atlassian.net/browse/S2U-15|https://sakaiproject.atlassian.net/browse/S2U-15|smart-link] broke the navigation in the Questions tab. I cannot figure out how to get past Question 1 in the Questions tab.
Grader: rubrics are lost when clicking on Cancel,Bug,Resolved,Sakai,software,"If you save an evaluation, then come back to the grader and click on Cancel, rubrics are lost. All the other data is not, that Cancel was suposed to restore to the previous saved version but itâ€™s actually causing data loss.

It happens when saving the grading but not releasing it to the student yet.

This doesnâ€™t happen on 23.x or 25.x, as all that bit in the grader has a few extra clicks and persistance is probably managed in a different way."
Console log error for incorrect use of label for sakai-search-field,Bug,Resolved,Sakai,software,"This is the error Iâ€™m seeing in a browser console. 

{noformat}The label's for attribute doesn't match any element id. This might prevent the browser from correctly autofilling the form and accessibility tools from working correctly.{noformat}

Itâ€™s related to this line 

[https://github.com/sakaiproject/sakai/blob/6e3f31bd585cb5862dcc44a0fc3df4956bc15e8d/portal/portal-render-engine-impl/impl/src/webapp/vm/morpheus/snippets/search-snippet.vm#L10|https://github.com/sakaiproject/sakai/blob/6e3f31bd585cb5862dcc44a0fc3df4956bc15e8d/portal/portal-render-engine-impl/impl/src/webapp/vm/morpheus/snippets/search-snippet.vm#L10|smart-link] 

I donâ€™t see anything with the id sakai-search-field. "
Clicking on Reorder button doesn't do anything,Bug,Resolved,Sakai,software,I noticed when working on another issue in Lessons that clicking on the actual button for Reorder doesnâ€™t do anything you have to click exactly on the text. The other buttons work as expected.
Reduce excessive messages in console output from sakai-lti-advantage.js,Bug,Closed,Sakai,software,"In the console log, Thereâ€™s a message about Portal Listener multiple times a second in the console log at the info level. Looking at this file it seems like all of these messages can just be put at the debug level which is not displayed by default if they need to be sent. 

This makes debugging the console and running commands kind of difficult unless the info messages are is disabled.



!image-20240505-190205.png|width=1496,height=220,alt=""image-20240505-190205.png""!"
sakai-service-worker.js deployed to ROOT may not work with all configurations,Bug,Open,Sakai,software,"It looks like [https://sakaiproject.atlassian.net/browse/SAK-49287|https://sakaiproject.atlassian.net/browse/SAK-49287|smart-link] has a new deployment to put sakai-service-worker.js in the ROOT.

[https://github.com/sakaiproject/sakai/blob/master/serviceworker/pom.xml|https://github.com/sakaiproject/sakai/blob/master/serviceworker/pom.xml|smart-link] 

In some deployments, like where CATALINA_HOME and CATALINA_BASE are separate, this will deploy this file to the â€œwrong locationâ€ (to CATALINA_HOME) and it wonâ€™t work without modifications to server.xml to indicate that ROOT is something that needs to be placed at the root.

Does this file _need_ to be placed at the root for any reason or can it be in another path? We may need to document this if this is the case. Either this files can be manually copied to the CATALINA_BASE ROOT or the Host entry modified in server.xml. "
T&Q: Item Analysis pdf export formatting incorrect,Bug,Open,Sakai,software,"[https://sakaiproject.atlassian.net/browse/S2U-7|https://sakaiproject.atlassian.net/browse/S2U-7|smart-link] introduced some new features, adding fields to the Item Analysis page and the ability to export as pdf or an Excel file. The Excel file is formatted correctly, but the pdf is not.

# The grid does not correctly have the Q# in the right column for every entry, so the data is in the incorrect columns
# There are 2 pages in the pdf of the same chart"
T&Q: Instructor statistics page: Uncaught TypeError: $(...).dropdown is not a function,Bug,Verified,Sakai,software,"I was attempting to verify [https://sakaiproject.atlassian.net/browse/S2U-7|https://sakaiproject.atlassian.net/browse/S2U-7|smart-link] on trunk. I am not seeing this issue on 23x. Not sure if itâ€™s related to S2U-7 or not, but am linking in case it is. According to [https://docs.google.com/document/d/1q_TbxtK1U26rRZimJW0I70rkXVv7kUL3kext22StxOo/edit|https://docs.google.com/document/d/1q_TbxtK1U26rRZimJW0I70rkXVv7kUL3kext22StxOo/edit|smart-link]  it seems it may be.

Logged in as the instructor, I clicked on the quiz submissions then on the statistics tab and received the following error:

{quote}totalScores:1099
 Uncaught TypeError: $(...).dropdown is not a function
    at HTMLDocument.<anonymous> (totalScores:1099:27)
    at i (jquery.js:3232:31)
    at Object.fireWith [as resolveWith] (jquery.js:3362:7)
    at Function.ready (jquery.js:3582:13)
    at HTMLDocument.K (jquery.js:3617:10){quote}"
T&Q: Multiple jquery errors,Bug,Open,Sakai,software,"*Update*: I was able to reproduce on 23x. 

I was in the process of trying to verify [https://sakaiproject.atlassian.net/browse/S2U-7|https://sakaiproject.atlassian.net/browse/S2U-7|smart-link] and having students take the quiz when I started running into the jquery errors.

The screen shot of the survey question only happened once so far, but the videos show many jquery errors and they donâ€™t seem to be caused by any particular question type. I cannot reproduce these errors every single time but have reproduced multiple times now. I donâ€™t know if the order of the questions has anything to do with it.

Testing done on Win10 with Firefox.

Doc with all the jquery errors: [https://docs.google.com/document/d/1iCBXr7oYAFcXR3_zUJEmbUySlXGymgdyufa9CGcVzMM/edit?usp=sharing|https://docs.google.com/document/d/1iCBXr7oYAFcXR3_zUJEmbUySlXGymgdyufa9CGcVzMM/edit?usp=sharing|smart-link] "
Gradebook: Student review mode does not hide all other student grades,Bug,Closed,Sakai,software,"Currently in Trunk and 23.x, the student review mode in Gradebook dims the main layer, but the scores are still visible. In 22.x and earlier, the main layer is completely unreadable. "
T&Q: Uncaught SyntaxError: redeclaration of var throttle if there are 2 numeric questions on a page,Bug,Open,Sakai,software,"Similar to [https://sakaiproject.atlassian.net/browse/SAK-46489|https://sakaiproject.atlassian.net/browse/SAK-46489|smart-link] and [https://sakaiproject.atlassian.net/browse/SAK-45161|https://sakaiproject.atlassian.net/browse/SAK-45161|smart-link] 

Am seeing the following error when there are 2 numeric type questions on the page, (I had a calculated question and numeric response question), and the link for more information above the numeric response does not work.

When these questions are on different pages, there is no issue.

Uncaught SyntaxError: redeclaration of var throttle
    <anonymous> [https://trunk-maria.nightly.sakaiproject.org/samigo-app/js/finInputValidator.js:1|https://trunk-maria.nightly.sakaiproject.org/samigo-app/js/finInputValidator.js:1]
finInputValidator.js:1:1

There are more console errors that are present in 23x only and I will create a separate Jira for those.

When the instructor grades a studentâ€™s submission with all questions on the page, there are 2 console errors:

Uncaught SyntaxError: Identifier 'throttle' has already been declared (at calcQuestInputValidator.js:1:1)

Uncaught SyntaxError: Identifier 'validateFinInput' has already been declared (at finInputValidator.js:1:1)"
Permissions: Too wide on mobile,Bug,Open,Sakai,software,"The Permissions page across all tools is not responsive on mobile. There is a lot of horizontal scrolling, and when viewing the roles on the far right, you can no longer see the permission in question, making it more likely that users will apply the wrong permissions"
Rubrics: Max points do not display for imported rubrics,Bug,Closed,Sakai,software,"When associating a rubric with an assignment for gradebook item, the title of the rubric in the dropdown menu should be accompanied by the maximum number of points the rubric is worth in parentheses. Refer to SAK-47876. This behavior does not occur with rubrics imported from another site (via Site Info > Import from Site)."
Site Info: Incorrect numbering when generating additional Joinable Sets,Bug,Closed,Sakai,software,"The numbering used by Sakai when creating Joinable Set groups follows the natural sequence, that is, 1,2,3,â€¦,10,11,12,â€¦,20,21,â€¦,30,31,â€¦,40. So far, so good. However, if we then take advantage of the possibility it offers to ""Generate Additional Groups"" when editing the set, it turns out that it no longer follows the natural order but rather does something like 44,55,66,77,88,99,1010.

!image-20240502-114607.png|width=1853,height=561,alt=""image-20240502-114607.png""!"
Notifications (bullhorns) needs an improved workflow for setting up browser push permissions.,Bug,Closed,Sakai,software,"Notifications (bullhorns) needs an improved workflow for setting up browser push permissions. At the moment, the warnings given to the user regarding push setup are too abrupt, too stark. We want to gently lull users into a sense of confidence about allowing their institutions Sakai to push notifications to their device."
Add Notifications for new Wiki content,Feature Request,Open,Sakai,software,"See the umbrella Jira for this issue: [https://sakaiproject.atlassian.net/browse/SAK-50034|https://sakaiproject.atlassian.net/browse/SAK-50034|smart-link]

The Wiki tool should generate notifications when there is new or updated content in the tool."
Add Notifications for new or updated content in Syllabus tool,Feature Request,Open,Sakai,software,"See the umbrella Jira for this issue: [https://sakaiproject.atlassian.net/browse/SAK-50034|https://sakaiproject.atlassian.net/browse/SAK-50034|smart-link]

The Syllabus tool should generate notifications when:

* there are new items added to the Syllabus
* there are new items published in the Syllabus
* there are changes to existing items in the Syllabus"
Add Notifications for Sign Up events,Feature Request,Open,Sakai,software,"See the umbrella Jira for this issue: [https://sakaiproject.atlassian.net/browse/SAK-50034|https://sakaiproject.atlassian.net/browse/SAK-50034|smart-link]

The Sign Up tool should generate notifications when there are new events available for sign-up, or as reminders about events that a user has signed up for.

When you create a new event in Sign Up, you specify a date/time when signup for the event begins. This date should be used to generate a notification letting students know that they can begin signing up for that item. 

Also, the Sign Up tool sends out a number of different email notifications and reminders for upcoming events once you sign up for something. We should add Notifications within the browser, so that it isnâ€™t reliant only upon email notifications.

See the screenshot below of the current Sign Up settings related to notifications highlighted in yellow. Iâ€™d like to see browser notifications added anywhere that there is an existing email notification option.

!2024-05-01_16-46-37.png|width=100%,alt=""2024-05-01_16-46-37.png""!"
Add Notifications for Section Info tool,Feature Request,Open,Sakai,software,"See the umbrella Jira for this issue: [https://sakaiproject.atlassian.net/browse/SAK-50034|https://sakaiproject.atlassian.net/browse/SAK-50034|smart-link]

The Section Info tool should generate notifications when there are changes to the sections or section assignments in a site.

Most of the time, Sections are managed automatically via integration with the SIS. However, if sections are being managed manually, it would be quite useful for students and TAs to receive notifications about changes to sections, such as:

notification sent to student/TA

* students are assigned to a section
* TAs are assigned to a section

notification sent to instructor

* students switch sections
* students sign up for sections"
Add Notifications to PostEm when new feedback is available,Feature Request,Open,Sakai,software,"See the umbrella Jira for this issue: [https://sakaiproject.atlassian.net/browse/SAK-50034|https://sakaiproject.atlassian.net/browse/SAK-50034|smart-link]

The PostEm tool should generate notifications when there is new or updated feedback available for students to view.

PostEm is often used as an alternative to the Gradebook for special use cases, such as Specifications grading, or Ungrading. As such, it is important for students to know when there is new feedback available for them. "
Add Notifications for Polls,Feature Request,Open,Sakai,software,"See the umbrella Jira for this issue: [https://sakaiproject.atlassian.net/browse/SAK-50034|https://sakaiproject.atlassian.net/browse/SAK-50034|smart-link]

The Polls tool should generate notifications when there are new poll items are available.

When you create a new poll, you select an Open and Close date for the poll. Those dates should be used to generate the Notifications, so that users are notified when the poll is Open and when it is about to Close."
Add Notifications for Podcasts tool,Feature Request,Open,Sakai,software,"See the umbrella Jira for this issue: [https://sakaiproject.atlassian.net/browse/SAK-50034|https://sakaiproject.atlassian.net/browse/SAK-50034|smart-link]

The Podcasts tool should generate notifications when there are new podcast items available.

When you add a file to the Podcast tool, you select a Publish Date for the item. The Publish Date should be used to generate the Notification, so that users are notified when it is published."
Add Notifications for Messages activity,Feature Request,Open,Sakai,software,"See the umbrella Jira for this issue: [https://sakaiproject.atlassian.net/browse/SAK-50034|https://sakaiproject.atlassian.net/browse/SAK-50034|smart-link]

The Messages tool should generate notifications when there is new activity within the tool, such as:

* A new message is received
* A message you sent has been opened (only if read receipt is available - is it?)
* A message you scheduled to send has been sent"
Add Notifications for Lessons when new content is available,Feature Request,Open,Sakai,software,"See the umbrella Jira for this issue: [https://sakaiproject.atlassian.net/browse/SAK-50034|https://sakaiproject.atlassian.net/browse/SAK-50034|smart-link]

The Lessons tool should generate notifications when new content is available. 

Currently, the Lessons tool sends notifications when there are Comments or Replies to Comments on Lessons pages. However, since Lessons pages and items can also be selectively released by date or other criteria, it might be nice to also get a notification when there are new content items available for a user to access. Also, it would be a nice heads-up for students to know if the instructor adds a new module or unit to the course. 

We would probably want to limit the notifications by page. For example â€œLessons: Week 5 is now availableâ€ would be fine, but you donâ€™t want to receive separate notifications for 15 individual items all on the same â€œWeek 5â€ page. "
Add Notifications for Gradebook Items when graded,Feature Request,Open,Sakai,software,"See the umbrella Jira for this issue: [https://sakaiproject.atlassian.net/browse/SAK-50034|https://sakaiproject.atlassian.net/browse/SAK-50034|smart-link]

The Gradebook tool should generate notifications when new grades are posted. Currently, the Assignments and Tests & Quizzes tools send notifications when an assignment or quiz is graded. However, if you have a manually added gradebook item, and you enter a score in the Gradebook for that item, there is no notification sent. Likewise, if you have a graded LTI item from Lessons, or a graded SCORM item from SCORM Player, there is no notification sent, since the score goes directly to the Gradebook tool. Students will likely have the expectation that all grades will generate notifications, regardless of which tool they are coming from. (I know I would expect that as a student.)

We would need to take care that students arenâ€™t double-notified - from the tool of origin (e.g. Assignments, T&Q) and from Gradebook itself - for the same item. However, I think if we ever complete the implementation of the Centralized Gradebook Service, this goal is within reach."
Add Notifications for Email Archive,Feature Request,Open,Sakai,software,"See the umbrella Jira for this issue: [https://sakaiproject.atlassian.net/browse/SAK-50034|https://sakaiproject.atlassian.net/browse/SAK-50034|smart-link]

The Email Archive tool should generate notifications for new activity.

Email Archive can be used a sort of â€œlistservâ€ for messages within a site. In this scenario, I think it would be useful to receive a notification when there is a new message added to the email archive within a site. "
Add Notifications for Drop Box activity,Feature Request,Open,Sakai,software,"See the umbrella Jira for this issue: [https://sakaiproject.atlassian.net/browse/SAK-50034|https://sakaiproject.atlassian.net/browse/SAK-50034|smart-link]

The Drop Box tool should generate notifications for new activity.

Drop Box is similar to Resources, and I know that Resources Notifications were turned off intentionally, since the Resources tool tended to generate too many notifications that were not really useful for end users. However, the purpose of the Drop Box tool is different than Resources. It is intended as a file-sharing space for students and faculty. With that use case in mind, I think that notifications for Drop Box activity might be useful.  

As a student, I think it would be useful to get a notification telling me when my instructor has uploaded a file to my Drop Box. 

Likewise, as an instructor, if you are using Drop Box as an alternative to Assignments for collecting files from students, it would be useful to know when you have new student files awaiting your review. 

Additionally, if users did not want to receive Drop Box notifications, they could always turn off the notifications for that tool from Preferences. (See associated Jira for proposed Notification Preferences modifications.)"
Add Notifications for Dashboard Tasks Widget,Feature Request,Open,Sakai,software,"See the umbrella Jira for this issue: [https://sakaiproject.atlassian.net/browse/SAK-50034|https://sakaiproject.atlassian.net/browse/SAK-50034|smart-link]

The Dashboard Tasks Widget should generate notifications for new tasks which are manually created by the user for their personal Tasks or by the instructor for a site Tasks.

Currently, the Dashboard shows Tasks that are automatically added when there is a new assignment, quiz, etc. so we donâ€™t need to duplicate those items. However, if a user adds tasks manually, either within their own Tasks widget as a personal to-do item, or as the instructor adding a Task for the class within a course site, you would want those reminders to also generate Notifications. 

Similar to the Calendar tool, since Tasks are typically time-sensitive and tied to a deadline of some sort, you would want these notifications to be sent on a schedule selected by the user. See example screenshot from Google Calendar below:

!2024-05-01_15-01-29.png|width=359,height=191,alt=""2024-05-01_15-01-29.png""!

 "
Add Notifications for Conversations Activity,Feature Request,Open,Sakai,software,"See the umbrella Jira for this issue: [https://sakaiproject.atlassian.net/browse/SAK-50034|https://sakaiproject.atlassian.net/browse/SAK-50034|smart-link]

The Conversations tool should generate notifications for new activity, such as:

* When a new topic is created
* When someone posts a new message
* When someone replies to a userâ€™s post"
Add Notifications for Calendar events,Feature Request,Open,Sakai,software,"See the umbrella Jira for this issue: [https://sakaiproject.atlassian.net/browse/SAK-50034|https://sakaiproject.atlassian.net/browse/SAK-50034|smart-link] 

The Calendar tool should generate notifications for new events. 

Ideally, the calendar notifications would happen on a schedule, where users can decide how many and how far in advance they receive notifications, similar to the way you can set this up in Google Calendar (see screenshot below from Google Calendar as an example). Perhaps something like this could be added to the Calendar tool and/or the Home > Preferences > Notifications page. 

!2024-05-01_15-01-29.png|width=359,height=191,alt=""2024-05-01_15-01-29.png""!

Since other site events, such as Assignments or Tests & Quizzes due dates often appear on the course Calendar, having the Calendar tool send event notifications is a great way to notify students about upcoming due dates. While Assignments and Tests & Quizzes tools do send notifications, I believe they only send them when a new item is created/published or graded, but not 10 minutes (or an hour, or some other increment) prior to the due date."
Add other Sakai tools to Notifications Service so that the notification behavior is consistent across the system,Feature Request,Open,Sakai,software,"This is an umbrella Jira to track several other Jiras related to this feature request (one per tool). 

Currently, Notifications in Sakai (formerly â€œBullhornsâ€) are only generated for Announcements, Assignments, Commons, Lessons Comments, Profile (Status and Connection updates or Profile Connection Messages), and Tests & Quizzes. However, there are a lot of other Sakai tools from which users would expect to receive notifications. In order for the Notifications tool to be really useful and widely adopted, it needs to meet user expectations in terms of comprehensive tool coverage. Otherwise, institutions may hesitate to use it, worrying that students could miss items that donâ€™t generate notifications and then claim that they werenâ€™t notified of the new item so they didnâ€™t realize it had been assigned/sent/created.

I have created separate Jiras for the following tools, each of which should be added to the Notifications service so that they generate notification messages when there is new content or activity available.

* Calendar - [https://sakaiproject.atlassian.net/browse/SAK-50035|https://sakaiproject.atlassian.net/browse/SAK-50035|smart-link] 
* Chat - existing Jira [https://sakaiproject.atlassian.net/browse/SAK-42080|https://sakaiproject.atlassian.net/browse/SAK-42080|smart-link] 
* Conversations - [https://sakaiproject.atlassian.net/browse/SAK-50036|https://sakaiproject.atlassian.net/browse/SAK-50036|smart-link]  
* Dashboard Tasks Widget - [https://sakaiproject.atlassian.net/browse/SAK-50037|https://sakaiproject.atlassian.net/browse/SAK-50037|smart-link]  
* Discussions - existing Jira [https://sakaiproject.atlassian.net/browse/SAK-41860|https://sakaiproject.atlassian.net/browse/SAK-41860|smart-link] 
* Drop Box - [https://sakaiproject.atlassian.net/browse/SAK-50038|https://sakaiproject.atlassian.net/browse/SAK-50038|smart-link]  
* Email Archive - [https://sakaiproject.atlassian.net/browse/SAK-50039|https://sakaiproject.atlassian.net/browse/SAK-50039|smart-link] 
* Gradebook - [https://sakaiproject.atlassian.net/browse/SAK-50040|https://sakaiproject.atlassian.net/browse/SAK-50040|smart-link]  
* Lessons new content - [https://sakaiproject.atlassian.net/browse/SAK-50041|https://sakaiproject.atlassian.net/browse/SAK-50041|smart-link] 
* Messages - [https://sakaiproject.atlassian.net/browse/SAK-50042|https://sakaiproject.atlassian.net/browse/SAK-50042|smart-link]  
* Podcasts - [https://sakaiproject.atlassian.net/browse/SAK-50043|https://sakaiproject.atlassian.net/browse/SAK-50043|smart-link] 
* Polls - [https://sakaiproject.atlassian.net/browse/SAK-50044|https://sakaiproject.atlassian.net/browse/SAK-50044|smart-link] 
* PostEm - [https://sakaiproject.atlassian.net/browse/SAK-50045|https://sakaiproject.atlassian.net/browse/SAK-50045|smart-link] 
* Section Info - [https://sakaiproject.atlassian.net/browse/SAK-50046|https://sakaiproject.atlassian.net/browse/SAK-50046|smart-link] 
* Sign Up - [https://sakaiproject.atlassian.net/browse/SAK-50047|https://sakaiproject.atlassian.net/browse/SAK-50047|smart-link] 
* Syllabus - [https://sakaiproject.atlassian.net/browse/SAK-50048|https://sakaiproject.atlassian.net/browse/SAK-50048|smart-link] 
* Wiki - [https://sakaiproject.atlassian.net/browse/SAK-50049|https://sakaiproject.atlassian.net/browse/SAK-50049|smart-link] 



As we go forward, I expect that Notifications will become more and more important to users, since they are closely tied with the PWA mobile development. Also, in addition to being a more modern way of notifying users about course activity (many of whom find email to be somewhat â€œold schoolâ€), there are also tentative plans for UI indicators (i.e. little red circles) next to tool names in the left navigation when there is new content or activity within a given tool. (See mockup below.) This would provide another way to let users know when there is new activity in their courses.

!2024-05-01_17-08-43.png|width=201,height=690,alt=""2024-05-01_17-08-43.png""!"
"Gradebook: Bonus point items in Dark Mode are unreadable when the ""saved"" color is present",Bug,Open,Sakai,software,"This is only a problem on Trunk. On 23 and older, the text for points that exceeds the item max is light grey, and unreadable against the light yellow background. In Trunk, the text color is dark, so visible against the light background, but when the points are initially entered, the cell background is a dark green  for a minute to indicate that it was saved successfully. During this time, the point value is not readable - black text on a dark green background. See the attached video (no audio)"
Dashboard-discussion widget: arrow link takes instructor to gradebook instead of discussion for grading,Bug,Open,Sakai,software,"When creating a graded discussion, clicking the > for the topic takes the instructor to the gradebook instead of to the topic.

Since the topic is graded within Discussions, the > should take the instructor to that discussion topic."
"I can't figure out how to add the site preview image to the pinned site.  I did it in try sakai, but I can't find the instructions",Bug,Resolved,Sakai,software,"

!image-20240430-200847.png|width=224,height=125,alt=""image-20240430-200847.png""!



I did this before I canâ€™t remember how i did it."
Announcements: Highlighted status not always accurate in Edit view,Bug,Closed,Sakai,software,"In some cases, the â€˜Editâ€™ view for an announcement does not accurately reflect the Highlighted status of an announcement. See the test plan for a particular, repeatable case."
Grades widget-students: Have the scores in the Grades widget in Dashboard blurred by default,Improvement,Closed,Sakai,software,"Once [https://sakaiproject.atlassian.net/browse/SAK-46652|https://sakaiproject.atlassian.net/browse/SAK-46652|smart-link] is resolved and there is a Grades widget version geared towards students, have the Grades widget be in a collapsed state by default, like it is in the Account Menu:

!image-20240429-231916.png|width=363,height=112,alt=""image-20240429-231916.png""!

This would make sure that a student doesnâ€™t have their grades exposed to students sitting behind or beside them when they enter their home page or the course."
Tasks widget in the account panel should be disabled if tasks are disabled in dashboard,Bug,Closed,Sakai,software,In [https://sakaiproject.atlassian.net/browse/SAK-48525|https://sakaiproject.atlassian.net/browse/SAK-48525|smart-link] the tasks widget is hidden by default but it still appears the users account panel. Using the property {{dashboard.tasks.enabled}} the account panel widget should also obey this setting.
Update Bootstrap-Icons 1.11.3,Bug,Resolved,Sakai,software,"[https://blog.getbootstrap.com//2023/09/12/bootstrap-icons-1-11-0/|https://blog.getbootstrap.com//2023/09/12/bootstrap-icons-1-11-0/|smart-link]  100 New Icons and Fixes

!image-20240429-114638.png|width=1920,height=648,alt=""image-20240429-114638.png""!"
My Tasks Widget doesn't show student data,Bug,Closed,Sakai,software,"The student should see information regarding their own grades, under Account Menu (click userâ€™s profile in upper right), the widgets donâ€™t expand all the time. Not sure why sometimes a section expands properly and other times it does not. It doesnâ€™t matter if there are items to display or not, there is some default text if there are no items."
Update Commons Codec 1.17.0,Bug,Closed,Sakai,software,"h3. Release 1.17.0 â€“ 2024-04-20

||Type||Changes||By||
|!fix.gif|width=20,height=20,alt=""Fix""!|Wrong output of DoubleMetaphone in 1.16.1. Fixes [CODEC-320|https://issues.apache.org/jira/browse/CODEC-320]. Thanks to Martin Frydl, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-codec/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Optimize memory allocation in PhoneticEngine. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-codec/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|BCodec and QCodec encode() methods throw UnsupportedCharsetException instead of EncoderException. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-codec/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Set Javadoc link to latest Java API LTS version. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-codec/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Base32 constructor fails-fast with a NullPointerException if the custom alphabet array is null. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-codec/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Base32 constructor makes a defensive copy of the line separator array. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-codec/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Base64 constructor makes a defensive copy of the line separator array. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-codec/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Base64 constructor makes a defensive copy of a custom alphabet array. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-codec/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add override org.apache.commons.codec.language.bm.Rule.PhonemeExpr.size(). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-codec/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add support for Base64 custom alphabets #266. Thanks to Chris Kocel, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-codec/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add Base64.Builder (allows custom alphabets). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-codec/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add Base32.Builder (allows custom alphabets). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-codec/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add Base64 support for a custom padding byte (like Base32). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-codec/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump org.apache.commons:commons-parent from 66 to 69 #250, #261. Thanks to Dependabot, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-codec/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump commons-io:commons-io from 2.15.1 to 2.16.1 #258, #265. Thanks to Dependabot, Gary Gregory.| |"
Archive assignment attachments and supplementary items,Task,Closed,Sakai,software,"When archiving a site, the archive should include assignment attachments, and supplementary items."
Improve error checking for chat archiving,Task,Closed,Sakai,software,Catch some possible errors when archiving chat. Propagate unhandled errors through a RuntimeException so theyâ€™re visible to the archive tool.
Archive embedded and cross-site files for Lessons content,Improvement,Closed,Sakai,software,"Lessons content can include images and media assets inside html content, from within the siteâ€™s own Resources or from other sites.

These files need to be added to the site archive for completeness."
Special handling for attachment archiving for T&Q and user files,Improvement,Closed,Sakai,software,"There are 2 cases where references to attachment files archived in attachment.xml do not match between whatâ€™s archived by the tool, and the ids in attachment.xml

# Tests & Quizzes: the QTI archiving code removes spaces from attachment paths for unclear reasons here: [https://github.com/sakaiproject/sakai/blob/master/samigo/samigo-qti/src/java/org/sakaiproject/tool/assessment/qti/asi/Item.java#L519|https://github.com/sakaiproject/sakai/blob/master/samigo/samigo-qti/src/java/org/sakaiproject/tool/assessment/qti/asi/Item.java#L519|smart-link] perhaps spaces in paths may not be supported in that version of the QTI spec
# References to files in user workspaces (e.g. in HTML content) have the form /access/content/user/EID/somefile whereas they are archived with /access/content/user/ID/somefile. These may not be possible to resolve correctly if the user concerned is not part of the site being archived (otherwise it would require a full archive of the entire user base to map EID to ID).

To allow the archives to be internally consistent, the cleanest solution here is to change the paths of the resource ids in attachment.xml to match how they are referenced from tool archive files. This needs to be done in BaseContentService, which seems like it shouldnâ€™t need to be concerned with this detail, but there doesnâ€™t appear to be a cleaner solution without much larger code changes."
Archive site realm providers,Task,Closed,Sakai,software,Add information to site.xml about the realm providers associated with the site.
Rubrics - Assignments: Remove Rubric evaluation does not fully clear the rubric form,Bug,Closed,Sakai,software,"When grading assignments with Rubrics using the new grader values if the Remove is used to remove a Rubric evaluation, the form is not fully cleared. The score and comments (if entered) remain populated on the form.Â  (see attached video)"
Lessons: Cannot directly restore some page items in Reorder,Bug,Open,Sakai,software,"Some removed items in the Reorder view (when there are lots of removed items) cannot be directly restored into the left column of the view. Please refer to the attached screencast, LessonsReorderItemDragRegression.mp4.

This bug is evident in Sakai 25 and 23 but not Sakai 22 (and earlier)."
Assignments: Ungraded assignments with rubrics should have blank Grade fields,Bug,Closed,Sakai,software,"The following issue is especially pertinent with the advent of the Allow Extension feature, where an instructor would commonly want to set an extension for one or more students immediately after posting an assignment and doing so without marking the studentâ€™s work as graded.Â 

For assignments associated with rubrics, the Grade field is now populated in Sakai 25 and 23 with a predisposed â€˜0â€™ score instead of leaving this field blank as with Sakai 22 (and earlier versions). Furthermore, the legacy grading interface currently doesnâ€™t permit resetting the score to blank. Refer to the test plan for more details."
Handle cell character limit exception for Question Pool export,Bug,Verified,Sakai,software,"At UPV (sakai 22) we found the following issue when trying to download a question pool:

{noformat}Caused by: java.lang.IllegalArgumentException: The maximum length of cell contents (text) is 32767 characters
                at org.apache.poi.ss.usermodel.CellBase.checkLength(CellBase.java:292)
                at org.apache.poi.ss.usermodel.CellBase.setCellValue(CellBase.java:273)
                at org.sakaiproject.tool.assessment.ui.bean.questionpool.QuestionPoolBean.getAsWorkbook(QuestionPoolBean.java:2635)
                at org.sakaiproject.tool.assessment.ui.bean.questionpool.QuestionPoolBean.writeDataToResponse(QuestionPoolBean.java:2521)
                at org.sakaiproject.tool.assessment.ui.bean.questionpool.QuestionPoolBean.exportPool(QuestionPoolBean.java:2445){noformat}

Caused by an image being inserted â€˜directlyâ€™ into the question statement, instead of its link to Resources.

Basically it is using the raw data of the image, starting with 'data:image/png;base64' and following with thousands of characters.
Reaching the maximum length of cell contents and preventing the file from being downloaded."
"sakai.properties, bottomnav and powered definition doesnt working",Bug,Open,Sakai,software,"We attempted to customize the footers in our newly installed Sakai 23.1 instance by using the 'bottomnav' definition in the sakai.properties file. However, we encountered an issue where the customization changes did not reflect on the site. Additionally, the 'powered' function appears to be malfunctioning as we are unable to see the 'poweredBySakai' logo at the bottom of the main page.  (Sakai Version :  23.1  - source code installation)"
Tests & Quizzes: preview doesn't work for unpublished assessments,Bug,Open,Sakai,software,"The tool breaks when previewing a draft assessment from the edit questions screen (but also from the menu option sometimes).

Not sure about versions affected, as I canâ€™t always reproduce it.

{noformat}Caused by: java.lang.NullPointerException
	at org.sakaiproject.tool.assessment.facade.ExtendedTimeQueries.getEntriesForPub(ExtendedTimeQueries.java:73) ~[samigo-services-22-SNAPSHOT.jar:22-SNAPSHOT]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) ~[spring-aop-5.3.18.jar:5.3.18]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) ~[spring-aop-5.3.18.jar:5.3.18]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.18.jar:5.3.18]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.18.jar:5.3.18]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.18.jar:5.3.18]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.18.jar:5.3.18]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.18.jar:5.3.18]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.18.jar:5.3.18]
	at com.sun.proxy.$Proxy262.getEntriesForPub(Unknown Source) ~[?:?]
	at org.sakaiproject.tool.assessment.facade.ExtendedTimeFacade.getEntriesForX(ExtendedTimeFacade.java:91) ~[samigo-services-22-SNAPSHOT.jar:22-SNAPSHOT]
	at org.sakaiproject.tool.assessment.facade.ExtendedTimeFacade.getEntriesForPub(ExtendedTimeFacade.java:53) ~[samigo-services-22-SNAPSHOT.jar:22-SNAPSHOT]
	at org.sakaiproject.tool.assessment.util.ExtendedTimeDeliveryService.<init>(ExtendedTimeDeliveryService.java:91) ~[samigo-services-22-SNAPSHOT.jar:22-SNAPSHOT]
	at org.sakaiproject.tool.assessment.util.ExtendedTimeDeliveryService.<init>(ExtendedTimeDeliveryService.java:63) ~[samigo-services-22-SNAPSHOT.jar:22-SNAPSHOT]
	at org.sakaiproject.tool.assessment.ui.listener.delivery.BeginDeliveryActionListener.populateDelivery(BeginDeliveryActionListener.java:339) ~[?:?]
	at org.sakaiproject.tool.assessment.ui.listener.delivery.BeginDeliveryActionListener.populateBeanFromPub(BeginDeliveryActionListener.java:220) ~[?:?]
	at org.sakaiproject.tool.assessment.ui.listener.delivery.BeginDeliveryActionListener.processAction(BeginDeliveryActionListener.java:190) ~[?:?]{noformat}"
Tests & Quizzes: file upload question don't keep hide points config,Bug,Closed,Sakai,software,"The *Display Point Value while student is taking the exam* option is not currently working for questions of type â€œFile uploadâ€, so points are displayed for students anyway."
"Gateway 'Features' page: ""More"" button shrinks after clicking",Bug,Resolved,Sakai,software,After clicking the More button for any of the sections on the features page the More button shrinks and is very hard to see. Attached is a picture of this occurring. 
Rubrics: Copy criterion not optimal when criterion groups are used,Feature Request,Open,Sakai,software,"Copy criterion function places the copied criterion at the bottom of the rubric. If one or more criterion groups are being used then this placement may require the instructor to drag & drop the copied criterion to the intended location within the applicable criterion group or perhaps a section not using a group.Â 

Optimally the UX should placed the copied criterion to the bottom of the current group or to prior to the next group (if one exists and the criterion being copied is not in a group)"
Grader/Rubrics: Retaining criterion comments from previous student,Bug,Closed,Sakai,software,"When grading assignments with Rubrics using the new grader values in the comment control show previous entered value when opened for a subsequent student. If the instructor changes their mind and does not want to enter a comment they will have to either clear the comment form or change focus outside of the comment form and avoid clicking â€˜Doneâ€™.  (see attached video)

Note that if the instructor doesnâ€™t open the comment form at all, then fortunately the previous value is not saved to the grading for the new student. "
Unexpected end of JSON input at SakaiRubricAssociation.js,Bug,Closed,Sakai,software,"This is in Assignments, editing an assignment, where it fetches rubric associations.

The fetch returns a 204 which is in 200-299 so it is â€œokâ€ but empty

/api/sites/d0ec154a-c5b5-4b7f-8b97-8463b370ed87/rubric-associations/tools/sakai.assignment.grades/items/e1145b0a-e15a-44c2-8cae-7b62b8b6944f"
Site Info: Students are able to join/leave a Joinable Set after the Close Date ends,Bug,Verified,Sakai,software,"If a student stays on the Site Info page AFTER the Close Date for a Joinable Set ends, and does not refresh their page, the Join/Unjoin button is still active, allowing the user to join/unjoin the group.



{panel:bgColor=#deebff}
*Dev note*

On the merged commit, two conditions were added to join a group:

* make sure the close date hasn't been reached (if there is) - also to leave the group
* each joinable set can have multiple associated groups, make sure the user doesn't join more than one of them

Their respective alert messages are also included, plus one in case the group stops being joinable
{panel}"
Site Info: Creating a Joinable Set with a 5-digit year has unknown behavior,Bug,Open,Sakai,software,"In Site Info, if you create a Joinable Set with an Open/Close date with a 5-digit year, the user is sent back to the Site Info page, and the joinable set is not created. No error message is shown."
Dashboard-Tasks: Open assignments not listed under student's task widget if assignment was created before student was added to course,Bug,Open,Sakai,software,"If the instructor sets up the course before students are added, open assignments are not displaying under Tasks for students n the Dashboard."
Gateway: External App integrations page does not follow dark mode,Bug,Open,Sakai,software,The page where external app integrations are defined does not follow dark mode theme. Refer to screenshot attached.
Discussions/Rubrics: Criteria comments not saved while grading,Bug,Closed,Sakai,software,"Discussion tool grading can via modal with rubrics shows console error, comment control is initially populated with â€˜undefinedâ€™ and after entering comments and submitting grade, the comments are not saved.  See attached image and video.

The comments are not saved in Sakai 23 & 25, currently due to the grading context in Discussions, where the rubric is populated within an iframe. However, this was the same context handled by Sakai 22 & 21. Criterion comments are saved for those versions, so this Jira is a regression."
Error with some Microsoft requests,Bug,Resolved,Sakai,software,"When accessing some Microsoft tools, errors or inconsistent data occur. This is related to [https://sakaiproject.atlassian.net/browse/SAK-49758|https://sakaiproject.atlassian.net/browse/SAK-49758|smart-link]. After removing Autowired annontations in MicrosoftCommonServiceImpl, these properties have not been added to components.xml"
SakaiDatePicker: copy pasting values and more,Bug,Open,Sakai,software,"In some screens like when creating an assignment the previous date picker allowed you to copy and paste full dates into the field. This is now no longer an option, navigation is more compartmentalized which can make things slower/harder to use.

Plus when setting the values using keyboard sometimes they get cleared up and default to letters (i.e. mm or yyyy). I also experienced some validation issues when submitting and getting alerts, but donâ€™t know exactly how to reproduce it.

I feel this can actually be considered as a regression comparing to the previous options."
Library - npm update autoprefixer,Bug,Resolved,Sakai,software,[INFO] Browserslist: caniuse-lite is outdated. Please run: [INFO] npx browserslist@latest --update-db [INFO] Why you should do it regularly: [https://github.com/browserslist/browserslist#browsers-data-updating|https://github.com/browserslist/browserslist#browsers-data-updating|smart-link] 
Webcomponents: do not fire /api/users/me/grades until clicked,Bug,Closed,Sakai,software,"[https://sakaiproject.atlassian.net/browse/SAK-49388|https://sakaiproject.atlassian.net/browse/SAK-49388|smart-link] has some context.

Fetching all grades for a user can be enormously expensive

There is no reason to call it unless the user wants to see it"
Dashboard: Inconsistencies with information being displayed in the â€œGradesâ€ widget area of Instructor view,Bug,Open,Sakai,software,"As a result of some testing that I have been doing on the â€œDashboardâ€ tool for our Sakai 23 Accessibility test script, I observed several inconsistencies with how the number of ungraded items indicator in the â€œGradesâ€ widget area is working.

Â 

I did a quick search of Jira and found SAK-45039, which at first glance, appeared to have fixed the issue in 22.X and 21.X. However, after testing this issue myself in 22.X (MySQL 5.7 branch) and reading through SAK-47147, I donâ€™t believe the issues that were originally reported were ever fixed, or something happened to cause a regression.

Â 

Beyond the mechanics, there are some terminology and logic tweaks that I believe could help improve the overall usability and understanding of the information being displayed within the â€œGradesâ€ widget area for the Instructor view.

Â 

I have attached a MS Word document that contains more detail about the process I used during my testing, and specific observations made, but here are the key takeaways:

Â 

Â·Â Â Â Â Â Â Â Â  There are inconsistencies with how items that originate in the Gradebook, or items that get associated with existing Gradebook items are handled vs. assignments that are created/graded from within a source tool.

Â·Â Â Â Â Â Â Â Â  It might help to makeÂ  a distinction between â€œitemsâ€ and â€œsubmissionsâ€ â€“ or maybe more accurately, between â€œsubmissions,â€ â€œgraded submissions,â€ and â€œungraded submissionsâ€

Â·Â Â Â Â Â Â Â Â  Perhaps the indicator should report two separate things â€“ the number of submissions, and the number of submissions that still need to be graded.

Â·Â Â Â Â Â Â Â Â  It appears that the average score is calculated differently for Assessments completed/scored from within Tests & Quizzes, which appears to be averaging the scores of submissions that have been graded with completed submissions that have not been graded yet, treating these ungraded submissions as â€œ0â€ scores??

Â·Â Â Â Â Â Â Â Â  Along those same lines, maybe the â€œaverage scoreâ€ should be relabeled to â€œaverage score of submissions that have been gradedâ€ and the logic adjusted accordingly."
Assignments: Improve performance and UX of Assignments by student view  ,Feature Request,Resolved,Sakai,software,"On big sites with a lot of students and assignments the â€œAssignments by studentâ€ view can have significant loading times. This is mainly because of several checks for each student against each assignment on the site - even all the studentâ€™s assignments collapsed. Also when expanding a studentâ€™s assignments there are always all assignments displayed, not just the assignments assigned to the students.

The proposed solution is to display all the sites students based on the view selection â€œEntire siteâ€ or a particular group. When a clicking on a student, that has no assignments assigned. there will be no entries shown.

Furthermore this will incorporate the usage of the datatables library with will allow client side search of all the visible table rows and sorting for student name and assignent title of (expanded) assignmets. The server side search will be removed in favor of the new one - the only drawback is that the search content will not be passed to the export (timetable), that is disabled by default."
Move search tool css into library,Bug,Resolved,Sakai,software,The search tool still has its own styles in the search folder. Move them into the library sass build so they are compiled and minified into the tool css.
Assignments: Submission export breaks on big data set,Bug,Resolved,Sakai,software,"On the assignments by student view an excel file with the student submission can be exported if the sakai property {{timesheet.sites.allowed=all}}
 is set. When the site has a lot of students and/or a lot of assignments, the file downloaded will be empty. This happens when the number at about over 9.200 rows - for example with 100 students and assignments, because this happens when the number of cell (styles) exceeds 64.000. The issue seems to be, that styles applied to the cells are newly created for each cell instead of being re-used. The proposed fix would be to move the creation of the cell-style out of the loops that iterate over the rows/cells, and just reuse them when the cells are created.

*Details on the error and solution*

[https://stackoverflow.com/questions/66801718/java-lang-illegalstateexception-the-maximum-number-of-cell-styles-was-exceeded|https://stackoverflow.com/questions/66801718/java-lang-illegalstateexception-the-maximum-number-of-cell-styles-was-exceeded|smart-link] 
{noformat}2-Apr-2024 09:22:30.400 WARN [http-nio-8080-exec-6] o.s.a.i.AssignmentServiceImpl.lambda$getHttpAccess$2 Could not stream the grades for reference: /assignment/a/cb4b37e5-7de5-4587-8129-adb95aadfd3f java.lang.IllegalStateException: The maximum number of Cell Styles was exceeded. You can define up to 64000 style in a .xlsx Workbook
        at org.apache.poi.xssf.model.StylesTable.createCellStyle(StylesTable.java:860) ~[?:?]
        at org.apache.poi.xssf.usermodel.XSSFWorkbook.createCellStyle(XSSFWorkbook.java:788) ~[?:?]
        at org.apache.poi.xssf.streaming.SXSSFWorkbook.createCellStyle(SXSSFWorkbook.java:922) ~[?:?]
        at org.sakaiproject.assignment.impl.GradeSheetExporter.getGradesSpreadsheet(GradeSheetExporter.java:405) ~[?:?]
        at org.sakaiproject.assignment.impl.GradeSheetExporter.writeGradesSpreadsheet(GradeSheetExporter.java:445) ~[?:?]
        at org.sakaiproject.assignment.impl.AssignmentServiceImpl.lambda$getHttpAccess$2(AssignmentServiceImpl.java:581) ~[?:?]
        at org.sakaiproject.access.tool.AccessServlet.dispatch(AccessServlet.java:411) [sakai-access-impl-22-SNAPSHOT.jar:22-SNAPSHOT]
        at org.sakaiproject.access.tool.AccessServlet.doGet(AccessServlet.java:206) [sakai-access-impl-22-SNAPSHOT.jar:22-SNAPSHOT]
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:670) [servlet-api.jar:4.0.FR]
        at org.sakaiproject.vm.ComponentServlet.service(ComponentServlet.java:56) [sakai-velocity-tool-22-SNAPSHOT.jar:22-SNAPSHOT]
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:779) [servlet-api.jar:4.0.FR]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [catalina.jar:9.0.68]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [catalina.jar:9.0.68]
        at org.sakaiproject.oauth.filter.OAuthPostFilter.doFilter(OAuthPostFilter.java:76) [oauth-api-22-SNAPSHOT.jar:22-SNAPSHOT]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [catalina.jar:9.0.68]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [catalina.jar:9.0.68]
        at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:496) [sakai-kernel-api-22-SNAPSHOT.jar:22-SNAPSHOT]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [catalina.jar:9.0.68]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [catalina.jar:9.0.68]
        at org.sakaiproject.oauth.filter.OAuthPreFilter.doFilter(OAuthPreFilter.java:74) [oauth-api-22-SNAPSHOT.jar:22-SNAPSHOT]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [catalina.jar:9.0.68]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [catalina.jar:9.0.68]
        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-websocket.jar:9.0.68]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [catalina.jar:9.0.68]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [catalina.jar:9.0.68]
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) [catalina.jar:9.0.68]
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [catalina.jar:9.0.68]
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) [catalina.jar:9.0.68]
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [catalina.jar:9.0.68]
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [catalina.jar:9.0.68]
        at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687) [catalina.jar:9.0.68]
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [catalina.jar:9.0.68]
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) [catalina.jar:9.0.68]
        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) [tomcat-coyote.jar:9.0.68]
        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-coyote.jar:9.0.68]
        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893) [tomcat-coyote.jar:9.0.68]
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789) [tomcat-coyote.jar:9.0.68]
        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-coyote.jar:9.0.68]
        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-util.jar:9.0.68]
        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-util.jar:9.0.68]
        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-util.jar:9.0.68]
        at java.lang.Thread.run(Thread.java:829) [?:?]{noformat}"
 Gradebook item quick entry - Wrong student order,Bug,Open,Sakai,software,"Gradebook item quick entry - Wrong student order.

Order should be the same on both.

See attached images"
 Gradebook item quick entry error using commas (on Spanish),Bug,Open,Sakai,software, Gradebook item quick entry error using commas (on Spanish). See attached images
The commons tool is not properly responsive on small displays.,Bug,Verified,Sakai,software,See [https://sakaiproject.atlassian.net/browse/SAK-49969|https://sakaiproject.atlassian.net/browse/SAK-49969|smart-link] 
Lessons: Insufficient PDF height in collapsible sections,Bug,Open,Sakai,software,"When embedding a PDF within a collapsible section in Lessons, the iframe height is not configured correctly, and the PDF cannot be viewed by students.

!v25.png|width=1220,height=294,alt=""v25.png""!"
Profile: SAKAI_LOCKS_INDEX error as soon as user clicks on Profile from their home page,Bug,Closed,Sakai,software,"Not sure if this is related to the issue in [https://sakaiproject.atlassian.net/browse/SAK-49990|https://sakaiproject.atlassian.net/browse/SAK-49990|smart-link] 

On 23x (not on 25x), when a user logs in and clicks on Profile, the following errors are in the server logs (I did not see any console errors):

{quote}23-Apr-2024 19:56:06.222 WARN [http-nio-20023-exec-26] o.s.d.i.BasicSqlService.dbWriteCount Sql.dbWrite(): recordAlreadyExists: true, failQuiet: 1, : error code: 1062, sql: insert into SAKAI_LOCKS (TABLE_NAME,RECORD_ID,LOCK_TIME,USAGE_SESSION_ID) values (?, ?, ?, ?), binds:  SAKAI_PREFERENCES -759220944 - 82d4e2b6-0152-46f1-948b-5e7f63a242d4 20240423235606191 7bb1fa18-ad58-4183-8d47-f6a7ce1c2480, error: java.sql.SQLIntegrityConstraintViolationException: (conn=119064) Duplicate entry 'SAKAI_PREFERENCES--759220944 - 82d4e2b6-0152-46f1-948b-5e7f63...' for key 'SAKAI_LOCKS_INDEX'{quote}

{quote}23-Apr-2024 19:56:06.224 WARN [http-nio-20023-exec-26] o.s.p.c.h.SiteHandler.doSite Exception caught whilst setting selectedPage property: org.sakaiproject.exception.InUseException id: 82d4e2b6-0152-46f1-948b-5e7f63a242d4{quote}

{quote}23-Apr-2024 19:56:06.237 WARN [http-nio-20023-exec-26] o.s.p.c.h.SiteHandler.doSite Post buffer bypass CTI=sakai.profile2 URL=[https://qa23-maria.nightly.sakaiproject.org/portal/site/~82d4e2b6-0152-46f1-948b-5e7f63a242d4/tool/d2a3fa18-a0e6-41d2-92f1-ed01089342d1/XJ6BBmHhiB8yhz6oCzOF2HlHKekL7HmqYZkwwMBZt55XNJUWre0MF2WX10hRqLIlyGK-Snt_u5KJJ0m3oONYI4-vAhVK5N7U7MA8qTLwkYTTHQOWqC2x6SKKDJDsaDe3u3MN0AtjmYu08KN1aJ2Qq210t3eR4mtQJwjdtL67YBPBLvpdN8gDR9R1-oi_db8n/XJ653/Zkwe5/nt_08/CzO07/UWr0f|https://qa23-maria.nightly.sakaiproject.org/portal/site/~82d4e2b6-0152-46f1-948b-5e7f63a242d4/tool/d2a3fa18-a0e6-41d2-92f1-ed01089342d1/XJ6BBmHhiB8yhz6oCzOF2HlHKekL7HmqYZkwwMBZt55XNJUWre0MF2WX10hRqLIlyGK-Snt_u5KJJ0m3oONYI4-vAhVK5N7U7MA8qTLwkYTTHQOWqC2x6SKKDJDsaDe3u3MN0AtjmYu08KN1aJ2Qq210t3eR4mtQJwjdtL67YBPBLvpdN8gDR9R1-oi_db8n/XJ653/Zkwe5/nt_08/CzO07/UWr0f]{quote}"
"Roster-View Profile: users receive ""The site you requested is not available"" after clicking to view a user's profile",Bug,Closed,Sakai,software,"Both 25x and 23x show ""The site you requested is not available"" after clicking to view a userâ€™s profile from the roster the majority of the time for students and I did have issues with the instructor for a while. I did not see any browser console errors.

The errors in the server logs are different for 25x than they are for 23x, so I will create a separate Jira for those server logs.

25x

{quote}22-Apr-2024 19:21:08.650 INFO [http-nio-20313-exec-46] o.s.e.u.s.DirectServlet.dispatch Could not process entity: /profile/aa46f763-69ae-4d9a-a3dc-1091b18d7d40 (404)[null]: Error retrieving profile image for aa46f763-69ae-4d9a-a3dc-1091b18d7d40 : java.io.IOException: Broken pipe (rethrown){quote}

Note: when receiving a connection notification, clicking the â†’ on the notification loads the profile without any issues, both on 25x and 23x"
Upgrade Gradebook from Wicket 6 to Wicket 9,Improvement,Resolved,Sakai,software,Upgrade the tools view framework to wicket 9
Inserting paragraph break into Assignment Instructions breaks the LTI tool connection for External Tool Assignments,Bug,Closed,Sakai,software,"If you have an Assignment which is using the External Tool assignment type, and you add a paragraph break to the Assignment Instructions field, it breaks the LTI tool launch. A single line or single paragraph of instructions seems to be fine. However, if you insert a second paragraph or line break, the LTI tool no longer works, and you get the following message: 

External tool has finished with an error: OAuth validation fail key=12345 delta=2 error=Invalid signature ours= cYnnvB6Ne5Y/7X4SsqcefU0171E= yours=i8OLuW5wgM9bqn/FEEAYQ4zGHeI=

You can close this window / tab

(Screenshot of error below)

This is LTI 1.1 only - LTI 1.3 works.

!2024-04-22_11-32-28.png|width=91.66666666666667%,alt=""2024-04-22_11-32-28.png""!

I tested this with an assignment that was set up using Sticky Grader as the LTI tool, and it was working perfectly when I had a single line of text for the instructions. I was able to log in as a student and submit the assignment without any issues. 

!2024-04-22_11-43-27.png|width=83.33333333333334%,alt=""2024-04-22_11-43-27.png""!

However, as soon as I edited that assignment to add a second line / paragraph break in the instructions, as shown below, the LTI launch resulted in the error message shown above.

!2024-04-22_11-45-42.png|width=75%,alt=""2024-04-22_11-45-42.png""!"
Assignments: Submission export breaks on big data set,Bug,Resolved,Sakai,software,"When exporting submissions to an excel file on a site with a lot of studentâ€™s and/or assignments an empty file will be exported. The critical amount of data is a bit below 10.000 rows - (64000 styled cells). The issue happens due to an illegal number of style definitions on the excel file, due to the same style being created for each cell - the style is created and added to the style while looping through the entries. A proposed solution would be to move the creation of the style out of the loops and only add it to the cell within the loop. This should also improve performance on smaller data sets where the the download does not â€œblow upâ€.

The sakai property {{timesheet.sites.allowed=all}} should be set to be able to use the download on Assignments by students.
Details:
[https://stackoverflow.com/questions/66801718/java-lang-illegalstateexception-the-maximum-number-of-cell-styles-was-exceeded|https://stackoverflow.com/questions/66801718/java-lang-illegalstateexception-the-maximum-number-of-cell-styles-was-exceeded|smart-link] 

*Details*

{noformat}22-Apr-2024 09:22:30.400 WARN [http-nio-8080-exec-6] o.s.a.i.AssignmentServiceImpl.lambda$getHttpAccess$2 Could not stream the grades for reference: /assignment/a/cb4b37e5-7de5-4587-8129-adb95aadfd3f
java.lang.IllegalStateException: The maximum number of Cell Styles was exceeded. You can define up to 64000 style in a .xlsx Workbook
        at org.apache.poi.xssf.model.StylesTable.createCellStyle(StylesTable.java:860) ~[?:?]
        at org.apache.poi.xssf.usermodel.XSSFWorkbook.createCellStyle(XSSFWorkbook.java:788) ~[?:?]
        at org.apache.poi.xssf.streaming.SXSSFWorkbook.createCellStyle(SXSSFWorkbook.java:922) ~[?:?]
        at org.sakaiproject.assignment.impl.GradeSheetExporter.getGradesSpreadsheet(GradeSheetExporter.java:405) ~[?:?]
        at org.sakaiproject.assignment.impl.GradeSheetExporter.writeGradesSpreadsheet(GradeSheetExporter.java:445) ~[?:?]
        at org.sakaiproject.assignment.impl.AssignmentServiceImpl.lambda$getHttpAccess$2(AssignmentServiceImpl.java:581) ~[?:?]
        at org.sakaiproject.access.tool.AccessServlet.dispatch(AccessServlet.java:411) [sakai-access-impl-22-SNAPSHOT.jar:22-SNAPSHOT]
        at org.sakaiproject.access.tool.AccessServlet.doGet(AccessServlet.java:206) [sakai-access-impl-22-SNAPSHOT.jar:22-SNAPSHOT]
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:670) [servlet-api.jar:4.0.FR]
        at org.sakaiproject.vm.ComponentServlet.service(ComponentServlet.java:56) [sakai-velocity-tool-22-SNAPSHOT.jar:22-SNAPSHOT]
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:779) [servlet-api.jar:4.0.FR]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [catalina.jar:9.0.68]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [catalina.jar:9.0.68]
        at org.sakaiproject.oauth.filter.OAuthPostFilter.doFilter(OAuthPostFilter.java:76) [oauth-api-22-SNAPSHOT.jar:22-SNAPSHOT]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [catalina.jar:9.0.68]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [catalina.jar:9.0.68]
        at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:496) [sakai-kernel-api-22-SNAPSHOT.jar:22-SNAPSHOT]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [catalina.jar:9.0.68]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [catalina.jar:9.0.68]
        at org.sakaiproject.oauth.filter.OAuthPreFilter.doFilter(OAuthPreFilter.java:74) [oauth-api-22-SNAPSHOT.jar:22-SNAPSHOT]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [catalina.jar:9.0.68]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [catalina.jar:9.0.68]
        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-websocket.jar:9.0.68]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [catalina.jar:9.0.68]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [catalina.jar:9.0.68]
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) [catalina.jar:9.0.68]
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [catalina.jar:9.0.68]
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) [catalina.jar:9.0.68]
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [catalina.jar:9.0.68]
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [catalina.jar:9.0.68]
        at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687) [catalina.jar:9.0.68]
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [catalina.jar:9.0.68]
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) [catalina.jar:9.0.68]
        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) [tomcat-coyote.jar:9.0.68]
        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-coyote.jar:9.0.68]
        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893) [tomcat-coyote.jar:9.0.68]
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789) [tomcat-coyote.jar:9.0.68]
        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-coyote.jar:9.0.68]
        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-util.jar:9.0.68]
        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-util.jar:9.0.68]
        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-util.jar:9.0.68]
        at java.lang.Thread.run(Thread.java:829) [?:?]{noformat}"
Assignments-Rubrics: Allow students to self-report their work checkbox alignment and spacing needed,Bug,Open,Sakai,software,"[https://sakaiproject.atlassian.net/browse/S2U-34|https://sakaiproject.atlassian.net/browse/S2U-34|smart-link] introduced a new feature in assignments to allow students to self-report using a rubric.

The checkbox should be aligned with the other checkboxes (currently it looks almost like itâ€™s part of Hide Rubric from Student) and a space is needed between the checkbox and the word Allow."
Assignments: Peer reviewer does not have a Grade box,Bug,Verified,Sakai,software,Currently this does not affect 23x. Peer reviewers do not see the grade textbox when grading a peer review.
Use SASS math functions,Bug,Verified,Sakai,software,"Builds currently spit out lots of warnings like this:



{noformat}[INFO] Recommendation: math.div($value, 255)
[INFO]
[INFO] More info and automated migrator: https://sass-lang.com/d/slash-div
[INFO]
[INFO]     â•·
[INFO] 133 â”‚     $value: if($value / 255 < .03928, $value / 255 / 12.92, nth($_luminance-list, $value + 1));
[INFO]     â”‚                                       ^^^^^^^^^^^^
[INFO]     â•µ
[INFO]     src/sass/themes/_base.scss 133:39  luminance()
[INFO]     src/sass/themes/_base.scss 117:8   contrast-ratio()
[INFO]     src/sass/themes/_base.scss 101:22  color-contrast()
[INFO]     src/sass/themes/_base.scss 59:12   defineColorHSL()
[INFO]     src/sass/themes/_base.scss 178:3   @import
[INFO]     src/sass/tool.scss 49:9            root stylesheet{noformat}"
Portal Bullhorns: Chrome does not push the notifications to the OS,Bug,Open,Sakai,software,"Chrome is up-to-date: Version 124.0.6367.61 (Official Build) (64-bit) and the setting is set to allow notifications, but Chrome is not pushing them to the desktop - am on Win10. Edge and Firefox are working on both 25x and 23x.

See the video in [https://sakaiproject.atlassian.net/browse/SAK-49287|https://sakaiproject.atlassian.net/browse/SAK-49287|smart-link] on setting this up for the different browsers. "
Display the Category Average somewhere in the Gradebook UI,Bug,Open,Sakai,software,"We should find a place to display the Category Average inside the UI. Potential places:

# Grades page under the category, click the chevron and View Statistics on the Category
# In the Settings, while editing the Categories we could display the average"
Forums: Option for read-only after close date does not import,Bug,Closed,Sakai,software,"This feature was added in 23.0 by [https://sakaiproject.atlassian.net/browse/SAK-25018|https://sakaiproject.atlassian.net/browse/SAK-25018|smart-link]

However, when discussions are imported from one site to another, this option does not import. The box is unchecked, regardless of itâ€™s status in the original site. I think this needs to be included in the import since instructors could import from a site with the read-only after close option checked, update the dates in Date Manager, and never realize that the posts will be hidden completely after the close date instead of locked. "
Lessons: remove opt-src,Improvement,Open,Sakai,software,"Lessons has an opt-src which seems totally out of maintenance, compilation is skipped and it wonâ€™t work (since who knows when but a few years for sure) since for example the Assignment2Entity class calls an nonexistent GradingService method (it already did that before the refactor so itâ€™s been a while).

It seems related to YAFT, MNEME, and Assignments 2 which donâ€™t seem to be alive at this point. Thereâ€™s also some SCORM stuff (from 10 years ago), but as I said it doesnâ€™t work as it is so in case someone needs it something new should be done anyway."
"Site Info > Auto-groups (official site): when creating groups for students, there are ""extra"" listings without name, user eid ",Bug,Resolved,Sakai,software,"This is not an issue on 23x at this time. To test this, you need an official site with many students, TAs and instructors. When creating auto-groups for the student role only, it seems other members are counted when figuring out how many users to add to a group, and then any non-student users seem to be â€œaddedâ€ on the create groups page with just â€œStudentâ€ in the row. Once the groups are created, it still shows the wrong number for the count and if you count the students in the group, it does not match up.

So far, I have only been able to reproduce this issue with â€œofficialâ€ sites."
UI Changes to the Student View of the Assignments List,Feature Request,Open,Sakai,software,"This Jira is related to the [https://sakaiproject.atlassian.net/browse/SAK-49976|https://sakaiproject.atlassian.net/browse/SAK-49976|smart-link] feature request. The T&L/UX group reviewed the Assignments status messages, as well as the UI, and we have come up with some proposed improvements for the student view. (See the above related Jira for changes proposed for the instructor view.)

The following changes are proposed:

* Remove the â€œLast Modified Byâ€ and â€œModified Dateâ€ columns from the student view, since they provide no actionable information that is of interest to students.
* Add an â€œAssignment Statusâ€ column that is similar to the one in the instructor view of the assignment list. Students donâ€™t see Draft assignments at all. However, it would be useful for students to know which assignments are Open, Overdue, Closed, or Not Open yet, since this information is not always apparent from the Open/Due dates, particularly if late submissions are accepted. 
* In the â€œDue Dateâ€ column, if a student has been given a different accept until date, as a result of a resubmission or an extension, the due date exception should appear in bold below the original due date. Many users have complained that students are not always aware of the new deadline when they are granted a resubmission or extension date, and this would be a way to surface that information for them.
* Change the â€œStatusâ€ column label to â€œSubmission Statusâ€ to make it clear that this status is for the studentâ€™s submission, not for the assignment overall. This is also consistent with the labeling in the instructor view for the same status information.
* Add the â€œSubmitted Dateâ€ column (which is currently available for instructors but not students). This will make it easier for students to tell at a glance when they have submitted.
** If there are multiple submissions/resubmissions, include a â€œView Historyâ€ link to view the submission history for that assignment.
* Add a â€œGradeâ€ column (again, similar to the one found in the instructor view of student submissions) so that students can tell at a glance what their grade is for any items that have been graded and released. 
** If there is a rubric associated with an assignment, the rubric icon should also appear in the Grade column next to the score.

See the mockup below illustrating the proposed changes. 



!student view of assignment list.png|width=100%,alt=""student view of assignment list.png""!"
Remove intermediate files from build with maven-clean-plugin,Bug,Resolved,Sakai,software,The maven build produces a lot of intermediate files and they should all be cleaned up by the clean goal.
UI Changes to the Instructor View of Student Assignment Submissions List,Feature Request,Open,Sakai,software,"Recently there has been some confusion reported from users about the various assignment submission statuses and what they mean. Part of this confusion may be a result of combining the instructor and student statuses (which are separate items in the database) into a single column when viewed by instructors. The T&L/UX group reviewed the status messages, as well as the UI, and we have come up with some proposed improvements for the instructor view. (See [https://sakaiproject.atlassian.net/browse/SAK-49978|https://sakaiproject.atlassian.net/browse/SAK-49978|smart-link]  for the proposed student view improvements.)

Iâ€™m attaching a mockup showing the following suggested changes:

* Rather than combining the instructor and student status messages into a single column as it is now, which seems to cause confusion, we would like to split the messages into two separate columns: â€œSubmission Statusâ€ which displays the student submission status exactly as the student sees it, and â€œReview Statusâ€ which displays the instructor status for each submission. 
** Having two separate columns makes it more clear where the data comes from and what it means. It also allows sorting by column to group like statuses together.
*** Note that we would also like the current sort order to be preserved when entering the Grader view. I will open a separate Jira about that. 
** In the â€œReview Statusâ€ column - when a student submission is In Progress (meaning that there has been a draft saved) we would like the instructor status to be â€œDraft Submissionâ€ rather than â€œUngradedâ€ since there is no official submission yet
* The â€œSubmitted Dateâ€ columns stays the same, with the addition of a â€œView Historyâ€ link which appears if there is more than one submission and/or resubmissions for a given student. I would envision a modal or popup of some sort when this is selected which would display the submission history for that user.
* A new â€œAccept Until Dateâ€ column has been added. This column displays the default Accept Until Date for the assignment for all users, something which is not easily visible to the instructor without looking at the assignment Settings. However, if a student has been granted an extension or a different resubmission deadline, those exceptions will be in bold and red font, so that the instructor can easily see which students have been granted exceptions without having to view an individual student submission to locate that information. 
* The â€œGradeâ€ and â€œReleasedâ€ columns remain the same.
* The order of the columns has been modified to the following, from left to right: Submission Status, Submitted Date, Accept Until Date, Review Status, Grade, Released 

!instructor-submisson-view.png|width=100%,alt=""instructor-submisson-view.png""!"
EntityManager is adding non loadable entities by producers to unresolvable roots cache,Bug,Verified,Sakai,software,This is a regression from [https://sakaiproject.atlassian.net/browse/SAK-49283|https://sakaiproject.atlassian.net/browse/SAK-49283|smart-link] where when an EntityProducer canâ€™t load an entity it erroneously adds the root to the unresolvable roots cache. This causes any following lookups for that EP to fail. The solution is to not add the root to the unresolvable cache when an EP was found but couldnâ€™t load the entity.
Update Apache Commons Text 1.12.0,Bug,Closed,Sakai,software,"[ANNOUNCE] Apache Commons Text Version 1.12.0
The Apache Commons team is pleased to announce Apache Commons Text
Version 1.12.0.

Apache Commons Text is a set of utility functions and reusable
components for the purpose of processing and manipulating text that
should be of use in a Java environment.

Release 1.12.0. Requires Java 8 or above.

Historical list of changes:
[https://commons.apache.org/proper/commons-text/changes-report.html|https://commons.apache.org/proper/commons-text/changes-report.html|smart-link] 

For complete information on Apache Commons Text, including
instructions on how to submit bug reports, patches, or suggestions for
improvement, see the Apache Commons Text website:

[https://commons.apache.org/proper/commons-text|https://commons.apache.org/proper/commons-text|smart-link] 

Download page: [https://commons.apache.org/proper/commons-text/download_text.cgi|https://commons.apache.org/proper/commons-text/download_text.cgi|smart-link] 

Gary Gregory"
"Multiple tools always displayed in Dark Mode, regardless of settings",Bug,Resolved,Sakai,software,"I have found several tools that display in Dark Mode when the user has light mode selected. They can force light mode by going to the user menu, toggling dark mode on and off again, but that lasts only until the page is refreshed. 

This is not afffecting Trunk, just 23.

Tools affected are:

* Dashboard (user and site)
* Profile
* Site Info â†’ Manage Groups
* Email
* Podcasts
* Postem"
"Add a ""release grades automatically"" option for LTI Assignments",Feature Request,Open,Sakai,software,"Currently, when you create an LTI Assignment type and configure the assignment settings to go to the Gradebook, the LTI score is not actually sent to the gradebook until the instructor releases the grades for that assignment. While the release grades feature is useful when hand-grading assignments, it is much less useful in the case of LTI assignments which are graded automatically. In fact, the need to release the grades in order for students to see them in the gradebook adds an extra task for the instructor for auto-graded LTI assignments, since instructors must go in and release grades for each assignment. 

This is not the case in Lessons. When you add a graded or auto-graded LTI item on a Lessons page, it will send the grade immediately without the need to manually release grades. However, Lessons does not give you many of the other features that are part of Assignments, such as due dates, email notifications, reminders, calendar events, etc. which make using the Assignments tool preferable to using Lessons for LTI items.

I would like to propose that we add a â€œrelease grades automaticallyâ€ option in the assignment settings screen for LTI assignments. The default behavior can remain as it is, with grades requiring release. However, having the option to automatically release scores when sent via LTI would be a nice time-saver when used with automatically graded LTI items. 

Iâ€™ve included a mockup below. Perhaps this new option could be grayed out or not shown at all for non-LTI assignments. 



!lti-auto-release-scores (5fa74f13-4500-43f1-9358-a54ad19a1c2c).png|width=66.66666666666667%,alt=""lti-auto-release-scores.png""!"
LTI: Cookie issues,Bug,Open,Sakai,software,"There are a few cookie issues when adding an LTI tool. The quickest test is to add the store and then add Trophy to Lessons and launch Trophy with the browser console open. Not sure if this would be considered a â€œSakaiâ€ issue or purely Tsugi, but will need to watch if other pages are affected also.

* A 'set-cookie' header doesn't have the 'secure' directive. (Error)
* A 'set-cookie' header doesn't have the 'httponly' directive. (Warning)
* Reading cookie in cross-site context will be blocked in future Chrome versions (Warning)
* The 'Pragma' header should not be used, it is deprecated and is a request header only. (Warning)
* The 'X-Frame-Options' header should not be used. A similar effect, with more consistent support and stronger checks, can be achieved with the 'Content-Security-Policy' header and 'frame-ancestors' directive. (Warning)

URL given for fixing these issues: [Valid `Set-Cookie` header | webhint documentation|https://webhint.io/docs/user-guide/hints/hint-validate-set-cookie-header/?source=devtools]"
Sakai Mobile View is too wide or not responsive in several tools,Bug,Open,Sakai,software,"When viewed in mobile view, the responsive design for several tools is too wide for a cell-phone sized mobile device, resulting in a screen that appears to cut off data on one side and requires sideways scrolling to view the information. This is a very awkward and unpleasant experience for mobile device users. 

Ironically, some of the â€œolderâ€ tools in Sakai seem to be sized appropriately when viewed in mobile view, while several of the â€œnewerâ€ tools are the ones that donâ€™t size correctly for the screen. 

I have gone through tool by tool for all of the core, unstealthed tools typically available in a course site. I will include screenshots of the problematic ones below. 

Note: For my testing and screenshots, I used Firefoxâ€™s Responsive Design View with the iPhone SE 2nd edition selected for the size profile (i.e. 375 x 667). I also spot checked with a few other device sizes for other common phones, but the main difference was in the length of the display, not in the width of the device. Newer models like iPhone 12/13 Pro (390 x 844) and Galaxy S20 (360 x 800) still experienced the same issues with content being cut off.

||*Tool*||*Status*||*Screenshot/s*||
|Overview|good| |
|Announcements|good| |
|Assignments|assignment list page is ok, but student submission and instructor grading screens are too wide|!student-submit1.png|width=352,height=615,alt=""student-submit1.png""!
 
!student-submit2.png|width=350,height=609,alt=""student-submit2.png""!

!instructor-grade1.png|width=352,height=610,alt=""instructor-grade1.png""!

!instructor-grade2.png|width=350,height=614,alt=""instructor-grade2.png""!|
|Calendar|too wide|!calendar.png|width=349,height=619,alt=""calendar.png""!
!calendar2.png|width=355,height=613,alt=""calendar2.png""!|
|Chat Room|width ok, but Messages tab is partially hidden by Users in Chat tab and difficult to select|!chat.png|width=350,height=614,alt=""chat.png""!|
|Commons|too wide|!commons1.png|width=355,height=616,alt=""commons1.png""!

!commons2.png|width=352,height=612,alt=""commons2.png""!|
|Contact Us|good| |
|Conversations|good| |
|Dashboard|too wide; Site information section does not resize images and looks really bad|see associated Jira for more info and screenshots [https://sakaiproject.atlassian.net/issues/SAK-49917|https://sakaiproject.atlassian.net/issues/SAK-49917]|
|Discussions|forum/topic list looks ok, but the authoring screen when starting a conversation is too wide, also instructor add forum/topic screen is too wide
*Re-tested on 4/24/24 and instructor add forum/topic width looks ok in Chrome responsive mode and iPhone 13. However, â€œStart Conversationâ€ screen is still too wide for both student and instructor on all browsers tested.|!discussion1.png|width=351,height=610,alt=""discussion1.png""!

!discussion2.png|width=356,height=611,alt=""discussion2.png""!

!discussion3.png|width=356,height=618,alt=""discussion3.png""!

!discussion4.png|width=348,height=615,alt=""discussion4.png""!|
|Drop Box|too wide|!dropbox1.png|width=352,height=619,alt=""dropbox1.png""!

!dropbox2.png|width=349,height=617,alt=""dropbox2.png""!|
|Email|mostly good, but â€œSubjectâ€ is cut off a bit on right side|!email.png|width=352,height=617,alt=""email.png""!|
|Email Archive|good| |
|External Tool (External Tool)|seems ok, although this may vary by tool| |
|Gradebook|Instructor spreadsheet view doesnâ€™t work at all (maybe include a message in the UI about this?), but the instructorâ€™s view of an individual student is ok, and quick entry screen seems to work well. However, the student view of their own grades is too wide. Also instructor Categories and Weighting in Settings is too wide.|!gradebook-spreadsheet.png|width=352,height=611,alt=""gradebook-spreadsheet.png""!

!gb-categories.png|width=347,height=617,alt=""gb-categories.png""!

!gb-categories2.png|width=353,height=612,alt=""gb-categories2.png""!

!student-grades1 (2a3d17da-6395-43f8-8f2c-05d61ab7d8b4).png|width=353,height=604,alt=""student-grades1.png""!

!student-grade2 (177cc41f-700a-4420-b664-dcb432e6a55f).png|width=352,height=612,alt=""student-grade2.png""!|
|Lessons (Lessons)|good overall, although there is some odd overlapping when viewing collapsible sections that have been expanded.|!lessons-collapsible.png|width=360,height=615,alt=""lessons-collapsible.png""!|
|Messages|the Messages landing page looks fine, but when you click into a folder to actually view messages, it is too wide and table displays poorly|!messages-folders.png|width=352,height=617,alt=""messages-folders.png""!

!messages-folders1.png|width=350,height=612,alt=""messages-folders1.png""!|
|News|good| |
|Podcasts|good| |
|Polls|Polls landing page in student view is just a little bit too wide; however, the poll and poll results pages look fine. 
*Re-tested on 4/24/24 and the width is slightly better in Chrome and on iPhone, but it is still just a tiny bit too wide on student view of tool landing page, as well as on the instructor Add Poll screen for the CKEditor box.|!polls1.png|width=365,height=612,alt=""polls1.png""!

!polls2.png|width=356,height=617,alt=""polls2.png""!|
|PostEm|Instructor view not responsive - table displays poorly. Also, student view of individual feedback table is not responsive (although the landing page to select items to view looks ok)|!student-postem1.png|width=353,height=618,alt=""student-postem1.png""!

!student-postem2.png|width=352,height=614,alt=""student-postem2.png""!

!instructor-postem1.png|width=361,height=624,alt=""instructor-postem1.png""!

!instructor-postem2.png|width=352,height=619,alt=""instructor-postem2.png""!|
|Resources|too wide
*Re-tested on 4/24/24 and this is still an issue. Be sure to test it with some files/folders that have longer filenames.|!resources1.png|width=347,height=620,alt=""resources1.png""!

!resources2.png|width=353,height=617,alt=""resources2.png""!|
|Roster|good| |
|Rubrics|good| |
|Search|too wide
*Re-tested on 4/24/24 and Search does look ok in Chrome responsive mode and on iPhone 13. However, it does let you drag the screen sideways a bit, shifting right and left on both Chrome and iPhone, which seems a bit odd/unexpected.|!search2.png|width=353,height=616,alt=""search2.png""!

!search1.png|width=350,height=621,alt=""search1.png""!

!search4.png|width=356,height=619,alt=""search4.png""!

!search3.png|width=354,height=620,alt=""search3.png""!|
|Section Info|table doesnâ€™t resize and edit section page too wide|!sectioninfo2.png|width=347,height=609,alt=""sectioninfo2.png""!

!sectioninfo3.png|width=361,height=619,alt=""sectioninfo3.png""!

!sectioninfo1.png|width=347,height=618,alt=""sectioninfo1.png""!

!sectioninfo4.png|width=344,height=617,alt=""sectioninfo4.png""!|
|Sign-up|table doesnâ€™t resize and meeting detail is too wide|!signup1.png|width=353,height=617,alt=""signup1.png""!

!signup2.png|width=350,height=614,alt=""signup2.png""!

!signup3.png|width=356,height=616,alt=""signup3.png""!

!signup4.png|width=356,height=613,alt=""signup4.png""!|
|Site Info|good| |
|Statistics|Stats Overview page is a little too wide, but the Reports page looks fine.
*Re-tested on 4/24/24 and Overview page looks ok on iPhone 13.  In Chrome it still lets you shift left/right a little (similar to Search), but the content is all visible on the screen.|!statistics.png|width=355,height=617,alt=""statistics.png""!

!statistics2.png|width=357,height=615,alt=""statistics2.png""!|
|Syllabus|Student view looks fine. However, in Instructor view, the Add page is a little too wide, and the Manage page isnâ€™t responsive at all|!syllabus-add1.png|width=350,height=614,alt=""syllabus-add1.png""!

!syllabus-add2.png|width=355,height=612,alt=""syllabus-add2.png""!

!syllabus-manage1.png|width=360,height=614,alt=""syllabus-manage1.png""!

!syllabus-manage2.png|width=358,height=619,alt=""syllabus-manage2.png""!|
|Tests & Quizzes|a little too wide, although student view of quiz looks ok|!tq-instructor1.png|width=354,height=623,alt=""tq-instructor1.png""!

!tq-instructor2.png|width=350,height=614,alt=""tq-instructor2.png""!|
|Web Content|good| |
|Wiki|good| |

  "
Assignments: Status column empty in student's Assignment list for newly created assignment,Bug,Closed,Sakai,software,"For a newly created assignment the status column no longer is populated with â€˜Not Startedâ€™ as seen in the studentâ€™s Assignment list view. (see attachments - 22 shows â€˜Not Startedâ€™, 23, 25 show blank).

I believe this regression may have been introduced via work in or related to SAK-49527"
"Home: Profile, Dashboard defaulting to Dark Theme, regardless of user setting",Bug,Resolved,Sakai,software,"On a userâ€™s Home site, the Profile and Dashboard tools are defaulting to Dark Mode, regardless of the user settings. 

I noticed this with the automatically created Instructor account, then re-tested with another newly created account. My computerâ€™s app mode is set to light, Sakai is set to light mode, but these two pages display in dark mode. 

The only way I found to temporarily force them to light mode is to toggle dark mode on and off while viewing that page. When dark mode is toggled off, the page is in light mode until it is refreshed.

I am not able to reproduce this on Trunk/25"
CkEditor: toggling the collapse toolbar button multiple times increases text area,Bug,Resolved,Sakai,software,"Steps to reproduce



* Go to ckEditor
* Toggle the expand toolbar button multiple times
* The text area expands every time the button is clicked "
Lessons: Translation to Catalan is broken,Bug,Open,Sakai,software,Translation of Tool name â€˜lessonsâ€™ is in English instead of Catalan.
LTI-Assignments: Instructor is no longer able to grade lti assignment submissions,Bug,Closed,Sakai,software,"I was retesting [https://sakaiproject.atlassian.net/browse/SAK-49132|https://sakaiproject.atlassian.net/browse/SAK-49132|smart-link] when I discovered a new issue on 25x and 23x. This is not an issue on 22x. Since this affects 23x, making it a blocker. Previously, SAK-49132 did not affect the ability for the user to grade, which is why I didnâ€™t add this issue to that Jira.

On 25x and 23x, once the student has submitted and the instructor clicks to grade, there are no longer input fields for the score and comment. The grader does not display (and isnâ€™t expected to in this case, but there is a Jira to enable the grader for lti assignments: [https://sakaiproject.atlassian.net/browse/SAK-49431|https://sakaiproject.atlassian.net/browse/SAK-49431|smart-link] ).

See the video of how 22x works and what is now seen on 25x/23x."
Recent Announcements: Incorrect attribution of highlighting,Bug,Resolved,Sakai,software,"In the Overviewâ€™s Recent Announcements widget, announcements created before deploying SAK-49957 will incorrectly display as highlighted."
Notifications: More detail for assignments that open in the future,Bug,Open,Sakai,software,"When an instructor creates an assignment that opens in the future, the notification is sent when the assignment opens. However, it only shows the instructor name and assignment name, no other details. 

I think this should have additional text, like the create/edit assignment notification, perhaps something like <instructor> has made assignment <assignment name> available in <site>



!image-20240412-192111.png|width=402,height=567,alt=""image-20240412-192111.png""!

One of these things is not like the othersâ€¦"
Notification: Separate notification message for create/edit assignment,Bug,Open,Sakai,software,"When an assignment is created or edited, the notification says <instructor> Created/updated a new assignment <name> in <site>.  This is the same message when an assignment is created and when an assignment is modified. I think it woudl be more useful to let students know created (new assignment) or modified (existing assignment, new settings) so they know how important it may be to view it immediately. "
Lessons: Checklists that wrap onto a second line have a blank line next to the checkbox,Bug,Open,Sakai,software,"The checklists are wrapping oddly, resulting in a blank line next to the checkbox when the checklist item wraps onto a second line.  

See the screenshots comparing Trunk/23.x with 22.x"
Assignments: value on student submissions screen being shown on wrong lines,Bug,Resolved,Sakai,software,"â€œAssignments by Studentâ€œ shows wrong grades on some cases, this seems to be caused by a velocity loop where $grade variable is not cleared sometimes.



!image-20240412-104424.png|width=1659,height=189,alt=""image-20240412-104424.png""!"
LTI-Assignments: Only show valid tools that can be added as an LTI assignment,Bug,Resolved,Sakai,software,"*Note:* (Per [~accountid:557058:718cd3f6-5ff9-42fa-8914-b4224aff1730])  This Jira is actually a mistake - it was filed based on an incorrect statement made by Dr. Chuck.   LTI 1.1 and 1.3 tools _should_ work and _both_ store and directly placed tools should work.  Now there  might be issues in functionality after the tool is placed - but this Jira can be closed as not a bug.

*Original (incorrect) filed as requested by Chuck.*

From previous testing, the point was made that only tools from the â€œstoreâ€ (the picker) should be used for LTI assignments. If there are multiple lti tools on the server, (1.1 â€œstoreâ€, 1.3 â€œstoreâ€, individual 1.1 or 1.3 tools), the tools show up as available when trying to add an LTI assignment. If a tool will not work with assignments, it should not be in the list for a user to choose from.

See the following Jiras:

[https://sakaiproject.atlassian.net/browse/SAK-49944|https://sakaiproject.atlassian.net/browse/SAK-49944|smart-link] 

[https://sakaiproject.atlassian.net/browse/SAK-48225|https://sakaiproject.atlassian.net/browse/SAK-48225|smart-link] 

[https://sakaiproject.atlassian.net/browse/SAK-48224|https://sakaiproject.atlassian.net/browse/SAK-48224|smart-link] "
Administration - PA: Change wording or add restore button for medium priority banners,Bug,Open,Sakai,software,"In the PA system, if you select a medium priority banner, there is text below the priority selection: Note: When a user dismisses a ""Medium"" alert, a small ""Show System Alerts"" button will remain at the top of their screen. Clicking on this button will cause all active Medium alerts to reappear for the user.

On Trunk and 23.x, I do not see this Show System Alerts button after dismissing a medium banner. 

This is not necessarily a bad thing - the system alerts message on 22.x was more intrusive and obvious than the banner itself. But if that button is not appearing, can we update this information to be more accurate? Or put that button somewhere useful like Notifications?"
Site Info: Tool reordering UX regressions,Bug,Closed,Sakai,software,"Beginning with Sakai 23, two significant UX regressions compared with Sakai 22 and earlier were introduced with the Tool Order function:

# Auto-scrolling no longer occurs when dragging an item to a location that would need to scroll vertically to display.
# When a page item has focus for using the â€˜uâ€™ and â€˜dâ€™ keys to move it, successive movements no longer work, because the page item loses focus.

Refer to the attached screencast, SiteInfoToolOrderRegressions.mp4."
"SakaiPlus - plus.provider.enabled - sakai.properties, README.md, and kernel BLTI values differ",Bug,Resolved,Sakai,software,"The code in PlusService.java

{noformat}public static final String PLUS_PROVIDER_ENABLED = ""plus.provider.enabled"";
public static final boolean PLUS_PROVIDER_ENABLED_DEFAULT = true;{noformat}

and PlusServiceImpl.java

{noformat}		return serverConfigurationService.getBoolean(PlusService.PLUS_PROVIDER_ENABLED, PlusService.PLUS_PROVIDER_ENABLED_DEFAULT);{noformat}

show that it sakaiplus is enabled by default.  However,

# *sakai.properties* shows default false
{noformat}# Enable the SakaiPlus provider - if this is false, all aspects of SakaiPlus are not avaiable
# plus.provider.enabled
# DEFAULT: false{noformat}
# The SakaiPlus main README.md files  says 
{noformat}# Not enabled by default
plus.provider.enabled=true{noformat}

# in the Kernel, RequestFilter.java *isLTIProviderAllowed* _could_ return false if *plus.provider.enabled* is not uncommented in sakai properties even though the default via the java code (above) is true
{noformat}	protected static final String SAKAI_BLTI_PLUS_PROVIDER_ENABLED = ""plus.provider.enabled"";
	.
	.
	.
			isLTIProviderAllowed =
			(serverConfigurationService.getString(SAKAI_BLTI_PROVIDER_TOOLS,null)!=null) ||
			(serverConfigurationService.getBoolean(SAKAI_BLTI_PLUS_PROVIDER_ENABLED,false));
{noformat}
"
Profile2 Wicket 6 to Wicket 9 Upgrade,Bug,Resolved,Sakai,software,Chore: upgrade Profile2 wicket
"Site: Add fields for first publish, most recent publish",Feature Request,Open,Sakai,software,"The details available for a given site are site include things like the site contact, creation date, and modification date. Iâ€™d like to see if we can add 1 or two more dates to the site information recorded for a given site - first published on <date> and last published on <date>.  

It may be useful with a course to be able to see when an instructor made it available to students. I included the most recent publish date since I donâ€™t know if thereâ€™s significant use cases where a site would be published, unpublished, then republished.  "
"View As-Unpublished site: navigation and site, (pinned/recent), not displaying ",Bug,Open,Sakai,software,"Using view as in a site that is unpublished and has not been published, portal doesnâ€™t draw the navigation once the instructor clicks view as.

If the instructor then publishes the site, clicks view as student, exits student view, unpublishes the site and uses view as again, then the navigation displays."
User Dashboard: Use nickname in welcome if present,Improvement,Closed,Sakai,software,"The user Dashboard tool has â€œWelcome <Name>â€ at the top of the page, above the MotD. I think it would be nice if this could use the nickname set in the profile if one is set. If a student has a prefered name, this would be a very nice personalization."
User Dashboard: Tasks not removed if a site is soft deleted,Bug,Open,Sakai,software,"If a site is marked for deletion (soft deleted), the tasks associated with that site are not removed from instructor or studentâ€™s user Dashboard task widget. Clicking on the arrow for that task gives a blank page with â€œThe site you requested is not available.â€ message. Soft deleted sites should have any and all tasks removed from user Dashboard tasks widget."
User Dashboard: Hide tasks for instructor when site is hidden or unpublished,Bug,Open,Sakai,software,"It does not seem possible to hide a siteâ€™s tasks from an instructorâ€™s user Dashboard. If an instructor hides a site through Preferences â†’ Sites, the tasks remain. An instructor who has taught a lot of classes over multiple terms will have a Tasks widget so cluttered with old data that it would be unusable. 

Hidden sites should not appear on an instructorâ€™s tasks widget. I personally feel that unpublished sites should not appear on an instructorâ€™s Dashboard tasks widget as well, but that can be debated. "
Presence events are not accurate,Bug,Open,Sakai,software,"# The presence events {{pres.begin}} and {{pres.end}} are not accurate. For example the events of a presence with the duration of 2:00 minutes (measured) results in events which timestamps difference is 1:33, 1:45, 1:54 (from multiple tests). There does not seem to be consistent inaccuracy, sometimes the difference is bigger or smaller. I am not certain if itâ€™s always off my x seconds or x%, I didnâ€™t do tests with long presences.
# Also there were premature pres.end events observed. It might be related to overlapping sessions, but itâ€™s not certain. I could not find the pattern, that is causing that behavior. For example when testing a presence of 2 minutes there were {{pres.end}} events after about a minute - while the session was active. When the session is finally closed, there is no additional {{pres.end}} event.

Note: Site presences begin with the first visit of a site within a session and ends with the logout - the session end.

I observed this behavior while working on [https://sakaiproject.atlassian.net/browse/SAK-47101|https://sakaiproject.atlassian.net/browse/SAK-47101|smart-link]. It did not happen on 22 and was observed without my changes deployed. master branch with fresh database."
Assignments: Assignment notification is duplicated after title is edited,Bug,Open,Sakai,software,"Steps to reproduce:

* create an assignment in a sakai site
* edit assignment and alter the title of the assignment
* as a student in that sakai site, you now have 2 notifications for the same assignment: one with the old title and one with the new title"
Update Apache Commons IO 2.16.1,Bug,Closed,Sakai,software,"[ANNOUNCE] Apache Commons IO 2.16.1
The Apache Commons team is pleased to announce Apache Commons IO 2.16.1.

The Apache Commons IO library contains utility classes, stream
implementations, file filters,
file comparators, endian transformation classes, and much more.

Java 8 is required.

h2. Fixed Bugs

o Reimplement FileSystemUtils using NIO. Thanks to Gary Gregory.
o IO-851: FileSystemUtils no longer throws IllegalStateException.
Thanks to Sebb, Gary Gregory.
o Avoid possible NullPointerException in
FileUtils.listAccumulate(File, IOFileFilter, IOFileFilter,
FileVisitOption...). Thanks to Gary Gregory.
o IO-853: BoundedInputStream.reset() not updating count. Thanks to
Mike Drob, Gary Gregory.
o ThresholdingOutputStream: a negative threshold should
behave like a zero threshold and trigger the event on the first write
#609. Thanks to rproserpio, Gary Gregory.

h2. Changes

o Bump commons.bytebuddy.version from 1.14.12 to 1.14.13
#605. Thanks to Gary Gregory.
o Bump org.apache.commons:commons-parent from 67 to 69 #608.
Thanks to Gary Gregory, Dependabot.

Commons IO 2.7 and up requires Java 8 or above.
Commons IO 2.6 requires Java 7 or above.
Commons IO 2.3 through 2.5 requires Java 6 or above.
Commons IO 2.2 requires Java 5 or above.
Commons IO 1.4 requires Java 1.3 or above.

Historical list of changes:
[https://commons.apache.org/proper/commons-io/changes-report.html|https://commons.apache.org/proper/commons-io/changes-report.html|smart-link] 

For complete information on Apache Commons IO, including instructions
on how to submit bug reports, patches, or suggestions for improvement,
see the Apache Commons IO website:

[https://commons.apache.org/proper/commons-io/|https://commons.apache.org/proper/commons-io/|smart-link] "
Cannot Add External Tool (LTI 1.1) as an Assignment Type,Bug,Closed,Sakai,software,"When trying to add an LTI tool as an assignment type the assignment settings screen pops out of frame (loses all top and left nav), reverts to the original non-LTI submission type. 

Hereâ€™s a screenshot of the external tool being selected.

!2024-04-09_16-40-52.png|width=83.33333333333334%,alt=""2024-04-09_16-40-52.png""!

But, when you click Save on that screen, you lose all the top and side nav and it reverts to the original assignment settings before selecting a tool and with the default â€œinline an attachmentsâ€ submission type.  

!2024-04-09_16-37-50.png|width=100%,alt=""2024-04-09_16-37-50.png""!

Re-selecting the external tool type and re-adding the tool from this screen just takes you back to the initial settings screen with the default options again."
Samigo: creating assessment using markup text the key words may not be recognized,Bug,Open,Sakai,software,"The occurrence of this issue depends on the language set by the user. 

* set language to e.g. es_ES, ro_RO, de_DE
* in tool samigo create new assessment using markup text
* create question with the given example text with key words for e.g. Multiple Choice:
2. _(15 points)_
_Which of the writers below were American citizens at some point in their lives?_
_*a. Bill Faulkner_ 
_b. Ginny Woolf_ 
_*c. Tom Eliot_
{color:#ff991f}_#randomize_{color}
{color:#ff991f}_#rationale_{color}
* depending on the language the keywords are not or  only partially recognized. For some languages e.g. en_US, fr_FR they are fully recognized.



Note: I did not test all the available languages."
Courses not automatically pinned for instructor until they log out and back in,Bug,Closed,Sakai,software,"[https://sakaiproject.atlassian.net/browse/SAK-49716|https://sakaiproject.atlassian.net/browse/SAK-49716|smart-link] passed on 24x, but on 25x and 23x, there is an issue with automatic pinning for the instructor. If the instructor logs out and then back in, the site(s) show as pinned.

When an instructor creates a new site, (published or unpublished), or if the instructor is logged in when the admin creates a site with the instructor, the instructor will see the site(s) in Worksite Setup or in the Site Drawer, but the site(s) are not automatically pinned and showing up on the navigation.

Once the instructor logs out and logs back in, the sites are pinned."
Lessons import from site fails when a linked quiz is null,Bug,Closed,Sakai,software,"When importing Lessons to another site if an assessment was linked and then removed (no longer accessible, i.e. removed from the db) then Lessons will fail to import and the following log message is visible:

{{ERROR [pool-11-thread-1] o.s.s.i.SiteManageServiceImpl.transferCopyEntities Error encountered while transferring data for producer: [lessonbuilder] from: [917a7cbb-27db-4d00-94f4-00491160b9a3] to: [d38e7134-485b-46ff-812c-9c2ffa4ce885], org.springframework.transaction.UnexpectedRollbackException: Transaction rolled back because it has been marked as rollback-only}}"
ckEditor: enabled dark mode results in a white line between toolbar and content,Bug,Verified,Sakai,software,"steps to reproduce:

* switch to dark mode
* go to a tool with ckEditor (e.g. assignments â†’ Add assignment)
* between the toolbar and content body, there appears a white line



It seems that this was introduced with the fix to [https://sakaiproject.atlassian.net/browse/SAK-11632|https://sakaiproject.atlassian.net/browse/SAK-11632|smart-link]. 
"
Announcements: Announcements for the future clicking redirects to a page. ,Bug,Open,Sakai,software,"The link to the announcement is broken. On trunk, the instructor who published the announcement cannot view it - all roles instructors, TAs and instructors canâ€™t access the announcement details."
Announcements: Announcement notification doesnâ€™t display edited heading,Bug,Open,Sakai,software,Notification displayed for announcement does not show new heading if edited after posting.
Rubrics: New keyboard-only method for mimicking the â€œdrag to reorderâ€ option not working for screen reader users,Bug,Open,Sakai,software,"I previously created SAK-48580 to report some issues I was observing with the â€œdrag to reorderâ€ icons in Rubrics.

Â 

The fixes that were made seem to work for sighted testers who are using their keyboard, however, for screen reader users, when they navigate onto any of the â€œdrag to reorderâ€ icons, they are not able to get the â€œEâ€ or â€œDâ€ keys to work.

Â 

For reference, I attached a short video I created when retesting SAK-48580.



I tested this on trunk/master using six different screen reader/web browser combinations (JAWS+Chrome, JAWS+Firefox, JAWS+Edge, NVDA+Chrome, NVDA+Firefox, and NVDA+Edge) and I am observing the same behavior.

Â 

The one exception to the above, is that the JAWS screen reader has a special insert+3 pass through keyboard command that essentially nullifies/over-rides any keystrokes that the screen reader might be using, so if I navigate onto one of these â€œdrag to reorderâ€ icons, press insert+3 to activate the JAWS pass through command, then press â€œEâ€ or â€œDâ€, I can get the Rubric item to reorder.

Â 

The problem is that this is not a very well known JAWS feature, and the novice screen reader user might not know to use this, plus Iâ€™m not aware of an equivalent option for other screen readers like NVDA."
Remove Conditional Release from Kernel,Improvement,Open,Sakai,software,"This old â€œconditional releaseâ€ piece seems to be unused and with no updates for a long time, so maybe we could remove all the related code, from kernel (org.sakaiproject.conditions) and content (ResourceConditionsHelper)."
Rubrics: Add actual name to generic tooltips,Bug,Closed,Sakai,software,"This is not an issue on 22x. From [https://sakaiproject.atlassian.net/browse/SAK-49091|https://sakaiproject.atlassian.net/browse/SAK-49091|smart-link] 
In 22.x, the tooltip is â€œEdit Rubric <Rubric Name>â€ and â€œEdit Criterion <Criterion Name>â€, on 25x and 23x just the generic name is given. The rubric name and criterion should include the actual name, otherwise this is an accessibility issue. If there are 10 rubrics, and they all say â€œEdit rubricâ€, how does the user know which rubric theyâ€™re editing?



!image-20240404-232852.png|width=426,height=205,alt=""image-20240404-232852.png""!"
Rubrics: Rubric Statistics feature not working in Gradebook,Bug,Closed,Sakai,software,The Gradebook feature â€˜Rubric Preview/Statisticsâ€™ no longer displays controls for viewing rubric statistics. Refer to the test plan for details
Lessons: border property of legacy colors  takes no effect,Bug,Open,Sakai,software,"Steps to reproduce:

* Edit a section/column of content in lessons
* Choose a legacy color and enable the Show Border option
* The color of the border lines is taken over from the .column class but not from the .col<legacyColor> class"
Update Apache commons Imaging 1.0.0-alpha4,Bug,Closed,Sakai,software,"h4. [ANNOUNCE] Apache Commons Imaging 1.0.0-alpha4
The Apache Commons Imaging team is pleased to announce the release of
Apache Commons Imaging 1.0.0-alpha4.

Apache Commons Imaging (previously Sanselan) is a pure Java image library.

The 1.0.0-alpha4 release requires Java 8.

Historical list of changes:
[https://commons.apache.org/proper/commons-imaging//changes-report.html|https://commons.apache.org/proper/commons-imaging//changes-report.html|smart-link] 

For complete information on Apache Commons Imaging, including
instructions on how to submit bug reports, patches, or suggestions for
improvement, see the Apache Commons Imaging website:

[https://commons.apache.org/proper/commons-imaging/|https://commons.apache.org/proper/commons-imaging/|smart-link] "
"Conversations: Replying does not work, clicking on a post causes console errors",Bug,Resolved,Sakai,software,"This issue only affects 23x.

In the conversations tool, if you click on any post, several console errors appear. If you try to reply to a post, both the â€œPublishâ€ and â€œSave as Draftâ€ buttons do nothing and cause another console error. See the attached video.

May be related to [https://sakaiproject.atlassian.net/browse/SAK-49890|https://sakaiproject.atlassian.net/browse/SAK-49890|smart-link]."
Assignments: Make Peer Review Comments Visible from Grader fails with multiple console errors,Bug,Closed,Sakai,software,"[https://sakaiproject.atlassian.net/browse/SAK-47987|https://sakaiproject.atlassian.net/browse/SAK-47987|smart-link] was merged to 23x, failed there and testing 25x, it fails there also, so something changed since it was tested on 24x.

The following message loads and stays on the screen, never loading the grader.

Loading the grading data ...
This may take a few seconds.

Console error 1:

{noformat}ckeditor.js?version=8a7bd19c:19 
 [CKEDITOR] Error code: editor-incorrect-element. 
{element: 'grader-feedback-comment'}
 [CKEDITOR] For more information about this error go to https://ckeditor.com/docs/ckeditor4/latest/guide/dev_errors.html#editor-incorrect-element{noformat}

Console error 2:

{noformat}grader.js?version=8a7bd19c:769 
 Uncaught (in promise) TypeError: Cannot read properties of null (reading 'on')
    at Gt._replaceWithEditor (grader.js?version=8a7bd19c:769:6061)
    at Gt._setup (grader.js?version=8a7bd19c:769:3939)
    at grader.js?version=8a7bd19c:769:3854{noformat}

Console error 3:

{noformat}grader.js?version=8a7bd19c:270 
 Uncaught (in promise) TypeError: Cannot read properties of undefined (reading 'peerassessment.peerGradeInfo')
    at Gt._renderGradeInputs (grader.js?version=8a7bd19c:270:54)
    at Gt._renderGrader (grader.js?version=8a7bd19c:391:20)
    at Gt.render (grader.js?version=8a7bd19c:766:16)
    at Gt.update (chunk-7SD77TLE.js:6:6605)
    at Gt.performUpdate (chunk-7SD77TLE.js:2:5862)
    at Gt.scheduleUpdate (chunk-7SD77TLE.js:2:5412)
    at Gt._$EP (chunk-7SD77TLE.js:2:5320)
ï»¿{noformat}"
Section Info: Need a direct way to navigate back to the main â€œStudent Membershipsâ€ page/list of Students after assigning/unassigning a Student,Bug,Verified,Sakai,software,"When using the â€œStudent Membershipsâ€ option in Section Info, there is no direct way to navigate back to the main â€œStudent Membershipsâ€ page/list of Students after using one of the â€œassignâ€ or â€œunassignâ€ links to change the Studentâ€™s membership to a different Section.

Â 

On the â€œStudent Membershipsâ€ page, able to use tab, shift+tab, and up/down arrow keys to navigate through a list of Students and view their Section memberships. After moving focus onto one of the Studentâ€™s names, able to press enter to edit their Section membership by navigating to the â€œAssignâ€ link for a certain Section and pressing enter. When the page refreshes, it will now show that the Student has been assigned to the new Section.

Â 

However, there doesnâ€™t seem to be a direct way, for example a â€œbackâ€ button/link, Â to navigate back to the â€œStudent Membershipsâ€ page/list of Students??

Â 

If you navigate up to the â€œStudent Membershipsâ€ link and press enter, the edit page for the currently selected Student continues to be displayed.

Â 

You can navigate up to the â€œAdd Sectionsâ€ or â€œOptionsâ€ link and press enter, which will take you to the respective pages for those options, and if you then navigate to the â€œStudent Membershipsâ€ link and press enter, the main Student Memberships page/list of Students will once again appear.

Â 

If you try to use the ALT+left arrow keyboard command you will get the following error message:

Â 

â€œConfirm Form Resubmission

This webpage requires data that you entered earlier in order to be properly displayed. You can send this data again, but by doing so you will repeat any action this page previously performed.

* Press the reload button to resubmit the data needed to load the page.

ERR_CACHE_MISSâ€

Â 

And there doesnâ€™t appear to be an easy way to dismiss the error message without closing out of your browsing session, so you will end up having to log back into Sakai."
Discussions: Author profile popups do not display,Bug,Resolved,Sakai,software,"The popups (qtip2) that display when clicking on the profile image of a post author in Discussions no longer work. Only a â€œLoadingâ€¦â€ message now displays.

Reverting the changes to SakaiProfile.js introduced with SAK-49690 restores this behavior, though doing so likely reverts the intent of SAK-49690."
"Add a ""Select All"" option in the header of the Select column for the new bulk publish feature",Feature Request,Open,Sakai,software,"Please add a â€œSelect Allâ€ option in the header of the Select column for Assignments, Announcements, and Tests & Quizzes. If you have a lot of items in those tools, it is cumbersome to have to click down the list to select all of them. Users are accustomed to having a â€œSelect All / Noneâ€ option at the top of the column to make it easier to select or deselect all of the items currently displayed. 

!2024-04-03_13-19-24.jpg|width=91.66666666666667%,alt=""2024-04-03_13-19-24.jpg""!"
Inconsistency in the new Bulk Publish feature among tools,Bug,Open,Sakai,software,"The new bulk publish option in Assignments, Announcements, and Tests & Quizzes is a very nice addition, but there is a lot of inconsistency in the way it works in the different tools. It would be a much better user experience if the tools behaved in a more consistent manner when using this feature. 

For example, in Assignments, you can now select several items and choose the Publish button below. Note that the buttons for Remove, Publish, and Unpublish are all in dark blue once one or more check boxes are selected. 

!2024-04-03_12-11-39.jpg|width=100%,alt=""2024-04-03_12-11-39.jpg""!

After clicking Publish, you get a confirmation screen showing you a table that lists the assignments to be published along with the due date. It also includes the Status (Open, Due, Closed) and the number of Submissions. I can see where the Status might be useful, but Iâ€™m not entirely sure why Submissions are shown here. I assume that information is more applicable when Unpublishing an assignment? It just seems a bit odd to include in this screen.

!2024-04-03_12-11-47.jpg|width=100%,alt=""2024-04-03_12-11-47.jpg""!

In the Announcements tool, you have a similar experience to Assignments, but there is an extra button. When you choose one or more draft Announcements, you get Remove, Publish, Unpublish, and Clear Selections buttons. Note that the Remove, Publish, and Unpublish buttons are dark blue, as they appear in Assignments. However, there is the extra Clear Selections buttons which does not appear in Assignments and which I think would be useful in other tools where this bulk feature appears. 

!2024-04-03_12-39-50.jpg|width=91.66666666666667%,alt=""2024-04-03_12-39-50.jpg""!

Announcements, like Assignments, also provides you with a confirmation screen showing a table with the announcement information.

!2024-04-03_13-08-22.jpg|width=91.66666666666666%,alt=""2024-04-03_13-08-22.jpg""!

Now, in contrast, when you go to Test & Quizzes and use the Bulk Publish feature, you also get a Select check box to choose the items you want to Publish. Note that here, the buttons for Remove and Publish are not dark blue, they are the default gray color when enabled. These should be a consistent dark blue color in both tools for the Remove and Publish buttons. Also, there is no Unpublish or Clear Selections buttons shown here. I understand why the Unpublish button might be problematic, given the way that T&Q handles draft and published items as separate entities. However, it does present additional inconsistency in the UI. Perhaps a Retract button could be added in place of Unpublish? In any case, a Clear Selections button would be useful here. 

!2024-04-03_12-34-38.jpg|width=100%,alt=""2024-04-03_12-34-38.jpg""!

Upon clicking Publish in T&Q, instead of a table showing assessment information, as is shown in Assignments and Announcements, you just get a pop-up message asking for confirmation. 

!2024-04-03_12-12-37.jpg|width=542,height=171,alt=""2024-04-03_12-12-37.jpg""!

This pop-up does not provide the same level of information as is displayed in the other two tools. In addition, the option to add assessment due dates to the Calendar is typically displayed to the instructor in the publish screen on an individual quiz. If you bulk publish, there is no way to check the box to add the due date to the Calendar. Unlike Assignments, you canâ€™t go into the Settings to select that box after publishing, since it doesnâ€™t appear there. (See the related Jira requesting that the publish to calendar check box be added to assessment Settings. [https://sakaiproject.atlassian.net/issues/SAK-38306|https://sakaiproject.atlassian.net/issues/SAK-38306] )

It would be far more preferable for T&Q to display a table with the assessment information, and this would also provide the opportunity to include a column containing the option to send the due date to the Calendar. See mockup below. 

!2024-04-03_13-03-23.jpg|width=100%,alt=""2024-04-03_13-03-23.jpg""!"
Rubric sorting by date does not work correctly,Bug,Resolved,Sakai,software,Rubric sorting by date should use the raw numeric date and not the formatted date
Re-apply webcomponent mods made before empathise merge,Bug,Verified,Sakai,software,"The big empathise merge may have wiped out a couple of previous fixes like [https://sakaiproject.atlassian.net/browse/SAK-47611|https://sakaiproject.atlassian.net/browse/SAK-47611|smart-link]

SAK-48323 webcomponents. Bundle and remove empathise. (#11789)"
Console error on initial user login: Uncaught (in promise) TypeError: Cannot read properties of null (reading 'unsubscribe'),Bug,Resolved,Sakai,software,"On login, there is a console error on 23.x: 

sakai-message-brokerâ€¦version=a2c96ff3:30 Uncaught (in promise) TypeError: Cannot read properties of null (reading 'unsubscribe')

    at sakai-message-brokerâ€¦sion=a2c96ff3:30:24

(anonymous)	@	sakai-message-brokerâ€¦version=a2c96ff3:30

Promise.then (async)		

(anonymous)	@	sakai-message-brokerâ€¦version=a2c96ff3:28

Promise.then (async)		

(anonymous)	@	sakai-message-brokerâ€¦version=a2c96ff3:19



This does not occur on Trunk or 22.x.  I donâ€™t see any impact on the user from this console error"
Rubrics: Removing a newly-created criterion before refreshing the page shows the wrong name,Bug,Closed,Sakai,software,"In Rubrics, if you create a criterion for a rubric, and then click the remove button (before refreshing the page), the Delete Criterion popup modal shows the default â€œNew Criterionâ€ name instead of the actual criterionâ€™s name. This can be confusing when instructors are creating rubrics. Deletion works as expected, though.

Issue affects 25x and 23x."
Tests & Quizzes: Bulk publish needs an option to add due date to calendar,Bug,Open,Sakai,software,"When using the bulk publish option for Tests & Quizzes, there isnâ€™t a way to add the due date to the calendar. Normally, this is a checkbox on the publish confirmation page for individual tests. 

Iâ€™m thinking about a confirmation page similar to what Assignments has for bulk publish, with a table of dates and checkboxes for adding the due date to calendar for each test (and a select all option)"
Tests & Quizzes: Bulk publish allows duplicate test names,Bug,Open,Sakai,software,"If an instructor uses the bulk publish option multiple times, they will have multiple tests with the same name. It seems like it should either give an error or automatically add a number after the duplicate names. 

The second option is what occurs if you import from site â†’ merge data, and import tests from multiple sites with the same name or import the same site multiple times, so it would be the most consistent option."
Dashboard Tool Not Responsive,Bug,Closed,Sakai,software,"The Course Dashboard is not responsive. If you view it in mobile view, the course image doesnâ€™t resize and the description text in layout option 2 gets pushed off the right side of the screen and you have to scroll sideways to see the text.  You also have to scroll way, way down to get to any of the other widgets on the screen, and this is not obvious since the description text is not readily visible.

!2024-04-01_15-58-12.jpg|width=471,height=821,alt=""2024-04-01_15-58-12.jpg""!



!2024-04-01_15-59-22.jpg|width=459,height=816,alt=""2024-04-01_15-59-22.jpg""!"
Lessons fails to embed URLs when attempting to link to web page or Google doc,Bug,Closed,Sakai,software,"In Lessons, if you try to embed a URL on the page (rather than have it open in a new window), it fails to embed the URL and the buttons to Save, Cancel, Exit, in the Embed content dialog box are all disabled, as well as the Add Content, More Tools, etc. buttons in Lessons. 

For example, if you go to Lessons and select Add Content > Embed content on the page, then paste in your URL, it will show a screen like the one below:

!2024-04-01_13-44-04.png|width=100%,alt=""2024-04-01_13-44-04.png""!

Then, when you click on â€œTry Alternativeâ€ you get a screen like the one shown below.

!2024-04-01_13-37-13.png|width=100%,alt=""2024-04-01_13-37-13.png""!

However, the spinning animation over the disabled Save button never ends, and the Save, Start Over, and Cancel buttons are disabled. The X in the top right of the dialog box is also missing. There is no way to exit this dialog except for clicking outside of the window in the grayed-out Lessons area. But, when you do that, you get a screen like this:

!2024-04-01_13-38-21.png|width=100%,alt=""2024-04-01_13-38-21.png""!

Note that the Add Content, More Tools, Add Layout, Reorder and Settings buttons are all disabled. You have to refresh the Lessons tool in order to get those buttons back.

This behavior is the same whether you are attempting to link to a Google Doc, as shown in the example above, or another standard URL web page link as shown below.

!2024-04-01_13-53-44.png|width=100%,alt=""2024-04-01_13-53-44.png""!"
Dashboard-quiz: No link to current quizzes for student,Bug,Open,Sakai,software,"The students see quizzes under the task widget, but there is no link to go from the task widget to the open quiz. Calendar events and assignments link to the item and quizzes should also.

Note: quizzes show up for the student in the task widget whether theyâ€™re sent to the GB or not.

Instructors do not see the quizzes listed: [https://sakaiproject.atlassian.net/browse/SAK-49913|https://sakaiproject.atlassian.net/browse/SAK-49913|smart-link] "
Dashboard-quizzes: Students see quizzes with future open date in tasks,Bug,Open,Sakai,software,"While the instructor does not see the Tests & Quizzes on the task list ( [https://sakaiproject.atlassian.net/browse/SAK-49913|https://sakaiproject.atlassian.net/browse/SAK-49913|smart-link] ) , students see past, present and future quizzes. Iâ€™m not sure if students should see quizzes due in the past, but they definitely should not see quizzes open in the future."
Tasks: Discrepancies between instructor and student view,Bug,Open,Sakai,software,"After adding assignments, discussions (which donâ€™t show up under tasks for either student or instructor - will create separate Jira), calendar events, and Tests & Quizzes, the instructor only sees the assignments under Tasks, but the student sees assignments, calendar events and Tests & Quizzes. I think the instructor should see what the student sees."
Dashboard-Discussions Widget: Students see no information for Discussions when there haven't been any posts yet,Bug,Open,Sakai,software,"On 25x and 23x, if the Discussions widget has been added, the instructor will see 0 in New Messages and 0 New in Discussions, but the students arenâ€™t even aware there are discussions in the site because they donâ€™t see this information.

In 22x, itâ€™s even worse for the student with the div missing even the headings."
Tasks: dark mode displaying white background with black text,Bug,Open,Sakai,software,The task widget is not displaying correctly in dark mode. Text boxes and drop-downs have a white background with black text.
Gateway: Permission Error in SiteHandler (setting selectedPage),Bug,Closed,Sakai,software,"When you are on gateway pages, and if you see the logs, you will get these errors:
29-Mar-2024 11:49:05.485 WARN [http-nio-8080-exec-70] o.s.p.c.h.SiteHandler.doSite Exception caught whilst setting selectedPage property: org.sakaiproject.exception.PermissionException: user=null lock=prefs.upd resource=/prefs/null id: /prefs/null
29-Mar-2024 11:49:05.486 WARN [http-nio-8080-exec-70] o.s.p.c.h.SiteHandler.doSite Exception caught whilst setting selectedPage property: org.sakaiproject.exception.PermissionException: user=null lock=prefs.upd resource=/prefs/null id: /prefs/null"
"""u"" or ""d"" cannot be entered as Tool Title",Bug,Closed,Sakai,software,"+*ISSUE:*+

If an instructor wants to edit a tool title in â€œTool Orderâ€ and the desired new tool name includes â€œuâ€œ or â€œdâ€œ the order is changed but the letter is not recognized as title.  The tool is always moved down the list.  I  think that â€œuâ€œ is supposed to move the tool up and â€œdâ€œ to move the tool down.This works if the tool is selected via tabulator.

+*STEPS TO REPLICATE:*+

* Go to â€œSite Infoâ€œ â†’ â€œTool Orderâ€ â†’ Take one Tool and â€œEdit Tool Titleâ€œ
* Click into the field (any area) 
* Try to edit the Tool Title typing a â€œuâ€œ or â€œdâ€œ
* Active tool changes its position down in the list but not the title according to the keystroke "
Remove DBCP And Tomcat JDBC,Sub-task,Resolved,Sakai,software,HikariCP is the clear answer for pooling. No need for old versions anymore.
"Assignments: Non-Electronic assignments do not show rubric, feedback",Bug,Open,Sakai,software,"For non-electronic assignment types set to be graded using a rubric, the rubric icon appears next to the assignment name and the student can click on it to view the rubric. 

However, the Preview Rubric button does not appear in the assignment description/submission page when viewing the assignment description and the graded rubric doesnâ€™t appear when viewing the assignment feedback. The instructor comments and attachments also do not appear when viewing a graded rubric. 

This is working as expected in 23.x"
Remove old commons-collection ,Sub-task,Resolved,Sakai,software,Remove old commons-collection
Remove old commons-lang,Sub-task,Resolved,Sakai,software,Use org.apache.commons:commons-lang3
Sakai 25 Cleanup Tasks,Bug,Open,Sakai,software,"We should cleanup old commons JARs especially where we have begin using the new version (e.g., StringUtils commons-lang3)"
User prefs tool errors during startup ,Bug,Closed,Sakai,software,"The sakai-user-tool-prefs webapp errors during initialization with the following stack:

{noformat}SEVERE [main] com.sun.faces.config.ConfigureListener.contextInitialized Critical error during deployment:
        com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! org.apache.myfaces.custom.aliasbean.AliasBeanTagHandler
                at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:358)
                at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:207)
                at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4460)
                at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4914)
                at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
                at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)
                at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)
                at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:661)
                at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1175)
                at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1888)
                at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
                at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
                at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
                at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:118)
                at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:1086)
                at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:470)
                at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1584)
                at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:312)
                at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:114)
                at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:402)
                at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:345)
                at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:893)
                at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:794)
                at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
                at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
                at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
                at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
                at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
                at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140)
                at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
                at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:248)
                at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
                at org.apache.catalina.core.StandardService.startInternal(StandardService.java:433)
                at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
                at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:925)
                at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
                at org.apache.catalina.startup.Catalina.start(Catalina.java:735)
                at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
                at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
                at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
                at java.base/java.lang.reflect.Method.invoke(Method.java:566)
                at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)
                at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:473)
        Caused by: javax.faces.FacesException: org.apache.myfaces.custom.aliasbean.AliasBeanTagHandler
                at com.sun.faces.config.processor.AbstractConfigProcessor.loadClass(AbstractConfigProcessor.java:306)
                at com.sun.faces.config.processor.FaceletTaglibConfigProcessor.processComponent(FaceletTaglibConfigProcessor.java:541)
                at com.sun.faces.config.processor.FaceletTaglibConfigProcessor.processTags(FaceletTaglibConfigProcessor.java:331)
                at com.sun.faces.config.processor.FaceletTaglibConfigProcessor.processTagLibrary(FaceletTaglibConfigProcessor.java:276)
                at com.sun.faces.config.processor.FaceletTaglibConfigProcessor.process(FaceletTaglibConfigProcessor.java:232)
                at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:342)
                ... 42 more
        Caused by: java.lang.ClassNotFoundException: org.apache.myfaces.custom.aliasbean.AliasBeanTagHandler
                at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1329)
                at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1141)
                at java.base/java.lang.Class.forName0(Native Method)
                at java.base/java.lang.Class.forName(Class.java:398)
                at com.sun.faces.util.Util.loadClass(Util.java:324)
                at com.sun.faces.config.processor.AbstractConfigProcessor.loadClass(AbstractConfigProcessor.java:299){noformat}"
Support for Non-Numeric Grading in Sakai,Feature Request,Open,Sakai,software,"Please see the Non-Numeric Grading in Sakai Concept Document at the link below for a detailed description and preliminary mockups of this feature request.

[https://docs.google.com/document/d/19NyIiCIXe_LGK1IgybsZ4l4StuSmGdlJ0kH66DThR1Y/edit?usp=sharing|https://docs.google.com/document/d/19NyIiCIXe_LGK1IgybsZ4l4StuSmGdlJ0kH66DThR1Y/edit?usp=sharing|smart-link] "
Dashboard-Tasks-Assignments: Edit and trash icons are missing from instructor's view ,Bug,Open,Sakai,software,"23x has the edit and trash icons beside assignments, but 25x does not. Were these intentionally removed or overlooked?"
Dashboard-Assignment: Students see assignments with future open date in tasks,Bug,Open,Sakai,software,"On 25 and 23, if the instructor posts an assignment with a future open date, the student does see the assignment listed under tasks in the Dashboard. One plus is that there is no option to actually go to the assignment.

22x handles this differently, (possibly because it was fixed in 22 and 23.0? [https://sakaiproject.atlassian.net/browse/SAK-47114|https://sakaiproject.atlassian.net/browse/SAK-47114|smart-link] ) 22x displays the future open assignment to the instructor but not the student.

Tested draft assignment on all 3 versions and draft assignments are not displayed at all under Tasks."
Rubrics: Placeholder text issue with editing a Criterion,Bug,Verified,Sakai,software,"If you edit a criterion in the Rubrics tool, enter a new title, click cancel, and then press the edit button again, the text you just entered will be there despite clicking cancel. However, the actual name of the criterion does not save, as expected. Issue only affects 25x."
Site Import - Granular tools can't add the tool to a site,Bug,Open,Sakai,software,"With [https://sakaiproject.atlassian.net/browse/SAK-49673|https://sakaiproject.atlassian.net/browse/SAK-49673|smart-link], tools were given a granular import option. The tools that have this option can no longer add the tool to the site if it doesnâ€™t already exist there.

The data is there, and as soon as the tool is added via Site Info-> Manage Tools, the imported data appears. 

This affects: 

* Assignments
* Syllabus
* Announcements
* Resources
* Discussions
* Tests & Quizzes
* Rubrics
* Conversations

This does not impact

* Sign-Up
* Calendar
* Lessons  - But suspect this is only because currently the granular import isnâ€™t working - itâ€™s importing everything each time. "
Site Import - Merge is replacing data in Conversations,Bug,Verified,Sakai,software,Site Info â†’ Import From Site â†’ Merge data is removing any existing Conversations in a site.
Lessons: Page layout checklists include custom CSS,Bug,Closed,Sakai,software,"When you add either the â€œInterior Layout with Resourcesâ€ or â€œInterior Layout with Tasksâ€ page layout in Lessons, the checklist item has a custom CSS set. In 22.x, this inâ€™t a significant issue since it is a light grey background and dark green text. However, in 23.x and 25/Trunk, the background is purple with the same green text. The contrast is bad. Itâ€™s a bit better in dark mode, but not much. "
Lessons: border color property  of css class .col<color>-trans takes no effect,Bug,Open,Sakai,software,"Steps to reproduce:

* Edit a section/column of content in lessons
* Choose any colors and disable Show Border option
* The border lines are still visible (border-color is taken from css class .column)

The css .col<color>-trans does have property border-color: transparent, but this does not have predecence.



I am not sure if this is indeed a bug. For me it looks like that the indented behavior is, that the  property border-coler set in class .column should be overruled. But that does not happen. 





PS: In the file _lessonbuilder.scss seems to be a small typo: {{colnpurple-tran}} should probably be {{.colnpurple-trans}}"
Assignments: Grader distorts group assignment scores with overrides,Bug,In Progress,Sakai,software,"When using Grader to override scores for group assignments, the main score is distorted by an override score if applied to the first student listed in the group."
Prompt user to designate a name for the new item when duplicating an assignment or assessment,Feature Request,Open,Sakai,software,"I recently noticed that the user experience is quite different when you duplicate items in different tools within Sakai. I think Assignments and Tests & Quizzes could benefit by being more consistent with the way that Discussions duplicates items. Let me explain.

In Discussions, when you duplicate a forum or topic, you are presented with a screen like the one below, where you have the option to rename the item before confirming duplication.

!2024-03-26_15-49-19.png|width=91.66666666666666%!

However, when you duplicate an assessment in Tests & Quizzes, you get a confirmation screen, but there is no option to rename the copy. 

!2024-03-26_15-46-39.png|width=91.66666666666666%!

This is annoying because it auto-names the duplicated item with â€œ- Copy #1â€ at the end of the title. So, then you have to immediately go to the item Settings, expand the About section, change the title, and then Save. Thatâ€™s a lot of extra steps to change the auto-created name, when it would be much more efficient to simply present the user with a screen similar to the one in Discussions, and let them have the option to rename the item prior to duplication. (See mockup below)

!2024-03-26_16-05-54.png|width=100%!

In Assignments, it doesnâ€™t ask you to confirm the duplication at all. Clicking on the â€œDuplicateâ€ link below an existing assignment immediately creates a Draft assignment with â€œ- Copyâ€ appended to the title. 

!2024-03-26_15-50-07.png|width=91.66666666666667%!

As with Tests & Quizzes, the user then has to Edit the assignment, change the title in the Settings, and Save. Several extra steps which could be avoided if they were allowed to specify the name of the copy upon duplication. 

It would be much better if all three tools had a similar workflow for duplication, so that the user experience across tools is more predictable."
Create a Sakai Course Export with the same fidelity as Site Import when imported into another Sakai instance,Feature Request,Open,Sakai,software,"Currently, if you need to move a Sakai site from one instance of Sakai to a new instance, it is very difficult to accomplish and usually requires a lot of manual work. While it is possible to export the course in IMS CC format, that format results in an incompletely imported site which requires a lot of cleanup. Likewise, the Sakai site archive format (which is only readily available for admin users) is also incomplete and requires a lot of manual cleanup and/or tweaking after the import. Many of the tools and content elements in Sakai are Sakai-specific and have no specification in the IMS CC format (for example, Lessons section layouts, checklists, or in-line questions; Dashboard tool content and widget settings; etc.). In addition, some of the items which are in the IMS CC spec, are not configured in such a way to make for a good user experience - for example, the handling of Resources where lots and lots of folders and files with indecipherable names are created. 

I would like to propose that we create a new type of Sakai export that is Sakai-specific and which includes the following features:

# More detailed information about the configuration and use of Sakai tools so that the content, once imported, provides a complete and fully optimized copy of the original site. Ideally, this type of Sakai export or archive would provide the same level of site fidelity that you get when you do an â€œImport from Siteâ€ to copy from one site to another on the same instance. However, this export would allow you to copy a site to another server. 
# Individual instructors should be able to create and download this export for their own sites.
# Admins should also be able to export multiple courses (or select a term at a time) to do bulk exports and downloads on demand as well as on a specified schedule.

With the advent of Sakai Plus and the desire to use Sakai as a potential publishing tool for distributing content via LTI, the use case of moving an entire course from one instance of Sakai to another is likely to become more common. Additionally, the ability to export a high fidelity course archive would also make it easier for institutions to back up and remove older sites from the production server and still maintain access to an easy-to-restore version of the site. 

Incidentally, it is not uncommon for LMSâ€™s to have an LMS-specific export as an option in addition to an IMS CC option. Brightspace and Moodle both do this. "
Tests & Quizzes: Allow question to be copied into the current question pool (duplicate question),Improvement,Open,Sakai,software,"Currently, if an instructor has a question pool, they canâ€™t create a copy of the question in the current pool. It gives an error - â€œThis question is already in one or more of the specified poolsâ€. 

There is a good use case for allowing the instructor to duplicate question(s) in the current pool. If they are creating a set of questions that follow a common theme, it is much faster to copy a question then edit then to create a new one with the same text and answer options.

Also, this limitation against duplicate questions only protects against copying a question into itâ€™s existing pool. An instructor can create a copy in a temporary pool, then copy it from the temp pool back to the main pool. It doesnâ€™t check to make sure they donâ€™t manually create two identical questions. Instructors can copy questions from a test part into a question pool multiple times, creating duplicate sets. It feels a bit arbitrary, when you can have duplicate questions created by other methods, but not using the Copy functionality. "
Can't comment on a conversations post. Nothing happens and there is a console error.,Bug,Verified,Sakai,software,Can't comment on a conversations post. Nothing happens and there is a console error.
Conversations: getPostsByTopicId fails sometimes on Windows,Bug,Resolved,Sakai,software,"This test fails about 20% of the time on Windows

{noformat}Error: [ERROR] org.sakaiproject.conversations.impl.ConversationsServiceTests.getPostsByTopicId  Time elapsed: 0.142 s  <<< FAILURE!
org.junit.ComparisonFailure: expected:<Thread [1]> but was:<Thread [2]>
	at org.junit.Assert.assertEquals(Assert.java:117)
	at org.junit.Assert.assertEquals(Assert.java:146)
	at org.sakaiproject.conversations.impl.ConversationsServiceTests.getPostsByTopicId(ConversationsServiceTests.java:878)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method){noformat}"
Profile: SQLIntegrityConstraintViolationException,Bug,Open,Sakai,software,"I am seeing the following error on both 25x and 23x when I click on Home > Profile, (it is not on 22x):

{panel:bgColor=#deebff}
25-Mar-2024 18:41:24.557 WARN [http-nio-20313-exec-60] o.s.d.i.BasicSqlService.dbWriteCount Sql.dbWrite(): recordAlreadyExists: true, failQuiet: 1, : error code: 1062, sql: insert into SAKAI_LOCKS (TABLE_NAME,RECORD_ID,LOCK_TIME,USAGE_SESSION_ID) values (?, ?, ?, ?), binds:  SAKAI_PREFERENCES -621207921 - 15935c7b-202c-412a-9ddf-60b8c2a5053c 20240325224124543 a77ee625-9a31-466b-9d6b-74866836d886, error: java.sql.SQLIntegrityConstraintViolationException: (conn=31647) Duplicate entry 'SAKAI_PREFERENCES--621207921 - 15935c7b-202c-412a-9ddf-60b8c2...' for key 'SAKAI_LOCKS_INDEX'
{panel}"
Assignments: NPE due to AssignmentAction.getNonInlineAttachments,Bug,Closed,Sakai,software,Refer to the test plan for the use case. An example stack trace and screencast are attached.
Tests & Quizzes: Missing status label translations,Bug,Resolved,Sakai,software,"Missing translation or format update for the following strings:

{noformat}assessment_status_draft = Working Copy (Draft)
assessment_status_pending = Scheduled (Published)
assessment_status_inactive = Closed (Published){noformat}

For Spanish, Catalan & Euskera (at least)"
Add Border to the timeout alert dialog,Bug,Open,Sakai,software,The timeout alert dialog box needs border around it.
Signups: Action buttons (check all / clear all) buttons do not follow dark mode theme. ,Bug,Open,Sakai,software,Action buttons (check all / clear all) buttons do not follow dark mode theme under the â€˜exportâ€™ tab. 
Rubrics: Editing item dialogue does not follow dark mode theme. ,Bug,Open,Sakai,software,Edit rating dialogue does not follow dark mode. Refer to screenshot. 
Wiki: Side bar text is not readable. ,Bug,Resolved,Sakai,software,Page results on side bar is not visible. 
Wiki: Search results do not follow dark mode. ,Bug,Verified,Sakai,software,Search results for wiki do not follow dark mode theme. 
Dropbox: Upload files to multiple drop boxes' page does not follow dark mode theme. ,Bug,Open,Sakai,software,Upload files to multiple drop boxes' page does not follow dark mode theme. 
Drop Box: Web address on folder details does not follow dark mode theme,Bug,Open,Sakai,software,Web address on folder and file details does not follow dark more theme.
Drop box: Create text document features does not follow dark mode theme. ,Bug,Open,Sakai,software,Create text document does not follow dark mode theme. Refer to screenshot. 
Dropbox: The header of copyright dialog box is not readable on dark mode. ,Bug,Open,Sakai,software,Header for copyright claim on dialog box is not readable. 
Rubrics: Toolbar on left disappears when a TA/student views the unlocked Rubric tool,Bug,Closed,Sakai,software,"When the Rubric tool is unlocked through Site Info->Tool Order, if a TA or Student accesses the Rubric tool, the entire page is blank (expected) but the toolbar on the left is completely gone. Clicking the 3 white lines next to the Sakai logo in the top left does not make the toolbar reappear.

Attached are console errors that appear, not sure if related.

Issue affects 25x and 23x."
Drop Box: Helper text on 'add links' is not readable.,Bug,Open,Sakai,software,"Helper text beneath forms is not readable, could be made more visible. "
Drop Box: Add web link description does not follow the dark mode theme.,Bug,Open,Sakai,software,Add web link description does not follow the dark mode theme. Refer to screenshot. 
Discussions: Short description does not follow dark mode. ,Bug,Open,Sakai,software,"Short description does not follow dark mode. For trunk only short description does not follow dark more, but for 23 the whole form does not follow dark mode. Refer to screenshots. "
Kebab menu on conversations post is coloured incorrectly in dark mode,Bug,Verified,Sakai,software,Kebab menu on conversations post is coloured incorrectly in dark mode. The css needs updating.
Gradebook: Text input on gradebook does not follow dark mode theme. ,Bug,Open,Sakai,software,Text input on gradebook does not follow dark mode theme.  Refer to screenshot. 
Assignments: Ckeditor text boxes stop following dark more theme after submission is graded or â€˜doneâ€™ is clicked,Bug,Open,Sakai,software,Ckeditor text boxes stop following dark more theme after submission is graded or â€˜doneâ€™ is clicked
Rubrics: Using spacebar to copy a rubric creates two rubrics,Bug,Open,Sakai,software,"In Rubrics tool, if you tab over to the Copy button for a rubric (icon with two overlapping pages), and use spacebar to press the button, two new rubrics are created and two popups are created as well. After closing the first popup with keyboard, the second popup is glitchy and cannot be selected using the keyboard, rendering the page unusable until you refresh it.

Using the enter key instead of the spacebar works fine, though, and only creates 1 copy.

See attached video."
Gradebook: Wicket.Ajax.Call.processComponent console error,Bug,Resolved,Sakai,software,"When entering a grade in the gradebook, a wicket error displays. It doesnâ€™t matter if a comment is added or not.

wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1
 Wicket.Ajax:  Wicket.Ajax.Call.processComponent: Component with id [[ide7]] was not found while trying to perform markup update. Make sure you called component.setOutputMarkupId(true) on the component whose markup you are trying to update.
ï»¿"
Rubrics: Comment pop-up displays undefined when instructor grades,Bug,Closed,Sakai,software,"Iâ€™m not seeing this issue on 23x. If the instructor adds a rubric to an assignment or the gradebook, etc, then adds a comment, the comment pop-up initially displays â€œundefinedâ€."
Severe critical error during deployment with Tomcat 9.0.87,Bug,Resolved,Sakai,software,"A severe critical error (see attached log) is thrown for Sakai 23 and 25 when deployed with Tomcat 9.0.87. Downstream, accessing the Preferences tool will yield the Error screen and throw exceptions.

I surmise this may be a Tomcat bug and not a Sakai issue. This severe critical error does not manifest when Sakai is deployed with Tomcat 9.0.86. The temporary solution may be to revise the master/pom.xml file to refer to 9.0.86 until a future version of Tomcat does not induce 

I have not tested Sakai 22 which may have this problem too, but Sakai 21 does not."
"Messages: On 'Reply to all', include last users that joined the groups to which the mail was sent",Bug,Resolved,Sakai,software,"With Messages tool you can send a mail to the users that are part of a specific group.
Users that join the group after the mail is sent wonâ€™t receive any reply when â€˜Reply to allâ€™ is used."
Assignments: Correct the format of Similarity Reports in the Grader,Bug,Closed,Sakai,software,"The Similarity Reports section in the Sakai Grader is not properly adapted for dark mode.

Before:

!image-20240509-102535.png|width=698,height=528,alt=""image-20240509-102535.png""!

!image-20240509-102553.png|width=698,height=525,alt=""image-20240509-102553.png""!

After:

!image-20240509-102624.png|width=699,height=525,alt=""image-20240509-102624.png""!

!image-20240509-102637.png|width=700,height=525,alt=""image-20240509-102637.png""!

The originality service name was not displayed for the Grader. It was solved in [https://sakaiproject.atlassian.net/browse/SAK-50078|https://sakaiproject.atlassian.net/browse/SAK-50078|smart-link] "
Update Lombok 1.18.32,Bug,Closed,Sakai,software,"h3. v1.18.32 (March 20th, 2024)

* PLATFORM: Initial JDK22 support added.
* PLAFTORM Added support for Eclipse 2024-03. [Issue #3620|https://github.com/projectlombok/lombok/issues/3620].
* PLATFORM: Added support for recent versions of eclipse (released Q4 2023 or later or so) which would cause failures in the eclipse logs such as {{java.lang.NoSuchMethodError: 'java.lang.StringBuffer org.eclipse.jdtâ€¦}}. [Issue #3564|https://github.com/projectlombok/lombok/issues/3564].
* FEATURE: {{@Locked}} has been introduced. Like {{@Synchronized}} but with {{java.util.concurrent.locks}} locks instead of the {{synchronized}} primitive. Thanks, Pim van der Loos for the PR! [Issue #3506|https://github.com/projectlombok/lombok/issues/3506].
* NECROMANCY: Inlining a generated getter in eclipse would result in eclipse incorrectly replacing calls with {{@Getter}} instead of the actual field's name. [Issue #562|https://github.com/projectlombok/lombok/issues/562]. This issue is almost old enough to drink. Points for dedication go to Rawi for fixing this one.
* BUGFIX: When {{@SuperBuilder}} was used on a type with an annotated generic type, it would error {{wrong number of type arguments}}. [Issue #3592|https://github.com/projectlombok/lombok/issues/3592].
* BUGFIX: It was possible to create an infinite build loop using {{@ExtensionMethod}}. [Issue #3225|https://github.com/projectlombok/lombok/issues/3225].
* BUGFIX: Using {{@Getter(lazy=true)}} would fail if the expression contained a variable called {{value}}. [Issue #2917|https://github.com/projectlombok/lombok/issues/2917].
* BUGFIX: Many lombok features wouldn't work properly on records contained within an outer type unless you explicitly marked it {{static}}. [Issue #3497|https://github.com/projectlombok/lombok/issues/3497] [Issue #3559|https://github.com/projectlombok/lombok/issues/3559].
* BUGFIX: Eclipse projects using the {{com.pro-crafting.tools:jasperreports-plugin}} will now compile.
* BUGFIX: {{@FieldNameConstants}} now works when generated fields are involved. [Issue #3529|https://github.com/projectlombok/lombok/issues/3529].
* IMPROBABLE BREAKING CHANGE: For JSpecify, the package name changed from {{org.jspe}}"
Fix Custom Icon (FontAwesome Icon Picker Popup) Issues in Dark Mode and Add Placeholder Text,Bug,Closed,Sakai,software,Custom Picker doesnâ€™t have a placeholder value. its all blank right now.  and it looks blurry in dark mode.
Update Apache CXF 3.6.3,Bug,Closed,Sakai,software,"The 3.6.3 release is an updated version of 3.x to move to a fully JDK-11 baseline. This allows for new dependencies, security updates, and a few additional features, yet remains JEE 8.x compatible(javax.* namespace). For a complete list of new features, API changes, etc... please see the [release notes|https://cxf.apache.org/cxf-363-release-notes.html] and [migration guide|https://cxf.apache.org/docs/36-migration-guide.html]."
Allow Checklists in Lessons to span pages,Feature Request,Open,Sakai,software,"The Checklist feature in Lessons is a great way to keep track of course progress. However, it is sometimes frustrating that Lessons does not allow you to choose from items on other pages when linking items to be checked off automatically. I think it would be extremely useful to have an option to select any required item in the site, not just the ones displayed on the current page. Perhaps in the selection screen, it could list an index-type view of required items, so that it would be clear to the user on which page the item is located, as shown in the mockup below.

!checklist-select-item.png|width=75%!"
LTI13 should provide more SCOPEs in JWT,Bug,Resolved,Sakai,software,"This is related to [https://sakaiproject.atlassian.net/browse/SAK-49039|https://sakaiproject.atlassian.net/browse/SAK-49039|smart-link] - but highlights the further problem where Sakai needs to communicate to the tool on the launch which scopes it is willing to handle on the line item URL.

This is the reference in the IMS spec showing which scopes should be included on the launch.

[https://www.imsglobal.org/spec/lti-ags/v2p0#example-link-with-one-line-item-tool-has-all-permissions|https://www.imsglobal.org/spec/lti-ags/v2p0#example-link-with-one-line-item-tool-has-all-permissions|smart-link] "
PLUS_SUBJECT composite key is too big,Bug,Resolved,Sakai,software,"indexes = @Index(columnList = ""SUBJECT, TENANT_GUID, SAKAI_USER_ID, EMAIL"")

MySQL InnodB limit is 3072bytes. Each char is 3 bytes in utf8mb3 so we have 1024 chars"
Lessons: Content links have change assignment options,Bug,Verified,Sakai,software,"This is not occuring on 23.x

The Edit Item dialog for a content link shows Change Assignment and Edit Assignment, rather than Change File or URL"
Lessons: Add option to the Content Link and Embedded Content to switch to link/embedded,Feature Request,Open,Sakai,software,"If an instructor uses the Add Content â†’ Add Content Links to add a link to a file, image, or video, or uses the Add Content â†’ Embed Content on the page option to embed, sometimes they may decide they donâ€™t like that option and would prefer the other method for presenting content. 

Rather than the current workflow of creating a new embeded item or content link with the same URL/file (and risking the instructor uploading another copy of the same file), would it be possible to add an option to the Edit Item for a content link to convert it to an embedded item, and add a corresponding option for embedded content to convert it to a link? "
Lessons: Linking a newly created assignment has invalid dates,Bug,Open,Sakai,software,"In Lessons, if you want to â€œLink to an Assignmentâ€, and then click â€œCreate new assignment using Assignmentsâ€, the assignment creation page has no date picker available (see attached picture). If you try to post the assignment, it says there is an invalid date. Issue seems to affect 25x and 23x."
Gradebook: Multiple rules do not work in permissions for TAs.,Bug,Open,Sakai,software,"If multiple rules are set for TAs, the results donâ€™t comply with said rules. For 24/23 multiple rules results in all grades being locked. For 22, multiple rules results in all site participants not showing."
Test and quizzes: Next and previous buttons on test list does not follow dark mode,Bug,Closed,Sakai,software,Next and previous buttons on paginate do not follow the dark mode theme. Refer to screenshot.
Assignments Progress Bar does not handle resubmission correctly,Bug,Resolved,Sakai,software,Instructor allowing resubmission results in incorrect progress bar
"""Cancel"" button when creating an Event in the Calendar tool navigates to the ""List of Events"" page instead of the ""Calendar"" page",Bug,Open,Sakai,software,"When I login as an Instructor and try to create an event in the Calendar tool, clicking on the â€œCancelâ€ button navigates to the â€œList of Eventsâ€ page instead of the â€œCalendarâ€ home page with the calendar being displayed."
"Overlapping of ""Insert a link"" and ""Insert an image"" overlays ",Bug,Open,Sakai,software,"When I login as an Instructor and navigate to the Commons tool, there is an option to add a link or an image. Clicking on the â€œInsert an imageâ€ option followed by clicking on the â€œInsert a linkâ€ option does not close the former overlay. Instead, both overlays remain open until the â€œCancelâ€ option is selected, leading to both of them overlapping. In the best case scenario, only the current overlay should remain open with none of them overlapping.  "
Conversations:  o.h.e.j.s.SqlExceptionHelper.logExceptions (conn=3719) Duplicate entry,Bug,Closed,Sakai,software,"At this time this is only an issue on 25x. When creating a brand new topic there is an error in the server logs:

16-Mar-2024 11:46:11.882 ERROR [http-nio-20313-exec-38] o.h.e.j.s.SqlExceptionHelper.logExceptions (conn=3719) Duplicate entry '154fd53b-8d38-4659-87d0-11ac48f27f63-9278b346-14a5-428e-a87a-...' for key 'UniqueTopicStatus'

There are also console errors in the browser:

sakai-topic-YWUH57LT.js:562
 SyntaxError: Unexpected end of JSON input
    at sakai-topic-YWUH57LT.js:562:9159
sakai-topic-YWUH57LT.js:562
 Uncaught (in promise) TypeError: Cannot read properties of undefined (reading 'length')
    at sakai-topic-YWUH57LT.js:562:2150"
Conversations: user cannot edit topic unless console errors are present,Bug,Verified,Sakai,software,"The console errors affect both 25x and 23x, but on 23x they are present every time the user clicks on a topic, so the user can edit the topic each time. The console errors display as soon as a topic is clicked on 23x, but 25x itâ€™s hit or miss.

On 25x, sometimes the console errors display and this is when the user can edit a topic. If the console errors do not display, then when clicking to edit a topic, that side of the page is blank.

*I would expect no console errors and the ability to edit a topic.*

Console errors:

{noformat}sakai-topic-KP33V7P6.js:562 
 SyntaxError: Unexpected end of JSON input
    at sakai-topic-KP33V7P6.js:562:9159
sakai-topic-KP33V7P6.js:562 
 Uncaught (in promise) TypeError: Cannot read properties of undefined (reading 'length')
    at sakai-topic-KP33V7P6.js:562:2150{noformat}"
Conversations: Users unable to reply to topics - Uncaught TypeError: document.getElementById(...).getContent is not a function,Bug,Verified,Sakai,software,"On 25x, no user can reply to a post. The ckeditor is never exposed and the user only sees the checkbox for Private (only the author of the topic being replied to will see this). Tested as both student and instructor.

There is no issue with creating a post (both as instructor and student), so this error only affects reply.

Console errors:

{noformat} sakai-topic-KP33V7P6.js:562 
 Uncaught TypeError: document.getElementById(...).getContent is not a function
    at k._postToTopic (sakai-topic-KP33V7P6.js:562:2506)
    at k._publishPost (sakai-topic-KP33V7P6.js:562:2396)
    at rt.handleEvent (chunk-IV44QDQG.js:4:6020)
ï»¿{noformat}"
Assignments: student should not get a RESUBMISSION if there is no submission,Bug,Open,Sakai,software,"If a student doesnâ€™t complete a submission in the regular allotted time (Accept Until date), then a resubmission date does not apply to that user. Only an Extension would then apply to that user."
Use modern no-cache headers,Bug,Resolved,Sakai,software,Many methods use very outdated versions of headers to avoid caching. Many of the headers are wrong and contradictory.
Discussions: Disappearing calendar control in topic/forum settings,Bug,Closed,Sakai,software,"When both Calendar and Discussions are in a site, the checkbox labeled â€œSend these Open and Close dates to Calendarâ€ in Topic Settings (or Form Settings) appears and rapidly disappears when attempting to specify open and/or close dates for the topic/forum. Refer to the test plan and the attached screencast, DisappearingCalControlInDiscussions.mp4."
LTI 1.1 Test Tool does not delete the grade,Bug,Closed,Sakai,software,"This is working on 22x. The 1.1 LMS Test Tool does not delete the grade from the Gradebook (but it thinks it did) on 24x and 23x. 

The results returned after clicking to Delete Grade makes it look like the grade was deleted from the Gradebook, but looking in the Gradebook, the grade is still there. Am attaching the results returned.

From the server logs:

13-Mar-2024 19:35:37.356 INFO [http-nio-20123-exec-245] o.s.b.u.SakaiBLTIUtil.handleGradebook Delete Score site=93b40e9a-ed1d-4791-b628-4a80ffa95a6b title=AGS-LTI1.1-Test-Tool user_id=959ad4fe-6055-4c65-bd77-f5f342752ba5"
Gradebook: Quick Fix view does not adapt to percentages entry,Bug,Closed,Sakai,software,"This issue critically depends on a fix for SAK-49811. Furthermore, the UI for the Quick Entry tab does not adapt appropriately in two key areas when Grade Entry is set to percentages.

# A label at the top of the Quick Entry tab refers to â€˜pointsâ€™ instead of â€˜relative weightâ€™. Refer to the attached screenshot, QuickEntryTab-PointsReference.png.
# The Set Score for Empty Grades modal implies that the entered score should be points instead of a percentage, due to the text fieldâ€™s label to the right, consisting of a â€˜/â€™ symbol followed by the max points. Refer to the attached screenshot, SetScoreForEmptyGrades-PointsEntry.png.

Also, if SAK-49811 is not resolved, the entry of percentage scores in the Quick Entry tab values will be distorted."
Assignments > Add Submission History and Submission Timestamps to Grader,Feature Request,Closed,Sakai,software,"Even though Shawn Foster already submitted a JIRA for this issue [https://sakaiproject.atlassian.net/browse/SAK-45416|https://sakaiproject.atlassian.net/browse/SAK-45416|smart-link], I wanted to create a new one here with more details and added clarification.

In short, while the *submission history* and *submission timestamps* are viewable in the Assignments â€œlegacyâ€ grader, this needed functionality is still missing in the â€œnewâ€ grader. This missing functionality is causing some confusion at our institution.

For instance: Assume an instructor creates an assignment and wishes to allow a student multiple resubmission attempts to track a studentâ€™s progress. If a student uploads and submits, and then later â€“ without removing the original submission â€“ the student uploads and submits an attachment with the same naming convention, then the instructor has no way to discern the most recent submission in the â€œnewâ€ Grader.Â This issue gets even more challenging as the student resubmits more and more.

Please see attached screenshots for greater clarity."
Unable to remove Image from profile using keyboard testing,Bug,Open,Sakai,software,"While Keyboard testing unable to remove pictures from the picture gallery, cursor has to move on the â€œMy Pictureâ€ but the cursor is skipping  â€œMy Picturesâ€ and moving to â€œAdd Picturesâ€."
View Site As: Hidden tool elements display in Overview,Bug,Open,Sakai,software,"When initiating the View Site As feature on a tool that is hidden from students, remnants of the hidden tool disconcertingly display in the left column of the Overview tool when the View Site As â€œsessionâ€ begins. (These remnants disappear when navigating away and then back to the Overview tool.)"
Sitestats: Student view needs the UI updated,Bug,Closed,Sakai,software,"The student view of Statistics on 24 and 23 is not very appealing. 22x looks much better.

There is no padding for the cards and the cards are smaller than on 22x. "
"Announcements: While Keyboard testing, when tried to copy the RSS URL within the tool, unable to copy and paste in a new browser using keyboard.",Bug,Open,Sakai,software,"While keyboard testing, in the announcements tool when navigated to RSS URL unable to use keyboard command Ctrl+C to use Copy/paste the URL ."
"Discussion- While keyboard testing, when tried to access the grade section within the tool, unable to grade.",Bug,Open,Sakai,software,"While Keyboard testing, when trying to grade the discussion within the tool, a pop-up window appears which is not keyboard accessible, and able to use only Esc key to close the window."
Site Info: View section membership table not contained inside pop-up,Bug,Verified,Sakai,software,"24x & 23x display the join groups membership correctly, but for sites with sections, the table bleeds over the edge of the pop-up."
Dashboard: java.sql.SQLIntegrityConstraintViolationException and java.io.FileNotFoundException,Bug,Resolved,Sakai,software,"Testing [https://sakaiproject.atlassian.net/browse/SAK-46629|https://sakaiproject.atlassian.net/browse/SAK-46629|smart-link] 

The Dashboard image is not imported whether choosing replace or merge now. There are a couple of stack traces:

{noformat}11-Mar-2024 18:14:47.655 ERROR [pool-11-thread-3] o.s.c.i.DbContentService.streamResourceBodyFilesystem Failed to read resource: /group/5ee08007-12e1-4b24-89c0-76afdd5d8732/course_image.png len: 2109032

java.io.FileNotFoundException: /var/sakai-assets/trunk-maria/assets/2024/071/22/ab4d74c0-2d10-4cfb-b897-60f2eab43846 (No such file or directory)

	at java.base/java.io.FileInputStream.open0(Native Method) ~[?:?]

	at java.base/java.io.FileInputStream.open(FileInputStream.java:219) ~[?:?]

	at java.base/java.io.FileInputStream.<init>(FileInputStream.java:157) ~[?:?]

	at org.sakaiproject.content.impl.DefaultFileSystemHandler.getInputStream(DefaultFileSystemHandler.java:70) ~[?:?]

	at org.sakaiproject.content.impl.DbContentService$DbStorage.streamResourceBodyFilesystem(DbContentService.java:2191) ~[?:?]

	at org.sakaiproject.content.impl.DbContentService$DbStorage.streamResourceBody(DbContentService.java:2128) ~[?:?]

	at org.sakaiproject.content.impl.BaseContentService$BaseResourceEdit.streamContent(BaseContentService.java:12096) ~[?:?]

	at org.sakaiproject.content.impl.BaseContentService.transferCopyEntities(BaseContentService.java:7699) ~[?:?]

	at org.sakaiproject.content.impl.BaseContentService.transferCopyEntities(BaseContentService.java:13074) ~[?:?]

	at org.sakaiproject.sitemanage.impl.SiteManageServiceImpl$1.doInTransactionWithoutResult(SiteManageServiceImpl.java:635) ~[?:?]

	at org.springframework.transaction.support.TransactionCallbackWithoutResult.doInTransaction(TransactionCallbackWithoutResult.java:36) ~[spring-tx-5.3.32.jar:5.3.32]

	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-5.3.32.jar:5.3.32]

	at org.sakaiproject.sitemanage.impl.SiteManageServiceImpl.transferCopyEntities(SiteManageServiceImpl.java:628) ~[?:?]

	at org.sakaiproject.sitemanage.impl.SiteManageServiceImpl.importToolsIntoSite(SiteManageServiceImpl.java:442) ~[?:?]

	at org.sakaiproject.sitemanage.impl.SiteManageServiceImpl.lambda$importToolsIntoSiteThread$0(SiteManageServiceImpl.java:155) ~[?:?]

	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]

	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]

	at java.base/java.lang.Thread.run(Thread.java:829) [?:?]
{noformat}

{noformat}11-Mar-2024 18:14:47.894 WARN [pool-11-thread-3] o.s.d.i.BasicSqlService.dbWriteCount Sql.dbWrite(): recordAlreadyExists: true, failQuiet: 1, : error code: 1062, sql: insert into SAKAI_LOCKS (TABLE_NAME,RECORD_ID,LOCK_TIME,USAGE_SESSION_ID) values (?, ?, ?, ?), binds:  CONTENT_RESOURCE 1839082704 - /group/81ffb72e-0125-4375-aa89-81ba2d50d987/course_image.png 20240311221447890 0cf642eb-18f6-4138-af49-a7e28cffb930, error: java.sql.SQLIntegrityConstraintViolationException: (conn=31961) Duplicate entry 'CONTENT_RESOURCE-1839082704 - /group/81ffb72e-0125-4375-aa89-...' for key 'SAKAI_LOCKS_INDEX'
{noformat}"
Gradebook misalignment with very long category name,Bug,Closed,Sakai,software,Long category names can create mis-alignment issues
Update Apache commons compress 1.26.1,Bug,Closed,Sakai,software,"h4. [ANNOUNCE] Apache Commons Compress Version 1.26.1

The Apache Commons team is pleased to announce Apache Commons Compress Version 1.26.1. Apache Commons Compress defines an API for working with compression and archive formats. These include bzip2, gzip, pack200, LZMA, XZ, Snappy, traditional Unix Compress, DEFLATE, DEFLATE64, LZ4, Brotli, Zstandard and ar, cpio, jar, tar, zip, dump, 7z, arj. Historical list of changes: [https://commons.apache.org/proper/commons-compress/changes-report.html|https://commons.apache.org/proper/commons-compress/changes-report.html|smart-link]  For complete information on Apache Commons Compress, including instructions on how to submit bug reports, patches, or suggestions for improvement, see the Apache Commons Compress website: [https://commons.apache.org/proper/commons-compress|https://commons.apache.org/proper/commons-compress|smart-link] / Download page: [https://commons.apache.org/proper/commons-compress/download_io.cgi|https://commons.apache.org/proper/commons-compress/download_io.cgi|smart-link]  Gary Gregory - Apache Commons Team"
Lessons-LTI: Adding a Learning App or an External Tool to Lessons does not open in a new page,Bug,In Progress,Sakai,software,"This will probably also affect 22x (test after [https://sakaiproject.atlassian.net/browse/SAK-49825|https://sakaiproject.atlassian.net/browse/SAK-49825|smart-link] is resolved).

When adding a Learning App or an External Tool, the default in Lessons is to open in a new window, but it does not work. This may be related to [https://sakaiproject.atlassian.net/browse/SAK-49375|https://sakaiproject.atlassian.net/browse/SAK-49375|smart-link] 

Even when setting the target to a new window when adding an item from the store, it does not open in a new window.

Iâ€™m not sure if this is a Lessons problem or an LTI problem."
LTI: NPE rg.sakaiproject.basiclti.util.SakaiBLTIUtil.getSignedPlacement(SakaiBLTIUtil.java:2123),Bug,Resolved,Sakai,software,"When trying to add a Learning App to Lessons on 22x, I receive a 500 error. This is not affecting 24x and 23x.

Site (only available through 3/10/24): [https://qa22-mysql.nightly.sakaiproject.org/portal/site/b0285190-13b0-4872-9b1e-b7aeeafb3f1e|https://qa22-mysql.nightly.sakaiproject.org/portal/site/b0285190-13b0-4872-9b1e-b7aeeafb3f1e]

Console error:

{noformat}Failed to load resource: the server responded with a status of 500 ()
/access/basiclti/site/b0285190-13b0-4872-9b1e-b7aeeafb3f1e/tool:2?flow=lessons&contentReturn=https%3A%2F%2Fqa22-mysql.nightly.sakaiproject.org%2Fportal%2Ftool%2Fb5641bd8-cffc-4771-af3d-773fe45ad91c%2Fsakai.basiclti.admin.helper.helper%3FeventSubmit_doSingleContentItemResponse%3DSave%26flow%3Dlessons%26sakai.session%3D5c053def-1547-4781-847c-abdeeca0e88f.ip-172-31-7-189%26returnUrl%3Dhttps%253A%252F%252Fqa22-mysql.nightly.sakaiproject.org%252Fportal%252Fsite%252Fb0285190-13b0-4872-9b1e-b7aeeafb3f1e%252Ftool%252Fbb42349a-2d72-4ed0-9bd5-85e433767ac7%252FBltiPicker%253F7%2526itemId%253D-1%2526addBefore%253D%26panel%3DPostContentItem%26tool_id%3D2%26sakai_csrf_token%3De879a24d7c231f35f5fa40af4666799dd71eed400f9513f707b7899e94994bff&remember=always+bring+a+towel&accept_multiple=false&accept_media_types=application%2Fvnd.ims.lti.v1.ltilink&flow=lessons&state=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzaWduYXR1cmUiOiIxYzY3YTdmZDMzM2NhNzg5NmQzZjY1MDIyYmY4OGYwNWZlNjA1M2I5YzVmZmIzNWIwNDUzYTYyYzdiOWYyNjk2IiwidGltZSI6MTcxMDAwMTgyNywidGFyZ2V0X2xpbmtfdXJpIjoiaHR0cHM6Ly9zYWthaS50c3VnaWNsb3VkLm9yZy90c3VnaS9sdGkvc3RvcmUvIn0.GuNY5COCnduV5tnz4SZUNxjvPo0iN-_D5mFFo_Ojfv4&nonce=65ec8ea371170&redirect_uri=https%3A%2F%2Fsakai.tsugicloud.org%2Ftsugi%2Flti%2Foidc_launch:1{noformat}

Server logs:

{noformat}09-Mar-2024 11:33:20.629 WARN [http-nio-20022-exec-24] o.s.a.t.AccessServlet.dispatch dispatch(): exception: 

java.lang.NullPointerException: null

	at org.sakaiproject.basiclti.util.SakaiBLTIUtil.getSignedPlacement(SakaiBLTIUtil.java:2123) ~[?:?]

	at org.sakaiproject.lti13.LineItemUtil.getDefaultLineItem(LineItemUtil.java:561) ~[?:?]

	at org.sakaiproject.basiclti.util.SakaiBLTIUtil.postLaunchJWT(SakaiBLTIUtil.java:1906) ~[?:?]

	at org.sakaiproject.basiclti.util.SakaiBLTIUtil.postContentItemSelectionRequest(SakaiBLTIUtil.java:1508) ~[?:?]

	at org.sakaiproject.basiclti.impl.BasicLTISecurityServiceImpl$1.handleAccess(BasicLTISecurityServiceImpl.java:488) ~[?:?]

	at org.sakaiproject.access.tool.AccessServlet.dispatch(AccessServlet.java:411) [sakai-access-impl-22-SNAPSHOT.jar:22-SNAPSHOT]

	at org.sakaiproject.access.tool.AccessServlet.doGet(AccessServlet.java:206) [sakai-access-impl-22-SNAPSHOT.jar:22-SNAPSHOT]

	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529) [servlet-api.jar:4.0.FR]

	at org.sakaiproject.vm.ComponentServlet.service(ComponentServlet.java:56) [sakai-velocity-tool-22-SNAPSHOT.jar:22-SNAPSHOT]

	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) [servlet-api.jar:4.0.FR]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.sakaiproject.oauth.filter.OAuthPostFilter.doFilter(OAuthPostFilter.java:76) [oauth-api-22-SNAPSHOT.jar:22-SNAPSHOT]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:496) [sakai-kernel-api-22-SNAPSHOT.jar:22-SNAPSHOT]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.sakaiproject.oauth.filter.OAuthPreFilter.doFilter(OAuthPreFilter.java:74) [oauth-api-22-SNAPSHOT.jar:22-SNAPSHOT]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) [tomcat-websocket.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) [catalina.jar:9.0.76]

	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) [catalina.jar:9.0.76]

	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) [catalina.jar:9.0.76]

	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) [catalina.jar:9.0.76]

	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) [catalina.jar:9.0.76]

	at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:768) [catalina.jar:9.0.76]

	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) [catalina.jar:9.0.76]

	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) [catalina.jar:9.0.76]

	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) [tomcat-coyote.jar:9.0.76]

	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) [tomcat-coyote.jar:9.0.76]

	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) [tomcat-coyote.jar:9.0.76]

	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) [tomcat-coyote.jar:9.0.76]

	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) [tomcat-coyote.jar:9.0.76]

	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-util.jar:9.0.76]

	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-util.jar:9.0.76]

	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-util.jar:9.0.76]

	at java.lang.Thread.run(Thread.java:829) [?:?]
	{noformat}"
"Portal: Tutorial pops up on every page for an admin user, even after being dismissed",Bug,Verified,Sakai,software,"Not sure if this is related to the fix in [https://sakaiproject.atlassian.net/browse/SAK-49755|https://sakaiproject.atlassian.net/browse/SAK-49755|smart-link] , but it only seems to affect the admin user. After logging in and dismissing the tutorial, it just keeps popping up on every single page that the admin visits."
"Tests & Quizzes: pubslished test's availability changes to ""Anyone with link"" when the site title changes",Bug,Open,Sakai,software,"Tests & Quizzes: pubslished test's availability changes to ""Anyone with link (Anonymous Survry)"" when the site title changes.  Thus, the Grading & Submission options for â€œAnonymous Gradingâ€ and â€œAdd to Gradebookâ€ become locked.

What happens is that the database table SAM_PUBLISHEDACCESSCONTROL_T.releaseto column is set to the original site title, but after the site tile is changed, that column remains as the old title.  Then it seems that samigo canâ€™t find a matching title in releaseto so it changes the availability to â€œAnyone with linkâ€.  (I havenâ€™t had a chance to step debug exactly where it does that comparison)"
Site Info: View Membership links for groups missing,Bug,Resolved,Sakai,software,"When groups are present in a site, the groups table within the collapsible Groups section in the Site Information tab should present a â€˜View Membershipâ€™ link in the â€˜Membershipâ€™ column.Â 

This is working in Sakai 21 but is no longer working in Sakai 24, 23, and 22. Refer to the attached screenshots."
Gradebook-Rubrics: Rubric icon missing from student gradebook,Bug,Resolved,Sakai,software,Assignment created and configured with Rubric grading does not present a Rubric icon in the studentâ€™s gradebook.
"Rubrics: Weighted rubrics missing total percentage, points",Bug,Open,Sakai,software,"On 23.x, weighted rubrics have two lines below the rubric, above the Save Weights, Add Criterion, and Add Criterion Groups buttons.

The first line is total weight, giving the overal percentage. The second line is the weighted points, giving the minimum and maximum point value of the rubric. These were very useful for weighted rubrics to help instructors make sure that everything was set up correctly. Without the total weight percentage, instructors with long rubrics have to add up the weights themselves to make sure they are at 100% before saving. "
Rubrics: Save Weights no longer gives confirmation message,Bug,Open,Sakai,software,"On 23.x, when the instructor has a rubric using weights a  (/) Saved Successfully! message appears when they click Save Weights. This message does not appear on Trunk/24."
Rubrics: Adding weights to rubrics with without reloading page doesn't keep order,Bug,Open,Sakai,software,"If an instructor creates a rubric and adds additional criterion or groups, reorders them, then clicks weighted grading without reloading the Rubrics page, the order of the rubric criterion/groups is temporarily garbled.

I first noticed this with criterion groups. The first criterion group is moved to the very bottom of the rubric. Any other criterion groups disappear. With new criterion, they are moved back to the bottom of the rubric. Once the rubric weights are saved and the Rubrics page is refreshed, the rubric appears with the criterion/groups in the original order. 

This doesnâ€™t occur if the criterion/groups are created and not reordered. I am not able to reproduce this on 23.x

Screenshots:

RubricA-1.png - Criterion groups added and reordered. Looks normal
RubricA-2.png - Toggled weighted grading. Group A is at the very bottom. Group B is gone
RubricA-3.png - Saved weights and reloaded the page. Looks normal again. 

RubricB-1.png - Two new criterion added and reordered. Looks normal
RubricB-2.png - Toggled weighted grading. New criterion are back at the bottom of the rubric
RubricB-3.png - Saved weights and reloaded the page. Order restored"
Lessons: Default placeholder not updated in Catalan,Bug,Closed,Sakai,software,"The Lessons default placeholder in English shows this:

!image-20231222-113450.png|width=1440,height=599!

But the Catalan version shows this, comes from older versions of lessons:

!2024-03-07 15_24_05.png|width=1387,height=623!

This PR updates the placeholder HTML to the latest version."
Rubrics: First rubric created has extra name popup,Bug,Open,Sakai,software,"I am only able to reproduce this in the first rubric I create on Trunk after the server update. All later rubrics donâ€™t have this problem

When an instructor adds a new rubric on a fresh server, the Rubric Title modal appears as expected. I entered a name and clicked Save, then the modal window popped back up a second time. Once I saved the name the second time, everything seemed normal. "
"Grader: For ungraded assignments, should the grader's button still read ""Grade Submission""?",Bug,Open,Sakai,software,"Due to changes made in [https://sakaiproject.atlassian.net/browse/SAK-49766|https://sakaiproject.atlassian.net/browse/SAK-49766|smart-link] , does the graderâ€™s button text need to change to â€œAdd Commentsâ€ or something similar? "
Sakai Grader: The grader no longer has the green circle indicator when feedback comments or private notes have been added,Bug,Resolved,Sakai,software,"See [https://sakaiproject.atlassian.net/browse/SAK-48129|https://sakaiproject.atlassian.net/browse/SAK-48129|smart-link] 

At one time the Grader in Assignments had a green circle to indicate feedback comments or private notes had been entered. They have disappeared in 24x and 23x and it would be nice to have them again. This may have disappeared when the grader changed to a slide-out and now the instructor has to open comments or private notes to see that they have already left feedback/notes."
Use XML 1.1 serialization in BasicSerializableRepository,Task,Closed,Sakai,software,"When an assignment contains control characters in text fields (e.g. ASCII 4), archiving the assignment fails because the XML serialization fails with an error like:

{noformat}2024-02-13 16:56:55,441  WARN ajp-nio-0.0.0.0-8009-exec-1 org.sakaiproject.serialization.BasicSerializableRepository - Could not serialize to xml com.fasterxml.jackson.core.JsonGenerationException: Invalid white space character (0x1) in text to output (in xml 1.1, could output as a character entity){noformat}

Unfortunately itâ€™s not easy to sanitise such fields prior to archiving, because the XML serialization takes place at quite a low level, directly from the db mapping.

The solution is to use XML 1.1 serialization which permits these characters, encoded appropriately.

A full stack trace is included below."
Assignments: Upload all text for releasing needs to be updated,Bug,Open,Sakai,software,"With the changes in [https://sakaiproject.atlassian.net/browse/SAK-49766|https://sakaiproject.atlassian.net/browse/SAK-49766|smart-link] , comments without a grade are not automatically released when releasing a grade (and this is the expected behavior now), so the wording needs to change on the Upload all page when releasing grades upon upload.

Currently, the text reads: Release uploaded grades and feedback comments to students

If the instructor added only a comment and did not give the student a grade, then the comments are not released.

This should probably state â€œRelease uploaded gradesâ€ or something similar since feedback is only released for graded students."
Gradebook: â€˜Excuse/Include Gradeâ€™ with percentage entry distorts scores,Bug,Closed,Sakai,software,"For Grade Entry set to â€œpercentagesâ€, the â€˜Excuse/Include Gradeâ€™ control will distort the score stored in the database. Refer to the test plan for details.

(This bug is especially critical for Sakai 23 and later due to the Quick Entry feature. Gradebooks with percentage entry use the same logic that is producing this bug, making the possibility of distorted scores much more widespread. Thus, this is at least a critical bug.)"
"New ""inline submission"" link should not display for users without a submission",Bug,Closed,Sakai,software,"In [https://sakaiproject.atlassian.net/browse/SAK-49242|https://sakaiproject.atlassian.net/browse/SAK-49242|smart-link] there was an â€œinline submissionâ€ link introduced into the Sakai Grader so that instructors could view saved draft text if the student neglected to submit the draft. However, it is confusing to see the â€œinline submissionâ€ link (which does not go anywhere) when there is no draft at all. Furthermore, the inline submission link for student with no submission is visible prior to the due date for the assignment, which I donâ€™t think was the intent with the above Jira. 

For example, currently on the nightly server, if you create an assignment, and then immediately select Grade before the due date and before any students have started the assignment, you will see the inline submission link within the empty student submission screen. 

!no-submission.png|width=100%!

However, if you go in as a student and save a draft, then return to instructor view and bring up the student submission screen, you donâ€™t see the â€œinline submissionâ€ link at all. (This is also before the due date.)

!draft-submission.png|width=100%!

It seems to me that the â€œinline submissionâ€ link should not appear at all for students who have never started the assignment or saved a draft. It should only display after the due date for students who actually have a saved draft that has not been submitted, or a submitted draft. It does not make sense to show this link for students with no submission at all, since it may cause the instructor to think that there is a missing submission or that the link is broken since it doesn't do anything when the user clicks on it."
"Rubrics: Criterion summary, student summary includes criterion groups always worth 0 points",Improvement,Open,Sakai,software,"When viewing the criterion summary or student summary data for a graded rubric, whether in Gradebook, Assignments, Tests & Quizzes, or Discussions, the criterion groups appear. This really serves no purpose as the groups are only ever worth 0 points. If an instructor has a large rubric, the group non-data just takes up space. 

I would like to see the criterion groups either excluded from the student summay and criterion summary views OR provide the sum of the scores for all criterion below it and above the next criterion group (if there is one)"
Replace the getters and setters in the content hosting service with annotations.,Improvement,Resolved,Sakai,software,"Replace the getters and setters in the content hosting service with annotations. Also, remove the duplication of javadoc comments between the interface and implementations."
Rubrics: Inconsistent locking when assignment is graded without using the rubric,Bug,Open,Sakai,software,"When you have an assignment that is graded using a rubric, you can opt to simply enter a score in the points field without using the rubric. This is having inconsistent locking behavior. 

On 22.x, using Grader or Classic, entering a score without using the rubric does not lock the rubric

On 23.x and Trunk, if you enter a score without using the rubric using CLASSIC grader, the rubric does not lock

On 23.x and Trunk, if you enter a score without using the rubric using SAKAI GRADER, the rubric is locked. 

I would argue that the behavior should be consistent, and that if a rubric is associated with an assignment, but that assignment is graded without selecting any ratings, entering any criterion points, or entering criterion comments, that it shouldnâ€™t be considered an evaluation using the rubric, and the rubric should remain unlocked. "
Rubrics: Rubric icon appears to students if rubric is hidden,Bug,Closed,Sakai,software,"If an instructor creates an assignment with a rubric, with the option selected to hide the rubric from students, the Preview Rubric button does not appear when the student is reviewing/submitting the assignment, but the rubric icon still appears on the list of assignments and can be clicked on to open the rubric preview. 

-This is not currently a problem on 23.x-"
Preview Rubric unavailable when viewing assignment from ELFinder link ,Bug,Open,Sakai,software,"On Trunk, the Preview Rubric button is unlabeled and non-functional when viewing an assignment with a rubric from an ELFinder link. I did not see an error in the console or logs



Currently, this isnâ€™t a problem on 23.x.  The Preview Rubric button on 23 is not correct (heading is grading_rubric, button is preview_rubric), but it is functional. On trunk, thereâ€™s no indication what the tiny button is and it does not open the rubric preview."
Assignments: Instructor view in new grader does not display No Grade as the old grader does,Bug,Open,Sakai,software,"When looking at submissions for ungraded assignments, the old grader displays â€œGrade: No Gradeâ€ to the instructor. The new grader just displays â€œGradeâ€. It would be nice for the new grader to also display â€œGrade: No Gradeâ€ to the instructor when viewing submissions."
"Assignments: Ungraded assignments should show a status of ""Submitted"", not ""Ungraded"" on the submissions page",Bug,Open,Sakai,software,"[https://sakaiproject.atlassian.net/browse/SAK-49766|https://sakaiproject.atlassian.net/browse/SAK-49766|smart-link] made some very nice changes to assignments, specifically ungraded. However, on the Submissions page for an ungraded assignment, the status still displays as â€œUngradedâ€ and in this case I think the status should be â€œSubmittedâ€."
Assignments: saving a grade or comment in new grader should use the same message as the old grader,Bug,Verified,Sakai,software,"When grading or just adding a comment to an assignment and saving/saving release, the message displayed for the old grader makes much more sense than the new grader, especially with ungraded assignments.

Old grader: the message displayed: Comments and/or grade have been saved.

New grader: You successfully saved this grade."
Assignment: Returned grade css colors need to be adjusted and be consistent,Bug,Open,Sakai,software,"When comparing to 22x, the colors used for returned grades have changed and are inconsistent even between assignment types on 24 & 23. 

* Points: 24/23 black, 22x red
* No Grade: 24/23 black, 22x red
* Pass / Fail:
** 24/23: Pass = purple text, pale green background, 22x: Pass = dark green text , light green background
** 24/23: Fail = red text, no background, 22x: dark red text, light red background
* Letter Grade: 24/23 black, 22x red
* Checkmark: 24/23 purple text, pale green background, 22x: dark green text , light green background"
"Add ""Last Modified By"" field to files in Resources",Feature Request,Open,Sakai,software,"Currently, when a Resources item is created or copied, the â€œauthorâ€ field of the resource is updated. However, importing a Resources item into a new site, or editing an existing item to â€œupload a new versionâ€ does not update the author field.

This can be confusing to users if they are the authors of items which have been imported, and then modified by other users, since the items retain the original authorâ€™s name, even though they may have been modified to look nothing like the original.

It would be helpful to include a â€œLast Modified Byâ€ column, in addition to the existing â€œAuthorâ€ and â€œModified byâ€ information fields, so that it is possible to identify which user has made changes to an existing Resources item."
Allow instructor to specify if attached file should open within the content frame,Feature Request,Open,Sakai,software,"When using the Syllabus tool, instructors will often create a single syllabus item that contains a file attachment for their syllabus document, usually a PDF file. The single file attachment is a more common scenario than actually using multiple sections of the syllabus tool to create an inline syllabus.

However, when a user attaches a file, it appears as a link that students have to click on to download. Users have complained about this, saying that it causes students to have to click multiple times just to view the document when they would prefer for it to simply display on the page. While it is possible for the instructor to copy and paste their syllabus text into the rich text editor, this is extra work for the instructor that is not necessarily intuitive.

It would be much more user-friendly if the instructor had the option to specify that an attachment should be displayed without downloading, similar to the way student submissions display within Sakai Grader. Perhaps there could be a checkbox below the Attachment button that allows the instructor to enable/disable the â€œopen in a new windowâ€ setting."
"Add a ""Last Modified By"" field to the Rubric information in Manage Rubrics",Feature Request,Open,Sakai,software,"Currently, when a rubric is created or copied, the â€œauthorâ€ field of the rubric is updated. However, importing a rubric into a new site, or editing an existing rubric does not update the author field. 

This can be confusing to users if they are the authors of rubrics which have been imported, and then modified or shared by other users, since the rubrics retain the original authorâ€™s name, even though they may have been modified to look nothing like the original. 

It would be helpful to include a â€œLast Modified Byâ€ column, in addition to the existing â€œAuthorâ€ and â€œModified byâ€ information fields, so that it is possible to identify which user has made changes to an existing rubric.

Also, on a recent T&L/UX call, it was noted that perhaps the â€œOriginâ€ field isnâ€™t really necessary to display for rubrics within the same site, since they are all always the current site. The â€œOriginâ€ column is only really useful when it appears in the Public list of shared rubrics. "
URLs retrieved from provider's API are not stored in database,Bug,Open,Sakai,software,"I thought that this was an issue of Urkund, but I have been told that is happening also with Turnitin, so it seems that it must be a bug of Content Review. It can be checked with the query documented in the testing steps.

Every report returned by any Content Review provider after sending one submission should be stored in CONTENTREVIEW_ITEM_PROPERTIES table, so the number of calls to that providerâ€™s API is reduced.

We have found a lot of cases where the property URKUND_REPORT_URL of Urkund has not been stored in CONTENTREVIEW_ITEM_PROPERTIES, neither the property URKUND_OPTOUT_URL. We don't know why this is happening, it reminds us to the issue reported (and never fixed) in [SAK-34064|https://sakaiproject.atlassian.net/browse/SAK-34064]. In a comment somebody says that maybe could be due to some issues of Hibernate's transactions.

This causes that when an instructor loads the ""View Submissions"" page in Assignments every non stored report is requested to Urkund's API, so in assignments with a large number of submissions this mades the page to load very slowly.

Even worse, in the code there is a place when the report and optout URLs should be stored in database when API returns them and they are not already there, but I have checked that this is not working neither.

In UrkundReviewServiceImpl.java the reportURL is loaded from Urkund API in getReviewReport method and it calls to [crqs.update(item)|https://github.com/sakaiproject/sakai/blob/master/content-review/impl/urkund/src/main/java/org/sakaiproject/contentreview/urkund/UrkundReviewServiceImpl.java#L311], having stored the URL in the item object.

The method [update()|https://github.com/sakaiproject/sakai/blob/master/content-review/impl/service/src/main/java/org/sakaiproject/contentreview/service/ContentReviewQueueServiceImpl.java#L260] of ContentReviewQueueServiceImpl calls to itemDao.save(item). This calls the method [save()|https://github.com/sakaiproject/sakai/blob/master/content-review/impl/dao/src/main/java/org/sakaiproject/contentreview/dao/HibernateCommonDao.java#L45] in HibernateCommonDao.java, which calls to sessionFactory.getCurrentSession().saveOrUpdate(t);

I have checked that these calls are performed, but saveOrUpdate() doesn't store the report URL into CONTENTREVIEW_ITEM_PROPERTIES."
Messages: Avoid creating an empty second line of the original message,Bug,Closed,Sakai,software,"In the Message's tool when forwarding a Message, that message it is edited before showing his text creating a empty ""<p></p>"" with only ""&nbsp;"" or white space in the second line"
PA System pop up text color needs more contrast in Dark Mode,Bug,Closed,Sakai,software,"PA System pop up text color needs more contrast in Dark Mode

!PA system Pop Up.png|width=2736,height=1594!

It looks like the text color is changing to the dark modeâ€™s text color, but the pop upâ€™s background remains light.  

Either always set the text color to a dark color.  

Or set the pop upâ€™s background color to the dark mode color.  however, i think this requires extra javascript to *find* and *set* the featherlight containerâ€™s background color.  because JS is used to create the featherlight popup."
Word count algorithm in Statistics is different from word count algorithm when viewing a post,Bug,Closed,Sakai,software,[https://sakaiproject.atlassian.net/browse/SAK-47306|https://sakaiproject.atlassian.net/browse/SAK-47306|smart-link] implemented a new Word Count feature in Statistics and Grading. But it doesnâ€™t match the word count when viewing an individual post in the normal Forums view
Polls tool does not implement cleanup (replace) for import,Bug,Verified,Sakai,software,"I noticed when fixing [SAK-43207] that polls does not implement any cleanup in their transferCopyEntities code, leaving it as a TODO. This would mean that when someone selects ""Replace my Data"" nothing would be replaced. All other tools seem to implement this so these should be done for completeness.Â "
Assignments > Allow Extension Redesign,Improvement,Open,Sakai,software,"h2. *Description*

In the Assignments tool, instructors now have the option to allow an extension for a first-time submission.Â 

As [+SAK 49527+|https://sakaiproject.atlassian.net/browse/SAK-49527] shares, this functionality only works if the instructor clicks â€œSave and Release to Studentâ€ in either the new or legacy grader. If an instructor clicks either â€œSave and Donâ€™t Release to Studentâ€ (in the legacy grader) or â€œSaveâ€ (in the new grader), then the extension does not work.Â 

The current design and behavior can be confusing for faculty members for several reasons:

# If the instructor clicks â€œSave and Donâ€™t Release to Studentâ€ (in legacy grader) or â€œSaveâ€ (in new grader), and then navigates back to the studentâ€™s assignment submission page, the checkbox for â€œAllow Extensionâ€ is checked, which can give the instructor a false sense of security that the extension was granted. In addition, there is no error or helpful guidance given to the instructor that they clicked the wrong button.
# Requiring an instructor to click â€œSave and Release to Studentâ€ (in either the legacy or new grader) to grant an extension is not intuitive, as instructors have historically approached this button with great caution (not wanting to release grades until ready). When granting an extension, instructors are presumably not seeking to â€œreleaseâ€ any feedback to the student, because nothing has been submitted. So it does not make sense from a user perspective to have to â€œreleaseâ€ anything to grant an assignment extension.
# In both the legacy and new grader, the placement of the â€œAllow Extensionâ€ functionality is all the way down at the bottom of the student submission page. From a logical perspective, placing this functionality _after_ all of the grading/feedback fields is not intuitive. While it makes intuitive sense to place the â€œAllow Resubmissionâ€ function there (as an instructor may wish to allow a student to resubmit an assignment that needs additional work), allowing an extension for a first time submission should precede the grading area.

h2. Proposal

h3. Legacy Grader

In the legacy grader, place the â€œAllow Extensionâ€ functionality closer to the submission status. This way, an extension is not located near the grading area and is logically connected to a submission status of â€œNo Submission.â€

In addition, place a â€œSaveâ€ button in close proximity to the â€œAllow Extensionâ€ checkbox and date. This â€œSaveâ€ button only governs the extension functionality, and does not include any language about â€œreleasingâ€ anything.

!fDoh5Af1-11cewKgdRYTGBUBT88uxGCmi8xHSqsqXHzwpZfyAmSB0VA2e3WWjgKuZtc0R_EceSWzWmTQ0sPiVAlhQajAr6pd_nkrnO_PAo-qOXd2jiq0Tx69fFq1ziylvjKeRcAQsJTXvuFJozFvxGs|width=1381,height=872!

In addition, when a student has already submitted, this functionality should no longer feature. At this point, an instructor must allow resubmission, which is located at the bottom of the page.

h3. New Grader

In the new grader, the â€œAllow Extensionâ€ functionality can be placed above the grading/feedback options (see screenshot below).

!Pla0_Y61WfLYyVkCIay8S8l-zn4A3h6M0df57HMMVHTckWyjAvduTHsjeFTfT7pyofYKap0h6IljJN9hOl56C-nYpwMB4dnRv-frmMydlK5WKYZnfAPrb-CCQgYux1d3PYWUDOMrkLPZBhcpQ-d3aZI|width=749,height=684!

h3. Confirmation Messages

Lastly, in both the legacy grader and the new grader, whenever an instructor saves an extension, a confirmation message should be displayed to confirm the save to the user. This is important for digital accessibility.Â 

!qFCLjM-oLwY1XmbtfAs4JgkKH5oyaDe4kY1-whH3zRJVVUye26C3PSFfqB39bzRM88XMdkZsSYiVK0yWKL3-yEoPoTpYm97G_OCGdAVWpQfhmH1OsIVN5byPK99izo_tfLxq4jxHjIlioqkhLnAHFAg|width=959,height=370!



!dZJHjH8xzIoLMVC0pT4_zLfgk7LBq53LO3Lx_1tnc6HUGlZys9MYQ2LchN8x_YhZGhwpnP25Br8Ta0dSOqMwOsqIqiCBVQi-zovHVNVVl2JNyXxeI2eV5SwizF9WglhEJX631vTVtHWFrO5STT8dCj8|width=661,height=745!"
Update Apache commons compress 1.26.0,Bug,Closed,Sakai,software,"h4. [ANNOUNCE] Apache Commons Compress 1.26.0
The Apache Commons team is pleased to announce Apache Compress 1.26.0.

Apache Commons Compress defines an API for working with compression
and archive formats. These include bzip2, gzip, pack200, LZMA, XZ,
Snappy, traditional Unix Compress, DEFLATE, DEFLATE64, LZ4, Brotli,
Zstandard and ar, cpio, jar, tar, zip, dump, 7z, arj.

This minor feature and maintenance release.

Historical list of changes:
[https://commons.apache.org/proper/commons-compress/changes-report.html|https://commons.apache.org/proper/commons-compress/changes-report.html|smart-link] 

For complete information on Apache Commons Compress, including
instructions on how to submit bug reports, patches, or suggestions for
improvement, see the Apache Commons Compress website:

[https://commons.apache.org/proper/commons-compress/|https://commons.apache.org/proper/commons-compress/|smart-link] "
"Mailsender: pressing Return when focus is in Subject Textbox adds ""Other Recipients"" textbox to the page",Bug,Resolved,Sakai,software,"
!Screenshot 2022-10-22 at 21.30.09.png|width=656,height=541!



Put cursor in Subject field & press return key. This field appears

!image-20221022-203102.png|width=1344,height=1282!



press Return again



!image-20221022-203158.png|width=1678,height=1314!

and again

!image-20221022-203234.png|width=1834,height=1248!

and again

!image-20221022-203311.png|width=1478,height=1302!"
Gradebook: Entering grades and hitting enter sequentially does not save grades appropriately. ,Bug,Open,Sakai,software,"Description: Hitting enter and entering grades does not save grades appropriately. Refer to video. 

This also occurs when using Tab to enter multiple grades for a single student"
Update Joda-time 2.12.7,Bug,Closed,Sakai,software,"[+Release v2.12.7+|https://github.com/JodaOrg/joda-time/releases/tag/v2.12.7] [Latest|https://github.com/JodaOrg/joda-time/releases/latest]

See the [+change notes+|https://www.joda.org/joda-time/changes-report.html#a2.12.7] for more information.

h2. What's Changed

* Update time zone data to 2024agtz by @github-actions in [+#768+|https://github.com/JodaOrg/joda-time/pull/768]"
Tests & Quizzes: Submissions cannot be graded,Bug,Resolved,Sakai,software,"When a test is submitted, the submission shows on the studentâ€™s side but not on the instructorâ€™s side. Therefore, it cannot be graded. Issue does not appear in 23x, only 24x.

The following error appeared in the logs only once:

{noformat}25-Feb-2024 16:52:34.276 WARN [http-nio-20313-exec-22] o.s.d.i.BasicSqlService.dbWriteCount Sql.dbWrite(): recordAlreadyExists: true, failQuiet: 1, : error code: 1062, sql: insert into SAKAI_LOCKS (TABLE_NAME,RECORD_ID,LOCK_TIME,USAGE_SESSION_ID) values (?, ?, ?, ?), binds:  SAKAI_PREFERENCES -1853518044 - 0c2521d7-0ceb-40a6-9708-92c184fcd6b1 20240225215234263 53277b4a-dfc2-4860-b2e5-2cd652657334, error: java.sql.SQLIntegrityConstraintViolationException: (conn=511542) Duplicate entry 'SAKAI_PREFERENCES--1853518044 - 0c2521d7-0ceb-40a6-9708-92c18...' for key 'SAKAI_LOCKS_INDEX'
25-Feb-2024 16:52:34.278 WARN [http-nio-20313-exec-22] o.s.p.c.h.SiteHandler.doSite Exception caught whilst setting selectedPage property: org.sakaiproject.exception.InUseException id: 0c2521d7-0ceb-40a6-9708-92c184fcd6b1{noformat}

And this error appears upon submission:

{noformat}25-Feb-2024 17:18:56.245 INFO [http-nio-20313-exec-24] o.s.e.i.BasicEmailService.transportMessage transportMessage: headers[ From: ""Sakai"" <no-reply@trunk-maria.nightly.sakaiproject.org> To: ""Nancy Drew"" <ndrew@mailinator.com> Subject: Notification for assessment submission: Trunk-AS MAR 101 Spring 2024 - Quiz1 Content-Type: multipart/alternative; boundary=""======sakai-multi-part-boundary======"" Mime-Version: 1.0 Return-Path: <> Auto-Submitted: auto-generated] to[  ndrew@mailinator.com]
25-Feb-2024 17:18:56.842 WARN [http-nio-20313-exec-23] o.s.g.i.GradingServiceImpl.getAssignments AUTHORIZATION FAILURE: User b1252aef-63da-47f6-9051-1b3d770f50a0 in gradebook 70ba9775-ee75-4ccd-af8c-9db1497d73e4 attempted to get assignments list{noformat}"
"Mailsender: No users displaying for roles, unable to send email",Bug,Verified,Sakai,software,"Currently, this issue only affects 24x. In a site with students and the Email  tool, if the instructor clicks on Email (compose),clicks on Roles, then clicks on Students in the exposed roles sections, message displays â€œNo site participants in this role.â€

If you then create groups in the site and click on groups, those are populated."
Messages: No bullhorn notification for read receipts,Bug,Open,Sakai,software,"Tested [https://sakaiproject.atlassian.net/browse/S2U-29|https://sakaiproject.atlassian.net/browse/S2U-29|smart-link] 

Both instructor and student have the option to receive a read receipt when composing, responding and forwarding. The read receipt is delivered to their email address.

However, there is also supposed to be a bullhorn alert when a message has been read and that is failing."
Gradebook: Extra credit warning is not readable in dark mode. ,Bug,Closed,Sakai,software,When grades are adjusted and unscaled the extra credit warning is not readable on dark more.
Messages tab headers are inconsistent,Bug,Closed,Sakai,software,"There are inconsistencies between Messages â€œPagesâ€

# â€œPermissionsâ€ loses the tabs and is unlike all the other Messages â€œpagesâ€. This page is therefore of a different format to all other pages in Messages - just needs the tabs adding to conform.
# â€œCreate Folderâ€ and â€œSettingsâ€ page titles have a prefixed of â€œMessages - â€œ before the title, none of the other pages in Messages do this. The title given to these two pages is of a different format to all of the other, they shouldnâ€™t be prefixed by â€œMessages - â€œ

Screenshots:

!image-20240223-203159.png|width=83.33333333333334%!



!image-20240223-203215.png|width=83.33333333333334%!

!image-20240223-203223.png|width=83.33333333333334%!"
Calendar: Add Bulk Edit/Delete option,Feature Request,Open,Sakai,software,"When importing the calendar tool from one course site to another, the dates and correlating assignments/tests & quizzes/discussions appear on the calendar in the new site. But this is usually not desirable, as those events no longer have any relevance in the new course. To remove these items, It would make it easier for instructors if the calendar had a bulk edit/delete option. This way, old or irrelevant events/deliverables could be quickly deleted from the calendar first prior to connecting new and/or relevant events to the calendar.

*Proposal:*

Create a new tab in Calendar that serves the purpose to Bulk Edit/Delete. This would open a page that shows all Calendar events that can be deleted from the Calendar. This can mimic the Bulk Edit Events in the Assignments Tool. See screenshots below.Â "
Update Log4j 2.23.0,Bug,Closed,Sakai,software,"{noformat}[ANNOUNCE] Apache Log4j 2.23.0 releasedThe Apache Log4j team is pleased to announce the 2.23.0
release. Apache Log4j is a versatile, industrial-strength
Java logging framework composed of an API, its implementation,
and components to assist the deployment for various use cases.
For further information (support, download, etc.) see the project
website[1].

[1] https://logging.apache.org/log4j/2.x/

== Release Notes

This release adds support for LMAX Disruptor 4.x and several
performance and bug fixes.

In order to maintain compatibility with JRE 8, support for LMAX
Disruptor 3.x is maintained.

=== Added

* Added support for LMAX Disruptor 4.x (#1821)

=== Changed

* Simplify BND configuration after upgrade from version `6.4.1` to `7.0.0`

=== Deprecated

* Deprecate the configuration attribute `verbose` (i.e.,
`<Configuration verbose=""...""`) and `StatusConsoleListener` filters
(#2226)
* Deprecated the `RingBufferLogEventHandler` class for removal from
the public API in 3.x

=== Fixed

* Fix regression in `JdkMapAdapterStringMap` performance. (#2238)
* Fix the behavior of `Logger#setLevel` and `Logger#getLevel` in the
Log4j 1.2 bridge. (#2282)
* Fix the behavior of `CoreLogger#getLevel` and `CoreLogger#setLevel`
in the `log4j-jul` module. (#2282)
* Allow deserialization of all arrays of allowed classes (LOG4J2-3680).
* Allow the <Properties> node to appear in any position in the
configuration element.
* Fix forgotten `threadName` field in `RingBufferLogEvent#clear()` (#2234)
* Fix `StringBuilder` cache corruption on recursive access
* Fixed use of `SecurityManager` in `LoaderUtil` where
`AccessController::doPrivilege

d` should only be invoked when a
`SecurityManager` is installed. Some runtimes do not seem to have this
method available. (#2129)
* Fix `log4j-spring-cloud-config-client` dependencies to include only
those required. (#2157)
* Fix typo in Kubernetes `clientKeyData` configuration property.

=== Updated

* Update `com.fasterxml.jackson:jackson-bom` to version `2.16.1` (#2126)
* Update `commons-codec:commons-codec` to version `1.16.1` (#2277)
* Update `io.netty:netty-bom` to version `4.1.107.Final` (#2284)
* Update `org.apache.logging:logging-parent` to version `10.6.0` (#2197)
* Update `org.eclipse.jetty:jetty-bom` to version `9.4.54.v20240208` (#2287)
* Update `org.jctools:jctools-core` to version `4.0.3` (#2270)
* Update `org.springframework:spring-framework-bom` to version `5.3.32`
(#2293)
* Update `org.zeromq:jeromq` to version `0.6.0` (#2271)
{noformat}"
Resources: Detect filetype on Jupyter Notebook,Bug,Open,Sakai,software,"Filetype extension is wrong when trying upload this extension:

* Jupyter Notebook is: text/plain and should be: application/x-ipynb+json"
Gateway Accessibility issue: Site browser select element does not have an accessible name,Bug,Open,Sakai,software,"On the Gateway > Site Browser page, if you run the axeDevTool it flags the select element:

h3. Element Location:

{noformat}#selectTerm{noformat}

{noformat}<select name=""selectTerm"" id=""selectTerm"" disabled="""">{noformat}

h3. To solve this problem, you need to fix at least (1) of the following:

* Form element does not have an implicit (wrapped) <label>
* Form element does not have an explicit <label>
* aria-label attribute does not exist or is empty
* aria-labelledby attribute does not exist, references elements that do not exist or references elements that are empty
* Element has no title attribute
* Element's default semantics were not overridden with role=""none"" or role=""presentation"""
Gateway Accessibility issue: ARIA attributes must conform to valid values - sidebar issue,Bug,Open,Sakai,software,"I used axe to verify a different Jira for the gateway and the sidebar was flagged:

h3. Element Location:

{noformat}a[title=""jump to site list""]{noformat}

{noformat}<a href=""#"" data-bs-toggle=""offcanvas"" data-bs-target=""#select-site-sidebar"" aria-controls=""select-site-sidebar"" class=""Mrphs-skipNav__link js-toggle-sites-nav"" title=""jump to site list"" accesskey=""w"">{noformat}

h3. To solve this problem, you need to fix the following:

Invalid ARIA attribute value: aria-controls=""select-site-sidebar"""
Tests & Quizzes: part images appear twice,Bug,Open,Sakai,software,"If you attach an image to a part, it is being displayed twice:

!image-20240222-115610.png|width=1280,height=740!



I didnâ€™t reproduce it on master."
Lessons: Reorder item preview modal close button not working,Bug,Closed,Sakai,software,Within the Lessons page Reorder function certain item types present themselves with a link that opens a modal that previews the content of the item (for example a Text item). The modal can be closed by clicking outside of it in the grey overlay.
"Lessons: Reorder item list text is too large, wrapping oddly",Bug,Open,Sakai,software,"The Lessons reorder page on Trunk is unexpectedly large text, wrapping to two rows even though there is plenty of space for a single line. Compare the screenshots showing Trunk and 23.x"
Lessons: Unable to select another site if going to Reorder -> Add Items From Another Page,Bug,Open,Sakai,software,[https://sakaiproject.atlassian.net/browse/SAK-47706|https://sakaiproject.atlassian.net/browse/SAK-47706|smart-link] introduced the ability to select another site to copy Lessons pages from when going through Add Content â†’ Add items from another page. However the alternative way to add items from another page is Reorder â†’ Add items from another page. This option does not include the option to select another site. I would expect both â€œAdd items from another pageâ€ to have the same options available. 
Lessons: Bulk Edit Subpage button missing ,Bug,Closed,Sakai,software,"[https://sakaiproject.atlassian.net/browse/SAK-47724|https://sakaiproject.atlassian.net/browse/SAK-47724|smart-link] added a very useful Bulk Edit Subpages button. It was initially added to 23.0, but is no longer appearing in Trunk or 23.x. It was merged into 22.4, so its disappearance in 23/Trunk would be seen as a regression by those who had it in 22."
Content: folders not appearing in zip downloads ,Bug,Closed,Sakai,software,"When generating/downloading a zip in the Resources tool, folders are no longer appearing and instead they are shown in the filenameâ€™s. For example, folder1 with file1.html appears as one file called folder1_file1.html."
Assignment: Cancel button does not actually remove changes made to grading. ,Bug,Open,Sakai,software,Â Clicking â€˜cancelâ€™ does not change back to previously saved grade on the Sakai grader. 
Assignment/CKeditor: Text input on grading feature is unreadable AFTER entering on dark mode. ,Bug,Open,Sakai,software,Text input (CKEditor) does not follow dark mode theme after text is input - refer to screenshot.
Gateway: No indicator which page the user is actually on,Bug,Closed,Sakai,software,"On 24 & 23, the navigation does not make it obvious which page youâ€™re viewing when on the Gateway page."
Gateway page: More buttons on Features page should match other button colors,Bug,Open,Sakai,software,"The More buttons on the Gateway > Features page are a bright blue and IMHO for consistency, should match either the blue of the navigation or the Sakai logo.

Sakai logo: #0F4B70

Gateway (nav link): #144E72

More buttons: #0D6EFD"
"Release Grades does not work consistently across old grader, new grader, upload all",Bug,Verified,Sakai,software,"Instructor leaving feedback on an ungraded assignment should result in â€œRelease Gradesâ€ click returning the submission to student for review

Any type of modification of the submission e.g., with or without a grade, any comment, etc., should result in the submission then moving to become GRADED. Once it is marked as GRADED, then Release Grades function will correctly return it to student"
Rubrics: content not loading due to tool being broken,Bug,Open,Sakai,software,"Weâ€™re getting an going issue once in a while where the rubrics tool just crashes. This is caused by some kind of â€œwrong orderingâ€ of criterions and ratings being stored in database (i.e. 0 - 1 - 3 with 2 missing). Theyâ€™re both loaded/stored using a Spring tag (OrderColumn).

When this is the case the method getRubricsForSite from RubricsService throws an exception and it has a few side effects:

* Rubrics tool doesnâ€™t load any Rubric.
* Same with other tools trying to associate rubrics.
* Transfer of assessments between sites also fails because it loads the site rubrics before doing anything else (see SAK-49436)

{noformat}Caused by: java.lang.NullPointerException
	at org.sakaiproject.rubrics.api.beans.CriterionTransferBean.<init>(CriterionTransferBean.java:39) ~[rubrics-api-22-SNAPSHOT.jar:22-SNAPSHOT]
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195) ~[?:?]
	at java.util.Iterator.forEachRemaining(Iterator.java:133) ~[?:?]
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474) ~[?:?]
	at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913) ~[?:?]
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[?:?]
	at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578) ~[?:?]
	at org.sakaiproject.rubrics.api.beans.RubricTransferBean.<init>(RubricTransferBean.java:50) ~[rubrics-api-22-SNAPSHOT.jar:22-SNAPSHOT]
	at org.sakaiproject.rubrics.impl.RubricsServiceImpl.lambda$getRubricsForSite$3(RubricsServiceImpl.java:264) ~[?:?]{noformat}

There is also a similar trace for the ratings case (something like RatingTransferBean)."
Resources Scrolling issue when selecting from other sites,Bug,Closed,Sakai,software,Thereâ€™s no way to scroll all the contents.
"View As: when instructor views as student, and creates a message, the message actually gets sent",Bug,Open,Sakai,software,"When the instructor selects View As Student and goes into messages,  composes and sends a message with the email box checked, an email actually gets sent."
"Roster - ""Admin"" level users can no longer see user photos in the Roster tool",Bug,Closed,Sakai,software,"h1. Issue

After applying 22.4 to our production system, we noticed that â€œadminâ€ users can no longer see any user photos in the Roster tool, including official photos.

By default, an â€œadminâ€ user is a super-user who should inherit the same permissions as an Instructor or Maintain user without any extra effort. Also, it is not desirable in all situations to manually enroll an admin user as an â€œInstructorâ€ to troubleshoot site issues.

What changed in 22.4? How can the admin role (which isnâ€™t a formal â€œroleâ€ for class sites or project sites) have the appropriate, top-level permissions for Roster (and any tool, frankly)."
Tests & Quizzes: Unable to access test Settings in Serbian,Bug,Verified,Sakai,software,"I had realized in looking at the Serbian language addition (SAK-49703) that I had created a test, but not viewed the Settings page. I went back to test this, and found that I could not access Settings from either the Actions menu or the Assessment Builder. It refreshed the list of assessments and gave an error in the console and log. 



15-Feb-2024 09:02:48.183 WARNING [http-nio-20313-exec-9] com.sun.faces.lifecycle.ApplyRequestValuesPhase.execute Illegal pattern character 'g'

	java.lang.IllegalArgumentException: Illegal pattern character 'g'

		at java.base/java.text.SimpleDateFormat.compile(SimpleDateFormat.java:845)

		at java.base/java.text.SimpleDateFormat.initialize(SimpleDateFormat.java:653)

		at java.base/java.text.SimpleDateFormat.<init>(SimpleDateFormat.java:624)

		at org.sakaiproject.tool.assessment.ui.bean.author.AssessmentSettingsBean.setDisplayFormat(AssessmentSettingsBean.java:1632)

		at org.sakaiproject.tool.assessment.ui.listener.author.AuthorSettingsListener.processAction(AuthorSettingsListener.java:91)

		at javax.faces.event.ActionEvent.processListener(ActionEvent.java:72)

		at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:490)

		at javax.faces.component.UICommand.broadcast(UICommand.java:211)

		at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:847)

		at javax.faces.component.UIViewRoot.processDecodes(UIViewRoot.java:1011)

		at com.sun.faces.lifecycle.ApplyRequestValuesPhase.execute(ApplyRequestValuesPhase.java:55)

		at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:76)

		at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:177)

		at javax.faces.webapp.FacesServlet.executeLifecyle(FacesServlet.java:707)

		at javax.faces.webapp.FacesServlet.service(FacesServlet.java:451)

		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)

		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)

		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)

		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)

		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)

		at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:450)

		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)

		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)

		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661)

		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425)

		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:357)

		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294)

		at org.sakaiproject.jsf.util.SamigoJsfTool.dispatch(SamigoJsfTool.java:377)

		at org.sakaiproject.jsf2.util.JsfTool.doPost(JsfTool.java:249)

		at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)

		at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)

		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)

		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)

		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661)

		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425)

		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330)

		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294)

		at org.sakaiproject.tool.impl.ActiveToolComponent$MyActiveTool.forward(ActiveToolComponent.java:508)

		at org.sakaiproject.portal.charon.SkinnableCharonPortal.forwardTool(SkinnableCharonPortal.java:1392)

		at org.sakaiproject.portal.charon.handlers.SiteHandler.doToolBuffer(SiteHandler.java:1295)

		at org.sakaiproject.portal.charon.handlers.SiteHandler.bufferContent(SiteHandler.java:1129)

		at org.sakaiproject.portal.charon.handlers.SiteHandler.doSite(SiteHandler.java:527)

		at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:290)

		at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:188)

		at org.sakaiproject.portal.charon.handlers.WorksiteHandler.doPost(WorksiteHandler.java:69)

		at org.sakaiproject.portal.charon.SkinnableCharonPortal.doPost(SkinnableCharonPortal.java:1101)

		at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)

		at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)

		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)

		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)

		at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:500)

		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)

		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)

		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)

		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)

		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)

		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)

		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)

		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)

		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)

		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)

		at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:768)

		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)

		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)

		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)

		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)

		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)

		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)

		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)

		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)

		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)

		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)

		at java.base/java.lang.Thread.run(Thread.java:829)

15-Feb-2024 09:02:48.186 WARN [http-nio-20313-exec-9] o.s.p.c.h.SiteHandler.bufferContent Failed to buffer content.

org.sakaiproject.tool.api.ToolException: javax.servlet.ServletException: Illegal pattern character 'g'

	at org.sakaiproject.tool.impl.ActiveToolComponent$MyActiveTool.forward(ActiveToolComponent.java:520) ~[?:?]

	at org.sakaiproject.portal.charon.SkinnableCharonPortal.forwardTool(SkinnableCharonPortal.java:1392) ~[sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.portal.charon.handlers.SiteHandler.doToolBuffer(SiteHandler.java:1295) ~[sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.portal.charon.handlers.SiteHandler.bufferContent(SiteHandler.java:1129) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.portal.charon.handlers.SiteHandler.doSite(SiteHandler.java:527) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:290) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:188) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.portal.charon.handlers.WorksiteHandler.doPost(WorksiteHandler.java:69) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.portal.charon.SkinnableCharonPortal.doPost(SkinnableCharonPortal.java:1101) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]

	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) [servlet-api.jar:4.0.FR]

	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) [servlet-api.jar:4.0.FR]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:500) [sakai-kernel-api-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) [tomcat-websocket.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) [catalina.jar:9.0.76]

	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) [catalina.jar:9.0.76]

	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) [catalina.jar:9.0.76]

	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) [catalina.jar:9.0.76]

	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) [catalina.jar:9.0.76]

	at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:768) [catalina.jar:9.0.76]

	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) [catalina.jar:9.0.76]

	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) [catalina.jar:9.0.76]

	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) [tomcat-coyote.jar:9.0.76]

	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) [tomcat-coyote.jar:9.0.76]

	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) [tomcat-coyote.jar:9.0.76]

	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) [tomcat-coyote.jar:9.0.76]

	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) [tomcat-coyote.jar:9.0.76]

	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-util.jar:9.0.76]

	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-util.jar:9.0.76]

	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-util.jar:9.0.76]

	at java.lang.Thread.run(Thread.java:829) [?:?]

Caused by: javax.servlet.ServletException: Illegal pattern character 'g'

	at javax.faces.webapp.FacesServlet.executeLifecyle(FacesServlet.java:725) ~[?:?]

	at javax.faces.webapp.FacesServlet.service(FacesServlet.java:451) ~[?:?]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[catalina.jar:9.0.76]

	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-websocket.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[catalina.jar:9.0.76]

	at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:450) ~[sakai-kernel-api-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:357) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294) ~[catalina.jar:9.0.76]

	at org.sakaiproject.jsf.util.SamigoJsfTool.dispatch(SamigoJsfTool.java:377) ~[?:?]

	at org.sakaiproject.jsf2.util.JsfTool.doPost(JsfTool.java:249) ~[?:?]

	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[servlet-api.jar:4.0.FR]

	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[servlet-api.jar:4.0.FR]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294) ~[catalina.jar:9.0.76]

	at org.sakaiproject.tool.impl.ActiveToolComponent$MyActiveTool.forward(ActiveToolComponent.java:508) ~[?:?]

	... 35 more

Caused by: java.lang.IllegalArgumentException: Illegal pattern character 'g'

	at java.text.SimpleDateFormat.compile(SimpleDateFormat.java:845) ~[?:?]

	at java.text.SimpleDateFormat.initialize(SimpleDateFormat.java:653) ~[?:?]

	at java.text.SimpleDateFormat.<init>(SimpleDateFormat.java:624) ~[?:?]

	at org.sakaiproject.tool.assessment.ui.bean.author.AssessmentSettingsBean.setDisplayFormat(AssessmentSettingsBean.java:1632) ~[?:?]

	at org.sakaiproject.tool.assessment.ui.listener.author.AuthorSettingsListener.processAction(AuthorSettingsListener.java:91) ~[?:?]

	at javax.faces.event.ActionEvent.processListener(ActionEvent.java:72) ~[?:?]

	at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:490) ~[?:?]

	at javax.faces.component.UICommand.broadcast(UICommand.java:211) ~[?:?]

	at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:847) ~[?:?]

	at javax.faces.component.UIViewRoot.processDecodes(UIViewRoot.java:1011) ~[?:?]

	at com.sun.faces.lifecycle.ApplyRequestValuesPhase.execute(ApplyRequestValuesPhase.java:55) ~[?:?]

	at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:76) ~[?:?]

	at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:177) ~[?:?]

	at javax.faces.webapp.FacesServlet.executeLifecyle(FacesServlet.java:707) ~[?:?]

	at javax.faces.webapp.FacesServlet.service(FacesServlet.java:451) ~[?:?]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[catalina.jar:9.0.76]

	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-websocket.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[catalina.jar:9.0.76]

	at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:450) ~[sakai-kernel-api-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:357) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294) ~[catalina.jar:9.0.76]

	at org.sakaiproject.jsf.util.SamigoJsfTool.dispatch(SamigoJsfTool.java:377) ~[?:?]

	at org.sakaiproject.jsf2.util.JsfTool.doPost(JsfTool.java:249) ~[?:?]

	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[servlet-api.jar:4.0.FR]

	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[servlet-api.jar:4.0.FR]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330) ~[catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294) ~[catalina.jar:9.0.76]

	at org.sakaiproject.tool.impl.ActiveToolComponent$MyActiveTool.forward(ActiveToolComponent.java:508) ~[?:?]

	... 35 more"
"Add extra check so as to never return ""UNKNOWN"" as the GradeType in a Gradebook",Bug,Resolved,Sakai,software,"In [https://sakaiproject.atlassian.net/browse/SAK-49584|https://sakaiproject.atlassian.net/browse/SAK-49584|smart-link] the ENUM for GradeType was changed to have an Explicit UNKNOWN(0) in the ENUM, there are a number of scenarios where depending on what version (including master and 23.x) of Sakai a grade book was created under and what version of Sakai it is running under, very few gradebooks might find themselves with a GradeType of UNKNOWN.  In this case, the Gradebook wonâ€™t even start up enough to change/fix the grade type.  This change makes it so that if one way or another a grade type of UNKNOWN is encountered it is Mapped to POINTS.

If the gradebook is of GradeType unknown you will get the following traceback as soon as the Gradebook tool is launched:

{noformat}Caused by: java.lang.NullPointerException
	at org.sakaiproject.gradebookng.business.GradebookNgBusinessService.putCourseGradesInMatrix(GradebookNgBusinessService.java:1315)
	at org.sakaiproject.gradebookng.business.GradebookNgBusinessService.buildGradeMatrix(GradebookNgBusinessService.java:1047){noformat}

In a sense, this is a safety net to compensate if something went wonky in the ENUM transition."
View As: Uncaught (in promise) ReferenceError: getBrowserFingerprint is not defined console error,Bug,Closed,Sakai,software,"Iâ€™m not seeing this console error on 23x. I mentioned it in [https://sakaiproject.atlassian.net/browse/SAK-49745|https://sakaiproject.atlassian.net/browse/SAK-49745|smart-link] but it shows up not only for chat but in other tools also when using View As.

{noformat}sakai-message-broker.js?version=61765914:75  Uncaught (in promise) ReferenceError: getBrowserFingerprint is not defined
    at sakai-message-broker.js?version=61765914:75:35
(anonymous) @ sakai-message-broker.js?version=61765914:75
Promise.then (async)
(anonymous) @ sakai-message-broker.js?version=61765914:67
Promise.then (async)
(anonymous) @ sakai-message-broker.js?version=61765914:62
Promise.then (async)
portal.notifications.subscribeIfPermitted @ sakai-message-broker.js?version=61765914:55
(anonymous) @ sakai-message-broker.js?version=61765914:31
Promise.then (async)
(anonymous) @ sakai-message-broker.js?version=61765914:31
Promise.then (async)
(anonymous) @ sakai-message-broker.js?version=61765914:19
{noformat}"
Sakai not shutting down due to threads not terminating in MicrosoftMessagingService,Bug,Resolved,Sakai,software,"Sakai (Tomcat) would not shutdown completely.

Tracked this to the following thread not terminating, which happened to be the Executor in {{org.sakaiproject.messaging.impl.MicrosoftMessagingServiceImpl#executor}}


{noformat}""pool-9-thread-1"" #697 prio=5 os_prio=31 cpu=2.38ms elapsed=613.72s tid=0x00007fcb79127000 nid=0x63007 waiting on condition  [0x000070002a6e8000]
   java.lang.Thread.State: WAITING (parking)
    at jdk.internal.misc.Unsafe.park(java.base@11.0.22/Native Method)
    - parking to wait for  <0x00000007f3079940> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(java.base@11.0.22/LockSupport.java:194)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(java.base@11.0.22/AbstractQueuedSynchronizer.java:2081)
    at java.util.concurrent.LinkedBlockingQueue.take(java.base@11.0.22/LinkedBlockingQueue.java:433)
    at java.util.concurrent.ThreadPoolExecutor.getTask(java.base@11.0.22/ThreadPoolExecutor.java:1054)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(java.base@11.0.22/ThreadPoolExecutor.java:1114)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(java.base@11.0.22/ThreadPoolExecutor.java:628)
    at java.lang.Thread.run(java.base@11.0.22/Thread.java:829)

   Locked ownable synchronizers:
    - None{noformat}

Microsoft Integration creates a number of listeners using Igniteâ€™s messaging service during initialization and they should be deregistered before shutting down the executor."
Samigo - NullPointerException uploading attachment from Question Scores page,Bug,Closed,Sakai,software,"While scoring a test from the Question Scores page and uploading an attachment, the page unexpectedly redirects to the main assessments list page and there is a NPE in the tomcat logs

{noformat}13-Feb-2024 21:12:22.744 ERROR [http-nio-20123-exec-72] o.s.t.a.u.l.e.QuestionScoreListener.questionScores null
java.lang.NumberFormatException: null
	at java.lang.Long.parseLong(Long.java:655) ~[?:?]
	at java.lang.Long.valueOf(Long.java:1144) ~[?:?]
	at org.sakaiproject.tool.assessment.ui.listener.evaluation.QuestionScoreListener.questionScores(QuestionScoreListener.java:324) [classes/:?]
	at org.sakaiproject.tool.assessment.ui.bean.evaluation.QuestionScoresBean.getAllAgents(QuestionScoresBean.java:512) [classes/:?]
	at org.sakaiproject.tool.assessment.ui.bean.evaluation.QuestionScoresBean.init(QuestionScoresBean.java:199) [classes/:?]
	at org.sakaiproject.tool.assessment.ui.bean.evaluation.QuestionScoresBean.startRenderResponse(QuestionScoresBean.java:227) [classes/:?]
	at org.sakaiproject.jsf2.component.FlowStateComponent.encodeBegin(FlowStateComponent.java:111) [jsf2-widgets-23-SNAPSHOT.jar:23-SNAPSHOT]
	at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1645) [jakarta.faces-2.3.18.jar:2.3.18]
	at javax.faces.render.Renderer.encodeChildren(Renderer.java:152) [jakarta.faces-2.3.18.jar:2.3.18]
	at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:571) [jakarta.faces-2.3.18.jar:2.3.18]
	at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1648) [jakarta.faces-2.3.18.jar:2.3.18]
	at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1651) [jakarta.faces-2.3.18.jar:2.3.18]
	at com.sun.faces.application.view.JspViewHandlingStrategy.doRenderView(JspViewHandlingStrategy.java:422) [jakarta.faces-2.3.18.jar:2.3.18]
	at com.sun.faces.application.view.JspViewHandlingStrategy.renderView(JspViewHandlingStrategy.java:177) [jakarta.faces-2.3.18.jar:2.3.18]
	at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:170) [jakarta.faces-2.3.18.jar:2.3.18]
	at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:132) [jakarta.faces-2.3.18.jar:2.3.18]
	at org.apache.myfaces.tomahawk.application.ResourceViewHandlerWrapper.renderView(ResourceViewHandlerWrapper.java:169) [tomahawk21-1.1.14.jar:1.1.14]
	at org.sakaiproject.jsf2.app.SakaiViewHandlerWrapper.renderView(SakaiViewHandlerWrapper.java:161) [jsf2-app-23-SNAPSHOT.jar:23-SNAPSHOT]
	at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:132) [jakarta.faces-2.3.18.jar:2.3.18]
	at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:102) [jakarta.faces-2.3.18.jar:2.3.18]
	at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:76) [jakarta.faces-2.3.18.jar:2.3.18]
	at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:199) [jakarta.faces-2.3.18.jar:2.3.18]
	at javax.faces.webapp.FacesServlet.executeLifecyle(FacesServlet.java:708) [jakarta.faces-2.3.18.jar:2.3.18]
	at javax.faces.webapp.FacesServlet.service(FacesServlet.java:451) [jakarta.faces-2.3.18.jar:2.3.18]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) [tomcat-websocket.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]
	at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:450) [sakai-kernel-api-23-SNAPSHOT.jar:23-SNAPSHOT]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:357) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294) [catalina.jar:9.0.76]
	at org.sakaiproject.jsf.util.SamigoJsfTool.dispatch(SamigoJsfTool.java:365) [classes/:?]
	at org.sakaiproject.jsf2.util.JsfTool.doGet(JsfTool.java:234) [jsf2-tool-23-SNAPSHOT.jar:23-SNAPSHOT]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529) [servlet-api.jar:4.0.FR]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) [servlet-api.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294) [catalina.jar:9.0.76]
	at org.sakaiproject.tool.impl.ActiveToolComponent$MyActiveTool.forward(ActiveToolComponent.java:508) [sakai-kernel-impl-23-SNAPSHOT.jar:?]
	at org.sakaiproject.portal.charon.SkinnableCharonPortal.forwardTool(SkinnableCharonPortal.java:1482) [sakai-portal-impl-23-SNAPSHOT.jar:23-SNAPSHOT]
	at org.sakaiproject.portal.charon.handlers.SiteHandler.doToolBuffer(SiteHandler.java:1285) [sakai-portal-impl-23-SNAPSHOT.jar:23-SNAPSHOT]
	at org.sakaiproject.portal.charon.handlers.SiteHandler.bufferContent(SiteHandler.java:1119) [sakai-portal-impl-23-SNAPSHOT.jar:23-SNAPSHOT]
	at org.sakaiproject.portal.charon.handlers.SiteHandler.doSite(SiteHandler.java:520) [sakai-portal-impl-23-SNAPSHOT.jar:23-SNAPSHOT]
	at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:290) [sakai-portal-impl-23-SNAPSHOT.jar:23-SNAPSHOT]
	at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:188) [sakai-portal-impl-23-SNAPSHOT.jar:23-SNAPSHOT]
	at org.sakaiproject.portal.charon.SkinnableCharonPortal.doGet(SkinnableCharonPortal.java:817) [sakai-portal-impl-23-SNAPSHOT.jar:23-SNAPSHOT]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529) [servlet-api.jar:4.0.FR]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) [servlet-api.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]
	at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:500) [sakai-kernel-api-23-SNAPSHOT.jar:23-SNAPSHOT]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) [tomcat-websocket.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) [catalina.jar:9.0.76]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) [catalina.jar:9.0.76]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) [catalina.jar:9.0.76]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) [catalina.jar:9.0.76]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) [catalina.jar:9.0.76]
	at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:768) [catalina.jar:9.0.76]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) [catalina.jar:9.0.76]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) [catalina.jar:9.0.76]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) [tomcat-coyote.jar:9.0.76]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) [tomcat-coyote.jar:9.0.76]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) [tomcat-coyote.jar:9.0.76]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) [tomcat-coyote.jar:9.0.76]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) [tomcat-coyote.jar:9.0.76]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-util.jar:9.0.76]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-util.jar:9.0.76]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-util.jar:9.0.76]
	at java.lang.Thread.run(Thread.java:829) [?:?]
13-Feb-2024 21:12:22.749 WARN [http-nio-20123-exec-72] o.s.p.c.h.SiteHandler.bufferContent Failed to buffer content.
org.sakaiproject.tool.api.ToolException: javax.servlet.ServletException: failed to call questionScores.
	at org.sakaiproject.tool.impl.ActiveToolComponent$MyActiveTool.forward(ActiveToolComponent.java:520) ~[?:?]
	at org.sakaiproject.portal.charon.SkinnableCharonPortal.forwardTool(SkinnableCharonPortal.java:1482) ~[sakai-portal-impl-23-SNAPSHOT.jar:23-SNAPSHOT]
	at org.sakaiproject.portal.charon.handlers.SiteHandler.doToolBuffer(SiteHandler.java:1285) ~[sakai-portal-impl-23-SNAPSHOT.jar:23-SNAPSHOT]
	at org.sakaiproject.portal.charon.handlers.SiteHandler.bufferContent(SiteHandler.java:1119) [sakai-portal-impl-23-SNAPSHOT.jar:23-SNAPSHOT]
	at org.sakaiproject.portal.charon.handlers.SiteHandler.doSite(SiteHandler.java:520) [sakai-portal-impl-23-SNAPSHOT.jar:23-SNAPSHOT]
	at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:290) [sakai-portal-impl-23-SNAPSHOT.jar:23-SNAPSHOT]
	at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:188) [sakai-portal-impl-23-SNAPSHOT.jar:23-SNAPSHOT]
	at org.sakaiproject.portal.charon.SkinnableCharonPortal.doGet(SkinnableCharonPortal.java:817) [sakai-portal-impl-23-SNAPSHOT.jar:23-SNAPSHOT]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529) [servlet-api.jar:4.0.FR]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) [servlet-api.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]
	at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:500) [sakai-kernel-api-23-SNAPSHOT.jar:23-SNAPSHOT]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) [tomcat-websocket.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) [catalina.jar:9.0.76]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) [catalina.jar:9.0.76]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) [catalina.jar:9.0.76]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) [catalina.jar:9.0.76]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) [catalina.jar:9.0.76]
	at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:768) [catalina.jar:9.0.76]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) [catalina.jar:9.0.76]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) [catalina.jar:9.0.76]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) [tomcat-coyote.jar:9.0.76]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) [tomcat-coyote.jar:9.0.76]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) [tomcat-coyote.jar:9.0.76]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) [tomcat-coyote.jar:9.0.76]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) [tomcat-coyote.jar:9.0.76]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-util.jar:9.0.76]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-util.jar:9.0.76]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-util.jar:9.0.76]
	at java.lang.Thread.run(Thread.java:829) [?:?]
Caused by: javax.servlet.ServletException: failed to call questionScores.
	at javax.faces.webapp.FacesServlet.executeLifecyle(FacesServlet.java:725) ~[?:?]
	at javax.faces.webapp.FacesServlet.service(FacesServlet.java:451) ~[?:?]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[catalina.jar:9.0.76]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-websocket.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[catalina.jar:9.0.76]
	at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:450) ~[sakai-kernel-api-23-SNAPSHOT.jar:23-SNAPSHOT]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:357) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294) ~[catalina.jar:9.0.76]
	at org.sakaiproject.jsf.util.SamigoJsfTool.dispatch(SamigoJsfTool.java:365) ~[?:?]
	at org.sakaiproject.jsf2.util.JsfTool.doGet(JsfTool.java:234) ~[?:?]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529) ~[servlet-api.jar:4.0.FR]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[servlet-api.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294) ~[catalina.jar:9.0.76]
	at org.sakaiproject.tool.impl.ActiveToolComponent$MyActiveTool.forward(ActiveToolComponent.java:508) ~[?:?]
	... 34 more
Caused by: java.lang.RuntimeException: failed to call questionScores.
	at org.sakaiproject.tool.assessment.ui.bean.evaluation.QuestionScoresBean.getAllAgents(QuestionScoresBean.java:514) ~[?:?]
	at org.sakaiproject.tool.assessment.ui.bean.evaluation.QuestionScoresBean.init(QuestionScoresBean.java:199) ~[?:?]
	at org.sakaiproject.tool.assessment.ui.bean.evaluation.QuestionScoresBean.startRenderResponse(QuestionScoresBean.java:227) ~[?:?]
	at org.sakaiproject.jsf2.component.FlowStateComponent.encodeBegin(FlowStateComponent.java:111) ~[?:?]
	at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1645) ~[?:?]
	at javax.faces.render.Renderer.encodeChildren(Renderer.java:152) ~[?:?]
	at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:571) ~[?:?]
	at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1648) ~[?:?]
	at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1651) ~[?:?]
	at com.sun.faces.application.view.JspViewHandlingStrategy.doRenderView(JspViewHandlingStrategy.java:422) ~[?:?]
	at com.sun.faces.application.view.JspViewHandlingStrategy.renderView(JspViewHandlingStrategy.java:177) ~[?:?]
	at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:170) ~[?:?]
	at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:132) ~[?:?]
	at org.apache.myfaces.tomahawk.application.ResourceViewHandlerWrapper.renderView(ResourceViewHandlerWrapper.java:169) ~[?:?]
	at org.sakaiproject.jsf2.app.SakaiViewHandlerWrapper.renderView(SakaiViewHandlerWrapper.java:161) ~[?:?]
	at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:132) ~[?:?]
	at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:102) ~[?:?]
	at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:76) ~[?:?]
	at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:199) ~[?:?]
	at javax.faces.webapp.FacesServlet.executeLifecyle(FacesServlet.java:708) ~[?:?]
	at javax.faces.webapp.FacesServlet.service(FacesServlet.java:451) ~[?:?]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[catalina.jar:9.0.76]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-websocket.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[catalina.jar:9.0.76]
	at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:450) ~[sakai-kernel-api-23-SNAPSHOT.jar:23-SNAPSHOT]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:357) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294) ~[catalina.jar:9.0.76]
	at org.sakaiproject.jsf.util.SamigoJsfTool.dispatch(SamigoJsfTool.java:365) ~[?:?]
	at org.sakaiproject.jsf2.util.JsfTool.doGet(JsfTool.java:234) ~[?:?]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529) ~[servlet-api.jar:4.0.FR]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[servlet-api.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330) ~[catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294) ~[catalina.jar:9.0.76]
	at org.sakaiproject.tool.impl.ActiveToolComponent$MyActiveTool.forward(ActiveToolComponent.java:508) ~[?:?]
	... 34 more{noformat}"
Rubrics: Unexpected end of JSON input rubric-association-requirements.js?version=d32415ce:197,Bug,Open,Sakai,software,"Iâ€™m not seeing this on 23x currently. I had rubrics in the site, but had not created any rubrics. I created an assignment and posted it. I saw the console error first in student view, then when I clicked to edit the assignment, I saw it also in the instructor view. I then tested in a site that didnâ€™t even have the rubrics tool added and see the same error:

SyntaxError: Unexpected end of JSON input


{noformat}rubric-association-requirements.js?version=d32415ce:197  SyntaxError: Unexpected end of JSON input
    at rubric-association-requirements.js?version=d32415ce:197:4153
(anonymous) @ rubric-association-requirements.js?version=d32415ce:197
Promise.catch (async)
_getAssociation @ rubric-association-requirements.js?version=d32415ce:197
set entityId @ rubric-association-requirements.js?version=d32415ce:197
set @ chunk-IV44QDQG.js:2
_$AK @ chunk-IV44QDQG.js:2
attributeChangedCallback @ chunk-IV44QDQG.js:2
(anonymous) @ rubric-association-requirements.js?version=d32415ce:300
{noformat}"
Fix Persistent Tutorial Display Issue: Ensure Tutorial Only Appears for the first time user,Bug,Verified,Sakai,software,"This was discussed in the 2024-02-13 core meeting - the idea is to keep tutorial from attempting to popup on pages other than /portal and it was causing issues.
"
Turnitin submit queue returns an externalId=0 despite saying it is successful ,Bug,Closed,Sakai,software,"{noformat}13-Feb-2024 06:27:27.375 DEBUG [QuartzScheduler_Worker-1] o.s.c.t.u.TurnitinAPIUtil.callTurnitinReturnInputStream HTTPS Connection made to Turnitin
13-Feb-2024 06:27:27.555 DEBUG [QuartzScheduler_Worker-1] o.s.c.t.u.TurnitinAPIUtil.callTurnitinReturnInputStream Starting Multipart TII CALL:
aid = 56965
assign = DNP Project Proposal Paper
....[EDITED]....
13-Feb-2024 06:27:29.329 DEBUG [QuartzScheduler_Worker-1] o.s.c.t.u.TurnitinAPIUtil.callTurnitinReturnDocument  Result from call: <?xml version=""1.0"" encoding=""UTF-8""?>
<!-- Turnitin API Return Data --><returndata>
        <objectID>0</objectID>
        <rmessage>Successful!</rmessage>
        <rcode>51</rcode>
</returndata>
13-Feb-2024 06:27:29.329 DEBUG [QuartzScheduler_Worker-1] o.s.c.t.TurnitinReviewServiceImpl.processQueue Submission successful
13-Feb-2024 06:27:29.339 INFO [QuartzScheduler_Worker-1] o.s.c.t.TurnitinReviewServiceImpl.processQueue Submission queue run completed: 1 items submitted, 0 errors.{noformat}"
Tests & Quizzes: Grade setting misalignment,Bug,Open,Sakai,software,"With the addition of the ability to link a test score to an existing Gradebook item, the option for â€œGrades sent to Gradebookâ€ is not in line with the radio button, but appearing on a new line. "
Assignment: Grade Submission does not fit correctly while scrolling,Bug,Resolved,Sakai,software,When using the grader on assignments and scrolling on an attached file the â€˜grade submissionâ€™ button overlaps the pdf viewer.
Gradebook: Ckeditor is pre-filled with text â€˜predefinedâ€™,Bug,Open,Sakai,software,The ckeditor displayed in the gradebook tool displays â€˜undefinedâ€™ when the editor is empty.Â 
Gradebook: Ckeditor does not follow dark mode theme,Bug,Open,Sakai,software,"Description: The ckeditor displayed in the gradebook tool does not follow dark mode. Oddly, on trunk only, the first item on the rubric is the correct theme - the rest have white background for the text."
Gradebook: Create gradebook item modal does not follow dark mode theme,Bug,Open,Sakai,software,Â â€˜Add grade itemâ€™ modal does not follow dark mode theme and has grey text on white background which is unreadable. Refer to screenshot. 
Notifications: â€œProfile Statusâ€ update alerts missing descriptions in â€œNotificationsâ€ panel display,Bug,Open,Sakai,software,"While performing keyboard/screen reader testing of the new â€œNotificationsâ€ system, specifically, the use cases for how different-type Â alerts are created as a result of certain events happening within each of the source Tools (i.e. Announcements, Assignments, Profile, etc.) I noticed that â€œSocialâ€ alerts for when one of the userâ€™s connections updates their â€œProfile Statusâ€ lacks any sort of Â description when this type of alert displays in the â€œNotificationsâ€ panel.

Â 

For example, other types of alerts will have descriptions like:

Â 

â€œAdded a new Announcement (title of Announcement) in (name of Course Site)â€

Â 

â€œCreated/updated a new Assignment (title of Assignment) in (name of Course Site)â€

Â 

â€œGraded your submission for Assignment (title of Assignment) in (name of Course Site)â€

Â 

â€œYou received a connection request from (name of Instructor)â€

Â 

These descriptions are always proceeded by a â€œCloseâ€ button (to clear the alert from the â€œNotificationsâ€ panel) and are always followed by a (non-descript) link that can be selected/activated to view the alert from within the source Tool.

Â 

Except for the â€œProfile Statusâ€ update alertsâ€”when these are displayed within the â€œNotificationsâ€ panel, there is no description of what it is--it just jumps from the â€œCloseâ€ button to the non-descript link for viewing the alert from within the source Tool."
View As: real user (xxx)  is impersonated with mock user (xxx) with (xxx) being identical,Bug,Verified,Sakai,software,"I canâ€™t test if this will affect 23x once some of the other Jiras for View As get merged because currently as soon as you enter View As on 23x, youâ€™re kicked off the page to Overview.

To see this error on trunk, you need to click on Conversations and then View As Student. In the server logs you will see something like this:

12-Feb-2024 20:57:03.968 INFO [http-nio-20313-exec-25] o.s.e.i.UsageSessionServiceAdaptor.impersonateUser Entering into RoleView mode, {color:#bf2600}real user [6a55aae1-cb63-4df6-9b3a-393a5c357d23+student]{color} is impersonated with {color:#bf2600}mock user [6a55aae1-cb63-4df6-9b3a-393a5c357d23+student]{color}

Notice that the real user and mock user have the same ID."
"View As: when instructor performs actions while in view as student, results are visible to other students",Bug,Resolved,Sakai,software,"When the instructor performs any actions while in View As Student, those results are then visible to course members. Tested chat room, discussions, sending a message (and an email actually gets sent from the test student!)."
"View As: When the instructor enters View As student and launches the chat, o.s.p.l.SakaiProxyImpl.ensureUuid User errors fill up the server logs",Bug,Closed,Sakai,software,"When the instructor enters View As student and launches Chat Room, there are console errors and the server logs start filling up with errors. I think the reason being because chat is constantly checking to see if there is a new post.

Server errors:

* {noformat}12-Feb-2024 19:55:48.665 ERROR [http-nio-20313-exec-3] o.s.p.l.SakaiProxyImpl.ensureUuid User: 99f80fff-3900-4af9-a35c-132800bdf997:8f489701-b0c6-478f-93cc-2c28668efe8f could not be found in any lookup by either id or eid

12-Feb-2024 19:55:48.665 INFO [http-nio-20313-exec-3] o.s.e.u.s.DirectServlet.dispatch Could not process entity: /profile/99f80fff-3900-4af9-a35c-132800bdf997:8f489701-b0c6-478f-93cc-2c28668efe8f (404)[null]: Cannot execute custom action (image): Could not find entity (/profile/99f80fff-3900-4af9-a35c-132800bdf997:8f489701-b0c6-478f-93cc-2c28668efe8f): Invalid user. (rethrown)
{noformat}"
Notifications: Screen reader focus moving outside of modal after   selecting â€œMarked all as viewedâ€ or â€œClear allâ€ buttons,Bug,Open,Sakai,software,"I discovered this issue while performing testing on SAK-49473 which has to do with the â€œMark all as viewedâ€ button in the â€œNotificationsâ€ panel, however this behavior is also being observed when selecting/activating the â€œClear allâ€ button as well.

Â 

Basically, while the â€œNotificationsâ€ panel/modal is expanded, selecting/activating either of the aforementioned buttons will result in the page refreshing, and focus moving outside of the modal (which remains displayed in the foreground) and jumping to the title area of the page, essentially trapping the cursor in the content of the main page (which is in the background/greyed-out portion of the screen.)

Â 

When this happens, screen reader users have to navigate through the entire page, past the contents of the footer, until they can move focus back into the still expanded â€œNotificationsâ€ panel, where selecting/activating the â€œClose this notifications panelâ€ button is their only option (the escape key doesnâ€™t work when this weird modal focus issue is being observed) for closing out the modal and returning focus to the userâ€™s home page."
"Notifications: Screen reader's inability to interact with ""red circle"" graphic next to bell icon is rendering ""Marked all as viewed"" feature inaccessible as well",Bug,Open,Sakai,software,"This issue is related to SAK-49741 which reported on the fact that the â€œred circleâ€ graphic that appears next to the â€œView your notificationsâ€ button (bell icon) is not screen reader accessible.

Â 

Since the purpose of the â€œMarked all as viewedâ€ button is to remove the â€œred circleâ€ graphic, as an easy, convenient way for users to keep up on their new alerts/manage the contents of their â€œNotificationsâ€ panel, the fact that this visual indicator is not screen reader compatible is rendering the â€œMarked all as viewedâ€ feature inaccessible as well.

Â 

Sighted users can go through and read all of their alerts, then select the â€œMarked all as viewedâ€ button to remove the â€œred circleâ€ graphic, so Â any subsequent times Â Â they log into the system and see the â€œred circleâ€ graphic, theyâ€™ll immediately know that they have new alerts waiting for them.

Â 

Conversely, since screen reader users canâ€™t detect whether the â€œred circleâ€ graphic is there or not, they have no other choice than to regularly go into their â€œNotificationsâ€ panel to constantly check for new alerts."
Portal: Prevent tutorial launching for View Site As role,Bug,Verified,Sakai,software,"When using â€˜View Site Asâ€™ for the first time for a particular role on a new site, the tutorial for that pseudo-user launches. This behavior is disorienting; the tutorial should not launch for such cases."
Notifications: The â€œred circleâ€ graphic that appears next to the Bell icon in the top navigation is not screen reader accessible,Bug,Open,Sakai,software,"The â€œred circleâ€ graphic that appears next to the â€œView your notificationsâ€ (bell) icon in the top navigation (to indicate that you have new alerts) is not screen reader accessible.

Â 

I tested this out on 23.X (Maria DB branch) using JAWS+Chrome and NVDA+Chrome and it doesnâ€™t work with either of these combinations, and I suspect it wonâ€™t work with other screen reader/web browser combinations either.

Â 

The impact of this is two-fold:

Â 

1â€”It doesnâ€™t provide for an easy, convenient way (i.e. viewable from the top navigation of the userâ€™s home page) for screen reader users to tell whether there are new alerts waiting for them.

Â 

Instead, they have to select/activate the â€œView your notificationsâ€ button to manually check whether there are any new alerts, which defeats the purpose of having this sort of indicator in the top navigation.

Â 

2â€”Similarly, the inaccessible â€œred circleâ€ graphic makes the â€œMark all as viewedâ€ feature inaccessible as well, because the main purpose of this feature is to remove the â€œred circleâ€ graphic from next to the (View your notificationsâ€ (bell) icon in the top navigation (after the user has gone through and viewed all of their alerts) so the next time they navigate back to their home page, they donâ€™t have to open the â€œNotificationsâ€ panel to check whether there are any new alerts."
Gradebook/Rubrics: Missing Summary tabs in Rubric Preview/Statistics ,Bug,Open,Sakai,software,"In Gradebook, Gradebook originated items using rubrics have access to a modal from right clicking â€˜Rubric Preview/Statisticsâ€™. That modal has 3 tabs (Grading Rubric, Student Summary and Criteria Summary) in Sakai 23. In Sakai 24 the Student Summary and Criteria Summary tabs are missing"
Enforce no duplicate dependencies in Maven pom.xml,Bug,Resolved,Sakai,software,Use maven-enforcer-plugin to prevent duplicate dependency declarations
"if a new user uses Role Swap on a site where they are an Instructor, they are flung into their ""Home"" site.",Bug,Resolved,Sakai,software,"This only seems to affect a user upon first login. 

As a new user who has never logged in before, after squirming past the â€œtutorialâ€ pop ups, if one visits a site where one is an instructor and clicks â€œview site as studentâ€ then one is taken away from that site and placed in the Home site.

This ONLY happens for a user who hasnt logged in and is only present on Sakai 24 & 23"
"Test and Quizzes: While keyboard testing cannot expand ""CK Editor"" menu.",Bug,Open,Sakai,software,While Keyboard testing and creating multiple choice questions in â€œTest and Quizzesâ€ tool unable to expand â€œCK Editorâ€ Menu options.
Add JMP mime type,Bug,Closed,Sakai,software,Instructors use JMP (math software) and would like a mime type for this data file type
"MESSAGE-TOOL: Adding the number of ""unread"" messages in the ""Sent"" folder",Bug,Open,Sakai,software,"Currently, the messages tool in the ""Sent"" folder does not show the number of unread messages contained in this folder, causing confusion in cases where unread messages have been moved from other folders to this one, since the number of unread messages (SynopticTool) does take them into account."
Update Apache Common Codec 1.16.1,Bug,Closed,Sakai,software,[https://commons.apache.org/proper/commons-codec/changes-report.html#a1.16.1|https://commons.apache.org/proper/commons-codec/changes-report.html#a1.16.1|smart-link] 
Gateway pages are broken due to bootstrap CSS not loading,Bug,Closed,Sakai,software,"Bootsrap-5 CSS is not loading on the page. 

SAK-49389 removed the CSS from headscript."
PUSH SUBSCRIPTION: Data too long for column 'ENDPOINT' at row 1,Bug,Closed,Sakai,software,"Currently, this is not an issue on 23x. When an instructor enters View As and Exits View As, there is an error each time in the logs:

{{ERROR [http-nio-20313-exec-2] o.h.e.j.s.SqlExceptionHelper.logExceptions (conn=469893) Data too long for column 'ENDPOINT' at row 1}}

{noformat}11-Feb-2024 19:55:34.945 INFO [http-nio-20313-exec-26] o.s.a.i.SakaiSecurity.impersonateUser Enter into Role-Swap mode, user 2cbe1e9f-a7ca-4dcc-a372-9e523310a942 is impersonated

11-Feb-2024 19:55:36.166 WARN [http-nio-20313-exec-18] o.s.g.i.GradingServiceImpl.getAssignments AUTHORIZATION FAILURE: User 2cbe1e9f-a7ca-4dcc-a372-9e523310a942 in gradebook 78ecb2a4-a995-4611-bc6e-22a1e495c1c8 attempted to get assignments list

11-Feb-2024 19:55:36.385 ERROR [http-nio-20313-exec-24] o.h.e.j.s.SqlExceptionHelper.logExceptions (conn=469911) Data too long for column 'ENDPOINT' at row 1

11-Feb-2024 19:55:52.424 INFO [http-nio-20313-exec-1] o.s.a.i.SakaiSecurity.restoreUser Exit from Role-Swap mode, user 1ff8b9ff-5624-4883-a5a3-351a167beacf is restored

11-Feb-2024 19:55:53.808 ERROR [http-nio-20313-exec-2] o.h.e.j.s.SqlExceptionHelper.logExceptions (conn=469893) Data too long for column 'ENDPOINT' at row 1{noformat}"
Overview: View Site As drop-down missing,Bug,Verified,Sakai,software,"[https://sakaiproject.atlassian.net/browse/SAK-49610|https://sakaiproject.atlassian.net/browse/SAK-49610|smart-link] added the Manage Overview button not only in Home, but also in the course. It seems that this addition in the course removed the View As drop-down.

If you click on Manage Overview, the View As drop-down displays on that page, which is confusing.

Selecting View As from that page, loads the student view but kicks the instructor out of the site. Reentering the site in student view, no longer allows the instructor to exit from student view on the Overview page."
Further plugin updates from Maven 3.9.2 related to plugin validation,Bug,Resolved,Sakai,software,"When building with the most recently released Maven 3.9.2 (Released May 21, 2023) many warnings come up at the end about plugin validation.

[https://maven.apache.org/docs/3.9.2/release-notes.html|https://maven.apache.org/docs/3.9.2/release-notes.html|smart-link] 

{{[WARNING] Plugin validation issues were detected in 9 plugin(s)}}

Passing the option {{-Dmaven.plugin.validation=VERBOSE}} results in a lot of details of things that need to be fixed such as declaring artifacts are provided scope and removing deprecated parameters.

This is a continuation on the work on SAK-48944"
Assessment Statistics Export is Missing Metadata,Bug,Open,Sakai,software,"If the questions in an assessment have included metadata fields, that data shows up in the assessment statistics Item Analysis when viewed in Sakai. See screenshot below:

!item-analysis-metadata.png|width=83.33333333333334%!

However, if you export the assessment statistics in Excel format, the metadata is missing from the export file. 

!excel-missing-data.png|width=83.33333333333334%!

This appears to be a bug. If the metadata is available as part of the Item Analysis within Sakai, it seems logical to assume that it should be included in the export along with the rest of the data in that screen."
Assignments: Grader does not respect SCALE_FACTOR and multiplies scores,Bug,Open,Sakai,software,"Sakai grader is not handling different values of SCALE_FACTOR, which controls the number of decimal places allowed in the scores. For an assignment with a SCALE_FACTOR of 10 (one decimal place), if an instructor enters a score with two decimal places in Grader, it multiplies the score to have a single decimal place. So 17.75 becomes 177.5. Classic Grader correctly warns instructors that they must enter a score with a maximum of one decimal place.

In most circumstances, Assignments allows scores to have two decimal points. However, very old versions of Sakai allowed just one decimal point. Assignments can be imported from site to site, keeping the old values of SCALE_FACTOR. From the UI, the main indication that these assignments have the old SCALE_FACTOR value is the maximum points that appears on the list of assignments and while grading has only a single decimal place."
Portal: Organize Pinned no longer works,Bug,Closed,Sakai,software,"Reordering pinned sites with the Organize Pinned tab of the Sites drawer no longer works. See the attached screencast, OrgPinnedNotWorking-20240207.mp4."
Make expand/collapse of syllabus items more obvious and allow instructor to select initial expanded/collapsed state,Feature Request,Closed,Sakai,software,"Currently, in the student view of Syllabus, it is not immediately obvious that students need to click on a heading to expand that item and view the details. There is no visual indicator that the section is in a collapsed state. 

!syllabus-items-collapsed.png|width=83.33333333333334%!

It would be more intuitive, and more obvious for users, if there were an arrow, pointer, or other visual element to the left of the item title indicating that it is currently collapsed. For example, as shown below in Lessons, when a section is collapsed, there is an arrow on the left indicating the collapsed state.

!lessons-sections-collapsed.png|width=91.66666666666666%!

In addition, some instructors may prefer that syllabus items begin in an expanded state by default, rather than starting collapsed by default. To take another queue from Lessons, ideally there should be an option in the syllabus item details editing screen which allows the instructor to select the desired expanded/collapsed setting for each section. 

!collapsible-setting.png|width=25%!"
Lessons: Links have poor contrast in dark mode when using legacy colors ,Bug,Open,Sakai,software,"When using the legacy colors in Lessons, the text remains black when the user toggles dark mode, but any links (web links, files, links to assignments, testsâ€¦) change color to light grey. Since the legacy colors are light, this makes it very difficult to read the links. 

Can the legacy colors keep the dark color for the links? "
"Problem alphabetical order of the student names in the ""Section info"" tool",Bug,Closed,Sakai,software,"A problem has been detected in the alphabetical order of the student names in the ""Section info"" tool, in the multiple selector to add students. Specifically this problem appears in the list of students when assigning them to a section. It happens that in this list always leaves the values with Ã‘ or another strange character for the end of the sorting, creating this confusion, since in many cases the number of students is too big."
Sort attachments by name,Improvement,Verified,Sakai,software,"Syllabus attached items are ordered by internal ID, so teachers are annoyed they canâ€™t present the attachments in a logical order, even if they name the items with â€œ1-â€, â€œ2-â€, etc.

Attachments should be ordered by name. This can be done with a simple low-risk change."
Update UnboundID LDAP SDK for Java 6.0.11,Bug,Closed,Sakai,software,"We have just released version 6.0.11 of the [+UnboundID LDAP SDK for Java+|https://github.com/pingidentity/ldapsdk]. It is available for download from [+GitHub+|https://github.com/pingidentity/ldapsdk/releases] and [+SourceForge+|https://sourceforge.net/projects/ldap-sdk/files/], and it is available in the [+Maven Central Repository+|https://central.sonatype.com/artifact/com.unboundid/unboundid-ldapsdk/6.0.11].

Note that this is the last release of the LDAP SDK that will offer support for Java 7. As of the next release (which is expected to have a version of 7.0.0), the LDAP SDK will only support Java 8 and later.

You can find the release notes for the 6.0.11 release (and all previous versions) at [+https://docs.ldap.com/ldap-sdk/docs/release-notes.html+|https://docs.ldap.com/ldap-sdk/docs/release-notes.html], but hereâ€™s a summary of the changes:

* We updated the {{ldapsearch}} and {{ldapmodify}} command-line tools to provide better validation for the {{--proxyAs}} argument, which includes the proxied authorization v2 request control in the requests that they issue. Previously, they would accept any string as the authorization ID value, but they will verify that it is a valid authorization ID using the form â€œdn:â€ followed by a valid DN or â€œu:â€ followed by a username.
* We updated the {{Filter}} class so that the methods used to create substring filters are more user-friendly when the filter doesnâ€™t contain all types of components. Previously, it expected a substring component to be null if that component wasnâ€™t to be included in the request, and it would create an invalid filter if the component was provided as an empty string. It will now treat components provided as empty strings as if they had been null.
* We updated the logic that the LDAP SDK uses to pare entries down to a specified set of attributes (including in the in-memory directory server and the {{ldifsearch}} command-line tool) to improve its behavior if it encounters an entry with a malformed attribute description (for example, one that contains characters that arenâ€™t allowed). Previously, this would result in an internal error, but it will now make a best-attempt effort to handle the invalid name.
* We updated the {{TimestampArgument}} class to allow it to accept timestamps in the ISO 8601 format described in RFC 3339 (e.g., 2023-11-30T01:02:03.456Z). Previously, it only accepted timestamps in the generalized time format (or a generalized time representation that didnâ€™t include any time zone information, which was treated as the systemâ€™s local time zone).
* We updated the {{JSONBuffer}} class to add an {{appendField}} method that can be used to append a generic field without knowing the value type. Previously, it only allowed you to append fields if you knew the type of the value.
* We added new {{BinarySizeUnit}} and {{DecimalSizeUnit}} enums that can be used when dealing with a quantity of data, like the size of a file or the amount of information transferred over a network. Each of the enums supports a variety of units (bytes, kilobytes, megabytes, gigabytes, terabytes, petabytes, exabytes, zettabytes, and yottabytes), but the {{BinarySizeUnit}} variant assumes that each subsequent unit is 1024 times greater than the previous (e.g., one kilobyte is treated as 1024 bytes), while {{DecimalSizeUnit}} assumes that each subsequent unit is 1000 times greater than the previous (e.g., one kilobyte is treated as 1000 bytes).
* We updated the client-side support for invoking the LDIF export administrative task in the Ping Identity Directory Server to include support for activating one or more post-LDIF-export task processors, which can be used to perform additional processing after the data is successfully exported."
"Grader: If a comment and private feedback have been added, and the comment is then removed, the remove link for private feedback disappears",Bug,Open,Sakai,software,"If the instructor adds a comment and a private note, saves, then opens the grader again, both the feedback comment and the privates notes have a remove link. If the instructor clicks to remove the feedback comment, the link to remove the private note also disappears.

See [https://sakaiproject.atlassian.net/browse/SAK-48892|https://sakaiproject.atlassian.net/browse/SAK-48892|smart-link] it was fixed previously and is now broken again"
Grader: Retaining comments from previous student,Bug,Closed,Sakai,software,"Instructor comments, when grading using the Grader, show up for the next students when grading. Not sure if this is a caching issue or something else, but we had a similar experience with [https://sakaiproject.atlassian.net/browse/SAK-43782|https://sakaiproject.atlassian.net/browse/SAK-43782|smart-link] in 20 & 21.

See the video 24x_ck_editor_grader_issues.mp4 starting at 1:00

See 23x_grader.mp4 starting at 0:40 for how this is working correctly"
Grader: CKEditor does not accept text or a URL for comment when clicking link icon,Bug,Verified,Sakai,software,"This is an issue with the rich text editor in the Grader in Assignments. If the instructor grades an assignment and adds a comment, the instructor is unable to add a link using the link symbol. The form that displays does not allow any input into the text boxes, whether typed in or pasted in.

This issue was fixed previously in [https://sakaiproject.atlassian.net/browse/SAK-48997|https://sakaiproject.atlassian.net/browse/SAK-48997|smart-link] by using only BasicText config and not making the link and list items available."
Scheduled (un)publishing not pinning/removing sites correctly,Bug,Verified,Sakai,software,"When an instructor schedules the publishing of a site, the site should be pinned for students when the site is published. When an instructor schedules the unpublishing of a site, the site should be removed from studentsâ€™ site navigation when the site is unpublished.Â 

Intended only for Sakai 24 and 23, this jira seeks to follow-up on fixes applied for SAK-48700."
Roster list in Enrollment Status is doubled/duplicated,Bug,Closed,Sakai,software,"Need to test with Enrollment Sets added to site

Go to Enrollment Status â†’ List view and see if a name is duplicated (full list and then another same list)

I saw two identical XHR calls coming from Network panel when moving to the Enrollment Status

I canâ€™t replicate on trunk"
Allow instructor to choose if Syllabus redirect URL opens in a new window or within the same frame,Feature Request,Open,Sakai,software,"Currently, when an instructor chooses to redirect the Syllabus tool to a URL, a message displays to users viewing the Syllabus that tells them it will open in a new window. 

!syllabus-redirect-message.png|width=91.66666666666666%!

However, in many cases, users may prefer to have the actual syllabus open within the content frame, rather than requiring users to click again to open the item. 

It would be nice if there were a checkbox option to allow the instructor to enable/disable the â€œopen in a new windowâ€ setting, similar to the option in Lessons when you add a content link on a page. 

See mockup below:

!syllabus-newwindow-checkbox.png|width=91.66666666666666%!

If the new window checkbox is not selected, the URL page would display embedded in the content frame, instead of the message about a new window.

!syllabus-redirect-embedded.png|width=91.66666666666666%!"
settings gives ugly JavaScript error on Safari (only),Bug,Resolved,Sakai,software,"Clicking â€˜settingsâ€™ gives this error. â€œEdit tags for this courseâ€ gives the same error.

!image-20240206-192734.png|width=83.33333333333334%!

Yoiks!

Chrome / Firefox do not exhibit the error (on MacOS)."
"change behavior of Reset on Redirect page so that it clears url, but requires a Save to confirm the change",Bug,Closed,Sakai,software,"With the recent changes to the Syllabus tool, a Reset button was added on the Syllabus URL Redirect page to make it easier to remove the URL from that field. In prior versions, users had to manually select and delete the text in the URL field. The Reset button removes the URL without having to do this manually. However, currently, it does not require users to Save after resetting. This is unexpected, since it is different than the previous behavior which did require saving. Also, if users accidentally hit Reset, they may want to Cancel without actually removing the URL. 

The preferred behavior is for the Reset to remove the URL, but require a Save on that screen to actually save the change. "
Site Import doesn't allow users to import if all they have access to is template sites,Bug,Open,Sakai,software,"This is a minor problem found when verifying [SAK-49564|https://sakaiproject.atlassian.net/browse/SAK-49564]

If the instructor has only the single site that that they are importing content into, no other sites that could be the source, going to Import From Site gives a message that there are no available sites to import from. Instructor doesnâ€™t get the Merge or Replace option. 

The check for whether the instructor has other sites that they can import from should be updated to also check for available template sites. "
Lessons: Unable to add text to subpage,Bug,Verified,Sakai,software,"It appears that users can not add text to Lessons subpages. Adding text to a top-level page works. Attempting to add text to a subpage just refreshes the page. Other content can be added to a subpage. 

This is not occuring on 23.x

No errors in the console, but there was a warning in the log that may be relevant (not an error):

{noformat}05-Feb-2024 11:04:05.311 WARN [http-nio-20313-exec-29] PonderUtilCore.handleLevel1Error Exception rendering view: 

java.lang.NullPointerException: null

	at org.sakaiproject.lessonbuildertool.util.LessonConditionUtil.makeConditionPicker(LessonConditionUtil.java:40) ~[classes/:?]

	at org.sakaiproject.lessonbuildertool.tool.producers.EditPageProducer.fillComponents(EditPageProducer.java:157) ~[classes/:?]

	at uk.org.ponder.rsf.view.support.ViewCollector.fillComponents(ViewCollector.java:56) ~[rsf-core-1.3.jar:?]

	at uk.org.ponder.rsf.view.support.LayoutCollector.fillComponents(LayoutCollector.java:68) ~[rsf-core-1.3.jar:?]

	at jdk.internal.reflect.GeneratedMethodAccessor2119.invoke(Unknown Source) ~[?:?]

	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]

	at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]

	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) ~[spring-aop-5.3.31.jar:5.3.31]

	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:234) ~[spring-aop-5.3.31.jar:5.3.31]

	at com.sun.proxy.$Proxy785.fillComponents(Unknown Source) ~[?:?]

	at uk.org.ponder.rsf.view.support.ViewGenerator.generateView(ViewGenerator.java:53) ~[rsf-core-1.3.jar:?]

	at uk.org.ponder.rsf.processor.support.RSFRenderHandler$1.run(RSFRenderHandler.java:79) ~[rsf-core-1.3.jar:?]

	at uk.org.ponder.rsf.processor.support.RequestInvoker$1.run(RequestInvoker.java:46) ~[rsf-core-1.3.jar:?]

	at uk.org.ponder.util.CollectingRunnableInvoker$1.run(CollectingRunnableInvoker.java:25) ~[rsf-core-ponderutilcore-1.3.jar:?]

	at uk.org.ponder.rsf.flow.support.BasicScopedAlterationWrapper.invokeRunnable(BasicScopedAlterationWrapper.java:59) ~[rsf-core-1.3.jar:?]

	at uk.org.ponder.rsf.flow.support.BasicScopedAlterationWrapper$$FastClassBySpringCGLIB$$84f89202.invoke(<generated>) ~[rsf-core-1.3.jar:?]

	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.31.jar:5.3.31]

	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.31.jar:5.3.31]

	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.31.jar:5.3.31]

	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703) ~[spring-aop-5.3.31.jar:5.3.31]

	at uk.org.ponder.rsf.flow.support.BasicScopedAlterationWrapper$$EnhancerBySpringCGLIB$$497bbcf7.invokeRunnable(<generated>) ~[rsf-core-1.3.jar:?]

	at uk.org.ponder.rsf.flow.support.BasicScopedAlterationWrapper$$FastClassBySpringCGLIB$$84f89202.invoke(<generated>) ~[rsf-core-1.3.jar:?]

	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.31.jar:5.3.31]

	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.31.jar:5.3.31]

	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.31.jar:5.3.31]

	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703) ~[spring-aop-5.3.31.jar:5.3.31]

	at uk.org.ponder.rsf.flow.support.BasicScopedAlterationWrapper$$EnhancerBySpringCGLIB$$497bbcf7.invokeRunnable(<generated>) ~[rsf-core-1.3.jar:?]

	at uk.org.ponder.util.CollectingRunnableInvoker$1.run(CollectingRunnableInvoker.java:29) ~[rsf-core-ponderutilcore-1.3.jar:?]

	at uk.org.ponder.util.CollectingRunnableInvoker.invokeWrappers(CollectingRunnableInvoker.java:32) ~[rsf-core-ponderutilcore-1.3.jar:?]

	at uk.org.ponder.util.CollectingRunnableInvoker.invokeRunnable(CollectingRunnableInvoker.java:14) ~[rsf-core-ponderutilcore-1.3.jar:?]

	at uk.org.ponder.rsf.processor.support.RequestInvoker.invokeRunnable(RequestInvoker.java:39) ~[rsf-core-1.3.jar:?]

	at uk.org.ponder.rsf.processor.support.RSFRenderHandler.handle(RSFRenderHandler.java:75) ~[rsf-core-1.3.jar:?]

	at uk.org.ponder.rsf.processor.support.RSFRenderHandler$$FastClassBySpringCGLIB$$5bda3a3d.invoke(<generated>) ~[rsf-core-1.3.jar:?]

	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.31.jar:5.3.31]

	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.31.jar:5.3.31]

	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.31.jar:5.3.31]

	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703) ~[spring-aop-5.3.31.jar:5.3.31]

	at uk.org.ponder.rsf.processor.support.RSFRenderHandler$$EnhancerBySpringCGLIB$$39423288.handle(<generated>) ~[rsf-core-1.3.jar:?]

	at uk.org.ponder.rsf.processor.support.RenderHandlerBracketer.handle(RenderHandlerBracketer.java:82) [rsf-core-1.3.jar:?]

	at uk.org.ponder.rsf.processor.support.RenderHandlerBracketer$$FastClassBySpringCGLIB$$3055fa0f.invoke(<generated>) [rsf-core-1.3.jar:?]

	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) [spring-core-5.3.31.jar:5.3.31]

	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) [spring-aop-5.3.31.jar:5.3.31]

	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) [spring-aop-5.3.31.jar:5.3.31]

	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703) [spring-aop-5.3.31.jar:5.3.31]

	at uk.org.ponder.rsf.processor.support.RenderHandlerBracketer$$EnhancerBySpringCGLIB$$fc1ae53e.handle(<generated>) [rsf-core-1.3.jar:?]

	at uk.org.ponder.rsf.processor.support.RootHandlerBeanBase.handleGet(RootHandlerBeanBase.java:97) [rsf-core-1.3.jar:?]

	at uk.org.ponder.rsf.processor.support.RootHandlerBeanBase.handle(RootHandlerBeanBase.java:79) [rsf-core-1.3.jar:?]

	at org.sakaiproject.lessonbuildertool.util.RootHandlerBeanOverride.handle(RootHandlerBeanOverride.java:43) [classes/:?]

	at jdk.internal.reflect.GeneratedMethodAccessor1975.invoke(Unknown Source) ~[?:?]

	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]

	at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]

	at uk.org.ponder.reflect.JDKReflectiveCache.invokeMethod(JDKReflectiveCache.java:34) [rsf-core-ponderutilcore-1.3.jar:?]

	at uk.org.ponder.reflect.JDKReflectiveCache.invokeMethod(JDKReflectiveCache.java:22) [rsf-core-ponderutilcore-1.3.jar:?]

	at uk.org.ponder.reflect.JDKReflectiveCache.invokeMethod(JDKReflectiveCache.java:92) [rsf-core-ponderutilcore-1.3.jar:?]

	at uk.org.ponder.rsac.support.RSACBeanLocatorImpl.createBean(RSACBeanLocatorImpl.java:553) [rsf-core-servletutil-1.3.jar:?]

	at uk.org.ponder.rsac.support.RSACBeanLocatorImpl.access$000(RSACBeanLocatorImpl.java:75) [rsf-core-servletutil-1.3.jar:?]

	at uk.org.ponder.rsac.support.RSACBeanLocatorImpl$1.run(RSACBeanLocatorImpl.java:449) [rsf-core-servletutil-1.3.jar:?]

	at uk.org.ponder.rsac.RSACErrorBridge.invokeRunnable(RSACErrorBridge.java:38) [rsf-core-servletutil-1.3.jar:?]

	at uk.org.ponder.rsac.support.RSACBeanLocatorImpl.createBean(RSACBeanLocatorImpl.java:447) [rsf-core-servletutil-1.3.jar:?]

	at uk.org.ponder.rsac.support.RSACBeanLocatorImpl.getLocalBean(RSACBeanLocatorImpl.java:348) [rsf-core-servletutil-1.3.jar:?]

	at uk.org.ponder.rsac.support.RSACBeanLocatorImpl.getBean(RSACBeanLocatorImpl.java:379) [rsf-core-servletutil-1.3.jar:?]

	at uk.org.ponder.rsac.support.PerRequestInfo$1.locateBean(PerRequestInfo.java:49) [rsf-core-servletutil-1.3.jar:?]

	at org.sakaiproject.rsf.servlet.ReasonableSakaiServlet.service(ReasonableSakaiServlet.java:89) [sakai-rsf-core-24-SNAPSHOT.jar:24-SNAPSHOT]

	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) [servlet-api.jar:4.0.FR]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:450) [sakai-kernel-api-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294) [catalina.jar:9.0.76]

	at org.sakaiproject.tool.impl.ActiveToolComponent$MyActiveTool.forward(ActiveToolComponent.java:508) [sakai-kernel-impl-24-SNAPSHOT.jar:?]

	at org.sakaiproject.portal.charon.SkinnableCharonPortal.forwardTool(SkinnableCharonPortal.java:1392) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.portal.charon.handlers.SiteHandler.doToolBuffer(SiteHandler.java:1291) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.portal.charon.handlers.SiteHandler.bufferContent(SiteHandler.java:1125) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.portal.charon.handlers.SiteHandler.doSite(SiteHandler.java:520) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:290) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:188) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.portal.charon.SkinnableCharonPortal.doGet(SkinnableCharonPortal.java:814) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]

	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529) [servlet-api.jar:4.0.FR]

	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) [servlet-api.jar:4.0.FR]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:500) [sakai-kernel-api-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) [tomcat-websocket.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) [catalina.jar:9.0.76]

	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) [catalina.jar:9.0.76]

	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) [catalina.jar:9.0.76]

	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) [catalina.jar:9.0.76]

	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) [catalina.jar:9.0.76]

	at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:768) [catalina.jar:9.0.76]

	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) [catalina.jar:9.0.76]

	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) [catalina.jar:9.0.76]

	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) [tomcat-coyote.jar:9.0.76]

	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) [tomcat-coyote.jar:9.0.76]

	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) [tomcat-coyote.jar:9.0.76]

	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) [tomcat-coyote.jar:9.0.76]

	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) [tomcat-coyote.jar:9.0.76]

	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-util.jar:9.0.76]

	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-util.jar:9.0.76]

	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-util.jar:9.0.76]

	at java.lang.Thread.run(Thread.java:829) [?:?]{noformat}"
Update OpenSearch 1.3.14,Bug,Closed,Sakai,software,"[https://github.com/opensearch-project/OpenSearch/blob/main/release-notes/opensearch.release-notes-1.3.13.md|https://github.com/opensearch-project/OpenSearch/blob/main/release-notes/opensearch.release-notes-1.3.13.md] 

[https://github.com/opensearch-project/OpenSearch/blob/main/release-notes/opensearch.release-notes-1.3.14.md|https://github.com/opensearch-project/OpenSearch/blob/main/release-notes/opensearch.release-notes-1.3.14.md] "
"Calendar embedded in Lessons shows ""Invalid Date"" for end time for assessments and assignments ",Bug,Closed,Sakai,software,"When the Calendar is embedded on a Lessons page, the calendar links for assignment or assessment items (sent from their respective tools to the Calendar) display â€œInvalid dateâ€ in the End Time field on the event detail. This is not true of manually created calendar entries. The event details look fine when viewed in the Calendar tool.

Assignment with due date sent to calendar automatically and viewed in Calendar:

!assignment-calender.png|width=100%!

Same assignment due date viewed on the Calendar embedded in Lessons:

!assignment-calender-lessons.png|width=100%!

Quiz due date sent to calendar automatically and viewed in Calendar:

!quiz-calender.png|width=100%!

Same quiz due date viewed on the Calendar embedded in Lessons:

!quiz-calender-lessons.png|width=100%!"
Stack on Peer Assessment when Instructor submits on behalf of Student,Bug,Open,Sakai,software,"Getting a stack trace for an assignment using peer assessment when an Instructor submits on behalf of the Student



{noformat}01-Feb-2024 09:53:06.716 ^[[31mERROR^[[m [QuartzScheduler_Worker-2] o.s.c.a.s.j.ScheduledInvocationJob.execute Failed to execute component: [org.sakaiproject.assignment.api.AssignmentPeerAssessmentService]:
java.util.NoSuchElementException: No value present
        at java.util.Optional.get(Optional.java:148) ~[?:?]
        at org.sakaiproject.assignment.impl.AssignmentPeerAssessmentServiceImpl.execute(AssignmentPeerAssessmentServiceImpl.java:197) ~[?:?]
        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]
        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
        at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) ~[spring-aop-5.3.18.jar:5.3.18]
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) ~[spring-aop-5.3.18.jar:5.3.18]
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.18.jar:5.3.18]
        at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.18.jar:5.3.18]
        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.18.jar:5.3.18]
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.18.jar:5.3.18]
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.18.jar:5.3.18]
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.18.jar:5.3.18]
        at com.sun.proxy.$Proxy308.execute(Unknown Source) ~[?:?]
        at org.sakaiproject.component.app.scheduler.jobs.ScheduledInvocationJob.execute(ScheduledInvocationJob.java:41) [scheduler-component-shared-22-SNAPSHOT.jar:22-SNAPSHOT]
        at org.quartz.core.JobRunShell.run(JobRunShell.java:202) [quartz-2.3.2.jar:?]
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573) [quartz-2.3.2.jar:?]{noformat}"
Section text in Lessons Reorder has insufficient contrast,Bug,Open,Sakai,software,"One the Reorder page in Lessons, the Section text has insufficient contrast. It is white text on light gray and is very difficult to read. 

!reorder1.png|width=91.66666666666666%!

However, it looks ok in dark theme, since the white text shows up on the dark gray in that theme.

!reorder2.png|width=91.66666666666666%!"
"Issues related to new ""Lessons: View items based on a grade"" feature",Bug,Open,Sakai,software,"I was super excited to test out the new feature contributed by S2U/EDF [https://sakaiproject.atlassian.net/browse/S2U-35|https://sakaiproject.atlassian.net/browse/S2U-35|smart-link]  While I do think it is a big improvement to have more flexibility in defining access criteria in a non-linear way, Iâ€™ve noticed several issues with the feature that I think will be very confusing for end users.  

# The new condition creation option only seems to work for links to Assignments or Tests & Quizzes items. In the S2U-35 Jira, the description said that it would apply to Lessons question items as well, but this is not the case. I tried to create a condition for an in-line Lessons question but the option is not there.
# It is confusing that only some item types can use this option, since it isnâ€™t clear to users which ones are available for creating conditions. It doesnâ€™t even work with all items that are gradable in Lessons, as in-line questions and Student Content donâ€™t have the feature. I also could see someone wanting to create a condition for other types of graded items, such as Discussion links. I have another Jira open about adding the ability to also use Gradebook items and categories. [https://sakaiproject.atlassian.net/browse/SAK-49623|https://sakaiproject.atlassian.net/browse/SAK-49623|smart-link] All of those things would seem to be needed as grade-related conditions, so it seems odd and very limiting that only a couple of item types are supported. If one doesnâ€™t understand the limitations, the inclination is to assume the feature is broken.
# The new condition-based release seems to operate completely independently of the existing Lessons prerequisite and required item options. Again, it is very unclear to users which option should be used in which situations. When I began testing the feature, I assumed that the â€œrequire this itemâ€ checkbox was needed in order to create a condition based on an item. In fact, it is not. Neither is the â€œDon't Release Item Until All Prerequisites are Completedâ€ needed in order to select a prerequisite condition for an item.  
# The two different requirement/condition features are particularly confusing for Assignment and Tests & Quizzes items, since both of those item types also have an option to specify â€œRequire that the student receive ___ pointsâ€ for that item to meet the requirement. It would be easy to assume that this is duplicate functionality, but due to the differences in how the two features work, it actually isnâ€™t redundant, but it could easily be perceived as such. Again, this makes the user wonder which option they should use and what the difference is between them.
# Unlike the existing Lessons requirement/prereq functionality, with the new conditions feature there are no visual cues on the item when viewed on the Lessons page to indicate that there is a condition associated with an item, or a prerequisite condition for release of an item. In existing Lessons, items that had prereqs had the text _[Has prerequisites]_ included after the title of the item. However, items with conditions do not have anything added. You have to edit the item and select to open and view the Prerequisites and Requirements section to see if there are any conditions associated with an item. 
# It seems counterintuitive that you have to first create the condition by editing the required item, before it becomes available for selection as a condition for a different item. In practice, this makes for a lot of back and forth if you havenâ€™t planned ahead carefully. For example, if I want the â€œWeek 2â€ page to require a score of 80 on the â€œWeek 1 Quizâ€ , I canâ€™t just go to â€œWeek 2â€ and set that as a condition (i.e. prereq) for access. I have to first go to â€œWeek 1 Quizâ€, create the condition, then return to â€œWeek 2â€ and select it as a requirement. It would be much more intuitive if a user could simply go to the page where they want to specify a prerequisite condition, and on that page they would have the option to select from all existing graded items (i.e. assignments, quizzes, gradebook, etc.) and create a new condition. 

I know that the development of this feature was part of the S2U Unidigital project, but Iâ€™m uncertain if there are additional extensions or enhancements currently planned. I believe that adding some more clarity around how the feature works, in addition to adding support for other graded items, and simplifying the workflow for adding conditions or prerequisites would make this feature much more useful going forward. "
Kernel: Impersonation Feature Does Not Apply User Privacy Settings,Bug,Resolved,Sakai,software,The impersonation method needs a User Privacy Record or else it will reset the URL to /portal.
L10N: Translate Sakai to Serbian,Feature Request,Verified,Sakai,software,"Received this message from Cristian Tarara.

{noformat}Hi Miguel
Serbian is fully translated.
Can you integrate in Sakai?{noformat}

Checked Transifex and I see that is completed:

!image-20240131-105933.png|width=1022,height=145!"
Update Apache  httpclient 5.3.1,Bug,Closed,Sakai,software,"{noformat}Release 5.3.1
-------------------

This is a maintenance release that fixes several minor defects and a regression in the Fluent module
causing the response body truncation discovered since release 5.3.


Change Log
-------------------

* Restored backwards-compatible #createSocket calls in
  Contributed by Clayton Walker <cwalker at sofi.org>

* HTTPCLIENT-2315: Client builders fail to apply system properties to the default connection manager.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* HTTPCLIENT-2314: Handle gracefully a failure of DnsResolver to return a list of resolved
  addresses (#533).
  Contributed by Philip Helger <philip at helger.com>

* HTTPCLIENT-2314: Throw ConnectionShutdownException in case of pooled connection having been closed or
  discarded instead of plain IllegalStateException.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* HTTPCLIENT-2312: Fixed response body truncation in the fluent API (#521).
  Contributed by Arturo Bernal <abernal at apache.org>

* HTTPCLIENT-2313: Fixed NullPointerException in PoolingHttpClientConnectionManager when debug
  logging is enabled.
  Contributed by Oleg Kalnichevski <olegk at apache.org>


Release 5.3
-------------------

This is the first GA release in the 5.3 release series. This release finalizes the 5.3 APIs
and also includes all bug fixes from the 5.2 release branch.

The 5.3 release series introduces support for the Bearer authentication scheme (RFC 6750) and
deprecates NTLM and GSS-based experimental authentication schemes in favor of Basic / Bearer
authentication with TLS.

Notable changes and features included in the 5.3 series:

* Introduction of the Bearer authentication scheme.

* Deprecation of the NTLM authentication scheme.

* Deprecation of the GSS-based experimental authentication schemes.

* Support for load distribution across multiple proxies.


Change Log
-------------------

* HTTPCLIENT-2310: Async Connect exec handler incorrectly pipes CONNECT requests through the main
  request protocol chain.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* Upgraded HttpCore to version 5.2.4.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* SEE OTHER redirect handling fix.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* HTTPCLIENT-2305: SSLConnectionSocketFactory allows Socket.connect() to be decorated (#499).
  Contributed by Carter Kozak <ckozak at apache.org>

* Add security warning to TrustStrategy implementations documentation (#490).
  Contributed by Marcono1234 <Marcono1234 at users.noreply.github.com>

* More consistent handling of OperationTimeoutException in MemcachedHttpCacheStorage.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* Document exec chain behavior when automatic retries are enabled. (#480).
  Contributed by cachescrubber <lars.uffmann at gmail.com>

* HTTPCLIENT-2291: Fixed inconsistency in behavior between the class and async implementation
  of the request re-execution. The async request retry exec will now restart request execution
  from itself instead of from the very beginning of the execution chain.
  Contributed by Oleg Kalnichevski <olegk at apache.org>{noformat}"
Results table is not showing all of the columns data,Bug,Verified,Sakai,software,"After performing a search, results table isnâ€™t showing all of the columns.  Type, Authority, Created On and Modified On have no values.  The data appears to be in the markup, itâ€™s just not displaying.  My initial guess is that previous bootstrap related changes (SAK-48635) messed up the table cell classes.

!Screenshot 2024-01-30 at 9.01.33 PM-20240131-020138.png|width=1252,height=1405!"
Assignments: Grades entered in Gradebook not displayed in Assignments,Bug,In Progress,Sakai,software,"Prior to Trinity, assignments associated with gradebook items that originate from Gradebook and have grades entered in Gradebook would display the grades in the corresponding submissions views in Assignments. This no longer occurs."
Importing an assignment that is linked to the gradebook (externally) is not assigned a gb category after import,Bug,Resolved,Sakai,software,After an assignment is imported which is linked (externally) to a gradebook item that has a category the new item is missing the category.
Awkward student workflow for submitting LTI assignments that open in new window,Bug,Open,Sakai,software,"The issue related to the awkward workflow for students when submitting LTI assignments via the Assignment tool was first raised in [https://sakaiproject.atlassian.net/browse/SAK-45900|https://sakaiproject.atlassian.net/browse/SAK-45900|smart-link]. However, that Jira also included information about the submission status message for LTI assignments, so it was marked as resolved when the status information was fixed, but the UI issue about the workflow was never completely addressed.

There is a redundant step in the process which creates an additional click for the student. When the student clicks on the assignment, it does not take the student right to the external tool. It takes them to the screen below and then the student has to click the â€œGo to External Toolâ€ button to actually see the assignment. 

!lti-assignment-click1.png|width=91.66666666666667%!

If the instructor has selected to open the tool in a new tab, there is another step is needed. When the student clicks â€œGo to External Toolâ€ it still does not take the student to the tool, instead, it displays another page where the student then has to click â€œLaunch External Tool in New Windowâ€. 

!lti-assignment-click2.png|width=91.66666666666667%!

After clicking that button, then a new tab opens up where it loads the actual tool. 

!lti-assignment-click3.png|width=91.66666666666666%!

The â€œLaunch External Tool in a New Windowâ€ page is redundant and just makes more clicks for the user. They have to click once on the Assignment link within the site to go to the assignment detail page; then twice to select â€œGo to external toolâ€; and then a third time to select â€œLaunch tool in a new windowâ€ and actually get to the assignment itself. It would be better for the new tab to open up and show the tool directly upon clicking â€œGo to External Tool.â€

Incidentally, if the instructor has NOT selected to open the external tool in a new tab, clicking on the â€œGo to External Toolâ€ button does load the tool within the content frame. There is no extra screen with an extra click. The open in a new tab behavior should be consistent with the open in content frame behavior. "
Samigo: Deleting group linked to draft asessment creates orphan in database,Bug,Resolved,Sakai,software,"Steps to reproduce:

* Create a site with tool samigo
* Add group with members to site
* create asessment and release to created group
* save asessment
* delete group in SiteInfo

The entry for the group remains in  table sam_authzdata_t and is therefore orphaned. The value  agentId, in this case the groupId, is the only connection to site/group, which does no longer exist."
"Tests & Quizzes : While keyboard testing ""Publish"" button grey's out post selection.",Bug,Open,Sakai,software,"While keyboard testing in â€œTests and Quizzesâ€ and trying to publish a new assessment, the â€œPublishâ€ button greyâ€™s out post selection leaving the screen stuck. "
Assignments: Sakai Grader screen unavailable.,Bug,Verified,Sakai,software,Grading screen is not visible for instructor when Sakai grader is selected.
Assignments: Rubric isnâ€™t updated on assignments submissions list,Bug,Open,Sakai,software,The rubric shown when the icon is clicked from the assignment summary page does not show the rubric selected while grading.
Allow option to remove open/close dates from Assignments title in Lessons,Feature Request,Open,Sakai,software,"In Lessons, when you add a link to an Assignment on a Lessons page, it automatically includes the open and due dates at the end of the title. However, in some cases, the instructor may not want all that extra text in the  assignment title. Unfortunately, it cannot be removed. Editing the title of the item on the page and removing the open/due text does nothing. The dates are automatically re-inserted into the title upon Save. 

While I understand the reasoning behind including the dates by default (it is generally a good idea to let students know when things are open/due), it is a bit frustrating that the instructor isnâ€™t allowed to remove that text. There are several reasons why an instructor might not want to include the open/due date information in brackets at the end of the title:

# Assignments does this in Lessons, but Tests & Quizzes, Discussions, and other dated items do not. This inconsistency is confusing to the user.
# The addition of +[Open on: Jan 29, 2024, 4:04:00 PM] [Due on: Feb 5, 2024, 4:04:00 PM]+ at the end of the assignment title is not very attractive. This long string of text in the title may make the Assignment links appear awkward or crowded on the page depending upon the page layout. It creates visual clutter to have very long titles.
# If the due date is hidden from students, they will see this instead  +[Open on: Jan 29, 2024, 4:04:00 PM] [Due on: -]+ which seems a bit misleading, since there is a due date, but it isnâ€™t being shown. Wouldnâ€™t it be better to just omit the â€œDue onâ€ part, rather than show â€œDue on: -â€.
# In another Jira [https://sakaiproject.atlassian.net/browse/SAK-49692|https://sakaiproject.atlassian.net/browse/SAK-49692|smart-link] I have proposed a feature request to allow assignments without a due date, similar to the way that Tests & Quizzes can have no due date. The option to not have an end date better supports a self-paced learning or open-access course design. If there is no end date, then the â€œDue on: -â€ is also unnecessary.

Perhaps there could be an option when you edit the item in Lessons to display the open and/or end date in the Item Description area, instead of as part of the title. Both options could be selected by default, but this would allow instructors to de-select one or both dates if desired. 

See mockup below:

!include-open-due-dates-option.png|width=100%!

Also, I think that placing that information in the Description field would look a little better, since the link would not be such a long string and users are more accustomed to seeing more text in a description field rather than a title.

!assignment-dates-in-description.png|width=100%!"
Allow Assignments to have no end date,Feature Request,Open,Sakai,software,"The Assignments tool currently requires the instructor to enter both a start date and an end date. However, sometimes there are assignments which donâ€™t really need an end date. I often find myself creating assignments and then setting an end date very far in the future (like one or two years in the future) just because I want them to be essentially open-ended. This is particularly true when setting up a self-paced style course, where things are set to be released upon completion of items in a particular sequence, rather than depending on specific open and close dates on a calendar.

The Tests & Quizzes tool allows instructors to create assessments without an end date. It seems odd that the Assignments tool does not. 

Allowing the option to specify an open end date (i.e. no end date) for Assignments would improve consistency across tools, would be more user-friendly for instructors with open-access assignments, and would be more in keeping with the behavior of other competitor LMS Assignment options, especially in the case of self-paced learning environments. "
Maintain tool hidden/locked status when importing from site,Feature Request,Open,Sakai,software,"Currently, when a site owner/instructor imports content from one site to another, all of the tools (with the exception of Lessons) are unhidden and/or unlocked in the left navigation of the target site (unless it is a tool that is hidden/locked in all sites by default, such as Rubrics).

It is quite common for instructors to purposely hide some tools (Resources, or Assignments for example), if they prefer for students to access the course content via Lessons, rather than jumping to various tools directly. However, after importing site content, instructors with hidden tools then have to go back to Site Info > Tool Order and re-hide (or re-lock) all of the hidden/locked tools that were copied. This makes for an unnecessary second step each time a site is imported. 

It would be a much better user experience if all imported tools maintained the same hidden/locked status from the site being copied, so that instructors donâ€™t have to waste time re-setting tool visibility after import. Lessons appears to be the only tool that currently maintains the hidden status during Site Import. All of the other tools should work that way as well, both for consistency and for ease of use."
SakaiProfile webcomponent should only fetch JSON data when needed ,Bug,Verified,Sakai,software,"Currently, the sakai-user-photo webcomponent calls the sakai-profile webcomponent and this produces an instant JSON fetch.

In GradebookNG, this is N number of fetches when in reality we only want to fetch the data IF the user wants to view the popover"
View As - Unpublished sites tools are not listed in menu,Bug,Verified,Sakai,software,"This is a copy of [https://sakaiproject.atlassian.net/browse/SAK-49597|https://sakaiproject.atlassian.net/browse/SAK-49597|smart-link] for just the problem occuring on 23.x. This is now working on Trunk. 

When using the View Site As feature on unpublished sites, the instructor is getting unexpected results. The first time using the View As option, it switched to the psudo-student Home and brought up the tutorial popups. After exiting student view and returning, the course Overview page appeared, but the site and tools were not listed on the left under Pinned or Recent Sites, making it impossible to preview the site. "
Overview: Lost content in Customize Site Info Display after an error message,Bug,Closed,Sakai,software,"When editing the site information text from Overview, when an error message is triggered (for example, because I left the tool title blank), the updated content is lost, reverting to the previous content.

The serious issue is with the Description field, which could involve a significant amount of time for a teacher. The CK Editor's auto-save banner is not triggered."
Messages: Table type changes after empty search,Bug,Open,Sakai,software,Table type changes (column header are not sortable) after search results are generated. 
Overview: Overview Tool disappears when all widgets are removed - it's not obvious how to recover.,Bug,Open,Sakai,software,Overview tool is deleted when all widgets are removed - cannot even be brought back even if tool is disabled and enabled again from â€˜manage toolsâ€™.
Overview: One column layout allots too much area vertically. ,Bug,Open,Sakai,software,Switching to a single column hides other tools too far down the page. Refer to video.Â 
Overview: Some text not clear on darkmode in â€˜manage overviewâ€™,Bug,Verified,Sakai,software,The test for â€˜availableâ€™ widgets and below is unreadable on dark mode. Refer to screenshot. 
Syllabus tool > Add > Create Syllabus Items by number of items/dates> Additional options disappear when forgetting to input a title,Bug,Closed,Sakai,software,"The syllabus UI has undergone some helpful improvements thanks to [+SAK-48479+|https://sakaiproject.atlassian.net/browse/SAK-48479]. However, we have come across one bug that needs to be resolved.

When adding a syllabus, if you forget to input a title, and then attempt to either:

# Create syllabus items by the number of items needed, OR
# Create syllabus items by dates

Then clicking â€œAddâ€ will result in some functionality disappearing to the end user."
User with all role permissions removed still sees tools and some content,Bug,Open,Sakai,software,"In researching the creation of a custom role for one of our clients, I discovered that removing all of the permissions from a site role (with the exception of site.visit) does not behave as expected. I expected that I would not see the tools in the left nav if I did not have the correct permissions to view them. However, the tools in Sakai seem to behave differently depending on the tool. Some of them respect the permissions (or lack thereof) and others donâ€™t. 

The following tools DO NOT appear in the left nav, as I expected. This behavior makes sense.

* Announcements
* Calendar
* Chat Room
* Dropbox
* Email
* Email Archive
* Podcasts
* Wiki

The following tools DO show up in the left nav, but they display an error message related to not having the correct permissions. This is better than showing content which should be hidden, but still not ideal. It would be better not to see the tool at all if you donâ€™t have access to it.

* Commons
* Gradebook
* Lessons
* Section Info

These tools DO show up, and there is no error message. However, they also DO NOT display any content to the user. They appear as if there are no items in that tool (even when there are items available to the students in the site).

* Assignments
* Conversations
* Tests & Quizzes
* SignUp
* PostEm

The following tools DO show up in the left nav, and they also DO display content and/or allow the user to use the tool to post a message, view/print tool content, search, etc. - it varies depending on the nature of the tool. This does not make sense, as it seems more logical that they should not have access to these items if they have no permissions other than site.visit.

* Contact Us
* Discussions
* Messages
* News
* Overview
* Polls
* Roster _*Note: it seems to only be showing instructors, not all site participants, but that may depend on the default permissions for that tool. More testing may be needed._
* Search
* Site Info
* Syllabus
* Web Content"
Test and Quizzes - Cant access the Add attachments button when giving feedback,Bug,Open,Sakai,software,"Use the keyboard to add attachments as feedback. Currently, when you try to select the add attachments button it tabs over it while using just the keyboard. If you use a screen reader it finds the button. "
"Lessons: Custom Gradebook title for Comments, Student Pages Comments",Feature Request,Open,Sakai,software,"[https://sakaiproject.atlassian.net/browse/SAK-46573|https://sakaiproject.atlassian.net/browse/SAK-46573] added the ability to enter a custom name for the Gradebook item created for student pages. As I was testing this, I noticed that the comments included in the student content pages and the comment tool both still create the default gradebook item - Lessons Comments (item:#) or Lessons Student Page Comments (item:#). I believe these options should also include a gradebook name field. "
CKeditor in Conversations has no icons,Bug,Verified,Sakai,software,"The CKeditor in Conversations on 23.x is completely collapsed - meaning no icons are visible at all unless you expand it. It should be showing the top row of icons in collapsed state.

!2024-01-25_14-02-12.png|width=100%!"
CKeditor is missing in Conversations,Bug,Verified,Sakai,software,"The CKeditor appears to be missing entirely from the Conversations tool when you attempt to author a post.

!conversations-missing-editor.png|width=100%!"
Conversations discussion topics are changed to question topics upon import,Bug,Verified,Sakai,software,"When using the Site Info > Import from Site option to copy Conversations from one site to the next, Discussion type topics are all converted to Question type topics. 

See original site topics below:

!conversations-site-a.png|width=100%!



See imported topics in new site after import:

!conversations-site-b.png|width=100%!"
New property to set default site publish behavior,Feature Request,Closed,Sakai,software,"In [https://sakaiproject.atlassian.net/browse/SAK-33963|https://sakaiproject.atlassian.net/browse/SAK-33963|smart-link] a new feature was added to allow users to select to publish course sites automatically, on a specified date, or manually. I believe we need a new property in the sakai.properties file to allow institutions to set the default publish behavior for their institution. 

The preferred behavior depends on the institutionâ€™s normal workflow for publishing sites. Some institutions automate everything, and others leave it up to individual faculty to publish. Therefore, some institutions may prefer to default to auto, whereas others will want the default to be manual.

The suggested new property would be:

â€œsite.setup.publish.default = auto | scheduled | manualâ€

with an OOTB default setting of:
â€site.setup.publish.default=manualâ€

The â€œmanualâ€ setting is less likely to be disruptive to existing expectations, since it is more similar to the prior behavior. We donâ€™t want to surprise people when all of their current sites auto-publish if they have not made a selection. "
Tests & Quizzes: Performance issue when loading exam,Bug,Verified,Sakai,software,"The calculation of the summary of submissions can take a long time, the performance should be improved."
More Granular Options for Importing Site Content,Feature Request,Open,Sakai,software,"Sakai users often request the ability to selectively import a subset of items from one site to another during the *Site Info > Import from Site* process. Currently, it is an all or nothing process for items within a tool. You either import all of the Lessons from a site, or none of them. The same is true of other tools containing multiple items, such as Assignments, Tests & Quizzes, Resources, Discussions, etc. 

In practice, this means that instructors or site owners are often forced to import everything from another site, when they really only wanted a handful of items. After importing everything, they then have to go through all of the content and delete the items they donâ€™t want. This can be laborious, not to mention confusing, particularly if there are any similarly names items in both the copied site and the target site. 

There are some workarounds for bringing over individual items, such as exporting and importing individual quizzes from Tests & Quizzes, or using the newly added ability to copy a single Lessons page from another site (SAK-47706). However, these options are also not always ideal, since they ONLY let you do one item at a time. If you want 5 quizzes out of 20, youâ€™d need to export and then import them one at a time - repeating the process 5 times. If you want 3 Lessons pages out of 15, you would have to repeat the process 3 times, once for each individual page. Also, there are some items that donâ€™t copy when you copy a page individually this way in Lessons (i.e. LTI links or the content on subpages of the page you are copying).

I would like to propose a more granular approach to the selection of items for copying via Import from Site. This would allow instructors or site owners to have more control over the content they copy from one site to another, and save lots of time deleting things that were unnecessarily copied in the first place. Ideally, when selecting the tools for import, the user would also be able to expand a given tool and select a subset of items within that tool if desired. 

For most tools, this selection process should be relatively straightforward. However, for Lessons, which also contains links to content within other tools, the import will need to be smart enough to also include items from other tools which are linked on the selected Lessons pages. For example, if you select Lesson Page 1 to be copied, and that page includes Assignment 1, Quiz 1, Discussion 1, and links to 5 items within Resources, then all of the associated items in those other tools should be automatically selected for inclusion when the Lessons page is imported.

Iâ€™m including rough mockups of what the Import from Site content selection screen might look like. 

!site-import-select-content1.png|width=100%!

!site-import-select-content2.png|width=100%!"
Provide permission denied error instead of stacktraces for custom roles in Gradebook,Bug,Verified,Sakai,software,"Institutions often use custom roles for reviewers, department heads, etc. Sometimes they donâ€™t want those roles to access Grades

Currently, we see lots of stacktraces"
Antisamy configs should allow tel: links because CKEditor allows them,Bug,Closed,Sakai,software,CKEditor allows user to create a link with [tel:+1-212-555-1212|tel:+1-212-555-1212] but antisamy strips it
Roster: Separate user ID from default view,Feature Request,Open,Sakai,software,"In Roster tool, the OOB permissions allow only the instructor/maintain role to view all participants. Students by default see only the instructor role. Instructors may want to allow students to view all participants so they can see their peerâ€™s name, profile, picture, and other profile information. The permission to view all participants includes all userâ€™s Sakai profile picture, name, nickname, pronounciation, user ID, and role. Viewing the userâ€™s email address is a separate permission that can be modified for the site. 

In the US, the user ID may not be directory information released by FERPA. Thereâ€™s very few other locations in Sakai that allows students to see other studentâ€™s IDs. (only other one I could find was assignments group submissions) It seems odd that Roster does include the user ID if the default permission is changed to allow students to view their classmates. 

I would like to see viewing the user ID as a separate permission like email. Institutions that consider the User IDs to be directory information can then share them, and those that consider those protected information can allow students to view all participants without sharing the IDs. "
Webcomponents does not compile on Windows,Bug,Closed,Sakai,software,"webcomponents does not compile on Windows,  related to [https://sakaiproject.atlassian.net/browse/SAK-48323|https://sakaiproject.atlassian.net/browse/SAK-48323|smart-link] , reverting this compiles again.

# {noformat}[INFO] --- frontend:1.15.0:npm (lint) @ webcomponents ---
[INFO] Running 'npm run lint' in D:\workspace\sakai-apereo\webcomponents\tool\src\main\frontend
[INFO]
[INFO] > sakai-ui@1.0.0 lint
[INFO] > eslint --fix packages/**/src/*.js
[INFO]
[INFO]
[INFO] Oops! Something went wrong! :(
[INFO]
[INFO] ESLint: 8.56.0
[INFO]
[INFO] No files matching the pattern ""packages/**/src/*.js"" were found.
[INFO] Please check for typing mistakes in the pattern.
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary for Sakai base pom 24-SNAPSHOT:
[INFO]
[INFO] Sakai Web Components ............................... SUCCESS [  0.717 s]
[INFO] Sakai Web Components Bundle ........................ SUCCESS [  1.406 s]
[INFO] Sakai Web Components Tool .......................... FAILURE [ 43.098 s]
[INFO] Sakai WebJars Project .............................. SKIPPED
[INFO] Sakai WebServices Project .......................... SKIPPED
[INFO] Sakai Soap (CXF) ................................... SKIPPED
[INFO] Sakai Wicket Base POM .............................. SKIPPED
[INFO] Sakai Wicket 6 Tool ................................ SKIPPED
[INFO] Sakai Wicket 8 Tool ................................ SKIPPED
[INFO] admin-bulk-user-membership base pom ................ SKIPPED
[INFO] admin-bulk-user-membership-tool .................... SKIPPED
[INFO] Sakai base pom ..................................... SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  45.960 s
[INFO] Finished at: 2024-01-24T10:09:53+01:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal com.github.eirslett:frontend-maven-plugin:1.15.0:npm (lint) on project webcomponents: Failed to run task: 'npm run lint' failed. org.apache.commons.exec.ExecuteException: Process exited with an error: 2 (Exit value: 2) -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
[ERROR]
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn <args> -rf :webcomponents{noformat}"
Rubrics: When creating a new rubric it is no longer expanded by default,Bug,Resolved,Sakai,software,"This is not affecting 23x currently. When adding a new rubric, the new rubric no longer expands by default for easy editing. This is a regression and not very user friendly."
Portal: Uncaught TypeError: Cannot read properties of null (reading 'classList'),Bug,Resolved,Sakai,software,"Currently Iâ€™m seeing this issue only on 24x. When logging into trunk, the instructor or student, I see the following console errors:

Edge:

{noformat}portal.theme.switcher.js?version=d10412b8:51  Uncaught TypeError: Cannot read properties of null (reading 'classList')
    at portal.theme.switcher.js?version=d10412b8:51:46
    at NodeList.forEach (<anonymous>)
    at portal.updateIframeTheme (portal.theme.switcher.js?version=d10412b8:49:39)
    at HTMLDocument.<anonymous> (portal.theme.switcher.js?version=d10412b8:92:12)
(anonymous) @ portal.theme.switcher.js?version=d10412b8:51
portal.updateIframeTheme @ portal.theme.switcher.js?version=d10412b8:49
(anonymous) @ portal.theme.switcher.js?version=d10412b8:92{noformat}

Firefox:

{noformat}Uncaught TypeError: iframe.contentDocument.documentElement is null
    updateIframeTheme https://trunk-maria.nightly.sakaiproject.org/library/js/portal/portal.theme.switcher.js?version=d10412b8:51
    updateIframeTheme https://trunk-maria.nightly.sakaiproject.org/library/js/portal/portal.theme.switcher.js?version=d10412b8:49
    <anonymous> https://trunk-maria.nightly.sakaiproject.org/library/js/portal/portal.theme.switcher.js?version=d10412b8:90
    EventListener.handleEvent* https://trunk-maria.nightly.sakaiproject.org/library/js/portal/portal.theme.switcher.js?version=d10412b8:86
portal.theme.switcher.js:51:7{noformat}"
Preferences: Set users default option for Announcement notifications through a property,Improvement,Resolved,Sakai,software,"At Preferences > Notifications, some tools let you choose between some notification options.
Options for Announcements:

{noformat}- Do not send me low priority announcements
- Send me one email per day summarizing all low priority announcements
- Send me each notification separately{noformat}

In this case, the third one is the default.
Institutions may want to set a different default option for all users. This will be enabled by a new sakai property."
compilation failure with Sakai 22.4+,Bug,Open,Contrib: Clog,software,"{quote}[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project clog-impl: Compilation failure

[ERROR] /sakai/clog/impl/src/java/org/sakaiproject/clog/impl/SakaiProxyImpl.java:[526,72] error: incompatible types: int cannot be converted to List<String>{quote}"
Conversations lock date test does not look for checkbox first,Bug,Open,Sakai,software,Set a due date. Then set an earlier Accept Until date. Then uncheck the Accept Late Responses Until. Now the date should no longer be validated
SakaiDatePicker does not handle daylight savings time (DST) correctly,Bug,Closed,Sakai,software,"We are starting to hear reports of Sakai 22/Conversations and Sakai 23/Assignments having issues with due dates after March 10 (the beginning of DST in USA). For example, add an assignment with a due date on March 12 for 10am (it should display as 10am and not as 11am)

SakaiDatePicker webcomponent seems to do timezone offset manipulation to produce an epochMillis (as opposed to passing a date string to the tool)"
CK editor : While keyboard testing Alt+F10 keyboard shortcut is not working in CK editor.,Bug,Open,Sakai,software,"While keyboard testing to access the â€œsourceâ€ button in the CK editor using keyboard shortcut Alt+F10, It is not navigating to the list of options in the editor but opening a random application in the machine.  "
"LTI: Stealthed tools, when added to a site by an admin, should be available in Lessons if checked as a placement",Feature Request,Open,Sakai,software,"I wasnâ€™t sure if this should be a feature request or a bug. With the LTI placement stuff changing, I think changes need to be made for stealthed tools and when the option is checked to allow tools to be selected from Lessons.

Currently, if a tool is stealthed and has only Lessons checked, the tool is not listed in Lessons for the instructor after the admin has added it to the site.

If a tool has both Lessons and navigation checked, it is added to the navigation, but not available for the instructor to add through Lessons.

I also tested adding the store as a stealthed tool, but I was certain it would not work (and it doesnâ€™t).

What are the expectations for stealthed tools?

* Can only tools placed on the navigation be stealthed and added by the admin?
* If the Lessons option is checked, would you expect the instructor to be able to add the tool through Lessons, or expect it to automatically be added through Lessons?
* Or, if a tool is marked as stealthed, should the only placement option be site navigation and the other checkboxes disabled?
* Or would you expect the admin to check the box to create a site link when they add the tool to a site? 

With the changes to LTI placements and how things show up/donâ€™t show up in site info > manage tools, possibly more instructions are needed also to make it clear what will/wonâ€™t work."
"LTI: When selecting only Lessons for placements, when an instructor creates a course, the LTI tool is listed under Manage Tools",Bug,Closed,Sakai,software,"Tools set to only be added in Lessons should not be listed in the Manage Tools page when creating a site.

Found while testing [https://sakaiproject.atlassian.net/browse/SAK-49540|https://sakaiproject.atlassian.net/browse/SAK-49540|smart-link] 

If the admin adds a tool only allowing placement in Lessons, the tool shows up when creating a site under Manage Tools. If the instructor adds the tool at this point, after the course is created, the tool is on the navigation but if they go into Site Info > Manage Tools it is not listed and cannot be removed.

If the instructor does not add the tool on site creation, then it works properly. When the instructor goes into Site Info > Manage Tools, the tool is not present. If the instructor enters Lessons and adds an external tool, it is listed there as expected.

Doc with placements tested:
[https://docs.google.com/spreadsheets/d/1AORWV8r8no6r-HcYUmHFlZ9yKySj_9wumRk4SIUFha8/edit?usp=sharing|https://docs.google.com/spreadsheets/d/1AORWV8r8no6r-HcYUmHFlZ9yKySj_9wumRk4SIUFha8/edit?usp=sharing|smart-link] "
Update fasterxml: Jackson 2.16.1 & Woodstox 6.6.0,Bug,Closed,Sakai,software,"[https://github.com/FasterXML/jackson-core/releases/tag/jackson-core-2.16.1|https://github.com/FasterXML/jackson-core/releases/tag/jackson-core-2.16.1|smart-link] 

[https://github.com/FasterXML/jackson-core/releases/tag/jackson-core-2.16.0|https://github.com/FasterXML/jackson-core/releases/tag/jackson-core-2.16.0|smart-link] 



[https://github.com/FasterXML/woodstox/releases/tag/woodstox-core-6.6.0|https://github.com/FasterXML/woodstox/releases/tag/woodstox-core-6.6.0|smart-link] "
"Assignments: Grader not displaying files, not switching to multiple files",Bug,Verified,Sakai,software,"This is not currently an issue on 23.x

This was reported by [~accountid:712020:9e5e8d0e-877c-493a-885a-db6e40b7c3b4] in the comments of [https://sakaiproject.atlassian.net/browse/SAK-49242|https://sakaiproject.atlassian.net/browse/SAK-49242|smart-link], but this appears to be a new behavior after that Jira was verified and is affecting both draft and actual submissions.

The Grader is not previewing the first file on the list, and clicking on other file names is not switching to them. If there is an inline text submission and attachments, clicking on one of the attachments seems to open the inline text. "
Assignments: Unable to swap between files in Grader,Bug,Resolved,Sakai,software,"This is only occuring on 22.x,

When using the Grader in Sakai 22.x, the instructor can not toggle between multiple submitted files. 

I found this while testing [https://sakaiproject.atlassian.net/browse/SAK-49242|https://sakaiproject.atlassian.net/browse/SAK-49242|smart-link], and it is occuring with both the draft submissions and actual submissions from students. Iâ€™m including the draft submissions in the text plan here in case it is related."
"Keyboard Testing: Under ""Tests and Quizzes"" unable to complete creating Assessment with ""Hot spot"" question type.",Bug,Open,Sakai,software,"While keyboard testing and trying to create Assessment with the question type as â€œHot spotâ€, keyboard doesnâ€™t recognize the image to highlight the HOT SPOT rather it skips to the next option on the screen. "
T&Q: Ability to associate an exam with an existing GB item,Feature Request,Verified,Sakai,software,"In assignments instructors can assign a submission with an existing gradebook item, they can create a new one, or assign to an existing one.

!image-20240119-134641.png|width=434,height=275!

Instructors canâ€™t do that in T&Q, just create a GB item with the same name of the assessment.

!image-20240119-134458.png|width=533,height=65!

This contribution adds support for custom GB items like assignments do, instructors now can create GB items or assign to an existing GB item.

!image-20240119-135548.png|width=1008,height=186!"
"Rubrics: Popup dialog appear broken, when there are multiple",Bug,Verified,Sakai,software,"When clicking on the edit pen to edit a criterion title a popup opens. Clicking on the edit button for another criterion or adding a rubric should probably close the first dialog and the new one should not be broken. Currently a second one opens, but it is broken.
There are some console errors that appear:


*Uncaught TypeError: bootstrap.Popover.getInstance(...) is null*

{noformat}Uncaught TypeError: bootstrap.Popover.getInstance(...) is null
    cancelEdit rubrics-manager.js:140
    firstUpdated rubrics-manager.js:88
    trigger event-handler.js:292
    show tooltip.js:248
    v index.js:254
    r index.js:276
    a index.js:98
    y index.js:282
    setTimeout handlery index.js:280
    _queueCallback base-component.js:49
    show tooltip.js:255
    _enter tooltip.js:536
    setTimeout handler_setTimeout tooltip.js:557
    _enter tooltip.js:534
    toggle tooltip.js:163
    _setListeners tooltip.js:469
    i event-handler.js:98
    P event-handler.js:184
    on event-handler.js:217
    _setListeners tooltip.js:469
    Pe tooltip.js:123
    je popover.js:42
    firstUpdated rubrics-manager.js:88
    _$AE chunk-IV44QDQG.js:2
    performUpdate chunk-IV44QDQG.js:2
    scheduleUpdate chunk-IV44QDQG.js:2
    _$EP chunk-IV44QDQG.js:2
    requestUpdate chunk-IV44QDQG.js:2
...
rubrics-manager.js:140:143{noformat}


*Uncaught TypeError: this.querySelector(...) is null*

{noformat}Uncaught TypeError: this.querySelector(...) is null
    criterionEdited rubrics-manager.js:376
    handleEvent chunk-IV44QDQG.js:4
    saveEdit rubrics-manager.js:140
    promise callback*saveEdit rubrics-manager.js:140
    firstUpdated rubrics-manager.js:88
    trigger event-handler.js:292
    show tooltip.js:248
    v index.js:254
    r index.js:276
    a index.js:98
    y index.js:282
    setTimeout handler*y index.js:280
    _queueCallback base-component.js:49
    show tooltip.js:255
    _enter tooltip.js:536
    setTimeout handler*_setTimeout tooltip.js:557
    _enter tooltip.js:534
    toggle tooltip.js:163
    _setListeners tooltip.js:469
    i event-handler.js:98
    P event-handler.js:184
    on event-handler.js:217
    _setListeners tooltip.js:469
    Pe tooltip.js:123
    je popover.js:42
    firstUpdated rubrics-manager.js:88
    _$AE chunk-IV44QDQG.js:2
    performUpdate chunk-IV44QDQG.js:2
    scheduleUpdate chunk-IV44QDQG.js:2
    _$EP chunk-IV44QDQG.js:2
    requestUpdate chunk-IV44QDQG.js:2
    _$Ev chunk-IV44QDQG.js:2
...
rubrics-manager.js:376:4591
{noformat}
"
Rubrics: Console error related to reordering when loading the tool,Bug,Verified,Sakai,software,"When opening the Rubrics tool there is an console error right away:

{noformat}Uncaught (in promise) TypeError: t.querySelector(...) is null
    _setupKeyboard http://localhost:8080/webcomponents/bundles/rubrics-manager.js?version=f5902019:175
    updated http://localhost:8080/webcomponents/bundles/rubrics-manager.js?version=f5902019:175
    updated http://localhost:8080/webcomponents/bundles/rubrics-manager.js?version=f5902019:175
    _$AE http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:2
    performUpdate http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:2
    scheduleUpdate http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:2
    _$EP http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:2
    requestUpdate http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:2
    _$Ev http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:2
    A http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:2
    y http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:6
    k http://localhost:8080/webcomponents/bundles/rubrics-manager.js?version=f5902019:175
    u http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:4
    g http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:4
    _$AI http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:4
    p http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:4
    g http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:4
    _$AI http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:4
    T http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:4
    _$AI http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:4
    p http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:4
    g http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:4
    _$AI http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:4
    Nt http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:4
    update http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:6
    performUpdate http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:2
    scheduleUpdate http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:2
    _$EP http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:2
    requestUpdate http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:2
    _$Ev http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:2
    A http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:2
    y http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:6
    pt http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:6
    s http://localhost:8080/webcomponents/bundles/chunk-VHGEIGPF.js:1
    E http://localhost:8080/webcomponents/bundles/rubrics-manager.js?version=f5902019:178
    u http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:4
    g http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:4
    _$AI http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:4
    Nt http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:4
    update http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:6
    performUpdate http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:2
    scheduleUpdate http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:2
    _$EP http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:2
    requestUpdate http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:2
    _$Ev http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:2
    A http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:2
    y http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:6
    pt http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:6
    s http://localhost:8080/webcomponents/bundles/chunk-VHGEIGPF.js:1
    m http://localhost:8080/webcomponents/bundles/rubrics-manager.js?version=f5902019:424
    u http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:4
    g http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:4
    _$AI http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:4
    T http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:4
    _$AI http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:4
    p http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:4
    g http://localhost:8080/webcomponents/bundles/chunk-IV44QDQG.js:4
rubrics-manager.js:175:4238
{noformat}"
Plus: It is no longer possible to edit the site title,Bug,Resolved,Sakai,software,"Initially, (and you can see it on 23x), it was possible to go to Site Info > Edit Site Information and update the title of the course site. On 24x that option has disappeared.

Video: at 0:00:38 23x editing site title, 0:02:08 24x editing site tile"
"Set ""Custom Page Order"" on the !plussite template",Bug,Closed,Sakai,software,"This is simple.  Back in the day, when the !plussite template was created, it was site type=null.  Then in order to fix [https://sakaiproject.atlassian.net/browse/SAK-49633|https://sakaiproject.atlassian.net/browse/SAK-49633|smart-link] the site type was changed to â€œcourseâ€.  All of a sudden the fact that â€œCustom Page Orderâ€ was not set in the template, caused the pages to be ordered differently than in the template.  Not cool."
Tests & Quizzes: Safe exam Browser - Allow input of config key for uploaded SEB config files,Feature Request,Resolved,Sakai,software,"When uploading a custom SEB configuration from to for an assessment it will not be secure by default, as the config key is not automatically calculated. Currently to secure an exam using SEB one or more exam keys need to be provided in the published assessment settings. The issue is that the exam keys of a SEB client will be different on every SEB version and every platform. To facilitate setting up an secure assessment with SEB the config key can be used for validation - it will only depend on the SEB configuration, not on the platform and SEB version used. This config key is in use by default for â€œManual configurationâ€. For uploaded configuration mode, an additional text input should be added to allow adding the config key manually to the exam. Exam keys and config keys can be found within the SEB configuration tool."
NPE - Page with no tools in SiteHandler.java,Bug,Closed,Sakai,software,"While it is unclear how this happens, if the portal is attempting to display a page that has no tools, it generates an NPE at

{{org.sakaiproject.portal.charon.handlers.SiteHandler.lambda$doSite$0(SiteHandler.java:623)}}

We need to add a bit of guardian code to avoid the NPE in the rare situation where the site data in the DB is a tiny bit inconsistent.

The Page that lost its tool is â€œOverviewâ€ so we need to figure out what went wrong with that.  But this Jira merely adds the guardian to avoid NPE."
Assignments - Student's HTML file attachments inaccessible to the teacher,Bug,Verified,Sakai,software,"Assignments. With ""Sakai Grader"" the link to view the HTML attachments of the students is lost. In version 24 and 23, this file type does not appear in the attachments list. In version 22, it does appear in the submissions list, but access is lost when clicking on it. In version 20, the problem does not occur."
Tests & Quizzes > Total Scores > Export > Include Question Score Columns in Export,Feature Request,Open,Sakai,software,"Exporting quiz scores is a great feature but it would be of more value if there was an additional column showing the score of each individual question. Adding a question score column in the export function of Tests and Quizzes will allow instructors to see at a glance the score that was given for each question. This will be very beneficial for instructors that have many students in their class site and can serve as an excellent back up for data.



*Proposal:*

Add an additional column showing the score of each individual question. The name of the new column should be consistent with the other corresponding column headers, i.e. ""Part 1, Question 1, Score"".



!UReL5klJQIYBCI1GBoGrbt6-N0p9pXKdyeTvcb0pFeYyT5n-wvSMC938PyprkDCv6lxH-1pZLC2W4QdOxlCjRKD6qkBT43laePD9UBTC262KUKaOLWZvBuyiDrefb35bSi1hKu5aNAFYx3ORmjkXlZI|width=1600,height=202!"
Syllabus - Reorder without editing gives error,Bug,Open,Sakai,software,"If you have multiple syllabus items, then go to the Manage tab and use the arrow buttons to reorder them, when you click Update, it gives an error that You havenâ€™t modified any items or selected any items to be removed. It does appear to save the new order, but the error is misleading. "
Tests & Quizzes: Safe exam Browser - Timer starts after too early,Bug,Resolved,Sakai,software,"Given an assessment configured with SEB and a timer (entire assessment), after launching the exam in SEB and logging in the assessment timer starts right away. It should only start after clicking â€œBegin Assessmentâ€. "
T&Q: Performance issues loading submissions after S2U-6,Bug,Resolved,Sakai,software,[https://sakaiproject.atlassian.net/browse/S2U-6|https://sakaiproject.atlassian.net/browse/S2U-6|smart-link] introduces a nice feature but the calculations makes the submissions load very slow in exams with huge number of questions. The objective of this Jira is moving the logic to async requests and caching the results because they donâ€™t change.
Make the process of using attachments from another site smoother,Feature Request,Open,Sakai,software,"When using the CK Editor and the elfinder to insert images from a different course site, the process is quite smooth. When adding an attachment from another siteâ€™s resources, the process is rather painful. After every step, the modal refreshes and throws the user back into the first tab (upload), and the user has to keep selecting â€œSelect from resourcesâ€.

I was testing T&Q, but this would affect every tool that allows attachments with this modal.

22x works so much better, keeping the user on the same tab."
LDAP: Very verbose logs when users are deleted or hidden from LDAP.,Bug,Closed,Sakai,software,"When administrators delete or invalidate LDAP entries, the Sakai log is very very verbose.

!image-20240116-155503.png|width=1893,height=1004!"
Tests & Quizzes: Safe exam Browser - Access denied on repeated attempts (with special DB) ,Bug,Resolved,Sakai,software,"When an exam is configured with multiple attempts the SEB validation can fail under certain database configurations. That is, if the results of the {{SAM_SEBVALIDATION_T}} table are not sorted by id (order of creation). This should not be the case with default configuration of mysql, mariadb and not necessarily with oracle, but there was a case with an oracle database where this happens."
Support the Canvas module_meta.xml new_tab feature in Sakai's IMS CC Import,Bug,Closed,Sakai,software,"Canvas has a number of IMS Common Cartridge extensions that allows them to embed a high-fidelity export in the cartridge.  LMS Systems that are not Canvas ignore these on import and export.   Over time, I would like to implement these on Sakaiâ€™s CC import and export over time.

For this JIRA, I want to implement the {{new_tab}} feature that will be imported into Lessons as â€œopen in new windowâ€.  In order to test this, I have added the extra file {{course_settings/module_meta.xml}} (attached) and properly marked it and linked it in {{imsmanifest.xml}} following the Canvas convention."
"Role swap: After the first attempt at role swap, there is a browser console error: _panel_Main#roleSwitch:1  Uncaught (in promise) DOMException: Registration failed - push service error Promise.then (async)",Bug,Resolved,Sakai,software,"I was attempting to verify [https://sakaiproject.atlassian.net/browse/SAK-49633|https://sakaiproject.atlassian.net/browse/SAK-49633|smart-link] when I saw the following issues on any Sakai site (nothing to do with Plus sites).

The first time an instructor selects view as student, they are kicked out of the site into the user Home > Overview page.

Any time after the first time, when the instructor selects view as student, they remain in the site, but there is a console error:

{noformat}_panel_Main#roleSwitch:1  Uncaught (in promise) DOMException: Registration failed - push service error
Promise.then (async)
(anonymous) @ sakai-message-broker.js?version=0a4f79b9:67
Promise.then (async)
(anonymous) @ sakai-message-broker.js?version=0a4f79b9:62
Promise.then (async)
portal.notifications.subscribeIfPermitted @ sakai-message-broker.js?version=0a4f79b9:55
(anonymous) @ sakai-message-broker.js?version=0a4f79b9:31
Promise.then (async)
(anonymous) @ sakai-message-broker.js?version=0a4f79b9:31
Promise.then (async)
(anonymous) @ sakai-message-broker.js?version=0a4f79b9:19
{noformat}"
Lessons unable to send item to gradebook,Bug,Closed,Sakai,software,"I was trying to test [https://sakaiproject.atlassian.net/browse/SAK-49550|https://sakaiproject.atlassian.net/browse/SAK-49550|smart-link] on 22x.

It failed with my first site, so I created a second site, added the rubrics tool, but did not add a rubric, only created the student content pages to see if it would allow me to send them to the gradebook. I received the same error. I then tried a third site that didnâ€™t have the rubrics tool even added and received the error also.

After adding student content pages and setting to send to the gradebook, the following error displayed on the page:

{quote}{color:#bf2600}This item couldn't be marked for grading. The most likely issue is that no Gradebook tool has been added to this site yet.{color}{quote}

Checking the server logs:

{noformat}14-Jan-2024 20:15:28.287 INFO [http-nio-20022-exec-46] o.s.l.t.p.ShowPageProducer.getUserDisplayName Owner #: null does not have an associated user.

14-Jan-2024 20:15:28.301 WARN [http-nio-20022-exec-46] PonderUtilCore.processComponent Submitting name for csrf28 not set by previous fixup

14-Jan-2024 20:15:33.421 INFO [http-nio-20022-exec-50] o.s.l.t.p.ShowPageProducer.getUserDisplayName Owner #: null does not have an associated user.

14-Jan-2024 20:15:33.437 WARN [http-nio-20022-exec-50] PonderUtilCore.processComponent Submitting name for csrf28 not set by previous fixup

14-Jan-2024 20:15:44.462 INFO [http-nio-20022-exec-38] o.s.l.t.b.SimplePageBean.updateStudent rubricRows is not null

14-Jan-2024 20:15:44.462 INFO [http-nio-20022-exec-38] o.s.l.s.GradebookIfc.addExternalAssessment failed add java.lang.RuntimeException: External service description, externalId, and title must not be empty{noformat}"
Rubrics: Uncaught (in promise) TypeError: Cannot read properties of null (reading 'updateComplete'),Bug,Closed,Sakai,software,"I did not see this error on trunk or 23x. When creating a rubric on 22x, the following console error displays as soon as you click to Add Rubric. There were no server errors.

{noformat}sakai-rubrics-list.js?version=24130d5c:137  Uncaught (in promise) TypeError: Cannot read properties of null (reading 'updateComplete')
    at sakai-rubrics-list.js?version=24130d5c:137:105
    at get createRubricUpdateComplete [as createRubricUpdateComplete] (sakai-rubrics-list.js?version=24130d5c:138:7)
    at sakai-rubrics-list.js?version=24130d5c:94:18
(anonymous) @ sakai-rubrics-list.js?version=24130d5c:137
get createRubricUpdateComplete @ sakai-rubrics-list.js?version=24130d5c:138
(anonymous) @ sakai-rubrics-list.js?version=24130d5c:94{noformat}"
"Announcements: If any Announcements are set to Highlighted, then editing an existing Announcement will pre-set the ""Highlight"" option to be enabled",Bug,Resolved,Sakai,software,"If any Announcements are set to Highlighted, then editing an existing (non-highlighted) Announcement will pre-set the ""Highlight"" option to be enabled."
Dashboard: announcements shown in reverse order,Bug,Open,Sakai,software,"The order in which announcements are displayed in the Dashboard is opposite to that shown in the Announcements tool and also in Overview.

Dashboard

!image-20240112-192939.png|width=523,height=435!

Announcements tool

!image-20240112-193018.png|width=460,height=578!

Overview

!image-20240112-193047.png|width=470,height=418!"
"Viewing future assignments as TA fails with ""Could not get the Entity's authz groups with ref = /assignment/...""",Bug,Open,Sakai,software,"Iâ€™ve only been able to reproduce this on 22.x. 

I could not reproduce it on 23.x+

{noformat}11-Jan-2024 20:05:28.698 WARN [http-nio-20022-exec-40] o.s.a.i.AssignmentServiceImpl.getEntityAuthzGroups Could not get the Entity's authz groups with ref = /assignment/a/ec659311-5d34-410a-acc0-8aedd3871dd4/90b776ef-a950-470b-a0dd-ce1d54e3bc36
org.sakaiproject.exception.PermissionException: user=11681c3d-7fa3-4b33-a864-2b3ccdb528b3 lock=asn.read resource=90b776ef-a950-470b-a0dd-ce1d54e3bc36
	at org.sakaiproject.assignment.impl.AssignmentServiceImpl.checkAssignmentAccessibleForUser(AssignmentServiceImpl.java:3083) ~[?:?]
	at org.sakaiproject.assignment.impl.AssignmentServiceImpl.getAssignment(AssignmentServiceImpl.java:1600) ~[?:?]
	at org.sakaiproject.assignment.impl.AssignmentServiceImpl.getAssignment(AssignmentServiceImpl.java:1585) ~[?:?]
	at org.sakaiproject.assignment.impl.AssignmentServiceImpl.getEntityAuthzGroups(AssignmentServiceImpl.java:503) ~[?:?]
	at org.sakaiproject.entity.impl.ReferenceComponent.getAuthzGroups(ReferenceComponent.java:269) ~[?:?]
	at org.sakaiproject.authz.impl.SakaiSecurity.checkAuthzGroups(SakaiSecurity.java:751) ~[?:?]
	at org.sakaiproject.authz.impl.SakaiSecurity.unlock(SakaiSecurity.java:729) ~[?:?]
	at org.sakaiproject.authz.impl.SakaiSecurity.unlock(SakaiSecurity.java:696) ~[?:?]
	at org.sakaiproject.authz.impl.SakaiSecurity.unlock(SakaiSecurity.java:688) ~[?:?]
	at org.sakaiproject.authz.impl.SakaiSecurity.unlock(SakaiSecurity.java:674) ~[?:?]
	at org.sakaiproject.assignment.impl.AssignmentServiceImpl.permissionCheck(AssignmentServiceImpl.java:3121) ~[?:?]
	at org.sakaiproject.assignment.impl.AssignmentServiceImpl.allowGradeSubmission(AssignmentServiceImpl.java:818) ~[?:?]
	at jdk.internal.reflect.GeneratedMethodAccessor1560.invoke(Unknown Source) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) ~[spring-aop-5.3.18.jar:5.3.18]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) ~[spring-aop-5.3.18.jar:5.3.18]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.18.jar:5.3.18]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.18.jar:5.3.18]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.18.jar:5.3.18]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.18.jar:5.3.18]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.18.jar:5.3.18]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.18.jar:5.3.18]
	at com.sun.proxy.$Proxy272.allowGradeSubmission(Unknown Source) ~[?:?]
	at org.sakaiproject.assignment.tool.AssignmentAction.lambda$build_list_assignments_context$15(AssignmentAction.java:2846) ~[classes/:?]
	at java.util.stream.MatchOps$1MatchSink.accept(MatchOps.java:90) [?:?]
	at java.util.ArrayList$SubList$2.tryAdvance(ArrayList.java:1488) [?:?]
	at java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:127) [?:?]
	at java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:502) [?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:488) [?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474) [?:?]
	at java.util.stream.MatchOps$MatchOp.evaluateSequential(MatchOps.java:230) [?:?]
	at java.util.stream.MatchOps$MatchOp.evaluateSequential(MatchOps.java:196) [?:?]
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) [?:?]
	at java.util.stream.ReferencePipeline.anyMatch(ReferencePipeline.java:528) [?:?]
	at org.sakaiproject.assignment.tool.AssignmentAction.build_list_assignments_context(AssignmentAction.java:2846) [classes/:?]
	at org.sakaiproject.assignment.tool.AssignmentAction.buildMainPanelContext(AssignmentAction.java:1379) [classes/:?]
	at jdk.internal.reflect.GeneratedMethodAccessor3105.invoke(Unknown Source) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]
	at org.sakaiproject.cheftool.VelocityPortletPaneledAction.toolModeDispatch(VelocityPortletPaneledAction.java:409) [sakai-velocity-tool-22-SNAPSHOT.jar:22-SNAPSHOT]
	at org.sakaiproject.cheftool.ToolServlet.doGet(ToolServlet.java:234) [sakai-velocity-tool-22-SNAPSHOT.jar:22-SNAPSHOT]
	at org.sakaiproject.cheftool.VelocityPortletPaneledAction.doGet(VelocityPortletPaneledAction.java:1098) [sakai-velocity-tool-22-SNAPSHOT.jar:22-SNAPSHOT]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529) [servlet-api.jar:4.0.FR]
	at org.sakaiproject.vm.ComponentServlet.service(ComponentServlet.java:56) [sakai-velocity-tool-22-SNAPSHOT.jar:22-SNAPSHOT]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) [servlet-api.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]
	at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:447) [sakai-kernel-api-22-SNAPSHOT.jar:22-SNAPSHOT]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294) [catalina.jar:9.0.76]
	at org.sakaiproject.tool.impl.ActiveToolComponent$MyActiveTool.forward(ActiveToolComponent.java:508) [sakai-kernel-impl-22-SNAPSHOT.jar:?]
	at org.sakaiproject.portal.charon.SkinnableCharonPortal.forwardTool(SkinnableCharonPortal.java:1502) [sakai-portal-impl-22-SNAPSHOT.jar:22-SNAPSHOT]
	at org.sakaiproject.portal.charon.handlers.SiteHandler.doToolBuffer(SiteHandler.java:1227) [sakai-portal-impl-22-SNAPSHOT.jar:22-SNAPSHOT]
	at org.sakaiproject.portal.charon.handlers.SiteHandler.bufferContent(SiteHandler.java:1061) [sakai-portal-impl-22-SNAPSHOT.jar:22-SNAPSHOT]
	at org.sakaiproject.portal.charon.handlers.SiteHandler.doSite(SiteHandler.java:503) [sakai-portal-impl-22-SNAPSHOT.jar:22-SNAPSHOT]
	at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:279) [sakai-portal-impl-22-SNAPSHOT.jar:22-SNAPSHOT]
	at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:167) [sakai-portal-impl-22-SNAPSHOT.jar:22-SNAPSHOT]
	at org.sakaiproject.portal.charon.SkinnableCharonPortal.doGet(SkinnableCharonPortal.java:861) [sakai-portal-impl-22-SNAPSHOT.jar:22-SNAPSHOT]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529) [servlet-api.jar:4.0.FR]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) [servlet-api.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]
	at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:496) [sakai-kernel-api-22-SNAPSHOT.jar:22-SNAPSHOT]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) [tomcat-websocket.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) [catalina.jar:9.0.76]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) [catalina.jar:9.0.76]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) [catalina.jar:9.0.76]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) [catalina.jar:9.0.76]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) [catalina.jar:9.0.76]
	at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:768) [catalina.jar:9.0.76]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) [catalina.jar:9.0.76]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) [catalina.jar:9.0.76]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) [tomcat-coyote.jar:9.0.76]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) [tomcat-coyote.jar:9.0.76]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) [tomcat-coyote.jar:9.0.76]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) [tomcat-coyote.jar:9.0.76]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) [tomcat-coyote.jar:9.0.76]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-util.jar:9.0.76]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-util.jar:9.0.76]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-util.jar:9.0.76]
	at java.lang.Thread.run(Thread.java:829) [?:?]{noformat}"
Rubrics: Unlock if Tests & Quizzes submission is deleted,Bug,Open,Sakai,software,"Will affect more versions as [https://sakaiproject.atlassian.net/browse/SAK-47669|https://sakaiproject.atlassian.net/browse/SAK-47669|smart-link] is merged.

The changes in [https://sakaiproject.atlassian.net/browse/SAK-47669|https://sakaiproject.atlassian.net/browse/SAK-47669|smart-link] cause rubrics to only be locked when there is an evaluation, not just an association with a gradebook item, test question, or assignment. This opens up one point where the rubric should be unlocked and currently is not - in Tests & Quizzes, when the submission(s) graded using the rubric are removed. "
Sakai Plus Sites Do Not Have the Role Swap Option Available.,Bug,Closed,Sakai,software,The role swap feature is missing on a site created using SakaiPlus.
sakai-tasks-create-task.js console errors,Bug,Open,Sakai,software,"With a fresh login, (cleared cache), there are console errors for tasks:

Uncaught (in promise) TypeError: this._getNotesEditor() is null
sakai-tasks-create-task.js:110:41"
"""Exit Student View"" not working on other tabs except ""Overview"" tab",Bug,Verified,Sakai,software,"I can enter into â€œStudent Viewâ€ from any tab. However, I cannot â€œExit Student Viewâ€ from any tab except â€œOverviewâ€ tab. So, to exit student view - I have to go back to Overview tab."
Hidden site tools are unnavigable as they don't appear in nav,Bug,Closed,Sakai,software,When a user hides a site via preferences and then access the site via â€œWorksite Setupâ€ the site is not added to the portals nav bar thus making it unable to navigate tools.
Attendance > Take Attendance Now > Append Date to Default Attendance Item Title,Feature Request,Open,Sakai,software,"In the Attendance tool, instructors can take attendance on-the-fly by clicking the â€œTake Attendance Nowâ€ button. Once instructors have finished taking attendance, an attendance item with the default name of â€œAttendanceâ€ will populate in a table within the â€œAttendanceâ€ tab.

While this feature is useful, the default name of the Attendance item could benefit from some revision.

Assume an instructor regularly takes attendance on-the-fly by clicking â€œTake Attendance Nowâ€ at the beginning of every class. As the instructor accumulates attendance items, the table populates with more and more attendance items all with the same default title/name (i.e. â€œAttendanceâ€). See screenshot #1 below.

!qkf9I19k1Zp0YDww9P7_Fx_2JvAYuqctKPM8q3pFkpqKS3ZyFH_UGAGRBMlJdYc03VkExI9aVtAUqQ2cyDKkjXpVsx2XtUtehV4kwK4XrKP51IaJ4ZzKKbwcr423is06adp69YAj1q31fAJtHFo9sqU|width=1194,height=666!

While itâ€™s true that the table does display a â€œdateâ€ column to help distinguish between all these attendance items, itâ€™s not natural or intuitive to distinguish items in the first column by way of data in another column. This also presents an accessibility challenge, given that each item in the leading column has the exact same value.

To help instructors who take attendance in this way, I propose that all attendance items append the date to the default name.

|*Legacy Naming Convention*|*Proposed Naming Convention*|
|Attendance|Attendance - [Date in mm/dd/yyyy format]|

For example, if the date is September 1, 2023, and an instructor selects â€œTake Attendance Now,â€ then the default name of the Attendance Item will be â€œAttendance - 09/01/2023.â€

See a mock-up below.

!tunkdvjXxVtMlHHXOai1Xkp4rKk2EUV7FidxtqI_y2nE9GdTROZVISW2RT54kbLlRW05zVJfWHtVFKNlcpS3cwvDbDhM_SrQ34PSUgCPL_bhJixasfZ0-YNSu4kHAjw6Oj1i18-VJ1RTAMSVBeg7WNw|width=604,height=609!"
Update frontend-maven-plugin for improved resiliency on downloads,Bug,Closed,Sakai,software,"frontend-maven-plugin has good updates especially:



{noformat}### 1.14.2
* Prevent corrupt downloaded files by waiting for the download to complete before writing the file to disk.
{noformat}"
Lessons: Deleting comments tool with posted comments creates orphans in database,Bug,Resolved,Sakai,software,"Steps to reproduce:

* add comments tool in a lessons page
* post comments
* delete that comments tool
* entry in table lessons_builder_items is deleted, but corresponding entries in table lessons_builder_comments remain and are ophaned."
Update Apache Tomcat  9.0.85,Bug,Closed,Sakai,software,"The Apache Tomcat team announces the immediate availability of Apache
Tomcat 9.0.85.

Apache Tomcat 9 is an open source software implementation of the Java
Servlet, JavaServer Pages, Java Unified Expression Language, Java
WebSocket and JASPIC technologies.

Apache Tomcat 9.0.85 is a bugfix and feature release. The notable
changes compared to 9.0.84 include:

* Fix virtual thread support for the NIO2 connector

* Correct a regression in the fix for 67675 that broke TLS key file

Â  Â parsing for PKCS#8 format keys that do not specify an explicit
Â  Â pseudo-random function and rely on the default. This typically affects
Â  Â keys generated by OpenSSL 1.0.2.

* Allow multiple operations with the same name on introspected mbeans,

Â  Â fixing a regression caused by the introduction of a second
Â  Â addSslHostConfig() method.

Along with lots of other bug fixes and improvements.

Please refer to the change log for the complete list of changes:
[https://tomcat.apache.org/tomcat-9.0-doc/changelog.html|https://tomcat.apache.org/tomcat-9.0-doc/changelog.html|smart-link] "
Attendance > Add > Create Repeating Pattern,Feature Request,Awaiting Review,Sakai,software,"In the Attendance tool, instructors have the option of taking attendance on the fly or to schedule their classes (via the â€œAddâ€ tab).Â 

This second option is particularly valuable for those instructors who wish to do some planning ahead of time. While instructors have the option to create and add another as they go, this process is manual and time consuming.

Instead, it would be helpful if instructors could create a repeating pattern of occurrence for the attendance with a start and stop date.Â 

Fortunately, this exact same functionality already exists in the Calendar tool (Go to Calendar, click â€œAdd Event,â€ and scroll down to find the â€œFrequencyâ€ function). The exact same functionality could be added here (see mockup below).

!5ROmeKbt2jZ5Ax5S2EEtxaAVybsHn_OcA6qW7hSpssy15s9mrlHGpZecJfmOzfbuj3pSV4ySOSYBhloWql9OhDy1u8baOZFxdTYdV3w91V5ogAPljt1pTZyM-Duv4cDSiyr4PJVijowJ0mgGrqHEwVM|width=419,height=448!

Just as in the Calendar Tool, once the user clicks â€œFrequency,â€ the user would be directed to another page where that frequency can be specified.

!atSTzsOvUqQoueN-kTUJx5iAa_7rsn01pH4-JM4DzQ07-WjkVB0vsd9pI47ug6B32DDc7ErohlAFCY_w7itO05Q5VAwGWqdX7wFXyfFKHGuECPVOixlJyi4DqlsuIn6O_MgMpUHIHZL0slcrx579zVM|width=484,height=384!

Once the user has finished configuring the frequency, the user clicks save, finalizes the creation, and the attendance items will all pre-populate on the â€œAttendanceâ€ tab.

NOTE: I suggest that the attendance item names follow a formula, such that the distinction between them is clear. For example, â€œAttendance 1, Attendance 2, Attendance 3, Attendance â€¦ nâ€ is one option. "
Unable to activate the â€œCreate New Siteâ€ button with the keyboard,Bug,Resolved,Sakai,software,"While logged onto trunk/master (Maria DB branch) as Instructor, and selecting the â€œView All Sitesâ€ option, I am unable to use my keyboard/screen reader to select/activate the â€œCreate New Siteâ€ button, thus, there is no way to recreate the Course Site that I use for testing.

Â 

I first noticed this issue last week when trying to recreate my Course Site, however, when I logged back onto trunk/master later that day, the problem seemed to have resolved itself. Then I noticed it again yesterday, and the weird behavior was persisting this morning so I decided to report the issue.

Â 

Not sure what is causing it, but my screen reader is announcing a bunch of â€œclose menuâ€ options that arenâ€™t usually there?? And if I press enter on (what I presume is the button??â€”see demo video)) the page refreshes, and when I navigate down to the Main Content area, its not the Site creation modalâ€”its still the userâ€™s default home page??

Â 

Could this possibly have anything to do with the work on the new collapse favorite/pinned Sites feature??"
Add ability to release items based on gradebook score in Lessons,Feature Request,Open,Sakai,software,"Currently, it is possible to selectively release content in Lesson based on prerequisites. You specify an item as a requirement, and then you can release the next item based on completion of the prior item as a prerequisite. This is only possible in a linear manner.

The S2U enhancements have expanded on this concept to make it possible to select multiple conditions and/or non-linear conditions as requirements to release content. [https://sakaiproject.atlassian.net/browse/S2U-35|https://sakaiproject.atlassian.net/browse/S2U-35|smart-link] However, this feature still only lets you define the grade as a requirement by checking the tool grade for Lessons inline questions, Assignments, or Tests & Quizzes. 

I would like to add the option to choose Gradebook Item scores and/or Gradebook Category scores as the condition for release of content in Lessons. There are often items in the Gradebook that are not tied to a specific assignment or quiz in Sakai (such as LTI items for example) but it would be extremely useful to use those gradebook scores as release criteria for Lessons content."
Test & Quizzes: Sort question text column for question pool items numerically,Bug,Verified,Sakai,software,"The question text column for question pools is sorted by text, which does not respect the numerical order of the questions. Instead the question text column should be sorted numerically based on the question sequence."
Resolve Dark Mode Display Issue in Gateway Iframes,Bug,Closed,Sakai,software,Gateway Iframe pages doesnâ€™t work with dark mode
Syllabus: Unable to remove attached files,Bug,Closed,Sakai,software,"If you have a syllabus item with an attached file, then try to remove the attachment, it canâ€™t be removed. 

There is a console error: 

read:1 Access to XMLHttpRequest at '[https://cke4.ckeditor.com/ckeditor4-secure-version/versions.json?v=4.22.1 (Standard)|https://cke4.ckeditor.com/ckeditor4-secure-version/versions.json?v=4.22.1%20(Standard)]' from origin '[https://trunk-mysql.nightly.sakaiproject.org|https://trunk-mysql.nightly.sakaiproject.org]' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.

And two entries in the server log: 

{noformat}08-Jan-2024 15:04:48.942 INFO [http-nio-20013-exec-42] o.s.c.i.DbContentService.removeResource Removing resource (/attachment/745a8c78-6734-4da2-ae34-e894db3fa89d/Syllabus/1b993c65-62c3-48d2-bfc3-0dc1f5c3c911/178778640609.JPEG) content: /var/sakai-assets/trunk-mysql/assets file:/2024/005/15/f9cb74a7-dd18-4252-8616-68dddad265a5{noformat}

{noformat}08-Jan-2024 15:04:48.945 INFO [http-nio-20013-exec-42] o.s.c.i.DbContentService.removeResource Retaining file blob for resource_id=/attachment/745a8c78-6734-4da2-ae34-e894db3fa89d/Syllabus/1b993c65-62c3-48d2-bfc3-0dc1f5c3c911/178778640609.JPEG because 2 reference(s){noformat}"
Update Joda-time 2.12.6,Bug,Closed,Sakai,software,"h3. Release 2.12.6 â€“ 2024-01-06

||Type||Changes||By||
| |Enhance DateTimeZone.forID() to better match java.time. Fixes #733, #717.|[jodastephen|https://www.joda.org/joda-time/team-list.html#jodastephen]|
| |Better error message in DateTimeFormat. Fixes #731.|[cyrilou242|https://www.joda.org/joda-time/team-list.html#cyrilou242]|
| |DateTimeZone data updated to version 2023dgtz.| |"
LTI Advantage - Improve support for lti_storage_target,Bug,Closed,Sakai,software,"This is from Brian Lukoff of Perusal:

We recently implemented [the new LTI 1.3 spec for working around the new third-party cookie block|https://www.imsglobal.org/spec/lti-cs-oidc/v0p1#platform-continue-with-oidc-auth-response-back-to-tool]Â and ran into an issue with Sakai. Sakai sendsÂ {{lti_storage_target}}Â in the initial OIDC request and weâ€™re able to send anÂ {{lti.put_data}}Â message with the state/nonce info, but after redirecting back to Perusall where we have to useÂ {{lti.get_data}}Â to retrieve the state/nonce to check it, we no longer have information about what frame to send theÂ {{postMessage}}Â call to.Â 

Weâ€™ve found that Canvas/D2L sendÂ {{lti_storage_target}}Â on both the initial OIDC request and the later POST to the redirect URL, and Blackboard only sendsÂ {{lti_storage_target}}Â on the initial OIDC request but their response toÂ {{lti.capabilities}}Â includes the frame information for theÂ {{lti.get_data}}Â entry. The issue weâ€™re running into is that without either of these, the client-side page rendered by the redirect URL doesnâ€™t know what frame to send the message to. Weâ€™re temporarily working around this by defaulting toÂ {{_parent}}Â which is what Sakai seems to be using, but Iâ€™m wondering if Sakai would be willing to send this frame target in one of the above two ways? Or is there another way that Sakai intends for tools to access this info?

More From Brian:

Blackboard uses theÂ {{frame}}Â parameter to indicate the target frame but does not add it as a GET parameter to the {{redirect_uri}}, and when I asked them about it their reason was exactly the same as yours â€” that they felt that the {{redirect_uri}} should not be changed in any way. Totally makes sense for it to be an additional POST parameter to preserve this rule.

I found theÂ {{frame}}Â parameter in the spec here:Â [https://www.imsglobal.org/spec/lti-cs-pm/v0p1#platform-responds-with-a-target-frame-name|https://www.imsglobal.org/spec/lti-cs-pm/v0p1#platform-responds-with-a-target-frame-name|smart-link] .Â 

From Chuck:  I will add this to {{lti.capabilies}} data, and add it as a POST value when the JWT is posted.   Based on our conversations, and following Blackboard's lead, I don't want to ""hack"" the returned {{target_uri}} and add the parameter - hence sending it as post (like Blackboard).

References: 

[http://www.imsglobal.org/spec/lti-cs-oidc/v0p1|http://www.imsglobal.org/spec/lti-cs-oidc/v0p1|smart-link]  

[https://www.imsglobal.org/spec/lti-cs-pm/v0p1#platform-responds-with-a-target-frame-name|https://www.imsglobal.org/spec/lti-cs-pm/v0p1#platform-responds-with-a-target-frame-name|smart-link] "
Dashboard: Highlighted announcements are not highlighted in the Announcements widget,Bug,Verified,Sakai,software,"Highlighted announcements are not treated in a special way in the Dashboard widget. 

*Dashboard view*

!image-20240106-202132.png|width=83.33333333333334%!



*Overview synoptic view*

!image-20240106-202015.png|width=91.66666666666667%!"
Announcements: Dark mode contrast is unacceptable when selecting roles who can view an Announcement,Bug,Open,Sakai,software,"in dark mode you cannot make out the roles in the drop down list as itâ€™s black text on a dark grey background

!image-20240106-200856.png|width=91.66666666666667%!"
Lessons: Title of a Question Item incorrectly displayed,Bug,Closed,Sakai,software,"Starting from Sakai version 23, the titles of Question Items in Lessons tool are displayed enclosed within a <p> tag."
Lessons: Files inserted using Embed Content on the Page not available,Bug,Open,Sakai,software,"When attempting to add Embed Content on the Page to a Lessons, the files are not available."
conversations permissions in Admin Realms don't match the functions in the sakai_realm_function table,Bug,Open,Sakai,software,"In our Sakai 22.3 instance:

Admins â†’ Realms (for all sites sites) is missing the permission: *conversations.topic.create*

sakai_realm_function table is missing:  *conversations.discussion.create*,  *conversations.statistics.view*"
Plus: Gradebook improve logging messages for Plus Events,Bug,Resolved,Sakai,software,"This was originally titled â€œPlus: 2 grade events every time the instructor gradesâ€ - That is now captured in a new Jira [https://sakaiproject.atlassian.net/browse/SAK-50151|https://sakaiproject.atlassian.net/browse/SAK-50151|smart-link] to actally fix the eventing code.  But this Jira improved logging and has bee completed and committed to master.

If the instructor adds a GB item in the Plus site and grades a student, there are two grade events in the Plus log and also in the server logs.

This is not a Plus bug per se at this time - but because Gradebook sends events consistently, to make sure not to miss a change Plus errs on the side of sending two to avoid situations where we send zero.  [~accountid:557058:5489bdf1-0dcd-4429-8030-f007c405dfd0] has done a quick evaluation of what it would take to make sure that Gradebook does events consistently and once that is done, we can change plus to only listen to one event. 

I made some logging changes that I would like to merge under this JIRA.  "
T&Q: Numeric response question regressions,Bug,Closed,Sakai,software,"The fix for SAK-49381 fixes some things but introduces the following regressions:

# Clicking the link â€˜Click the link to see additional instructionsâ€™ no longer displays the expected popup. For the expected popup, refer to the screenshot, AcceptedCharactersPopup.png.
# The following number types can no longer be entered by a student:
## Negative numbers like -1
## Complex numbers like {9+10i}
## Numbers w/ scientific notation like 6.32e10 or 6.32E10.

As of this writing, only Sakai 24.x is affected by this bug. However, 23.x will be affected by this bug when SAK-49381 is applied there."
"Button Manage Overview in ""Home""",Improvement,Closed,Sakai,software,"It would be interesting to also add the button in ""Home"""
Library: templates.js console errors,Bug,Verified,Sakai,software,Iâ€™m not seeing this currently on 23x. Every page that loaded had a templates.js console error - 404 not found
Announcements: Allow posting an announcement to multiple sites,Feature Request,Open,Sakai,software,"Faculty often have to post the same announcement to multiple course sites (change in office hours, reminders). Currently, faculty have to either merge announcements for sites - which loses the ability to post announcements to each individual site, or copy & paste the text in to a new announcement in each site. There is also some discussion about removing the Merge option.

It may be convenient to have an option within the Announcements tool to post the same announcement to another site, similar to what Signup has. The instructor could then select which other sites should receive the same announcements and have it be posted to the selected site(s) with the same settings. 

Option 1, include groups - The â€œOther Sitesâ€ selection in Signup has the sites and any groups listed. If  â€œOnly *members of this site* can see this announcementâ€, â€œThis announcement is *publicly viewable*â€ or â€œDisplay this announcement *to selected roles* onlyâ€ is selected, only the other sites are listed. If â€œDisplay this announcement *to selected groups* onlyâ€, the sites include their groups/sections listed below the site name.

Option 2, donâ€™t allow cross-posting if released to groups - We could have the â€œother sitesâ€ option appear only if â€œOnly *members of this site* can see this announcementâ€, â€œThis announcement is *publicly viewable*â€ or â€œDisplay this announcement *to selected roles* onlyâ€, not if â€œDisplay this announcement *to selected groups* onlyâ€ is selected under Access. This way, only the sites will need to be listed, not the various groups. If Role is selected, it would be released to the same role in any other site(s) selected."
Portal: Persistent Loading Issue on All Sites,Bug,Closed,Sakai,software,"All sites fail to load.

It seems this issue is specific to Chromium browsers. 

I just checked it's working fine in Firefox and edge."
signup does not use portal.cdn.version,Bug,Closed,Sakai,software,"CSS and JS files loaded by tool templates do not use the portal.cdn.version suffix like the portal and theme files do. This results in resource version problems for end users as tool resources are left in their 10.x state. We have seen several universities having to tell users to clear their caches for upgrades to 11.x to work.

I (the issue reporter) have started work, proposing the <sakai:script> and <sakai:stylesheet> taglibs to append version query automatically. But this is not enough as some tools rely on other templating engines.

Any insights for a more general solution would be greatly appreciated.
In the long term, it would be beneficial if all tool css-resources got collated by the portal /library scss build, minified and versioned. There should be similar strategies available for js resources, but I am not aware of any being in use in sakai at the moment.

The list of affected components is not complete. Will add more as I find them.

*LessonBuilder*, *Rwiki*, *Evaluation*, and *QnA* all use html/rsf templates. How do we best make these include a version query?

Steps to reproduce (but not a valid test strategy as it has a lot of manual steps):
1. Clear browser cache (as you might have 11.x resources from testing)
2. Log in to a Sakai 10.x install and use any affected tool
3. Upgrade to 11.x
4. Log in to 11.x
5. Use the same affected tool and verify the resources are loaded from server and not from cache

Affected modules (needs various degrees of code and template changes): assignment, chat, clog, config, evaluation, feedback, help, jsf, lessonbuilder, msgcntr, podcasts, polls, portal, profile2, qna, roster2, rsf, rwiki, samigo, search, sections, signup, sitestats, syllabus, yaft"
Dashboard: Left and right move buttons have unpredictable results.,Bug,Open,Sakai,software,"In a similar way to [https://sakaiproject.atlassian.net/browse/SAK-49603|https://sakaiproject.atlassian.net/browse/SAK-49603|smart-link] the > & < move options dont always do the right thing. Sometimes clicking the < in the leftmost widget causes it to disappear. Sometimes you get two copies of the same widget. Sometimes the button does nothing.

Itâ€™s not entirely clear what should be happening but what does happen is often wrong.

See video:

!Screen Recording 2023-12-30 at 21.09.54.mov|width=91.66666666666667%!"
Dashboard: Announcement not filtered on role,Bug,Verified,Sakai,software,"Unlike Overview and Lessons, role-specific announcements can be seen by everyone. The filtering is just ignored. Itâ€™s the same for Student, Instructor and Teaching Assistant.

As far as I can tell, role-based announcements is new to sakai 24.

!image-20231229-194403.png|width=100%!

Lessons

!image-20231229-194440.png|width=100%!

Overview

!image-20231229-194525.png|width=100%!"
"Dashboard: Clicking ""Move Up"" on a widget causes it to vanish or behave unpredictably",Bug,Open,Sakai,software,"Clicking ""Move Up"" on a widget causes it to vanish or get replaced with another widget or move randomly. See attached movie. This affects 22, 23 and 24.

There is not a problem with the  MOVE DOWN arrows.

!Screen Recording 2023-12-29 at 19.05.33.mov|width=100%!"
"Long URLs generated by ""Link"" button have no protocol / Shortened URLs dont work",Bug,Verified,Sakai,software,all shortened URLs fail to load the referenced page. Log messages abound (see below).
"Dashboard: ""Edit Task"" loses previously entered Text",Bug,Resolved,Sakai,software,"if you edit a Task which already has had data entered into the â€œTextâ€ field, then  that text is absent from the modal â€˜editâ€™ dialogue and when the save button is clicked, it is deleted.

Thereâ€™s a similar but different issue with Sakai 24 which has already been fixed (SAK-49587),this doesn't affect Sakai 22.

!image-20231229-175852.png|width=100%!"
Test and quizzes: Redirection goes back to the main page.,Bug,Resolved,Sakai,software,Â Attaching a file to the questionâ€™s feedback erroneously redirects to the assignment page - instead of the question feedback page.
Portal: Focus lost on login fields when the page loads,Bug,Closed,Sakai,software,"When you are entering the login credentials into the navbar login fields while the page is still loading at the moment that page finishes loading + 50ms the focus is lost from the login fields. This can be annoying, because it might be unnoticed while typing and it requires another click onto the username or password field or needs an additional login attempt if the interrupted entering of credentials is submitted."
T&Q: Copy from QP doesn't always load the list of QPs,Bug,Open,Sakai,software,"After copying a question from a QP to a Subpool and trying to insert the 'Copy from Question Pool' question type, the list of QPs is displayed for a second, but then all the QPs disappear.

The error persists until we access the Question Pools window."
View Site As not working for Unpublished Sites,Bug,Closed,Sakai,software,"When using the View Site As feature on unpublished sites, the Instructor is sent to a Home site and is unable to view the site as a Student or TA.  This is a change from 22.x where the Instructor would still see the site in a Student or TA view.  "
Lessons: Default placeholder not updated in Spanish,Bug,Closed,Sakai,software,"The Lessons default placeholder in English shows this:

!image-20231222-113450.png|width=1920,height=799!

But the Spanish version shows this, comes from older versions of lessons:

!image-20231222-113557.png|width=1899,height=921!

This PR updates the placeholder HTML to the latest version."
T&Q: Import/Export assessments with parts based on random questions,Bug,Verified,Sakai,software,"When an assessment contains parts based on random questions from random pools, and itâ€™s exported to a ZIP file using the â€˜Content Packageâ€™ format, it does not respect the configuration when importing it again by a different user.

It should respect the configuration, if the user has access to the pool then it should use the same pool, if not it should create a copy of the pool.

In Master right now it copies the pool content but the section is not getting questions from any pool.

As creator:

!image-20231221-145857.png|width=1684,height=339!

As importer:

!image-20231221-145938.png|width=1681,height=648!

So instead of having the section configured with a pool, it took the questions from the original pool.

After the patch the instructor gets a copy of the pool and retains the same configuration."
Rationale fields in grading pages are not set up to display rich text,Bug,Open,Sakai,software,"The â€œRationaleâ€ field in the teacher's grading screen doesnâ€™t support HTML code. This shouldnâ€™t be an issue since this field doesnâ€™t have the rich text box enabled. However, when a student adds line breaks, the <br> tags appear for the teacher. This negatively impacts the students and complicates the grading process for teachers."
JSF2 Upgrade 2.3.18 -> 2.3.21,Feature Request,Resolved,Sakai,software,"Java Server Faces (Mojarra) 2.3.21 was  released:

[https://github.com/eclipse-ee4j/mojarra/releases/tag/2.3.21-RELEASE|https://github.com/eclipse-ee4j/mojarra/releases/tag/2.3.21-RELEASE|smart-link] 

Â Weld shaded servlet 3.1.9.Final has been released:

[https://issues.redhat.com/secure/ReleaseNote.jspa?version=12359403&styleName=Html&projectId=12310891&Create=Create&atl_token=AQZJ-FV3A-N91S-UDEU_ff74bb049323116711dcc9ac0fd1edfe788b95a2_lout|https://issues.redhat.com/secure/ReleaseNote.jspa?version=12359403&styleName=Html&projectId=12310891&Create=Create&atl_token=AQZJ-FV3A-N91S-UDEU_ff74bb049323116711dcc9ac0fd1edfe788b95a2_lout|smart-link] "
Avoid enter parenthesis from instructors while operating with global variables,Bug,Verified,Sakai,software,Avoid enter parenthesis while operating with global variables
T&Q: Show historical changes for questions in question pools,Feature Request,Verified,Sakai,software,"This feature shows the historical changes of a question on a question pool, this is very useful when multiple instructors have access to the same question pool.

!Captura de pantalla 2023-12-21 084943.png|width=341,height=198!

And we provided some UI updates to the table:

!image-20231221-085320.png|width=1678,height=492!"
Students getting stack trace when accessing gradebook with null value for IS_EXCLUDED_FROM_GRADE,Bug,Resolved,Sakai,software,"After upgrading to 23.x, students are getting the following stack trace when attempting to access the gradebook:

{noformat}org.apache.wicket.WicketRuntimeException: Error attaching this container for rendering: [Page class = org.sakaiproject.gradebookng.tool.pages.StudentPage, id = 1, render count = 1]
    at org.apache.wicket.MarkupContainer.onBeforeRenderChildren(MarkupContainer.java:1699)
    at org.apache.wicket.Component.onBeforeRender(Component.java:3834)
    at org.apache.wicket.Page.onBeforeRender(Page.java:809)
    at org.apache.wicket.Component.internalBeforeRender(Component.java:949)
    at org.apache.wicket.Component.beforeRender(Component.java:1017)
    at org.apache.wicket.Component.internalPrepareForRender(Component.java:2202)
    at org.apache.wicket.Page.internalPrepareForRender(Page.java:240)
    at org.apache.wicket.Component.render(Component.java:2291)
    at org.apache.wicket.Page.renderPage(Page.java:1024)
    at org.apache.wicket.request.handler.render.WebPageRenderer.renderPage(WebPageRenderer.java:139)
    at org.apache.wicket.request.handler.render.WebPageRenderer.respond(WebPageRenderer.java:229)
    at org.apache.wicket.core.request.handler.RenderPageRequestHandler.respond(RenderPageRequestHandler.java:175)
    at org.apache.wicket.request.cycle.RequestCycle$HandlerExecutor.respond(RequestCycle.java:890)
    at org.apache.wicket.request.RequestHandlerStack.execute(RequestHandlerStack.java:64)
    at org.apache.wicket.request.cycle.RequestCycle.execute(RequestCycle.java:261)
    at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:218)
    at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:289)
    at org.apache.wicket.protocol.http.WicketFilter.processRequestCycle(WicketFilter.java:259)
    at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:201)
    at org.apache.wicket.protocol.http.WicketServlet.doGet(WicketServlet.java:137)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:670)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:779)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
    at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:450)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:711)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:459)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:353)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:313)
    at org.sakaiproject.tool.impl.ActiveToolComponent$MyActiveTool.forward(ActiveToolComponent.java:508)
    at org.sakaiproject.portal.charon.SkinnableCharonPortal.forwardTool(SkinnableCharonPortal.java:1482)
    at org.sakaiproject.portal.charon.handlers.SiteHandler.doToolBuffer(SiteHandler.java:1318)
    at org.sakaiproject.portal.charon.handlers.SiteHandler.bufferContent(SiteHandler.java:1152)
    at org.sakaiproject.portal.charon.handlers.SiteHandler.doSite(SiteHandler.java:520)
    at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:290)
    at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:188)
    at org.sakaiproject.portal.charon.SkinnableCharonPortal.doGet(SkinnableCharonPortal.java:817)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:670)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:779)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
    at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:500)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
    at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:769)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:891)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.doRun(AprEndpoint.java:2142)
    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
    at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.lang.NullPointerException
    at org.sakaiproject.grading.impl.GradingServiceImpl.getGradeDefinitionForStudentForItem(GradingServiceImpl.java:534)
    at jdk.internal.reflect.GeneratedMethodAccessor2132.invoke(Unknown Source)
    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.base/java.lang.reflect.Method.invoke(Method.java:566)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)
    at com.sun.proxy.$Proxy357.getGradeDefinitionForStudentForItem(Unknown Source)
    at org.sakaiproject.gradebookng.business.GradebookNgBusinessService.getGradesForStudent(GradebookNgBusinessService.java:2584)
    at WICKET_org.sakaiproject.gradebookng.business.GradebookNgBusinessService$$FastClassByCGLIB$$86be4ca5.invoke(<generated>)
    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
    at org.apache.wicket.proxy.LazyInitProxyFactory$CGLibInterceptor.intercept(LazyInitProxyFactory.java:355)
    at WICKET_org.sakaiproject.gradebookng.business.GradebookNgBusinessService$$EnhancerByCGLIB$$a5a7a800.getGradesForStudent(<generated>)
    at org.sakaiproject.gradebookng.tool.panels.StudentGradeSummaryGradesPanel.onBeforeRender(StudentGradeSummaryGradesPanel.java:111)
    at org.apache.wicket.Component.internalBeforeRender(Component.java:949)
    at org.apache.wicket.Component.beforeRender(Component.java:1017)
    at org.apache.wicket.MarkupContainer.onBeforeRenderChildren(MarkupContainer.java:1687)
    ... 65 more{noformat}"
"While editing the grade in gradebook using keyboard navigation, the cursor is getting trapped in gradebook table",Bug,Open,Sakai,software,"While editing the grades through gradebook using keyboard navigation under â€œGrades tabâ€. When tried to navigate to gradebook table and enter the grades, cursor doesnâ€™t come out of the table to get to next selection."
Address noisy tests in gradebookng tool,Improvement,Resolved,Sakai,software,"The following classes
org.sakaiproject.gradebookng.business.TestGradebookNgBusinessService
org.sakaiproject.gradebookng.business.util.TestImportGradesHelper

are very noisy when running tests as they use the ResourceLoader which attempts to load the ComponentManager

The ResourceLoader should be mocked as it is not the goal of these tests to perform integration tests with kernel.

The longer term solution should be to remove the static nature of these classes and simply add them  as a standard IOC bean, which would alleviate much of the problems associated with the use of static methods."
"Edit task loses ""Text"" of task, ""Description of task""  and ""Due Date"" ",Bug,Verified,Sakai,software,"When you edit a task, the â€œtextâ€ field which has previously been entered disappears. Saving will wipe the  current content.



!image-20231219-211228.png|width=91.66666666666667%!

The same happens with the Due Date, if you set it and edit, the value is lost.

if you click â€œlessâ€ and â€œmoreâ€ then edit both pieces of textual content are absent from edit window.

!image-20231219-211825.png|width=91.66666666666667%!





Miraculously, the Priority is always retained!"
Tasks panel: dark mode issues,Bug,Verified,Sakai,software,"There are blue items in the â€œTasksâ€ widget when in dark mode which are unreadable.

!image-20231219-205700.png|width=91.66666666666667%!"
Add widget: dark mode issues,Bug,Verified,Sakai,software,"Black text on a charcoal background. Viz:

!image-20231219-204632.png|width=91.66666666666667%!"
Gradebook grade_type ordinal starts from 0 instead of 1,Bug,Closed,Sakai,software,"The grade_type ordinal has changed to start from 0 to 1.  This causes a couple of issues.  In 22.x 

1=Points and 2=Percentages

In 23.x and >:

0=Points and 1=Percentages

After upgrading, gradebooks that were using points in 22.x are now using percentages and sites that were using percentages are now getting a stack trace:

{noformat}org.apache.wicket.WicketRuntimeException: Exception in rendering component: [HtmlHeaderContainer [Component id = _header_0]]
    at org.apache.wicket.Component.internalRenderComponent(Component.java:2561)
    at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1499)
    at org.apache.wicket.Component.internalRender(Component.java:2367)
    at org.apache.wicket.Component.render(Component.java:2295)
    at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1395)
    at org.apache.wicket.MarkupContainer.renderAll(MarkupContainer.java:1560)
    at org.apache.wicket.Page.onRender(Page.java:887)
    at org.apache.wicket.markup.html.WebPage.onRender(WebPage.java:141)
    at org.apache.wicket.Component.internalRender(Component.java:2367)
    at org.apache.wicket.Component.render(Component.java:2295)
    at org.apache.wicket.Page.renderPage(Page.java:1024)
    at org.apache.wicket.request.handler.render.WebPageRenderer.renderPage(WebPageRenderer.java:139)
    at org.apache.wicket.request.handler.render.WebPageRenderer.respond(WebPageRenderer.java:229)
    at org.apache.wicket.core.request.handler.RenderPageRequestHandler.respond(RenderPageRequestHandler.java:175)
    at org.apache.wicket.request.cycle.RequestCycle$HandlerExecutor.respond(RequestCycle.java:890)
    at org.apache.wicket.request.RequestHandlerStack.execute(RequestHandlerStack.java:64)
    at org.apache.wicket.request.cycle.RequestCycle.execute(RequestCycle.java:261)
    at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:218)
    at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:289)
    at org.apache.wicket.protocol.http.WicketFilter.processRequestCycle(WicketFilter.java:259)
    at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:201)
    at org.apache.wicket.protocol.http.WicketServlet.doGet(WicketServlet.java:137)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:670)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:779)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
    at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:450)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:711)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:459)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:353)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:313)
    at org.sakaiproject.tool.impl.ActiveToolComponent$MyActiveTool.forward(ActiveToolComponent.java:508)
    at org.sakaiproject.portal.charon.SkinnableCharonPortal.forwardTool(SkinnableCharonPortal.java:1482)
    at org.sakaiproject.portal.charon.handlers.SiteHandler.doToolBuffer(SiteHandler.java:1318)
    at org.sakaiproject.portal.charon.handlers.SiteHandler.bufferContent(SiteHandler.java:1152)
    at org.sakaiproject.portal.charon.handlers.SiteHandler.doSite(SiteHandler.java:520)
    at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:290)
    at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:188)
    at org.sakaiproject.portal.charon.SkinnableCharonPortal.doGet(SkinnableCharonPortal.java:817)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:670)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:779)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
    at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:500)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
    at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:769)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:891)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.doRun(AprEndpoint.java:2142)
    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
    at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.lang.RuntimeException: An error occurred while getting the model object for Component: [GbGradeTable [Component id = gradeTable, page = org.sakaiproject.gradebookng.tool.pages.GradebookPage, path = 7:form:gradeTableArea:gradeTable.GbGradeTable, isVisible = true, isVersioned = true], children = [Component id = messagerScript] [Component id = userPhotoScript] [WebMarkupContainer [Component id = gradeTable]]]
    at org.apache.wicket.Component.getDefaultModelObject(Component.java:1617)
    at org.sakaiproject.gradebookng.tool.component.GbGradeTable.renderHead(GbGradeTable.java:124)
    at org.apache.wicket.Component.renderHead(Component.java:4437)
    at org.apache.wicket.Component.renderHead(Component.java:2687)
    at org.apache.wicket.markup.renderStrategy.ChildFirstHeaderRenderStrategy$1.component(ChildFirstHeaderRenderStrategy.java:85)
    at org.apache.wicket.markup.renderStrategy.DeepChildFirstVisitor.visit(DeepChildFirstVisitor.java:96)
    at org.apache.wicket.markup.renderStrategy.DeepChildFirstVisitor.visit(DeepChildFirstVisitor.java:87)
    at org.apache.wicket.markup.renderStrategy.DeepChildFirstVisitor.visit(DeepChildFirstVisitor.java:87)
    at org.apache.wicket.markup.renderStrategy.DeepChildFirstVisitor.visit(DeepChildFirstVisitor.java:87)
    at org.apache.wicket.markup.renderStrategy.DeepChildFirstVisitor.visit(DeepChildFirstVisitor.java:51)
    at org.apache.wicket.markup.renderStrategy.ChildFirstHeaderRenderStrategy.renderChildHeaders(ChildFirstHeaderRenderStrategy.java:78)
    at org.apache.wicket.markup.renderStrategy.ChildFirstHeaderRenderStrategy.renderHeader(ChildFirstHeaderRenderStrategy.java:57)
    at org.apache.wicket.markup.html.internal.HtmlHeaderContainer.onComponentTagBody(HtmlHeaderContainer.java:170)
    at org.apache.wicket.markup.html.panel.DefaultMarkupSourcingStrategy.onComponentTagBody(DefaultMarkupSourcingStrategy.java:71)
    at org.apache.wicket.Component.internalRenderComponent(Component.java:2537)
    ... 67 more
Caused by: java.lang.NullPointerException
    at org.sakaiproject.gradebookng.business.GradebookNgBusinessService.putCourseGradesInMatrix(GradebookNgBusinessService.java:1315)
    at org.sakaiproject.gradebookng.business.GradebookNgBusinessService.buildGradeMatrix(GradebookNgBusinessService.java:1047)
    at org.sakaiproject.gradebookng.business.GradebookNgBusinessService.buildGradeMatrix(GradebookNgBusinessService.java:977)
    at WICKET_org.sakaiproject.gradebookng.business.GradebookNgBusinessService$$FastClassByCGLIB$$86be4ca5.invoke(<generated>)
    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
    at org.apache.wicket.proxy.LazyInitProxyFactory$CGLibInterceptor.intercept(LazyInitProxyFactory.java:355)
    at WICKET_org.sakaiproject.gradebookng.business.GradebookNgBusinessService$$EnhancerByCGLIB$$a5a7a800.buildGradeMatrix(<generated>)
    at org.sakaiproject.gradebookng.tool.model.GbGradeTableData.<init>(GbGradeTableData.java:81)
    at org.sakaiproject.gradebookng.tool.pages.GradebookPage$2.load(GradebookPage.java:295)
    at org.sakaiproject.gradebookng.tool.pages.GradebookPage$2.load(GradebookPage.java:292)
    at org.apache.wicket.model.LoadableDetachableModel.getObject(LoadableDetachableModel.java:124)
    at org.apache.wicket.Component.getDefaultModelObject(Component.java:1612)
    ... 81 more
Collapse{noformat}"
Remove My Connections from the user's (avatar) drop down menu,Improvement,Resolved,Sakai,software,There are 2 locations where a user can see and manager their â€œConnectionsâ€ the goal is to remove this redundancy and simply use the connection manager in the profile tool. This means the link will be removed and the user would simply click on the â€œView Profileâ€ â†’ â€œConnectionsâ€ to view their connections.
Messages: Scheduling a â€˜reply to allâ€™ message is not possible - the calendar dropdown message does not appear. ,Bug,Open,Sakai,software,Description: When choosing the â€˜reply to allâ€™ the scheduling calendar dropdown does not appear. Refer to attached video for demo.Â 
T&Q: Added sharing permissions to QPs,Feature Request,Verified,Sakai,software,"The question pools feature allows instructors to share and unshare pools with other instructors in the institution, however, itâ€™s an on and off feature, the instructor that have access can edit, delete and modify questions inside the question pools, itâ€™s not granular permissions.

This feature adds the ability to select the access level, read-only, read/write and modify.

Before:

!before.png|width=1278,height=425!

After:

!after.png|width=1265,height=398!

Some controls are hidden or disabled when a user does not have access to edit the question pool.

Iâ€™ve also made some improvements when editing QPs, control reorganization and styling.

!image-20231220-105810.png|width=1666,height=799!"
Caused by: org.hibernate.type.SerializationException: could not deserialize,Bug,Resolved,Contrib: SCORM Player,software,"After upgrading from Sakai 12 to Sakai 22, this is the error I receive:



{noformat}Caused by: org.hibernate.type.SerializationException: could not deserialize
        at org.hibernate.internal.util.SerializationHelper.doDeserialize(SerializationHelper.java:231) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.internal.util.SerializationHelper.deserialize(SerializationHelper.java:287) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.type.descriptor.java.SerializableTypeDescriptor.fromBytes(SerializableTypeDescriptor.java:138) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.type.descriptor.java.SerializableTypeDescriptor.wrap(SerializableTypeDescriptor.java:113) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.type.descriptor.java.SerializableTypeDescriptor.wrap(SerializableTypeDescriptor.java:29) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.type.descriptor.sql.VarbinaryTypeDescriptor$2.doExtract(VarbinaryTypeDescriptor.java:60) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.type.descriptor.sql.BasicExtractor.extract(BasicExtractor.java:47) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:257) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:253) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:243) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.type.AbstractStandardBasicType.hydrate(AbstractStandardBasicType.java:329) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.persister.entity.AbstractEntityPersister.hydrate(AbstractEntityPersister.java:3025) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.loader.Loader.loadFromResultSet(Loader.java:1844) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.loader.Loader.hydrateEntityState(Loader.java:1772) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.loader.Loader.instanceNotYetLoaded(Loader.java:1745) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.loader.Loader.getRow(Loader.java:1598) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:742) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.loader.Loader.processResultSet(Loader.java:1002) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.loader.Loader.doQuery(Loader.java:960) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:351) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.loader.Loader.doList(Loader.java:2787) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.loader.Loader.doList(Loader.java:2770) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2604) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.loader.Loader.list(Loader.java:2599) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:505) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:395) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:220) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1526) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1598) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1566) ~[hibernate-core-5.3.20.Final.jar:5.3.20.Final]
        ... 113 more
Caused by: java.io.InvalidClassException: javax.swing.event.EventListenerList; local class incompatible: stream classdesc serialVersionUID = -5677132037850737084, local class serialVersionUID = -7977902244297240866{noformat}"
Tests & Quizzes: Not all global variables are exported on the xml - S2U-11,Bug,Resolved,Sakai,software,Not all global variables are exported on the xml
"Portal > Home: logging in causes stacktraces caused by java.util.MissingResourceException: Can't find bundle for base name connection-manager, locale en_US",Bug,Verified,Sakai,software,"I did not see this on 23x when logging in. On trunk, there are 3 stacktraces, all have caused by java.util.MissingResourceException: Can't find bundle for base name connection-manager, locale en_US"
Lessons: PDF does not load due to an unknown issue,Bug,Resolved,Sakai,software,"When pdf-js was upgraded to 4.0.189 and 4.0.269, the resource URL is now encoded in Lessons.

However, thereâ€™s an issue reproducible in the Nightly servers, the PDF does not load:

!image-20231215-124141.png|width=1904,height=923!

However, loads fine in other environments such a local environment, with a public URL and with a localhost URL:

!image-20231215-124317.png|width=1909,height=922!

I compared both URLs and they are exactly equal except the domain, seems related to the nightly servers, maybe related to the Tomcat version, the PDF request throws a 404."
Lessons: Embedded PDFs don't use the full width,Bug,Verified,Sakai,software,"Seems that this only affects 22.x, it works nice on Master.

!image-20231215-104513.png|width=1901,height=847!

On Master:

!image-20231215-104536.png|width=1916,height=858!"
Add better protection for invalid i18n keys,Bug,Resolved,Sakai,software,Add protection when parsing i18n keys and log a warning when an invalid key is found.
Sometimes some answers are interchanged when clicking Solution - S2U-10,Bug,Verified,Sakai,software,Sometimes some answers are interchanged when clicking Solution
EmailService: Bind email properties into simple values,Improvement,Verified,Sakai,software,"Thereâ€™s many properties to configure the email notifications, if institutions miss some of them, notifications will not work for some tools.

{noformat}smtp@org.sakaiproject.email.api.EmailService=localhost
smtpPort@org.sakaiproject.email.api.EmailService=25
smtpFrom@org.sakaiproject.email.api.EmailService=goodsender@server.com
msgcntr.notification.from.address=${smtpFrom@org.sakaiproject.email.api.EmailService}
setup.request=${smtpFrom@org.sakaiproject.email.api.EmailService}
mail.support=${smtpFrom@org.sakaiproject.email.api.EmailService}
mail.support.name=${smtpFrom@org.sakaiproject.email.api.EmailService}
mail.sendfromsakai=false
accountValidator.checkValidations.fromEmailAddress=${smtpFrom@org.sakaiproject.email.api.EmailService}
accountValidator.checkValidations.fromEmailName=${smtpFrom@org.sakaiproject.email.api.EmailService}{noformat}

In this example, we have {{setup.request}}, {{accountValidator.checkValidations.fromEmailAddress}}, {{mail.support}} and thereâ€™s more in tools like Samigo.

This improvement binds some of the values to smtpFrom.

This is some evidence after some local testing:

!image-20231214-150707.png|width=1034,height=423!

Signup:

!image-20231214-150948.png|width=998,height=93!"
"Assignments: Group assignments released by Lessons have problems with submissions, grading",Bug,Open,Sakai,software,"Will affect additional versions as [https://sakaiproject.atlassian.net/browse/SAK-49294|https://sakaiproject.atlassian.net/browse/SAK-49294|smart-link] is merged. 

[https://sakaiproject.atlassian.net/browse/SAK-49294|https://sakaiproject.atlassian.net/browse/SAK-49294|smart-link] fixed the problem where assignments released to groups and put in Lessons with a prerequisite were not available for students to submit. Now that students are able to submit to these assignments, it uncovered a larger problem with group submissions (one student submits on behalf of a group) when used with Lessons' â€œDo not release until prerequisites are completedâ€ logic. 

The students in the appropriate groups can now view the assignment when the prerequisites are completed, however, they can only submit on behalf of the Access group, not their individual group, and the grading is incorrect."
"Assignments-Sakai Grader: The ability is present in the Sakai Grader to use the curly braces for instructor feedback on inline submissions, but there are no instructions",Bug,Closed,Sakai,software,"This is the same issue as in [https://sakaiproject.atlassian.net/browse/SAK-47848|https://sakaiproject.atlassian.net/browse/SAK-47848|smart-link] but it only affects 22 now.

22 displays â€œundefinedâ€ in the {{sak-banner-info}} div, while 23 displays the instructions.

!image-20231213-114157.png|width=663,height=231!"
Grader: Cannot load submissions,Bug,Resolved,Sakai,software,"Found this while testing other pieces of work, submissions donâ€™t load in the new grader anymore.

!image-20231212-141608.png|width=1901,height=925!"
Assignments: Problems in navigation when selecting resource from another site,Bug,Closed,Sakai,software,When going to add attachment -> select from resources the accordion erroneously navigates to â€˜upload filesâ€™. Refer to attachment.
Plus: o.h.e.j.s.SqlExceptionHelper.logExceptions Duplicate entry for key 'GB_GRADEBOOK_T.UK_ru3o66mhmaf4no3xt2tv4n8e5',Bug,Closed,Sakai,software,"24x does not have this error in the logs. 
23x - Plus Site

{quote}11-Dec-2023 18:42:28.765 ERROR [http-nio-20123-exec-62] o.h.e.j.s.SqlExceptionHelper.logExceptions Duplicate entry '4447c463-58df-4ad6-9a87-0fada97d6c57' for key 'GB_GRADEBOOK_T.UK_ru3o66mhmaf4no3xt2tv4n8e5'{quote}

Main site: [https://qa23-maria.nightly.sakaiproject.org/portal/site/0cd2aeb8-80a6-4c02-879a-146f48175948|https://qa23-maria.nightly.sakaiproject.org/portal/site/0cd2aeb8-80a6-4c02-879a-146f48175948]

Plus site: [https://qa23-mysql8.nightly.sakaiproject.org/portal/site/4447c463-58df-4ad6-9a87-0fada97d6c57|https://qa23-mysql8.nightly.sakaiproject.org/portal/site/4447c463-58df-4ad6-9a87-0fada97d6c57]

Iâ€™m not seeing this error in the maria logs either. Attaching logs for both maria and mysql8.

Note: This was discussed in the Core meeting on 19-Dec-2023 where we explored the possibility that this was a timing issue of initial creation of the grade book was being done by the dashboard tool and there was a race condition between multiple Gradebook web service requests both triggering the initial creation of the Gradebook.  The fix of this hypothetical race condition is to create the Grade book right after the site is created in the initial request to the Plus ProviderServlet.  This may or may not be the bug or fix - but creating the Gradebook in the ProvidersServlet is a good idea nonetheless. "
Search: Update search to allow full Lucene syntax searches to succeed,Bug,Resolved,Sakai,software,"See [https://sakaiproject.atlassian.net/browse/SAK-47754|https://sakaiproject.atlassian.net/browse/SAK-47754|smart-link] Adding +tool:sakai.announcements to your search terms fails on 24, 23 and 22.

After talking to Earle, also tried elephant tool:sakai.announcements

Then, after reading the lucene instructions, also tried eleph?nt and ele*nt, both of which also fail.

See [https://lucene.apache.org/core/2_9_4/queryparsersyntax.pdf|https://lucene.apache.org/core/2_9_4/queryparsersyntax.pdf] or the Sakai Help for Advanced Search"
Move / Copy etc buttons incorrectly rendered in LIGHT mode,Bug,Open,Sakai,software,"if you select a folder to copy / move zip etc. the buttons have incorrect formatting as the border vanishes and itâ€™s not easy to spot that the button wishes to be clicked. This on v24 & v23 but not v22. 

Thereâ€™s a movie of this happening on the test plan which shows what correct behaviour may look like.

The same thing happens when trying to copy content from another site"
403 Forbiddern JS error when uploading an image in ckeditor with content.direct.upload.enabled=false,Bug,Open,Sakai,software,"when *content.direct.upload.enabled*=false (*default*), there is a 403 error when you try to upload an image with the ckeditor â€œupload tabâ€

that property was disabled by default in [https://sakaiproject.atlassian.net/browse/SAK-47049|https://sakaiproject.atlassian.net/browse/SAK-47049] because [https://sakaiproject.atlassian.net/browse/SAK-47024|https://sakaiproject.atlassian.net/browse/SAK-47024|smart-link] is a blocker

if you enable the property, the problem does not happen, but I think, you could run into [SAK-47024|https://sakaiproject.atlassian.net/browse/SAK-47024] "
Include Template sites in list of sites available for Site Import,Feature Request,Verified,Sakai,software,"There are often use cases where it is desirable for instructors or site owners to copy site content from one site to another, but without being given an instructor/owner permissions in both sites. For example, many institutions develop Master Courses that are then used to populate multiple sections of that course being taught by different instructors. 

Currently, setting the template=â€trueâ€ property for the Master Course allows users to select the template site when going through the Create Site workflow in Worksite Setup. However, if you have auto-created course shells (either as a result of SIS integration or LTI launch in the case of Sakai Plus) instructors do not need to create sites. Their empty course shells are already created for them. They just need to be able to import the content from the Master Course. 

Right now, the only way to do that is to have someone with instructor/owner permissions in both the Master Course and the new empty site go to Site Info > Import from Site and perform the course import from their personal list of sites. This means that either instructional designers (as editors in both sites) need to perform the import on behalf of faculty, or faculty need to be enrolled in the Master Course as instructor/owner. This is not ideal for several reasons: 1) It creates more work for instructional designers to copy information into many sites each term. 2) Enrolling faculty in Master Courses opens up the possibility of instructors inadvertently modifying the content in the Master site rather than their own individual site. 3) System administrators need to keep track of which Master sites instructors need access to, and they must manage that enrollment over time. 

Iâ€™d like to propose a small change in the Site Info > Import from Site workflow for adding content to an existing site. In the screen where a user selects the site/s from which to import content, template sites should be added to the list. (Template sites are labeled as such by the system administrator by adding the template=â€trueâ€ property to the site.) Everything else in the Import from Site process would work the same way. This would allow instructors/owners of existing sites to easily select template or Master Course content for import into an existing course shell, without exposing the template site to the risk of accidental modification.

Please see a mockup of this import screen below. You will note that Iâ€™ve separated the Template sites from My Sites to emphasize the difference between the two types of sites. 

Mockup of the â€œMergeâ€ site selection list:

!import-from-site-templates.jpg|width=100%!

  

Mockup of the â€œReplaceâ€ site selection list:

!import-from-site-templates-replace.jpg|width=100%!



  "
Dashboard: Add widget text is unreadable on dark mode,Bug,Verified,Sakai,software,Text on â€˜add widgetâ€™ widget is unreadable in dark mode - refer to attachment.Â 
"Lessons: Create a single ""Add Learning App"" UI to be used across Sakai",Bug,Resolved,Sakai,software,"First, a bit of a history lesson.  A long time ago in a release far away, basic LTI was added to Sakai and it appeared in Lessons under â€œAdd External Toolâ€.  The Content Item Launch was added and added to so LTI tools were either directly placeable or were a source of possibly many directly placeable tools.   These all showed up under Add External Tool in Lessons.  Then when Dayton really started to use Tsugi heavily they wanted to put the Content Item launch tools into their own â€œAdd Learning Appâ€ and these were then removed from â€œAdd External Toolâ€.  It was fine for a while, but as more and more LTI tools were integrated, a tool might appear one or the other of these areas in the Lessons menu with no real reason that made sense to the users.

Other LMSâ€™s did not make users figure out which of the nearly two identical UI locations they might find a tool.   Instead they just listed all the tools and those that were sources of multiple tools had a little search icon so as to distinguish them without requiring two separate UI locations.

Sakai and other LMSâ€™s had unnecessarily different UIâ€™s when selecting LTI tools in the Rich Text Editor and Assignments.

The goal of this Jira is to produce â€œone true wayâ€ to choose LTI tools across Assignments, Lessons, and the Rich Text Editor and make it all more attractive and easier to use for the user.   

This coupled with [https://sakaiproject.atlassian.net/browse/SAK-49540|https://sakaiproject.atlassian.net/browse/SAK-49540|smart-link] will lead to a very consistent UI across the various placements of External Tools in Sakai."
Assignments: Grader PDF viewer includes annotation,Bug,In Progress,Sakai,software,"Will affect additional versions if [https://sakaiproject.atlassian.net/browse/SAK-49445|https://sakaiproject.atlassian.net/browse/SAK-49445|smart-link] is merged to 23. 



The new PDF viewer tools includes the ability to annotate the PDF file - add text, draw, or add/edit images.  I can foresee an instructor thinking that these options can be used for assignment feedback. However, these annotations are not saved by default. If an instructor uses these options, then clicks Save & Release and continues to the next student, the annotations are not saved and are not visible to the student.

The only way these annotations can be saved is if the instructor clicks the Save button to save a local copy (includes annotation) then uploads it back to the feedback attachment.

I think this would be very confusing for instructors who would expect that if they can make annotations, it saves annotations. I see three options for dealing with this - 

Option 1 - Save the annotations. Can these annotations be saved and released to the student as feedback? 

Option 2 - Hide the buttons. Can these three options be hidden, so instructors canâ€™t add annotations that they canâ€™t save?

Option 3 - Warn instructors. If we canâ€™t save annotations or prevent them from being used, can we at least put up a banner when PDF files are submitted that warns instructors that PDF annotations are not saved unless they click the Save button to save a local copy, then upload it to the feedback attachments"
Gradebook and Assignments: Released grade from Assignments doesn't always show in Gradebook,Bug,Open,Sakai,software,"Related to [https://sakaiproject.atlassian.net/browse/SAK-48551|https://sakaiproject.atlassian.net/browse/SAK-48551|smart-link] 

I wasnâ€™t able to replicate this issue, but know multiple faculty and students have encountered it. 

* An assignment is graded/regraded and grades are released to the student.
*  Grades are set to populate in the gradebook once released and the grade or regrade doesnâ€™t show in the gradebook. 

This results in potentially lower overall grade within the course."
Tests & Quizzes: Instructor preview doesn't include rubric preview button when viewed from Lessons,Bug,Open,Sakai,software,The instructor preview of a test does not show the Preview Rubric button when viewed from a Lessons page link. The Preview Rubric button does appear normally when the instructor previews the quiz from the Tests & Quizzes page. The button appears for students normally - this only seems to be affecting the instructor preview.
Sitestats: Improve presence times after midnight,Improvement,Verified,Sakai,software,"I donâ€™t have much data about this contribution and not a proper test plan, seems related to midnight crossing. [~accountid:557058:e0ebcd12-f6ad-4244-b479-05249b57a3fa] may know more."
Dropbox: Notifications does not respect groups,Improvement,Closed,Sakai,software,"When a user belongs to a group, and uploads something to dropbox, all the instructors are notified.



!all_site_notifications.png|width=50%!

!dropbox_noti_before.png|width=1436,height=323!

After the changes:

!dropbox_noti_after.png|width=1440,height=386!"
Assignments: Duplicate pager in the grades report,Improvement,Verified,Sakai,software,"The grades report can be huge and show more than 200 entries per page, navigating between submissions can be annyoing because the user needs to go to the top of the page to go to the next screen, this duplicates the pager at the end of the screen:

Before:

!grade_report.png|width=1426,height=692!

After

!grade_report_after.png|width=1271,height=434!"
T&Q: Editing a published timed assessment does not inform students,Bug,Closed,Sakai,software,"When an assessment was released as non timed, gets attempted, and gets edited afterwards, the students are not informed that it is timed.

This is the information when the assessment is timed in the first attempt, itâ€™s okay:

!OK.png|width=1257,height=338!

This is the information when the assessment is timed in the second attempt, thereâ€™s no information:

!KO.png|width=1268,height=289!

This is not an issue anymore because the user is informed about the final time, which is the attempt date plus the time limit."
Update Apache httpcore 5.2.3 & httpclient 5.2.3,Bug,Closed,Sakai,software,"[https://downloads.apache.org/httpcomponents/httpclient/RELEASE_NOTES-5.2.x.txt|https://downloads.apache.org/httpcomponents/httpclient/RELEASE_NOTES-5.2.x.txt]

[https://downloads.apache.org/httpcomponents/httpclient/RELEASE_NOTES-5.2.x.txt|https://downloads.apache.org/httpcomponents/httpclient/RELEASE_NOTES-5.2.x.txt]"
T&Q: Escape translation strings in the assessment list,Bug,Closed,Sakai,software,"The instructorâ€™s main view in tests & quizzes has some Javascript components, datatables and multiselect, that have translated strings. If the strings contain single quotes they fail (French, Catalonian, etcâ€¦)"
Gradebook: When an item comes from lessons Rubrics should not be a grading option.,Bug,Closed,Sakai,software,"When a gradebook item comes from Lessons like student pages, grading using Rubrics does not have any sense:

!image-20231207-105811.png|width=1473,height=841!"
Library: Upgrade pdf-js from 4.0.189 to 4.0.269,Bug,Verified,Sakai,software,"Upgrade pdf-js to the latest release [https://github.com/mozilla/pdf.js/releases|https://github.com/mozilla/pdf.js/releases|smart-link] 

This involves Lessons and the grader.

!image-20231207-074609.png|width=1897,height=777!"
Worksite Setup -> Search should also search the internal site id ,Bug,Closed,Sakai,software,"Worksite Setup â†’ Search should be extended to also search the internal site id

This is important for schools that make heavy use of meaningful internal ids like CRN-SUBJECT-TERM"
Notifications: Should have an error message if student tries to view unavailable announcement,Bug,Open,Sakai,software,"If an instructor deletes an announcement, it should remove the related notification. However, if a student already has the notifications open and doesnâ€™t refresh the page after the instructor deletes the announcement, the student will still see the notification. If the student clicks on the notification, they will not be able to see the deleted message, but will see some code-y announcement template. This should not be visible to students, they should get a message that says â€œThis announcement is not availableâ€ or something similar. "
Notifications: Announcements released in the future do not have the same formatting as other announcement notifications,Bug,Closed,Sakai,software,"An announcement that is created with the â€œshowâ€ option will appear in a studentâ€™s notifications as: 

<Instructor> <timestamp>
Added a new announcement â€œTitleâ€ in â€œSiteâ€

An announcement that is created with the specify dates option to appear in the future will not have a notification until the beginning date passes, but the notification appears for students as:

<Instructor> <timestamp>
â€Announcement Titleâ€"
Notifications: Announcement notifications are not removed if group changes,Bug,Open,Sakai,software,"If an announcement is released to a group, the members of that group receive a notification. If the announcement is edited to be released to a different group, or the group membership changes, the notification is not removed and the students who should not longer see this announcement can still access it through the notification. The announcement is no longer available to these students through the Overview or Announcements tool, just the notifications.

There is an error in the logs: {{04-Dec-2023 13:08:20.719 ERROR [http-nio-20123-exec-33] o.s.a.t.AnnouncementAction.buildMainPanelContext user=63535c20-8c13-4db6-9317-db00c848a5da lock=annc.read resource=/announcement/msg/33cc0c04-42d0-4da4-ae7e-3296cc26225a/main/64ec3007-b423-40f0-b567-50513df62e02}}"
Assignments: Cannot export submissions to ZIP when the title has square brackets,Bug,Closed,Sakai,software,"When the assignment title contains square brackets, the submissions cannot be exported using Excel, the ZIP file is empty.

!image-20231204-102644.png|width=1435,height=701!

!image-20231204-102852.png|width=1568,height=533!



!image-20231204-102634.png|width=1671,height=846!

{noformat}04-Dec-2023 11:28:00.958 WARN [http-nio-8080-exec-8] o.s.a.i.AssignmentServiceImpl.getSubmissionsZip Cannot create submissions zip file for reference = /assignment/a/88a7f3a1-5aa4-455c-8207-b99ee7715846/a33fd564-7a68-434b-b29a-ad7b7d007d29
java.lang.IllegalArgumentException: Invalid char ([) found at index (0) in sheet name '[00] hello'
	at org.apache.poi.ss.util.WorkbookUtil.validateSheetName(WorkbookUtil.java:150) ~[?:?]
	at org.apache.poi.hssf.record.BoundSheetRecord.setSheetname(BoundSheetRecord.java:104) ~[?:?]
	at org.apache.poi.hssf.model.InternalWorkbook.setSheetName(InternalWorkbook.java:577) ~[?:?]
	at org.apache.poi.hssf.usermodel.HSSFWorkbook.createSheet(HSSFWorkbook.java:964) ~[?:?]
	at org.apache.poi.hssf.usermodel.HSSFWorkbook.createSheet(HSSFWorkbook.java:126) ~[?:?]
	at org.sakaiproject.assignment.impl.ExcelExporter.<init>(SpreadsheetExporter.java:144) ~[?:?]
	at org.sakaiproject.assignment.impl.SpreadsheetExporter.getInstance(SpreadsheetExporter.java:57) ~[?:?]
	at org.sakaiproject.assignment.impl.AssignmentServiceImpl.zipSubmissions(AssignmentServiceImpl.java:3328) ~[?:?]
	at org.sakaiproject.assignment.impl.AssignmentServiceImpl.getSubmissionsZip(AssignmentServiceImpl.java:2265) ~[?:?]
	at org.sakaiproject.assignment.impl.AssignmentServiceImpl$1.doInTransactionWithoutResult(AssignmentServiceImpl.java:558) ~[?:?]
	at org.springframework.transaction.support.TransactionCallbackWithoutResult.doInTransaction(TransactionCallbackWithoutResult.java:36) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.sakaiproject.assignment.impl.AssignmentServiceImpl.lambda$getHttpAccess$2(AssignmentServiceImpl.java:554) ~[?:?]
	at org.sakaiproject.access.tool.AccessServlet.dispatch(AccessServlet.java:411) [sakai-access-impl-24-SNAPSHOT.jar:24-SNAPSHOT]
	at org.sakaiproject.access.tool.AccessServlet.doGet(AccessServlet.java:206) [sakai-access-impl-24-SNAPSHOT.jar:24-SNAPSHOT]{noformat}"
T&Q: Publishing an assessment with attachments without access throws an error,Bug,Closed,Sakai,software,"Publishing an assessment with attachments without access throws an error.

Some instructors publish assessments containing resources from a different site, if they lose the access to the site where the resources reside, publishing the assessment throws an error."
Update Apache Commons IO 2.15.1,Bug,Closed,Sakai,software,"h3. Release 2.15.1 â€“ 2023-11-24

||Type||Changes||By||
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix wrong issue id in change log #503. Thanks to Gregor Dschung.|[sebb|https://commons.apache.org/proper/commons-io/team-list.html#sebb]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Add test for FileChannels.contentEquals() #509. Thanks to Stephan Markwalder, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix FileChannels.contentEquals(). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix some Javadoc issues in LineIterator and IOUtils. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Simplify FileAlterationObserver internal processing. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Avoid NullPointerException in RegexFileFilter.RegexFileFilter(Pattern). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Avoid NullPointerException in RegexFileFilter.accept(Path, BasicFileAttributes). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix SpotBugs error: Class org.apache.commons.io.filefilter.RegexFileFilter defines non-transient non-serializable instance field pathToString [org.apache.commons.io.filefilter.RegexFileFilter] In RegexFileFilter.java SE_BAD_FIELD. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix SpotBugs error: Class org.apache.commons.io.filefilter.DelegateFileFilter defines non-transient non-serializable instance field fileFilter [org.apache.commons.io.filefilter.DelegateFileFilter] In DelegateFileFilter.java SE_BAD_FIELD. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix SpotBugs error: Class org.apache.commons.io.filefilter.DelegateFileFilter defines non-transient non-serializable instance field fileNameFilter [org.apache.commons.io.filefilter.DelegateFileFilter] In DelegateFileFilter.java SE_BAD_FIELD. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix SpotBugs error: org.apache.commons.io.function.IOStream$1.next() cannot throw NoSuchElementException [org.apache.commons.io.function.IOStream$1] At IOStream.java:[line 98] IT_NO_SUCH_ELEMENT. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix SpotBugs error: org.apache.commons.io.monitor.FileAlterationMonitor.getObservers() may expose internal representation by returning FileAlterationMonitor.observers [org.apache.commons.io.monitor.FileAlterationMonitor] At FileAlterationMonitor.java:[line 124] EI_EXPOSE_REP. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix SpotBugs error: Class org.apache.commons.io.monitor.FileAlterationObserver defines non-transient non-serializable instance field fileFilter [org.apache.commons.io.monitor.FileAlterationObserver] In FileAlterationObserver.java SE_BAD_FIELD. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix SpotBugs error: Class org.apache.commons.io.monitor.FileAlterationObserver defines non-transient non-serializable instance field listeners [org.apache.commons.io.monitor.FileAlterationObserver] In FileAlterationObserver.java SE_BAD_FIELD. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix SpotBugs error: org.apache.commons.io.FileCleaningTracker.getDeleteFailures() may expose internal representation by returning FileCleaningTracker.deleteFailures [org.apache.commons.io.FileCleaningTracker] At FileCleaningTracker.java:[line 218] EI_EXPOSE_REP. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix SpotBugs error: org.apache.commons.io.IOExceptionList.getCauseList() may expose internal representation by returning IOExceptionList.causeList [org.apache.commons.io.IOExceptionList] At IOExceptionList.java:[line 118] EI_EXPOSE_REP. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix SpotBugs error: org.apache.commons.io.IOExceptionList.getCauseList(Class) may expose internal representation by returning IOExceptionList.causeList [org.apache.commons.io.IOExceptionList] At IOExceptionList.java:[line 129] EI_EXPOSE_REP. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix SpotBugs error: org.apache.commons.io.file.AccumulatorPathVisitor.getDirList() may expose internal representation by returning AccumulatorPathVisitor.dirList [org.apache.commons.io.file.AccumulatorPathVisitor] At AccumulatorPathVisitor.java:[line 179] EI_EXPOSE_REP. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix SpotBugs error: org.apache.commons.io.file.AccumulatorPathVisitor.getFileList() may expose internal representation by returning AccumulatorPathVisitor.fileList [org.apache.commons.io.file.AccumulatorPathVisitor] At AccumulatorPathVisitor.java:[line 188] EI_EXPOSE_REP. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix SpotBugs error: org.apache.commons.io.input.ObservableInputStream.getObservers() may expose internal representation by returning ObservableInputStream.observers [org.apache.commons.io.input.ObservableInputStream] At ObservableInputStream.java:[line 187] EI_EXPOSE_REP. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix SpotBugs error: Exception thrown in class org.apache.commons.io.input.UnsynchronizedByteArrayInputStream at new org.apache.commons.io.input.UnsynchronizedByteArrayInputStream(byte[], int) will leave the constructor. The object under construction remains partially initialized and may be vulnerable to Finalizer attacks. [org.apache.commons.io.input.UnsynchronizedByteArrayInputStream, org.apache.commons.io.input.UnsynchronizedByteArrayInputStream] At UnsynchronizedByteArrayInputStream.java:[line 202]At UnsynchronizedByteArrayInputStream.java:[line 202] CT_CONSTRUCTOR_THROW. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix SpotBugs error: Exception thrown in class org.apache.commons.io.input.UnsynchronizedByteArrayInputStream at new org.apache.commons.io.input.UnsynchronizedByteArrayInputStream(byte[], int, int) will leave the constructor. The object under construction remains partially initialized and may be vulnerable to Finalizer attacks. [org.apache.commons.io.input.UnsynchronizedByteArrayInputStream, org.apache.commons.io.input.UnsynchronizedByteArrayInputStream] At UnsynchronizedByteArrayInputStream.java:[line 223]At UnsynchronizedByteArrayInputStream.java:[line 223] CT_CONSTRUCTOR_THROW. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump org.codehaus.mojo:exec-maven-plugin from 3.1.0 to 3.1.1 #512. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump commons-lang3 from 3.13.0 to 3.14.0. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump commons.bytebuddy.version from 1.14.9 to 1.14.10 #516. Thanks to Dependabot.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump commons-parent from 64 to 65. Thanks to Dependabot.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|"
"Clean up LTI Placements, add Site Navigation Placement (i.e. left nav)",Bug,Closed,Sakai,software,"Over the years, in the â€œExternal Toolâ€ UI in the Admin Workspace, we have been evolving a set of check boxes that capture the message types a tool can accept and the placements in the Sakai UI that we want the tool to appear.  Launch message types and placements are very different concepts and in the old UI there was a bit of mixing.  And there was no â€œLeft Navâ€ placement.  With this Jira these will appear as follows:

{noformat}Message Type:

    The tool URL can receive an LTI Resource Link launch
    The tool can receive a Content-Item or Deep-Link launch
    Tool supports the privacy launch message (experimental) -- moved from the placement list

Placement:

    Allow the tool to be selected from Lessons
    Allow the tool to be one of the assignment types
    Allow the tool to be used from the rich text editor
    Allow the tool to be placed in site-level navigation -- added
    Allow the tool to provide a common cartridge (usually to be imported into a tool like Lessons)
    Allow the tool to provide a file (usually as part of a file picker){noformat}

The privacy message indicator was moved under message type and a new placement (site navigation) was added.

With this change, the administrator can truly place an LTI tool wherever they like.  However there is still a problem.  Historically, code in Lessons, Site Manage, or whatever often did not strictly require a placement to be checked and instead â€œguessedâ€ which tools belonged in which placements based on message types and other bits and bobs in the data model.

The worst example of this was how Site Info â†’ Manage Tools worked.  Since prior to this Jira there was no â€˜site-levelâ€™ navigation placement, to construct the list of external tools to show in Site info it would list a tool petty much if the tool could accept a resource link message.  This meant instructors saw tools that were not appropriate for the left navigation use case in Site Manage and there was no easy way for administrators to control what appeared there.  I am guessing that stealthing was used as a hack at times to hack / work around this limitation.

Immediately after this change, any placement of an LTI tool selector in Sakai will switch from ad hoc â€œguessingâ€ what tools _might_ support this placement and erring on the side of more tools rather than fewer tools, each placement will only show tools which are marked as showing up in that placement (i.e. err on only including tools explicitly indicated for a placement).

So after this is put into production, some External Tools will disappear from some places in the the Sakai UI.   All the administrator has to do is go into the External Tool configuration and  explicitly indicate where the tool is to be placed.  It will require a bit of manual fixing for the admin to indicate placements explicitly but with this the admin can truly control what tools appear at what points in the Sakai UI.

In effect, the value of this Jira is that the Placement check boxes really work and tools only show up in a placement if the placement is checked.  In short, with this update, Sakai will consistently support placements  giving administrators a lot of flexibility and control.  Of course, with flexibility and control, there comes some responsibility.

This all has evolved slowly, where we introduced a placement type without requiring it to be checked in the name of upwards compatibility.  The placement and message types (other than site-nav) have been in the UI for years - so hopefully admins have been checking them to indicate where they want a tool to show up - and likely frankly confused at times when more than the checked tools show up with no way to stop them from showing up.  This will rationalize all that going forward.

Another change, now that the external tools appearing in Site Manage is under precise admin control, we wonâ€™t hide them under an expando section - they will just appear as a tool in the tool list - in alphabetical order with all the other tools.  (like other LMSâ€™s that support course nav placements already do ðŸ™‚ )"
"Note that the ""External Tool"" only supports LTI 1.1",Bug,Closed,Sakai,software,"The â€œExternal Toolâ€ only supports LTI 1.1 and is not expected to support LTI 1.3.  LTI 1.3 is part of the External Tools in Administration Workspace.  By labeling the legacy tool as 1.1 only, we avoid disappointing folks."
Update Apache Log 1.3.0,Bug,Closed,Sakai,software,"h3. Release 1.3.0 â€“ 2023-11-26

||Type||Changes||By||
|!add.gif|width=20,height=20,alt=""Add""!|Add support for Log4j API and SLF4J #177. Thanks to Piotr P. Karwasz.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Deprecate org.apache.commons.logging.impl.WeakHashtable without replacement. Thanks to Piotr P. Karwasz.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Deprecate and disable `Jdk13LumberjackLogger` and `Log4JLogger`. Fixes [LOGGING-188|https://issues.apache.org/jira/browse/LOGGING-188]. Thanks to Piotr P. Karwasz.|[pkarwasz|https://commons.apache.org/proper/commons-logging/team-list.html#pkarwasz]|
|!add.gif|width=20,height=20,alt=""Add""!|Deprecate and disable `AvalonLogger` and `LogKitLogger`. Fixes [LOGGING-173|https://issues.apache.org/jira/browse/LOGGING-173]. Thanks to SingingBush.|[pkarwasz|https://commons.apache.org/proper/commons-logging/team-list.html#pkarwasz]|
|!add.gif|width=20,height=20,alt=""Add""!|Add Automatic-Module-Name Manifest Header for Java 9 compatibility. Fixes [LOGGING-165|https://issues.apache.org/jira/browse/LOGGING-165].|[britter|https://commons.apache.org/proper/commons-logging/team-list.html#britter]|
|!fix.gif|width=20,height=20,alt=""Fix""!|BufferedReader is not closed properly. Fixes [LOGGING-163|https://issues.apache.org/jira/browse/LOGGING-163]. Thanks to Kaloyan Spiridonov.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Remove redundant initializer #46. Fixes [LOGGING-177|https://issues.apache.org/jira/browse/LOGGING-177]. Thanks to Arturo Bernal.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Use a weak reference for the cached class loader #71. Thanks to Jakob van Kruijssen, Bruno P. Kinoshita, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Add more entries to .gitignore file #25. Thanks to xiaozhiliaoo.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Minor Improvements #34. Thanks to Arturo Bernal.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|[StepSecurity] ci: Harden GitHub Actions #145. Thanks to step-security-bot, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Replace custom code with `ServiceLoader` call. Fixes [LOGGING-185|https://issues.apache.org/jira/browse/LOGGING-185]. Thanks to Piotr P. Karwasz.|[pkarwasz|https://commons.apache.org/proper/commons-logging/team-list.html#pkarwasz]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix possible NPEs in LogFactoryImpl. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix failing tests #180. Fixes [LOGGING-185|https://issues.apache.org/jira/browse/LOGGING-185]. Thanks to Piotr P. Karwasz.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Deprecate LogConfigurationException.cause in favor of getCause(). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix SpotBugs [ERROR] High: Found reliance on default encoding in org.apache.commons.logging.LogFactory.initDiagnostics(): new java.io.PrintStream(OutputStream) [org.apache.commons.logging.LogFactory] At LogFactory.java:[line 1205] DM_DEFAULT_ENCODING. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix SpotBugs [ERROR] Medium: Class org.apache.commons.logging.impl.WeakHashtable defines non-transient non-serializable instance field queue [org.apache.commons.logging.impl.WeakHashtable] In WeakHashtable.java SE_BAD_FIELD. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Set java.logging as optional module #183. Thanks to Piotr P. Karwasz.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix SpotBugs [ERROR] Medium: Switch statement found in org.apache.commons.logging.impl.SimpleLog.log(int, Object, Throwable) where default case is missing [org.apache.commons.logging.impl.SimpleLog] At SimpleLog.java:[lines 505-522] SF_SWITCH_NO_DEFAULT. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Deprecate org.apache.commons.logging.impl.Jdk13LumberjackLogger.dummyLevel without replacement. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump Java from 6 to 8. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump actions/cache from 2 to 3.0.10 #50, #77, #95, #98, #107, #110. Thanks to Dependabot, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump actions/checkout from 2.3.1 to 3.1.0, #24, #63, #75, #109. Thanks to Dependabot, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump actions/setup-java from 1.4.0 to 3.5.1 #21. Thanks to Dependabot, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump junit from 3.8.1 to 5.9.1 Vintage #23, #38. Thanks to Dependabot, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump clirr-maven-plugin from 2.2.2 to 2.8 #14. Thanks to Dependabot.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump findbugs-maven-plugin from 2.5.2 to 3.0.5 #8. Thanks to Dependabot.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump maven-failsafe-plugin from 2.12 to 3.0.0-M7 #31, #91. Thanks to Dependabot, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump spotbugs-surefire-plugin from 2.22.2 to 3.0.0-M5. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump maven-dependency-plugin from 2.4 to 3.5.0 #29, #79, #117, #131. Thanks to Dependabot.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump maven-pmd-plugin from 3.3 to 3.19.0 #28, #90, #100, #103. Thanks to Dependabot.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump maven-assembly-plugin from 2.5 to 3.4.2 #30, #94, #96. Thanks to Dependabot.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump servlet-api from 2.3 to 2.5 #27. Thanks to Dependabot.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump maven-checkstyle-plugin from 2.7 to 3.2.1 #35, #101, #130. Thanks to Gary Gregory, Dependabot.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump spotbugs-maven-plugin from 4.1.4 to 4.7.2.1 #33, #70, #78, #93, #97, #102, #112. Thanks to Dependabot.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump spotbugs from 4.5.3 to 4.7.3 #81, #87, #92, #104, #115. Thanks to Dependabot.|[ggregory|https://commons.apache.org/proper/commons-logging/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump commons-parent from 52 to 65 #82, #106, #122, #126, #143. Thanks to Dependabot, Gary Gregory.|[kinow|https://commons.apache.org/proper/commons-logging/team-list.html#kinow]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump github/codeql-action from 1 to 2 #86. Thanks to Dependabot.| |"
Plus site: css for Dashboard needs to be fixed - layout is not correct,Bug,Closed,Sakai,software,"When launching the Plus site, all the content is scrunched into one column instead of 2 columns. Compare with a regular site in Sakai that is not a Plus site and the differences are easily seen. Iâ€™m attaching a screenshot for 23x and this site will be available through December 3, 2023.

Main (regular) Sakai site: [https://qa23-maria.nightly.sakaiproject.org/portal/site/7758efdc-073e-4454-956e-6b6ba4410620|https://qa23-maria.nightly.sakaiproject.org/portal/site/7758efdc-073e-4454-956e-6b6ba4410620]

Launch the AGS-Plus-Site-M8 link on the navigation, then click the button to open in a new page - the name of that site is Plus 23xAGS MAR 101. Compare the Dashboard and css in the console from the main site with what is in the Plus site.

*Note:* This turns out to be a simple problem - the initial setup of the !plussite template, set Dashboard to be two-column layout where it needed to be single column layout."
"Tests and Quizzes: Show Feedback Tab Missing in 22.x when selecting ""Feedback during exam""",Bug,Resolved,Sakai,software,"When selecting â€œFeedback during examâ€ or â€œYes, show the student feedback while they are taking the assessment. They can change their answers accordingly,â€ the student doesnâ€™t have the â€œShow Feedbackâ€ tab displayed during the exam. "
Forums: Notifications of moderated topics created by moderators,Bug,Closed,Sakai,software,"When a moderator creates a moderated topic only instructors receive the notification email, the students should receive an email as well.

In this screenshot both the instructor and the student receive the email.

!image-20231201-141106.png|width=617,height=197!

It also gets rid of useless debugging repetitive information that provides nothing.

!Captura de pantalla 2023-12-01 145451.png|width=1289,height=682!"
T&Q: Some assessments cannot be imported when attachments fail to copy,Bug,Closed,Sakai,software,"When importing exams to a new site, some of them are not copied because it fails copying resources.

{noformat}01-jun.-2023 09:20:19.134 ERROR [pool-10-thread-1] o.s.t.a.s.a.AssessmentService.copyAllAssessments null
01-jun.-2023 09:20:19.137 ERROR [pool-10-thread-1] o.s.s.i.SiteManageServiceImpl.transferCopyEntities Error encountered while transferring data for producer: [samigo] from: [GRA_10274_2015] to: [TEST4], java.lang.RuntimeException: java.lang.NullPointerException
01-jun.-2023 09:20:19.140 INFO [pool-10-thread-1] o.s.c.s.s.SectionManagerImpl.syncSections Synchronizing internal sections with externally defined sections in site TEST4{noformat}

This fixes the issue, copying the exam without the affected resource."
T&Q: Ability to reshuffle all the parts using random question pools,Feature Request,Verified,Sakai,software,"Assessment parts have an option to shuffle all the questions of a part using question pools.

!Captura de pantalla 2023-12-01 130844.png|width=1269,height=598!

However, when the number of parts is huge, you need to click on every single part to produce a new assessment.

This feature adds a new option to shuffle all the parts at the same time, the option is hidden by a server property â€˜samigo.all.random.parts.reshuffle.enabled=trueâ€™

!image-20231201-123908.png|width=1686,height=650!"
Polls: Allow instructors to vote infinitely,Feature Request,Closed,Sakai,software,"This feature allows instructors to vote infinitely, by default the feature does nothing, it should be enabled via properties:

'poll.allow.infinite.votes=true'"
LTI: Debug info displaying when instructor launches any lti tool,Bug,Closed,Sakai,software,"This only happens on 23x. Add any LTI Advantage/LTI 1.3 tool or a Plus site. After the instructor adds the tool to their site and launches the tool, the first thing they see is a button to proceed with the launch and --- Unencoded JWT"
Plus: membership not updated for removed students on plus site,Bug,Verified,Sakai,software,"When a student is removed from the main site, the Plus site membership should update also, removing that student. This was working 3 days ago (see [https://sakaiproject.atlassian.net/browse/SAK-49502|https://sakaiproject.atlassian.net/browse/SAK-49502|smart-link] )

Today, a removed user in the main site is not removed from the plus site. Possibly related to [https://sakaiproject.atlassian.net/browse/SAK-49486|https://sakaiproject.atlassian.net/browse/SAK-49486|smart-link] ?

I graded the â€œremovedâ€ user in the Plus site to see if it would cause issues. The â€œmainâ€ site was not affected, but there was an error in the logs for the Plus site."
Site Import doesn't complete after an NPE in AnnouncementsBullhornHandler,Bug,Closed,Sakai,software,"This is a regression introduced by [https://sakaiproject.atlassian.net/browse/SAK-42065|https://sakaiproject.atlassian.net/browse/SAK-42065|smart-link]


When performing a site import and selecting Announcements there is an NPE that occurs and a SecurityAdvisor is never popped/cleared which leads to the rest of the import failing.


{noformat}30-Nov-2023 13:48:58.657 ^[[31mERROR^[[m [pool-12-thread-2] o.s.m.i.MessagingServiceImpl.update Caught exception whilst handling events
java.lang.NullPointerException: null
        at org.sakaiproject.announcement.api.AnnouncementsBullhornHandler.handleEvent(AnnouncementsBullhornHandler.java:98) ~[sakai-announcement-api-22-SNAPSHOT.jar:22-SNAPSHOT]
        at org.sakaiproject.messaging.impl.MessagingServiceImpl.update(MessagingServiceImpl.java:133) ~[?:?]
        at java.util.Observable.notifyObservers(Observable.java:173) ~[?:?]
        at org.sakaiproject.event.impl.BaseEventTrackingService.notifyObservers(BaseEventTrackingService.java:112) ~[?:?]
        at org.sakaiproject.event.impl.ClusterEventTracking.postEvent(ClusterEventTracking.java:330) ~[?:?]
        at org.sakaiproject.event.impl.BaseEventTrackingService.post(BaseEventTrackingService.java:292) ~[?:?]
        at org.sakaiproject.message.util.BaseMessage$BaseMessageChannelEdit.removeMessage(BaseMessage.java:2963) ~[?:?]
        at org.sakaiproject.message.util.BaseMessage$BaseMessageChannelEdit.removeMessage(BaseMessage.java:2928) ~[?:?]
        at org.sakaiproject.announcement.impl.BaseAnnouncementService.transferCopyEntities(BaseAnnouncementService.java:1928) ~[?:?]
        at org.sakaiproject.sitemanage.impl.SiteManageServiceImpl$1.doInTransactionWithoutResult(SiteManageServiceImpl.java:587) ~[?:?]
        at org.springframework.transaction.support.TransactionCallbackWithoutResult.doInTransaction(TransactionCallbackWithoutResult.java:36) ~[spring-tx-5.3.18.jar:5.3.18]
        at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-5.3.18.jar:5.3.18]
        at org.sakaiproject.sitemanage.impl.SiteManageServiceImpl.transferCopyEntities(SiteManageServiceImpl.java:580) ~[?:?]
        at org.sakaiproject.sitemanage.impl.SiteManageServiceImpl.importToolsIntoSite(SiteManageServiceImpl.java:481) ~[?:?]
        at org.sakaiproject.sitemanage.impl.SiteManageServiceImpl.lambda$importToolsIntoSiteThread$0(SiteManageServiceImpl.java:155) ~[?:?]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]
        at java.lang.Thread.run(Thread.java:829) [?:?]
30-Nov-2023 13:48:58.676 ^[[33mWARN^[[m [pool-12-thread-2] o.s.a.i.BaseAnnouncementService.transferCopyEntities .importResources(): exception in handling org.sakaiproject.announcement.api.AnnouncementService : org.sakaiproject.exception.PermissionException: user=5c77ee23-cb6e-4797-b35a-aa2c0422e75e lock=annc.new resource=/announcement/channel/91642bd0-8cc1-4488-aa7e-092e2290c63b/main id: /announcement/channel/91642bd0-8cc1-4488-aa7e-092e2290c63b/main
30-Nov-2023 13:48:58.685 ^[[33mWARN^[[m [pool-12-thread-2] o.s.s.i.SiteManageServiceImpl.saveSite The user cannot update the site 91642bd0-8cc1-4488-aa7e-092e2290c63b, user=5c77ee23-cb6e-4797-b35a-aa2c0422e75e lock=site.upd resource=/site/91642bd0-8cc1-4488-aa7e-092e2290c63b
30-Nov-2023 13:48:58.685 ^[[31mERROR^[[m [pool-12-thread-2] o.s.l.s.LessonBuilderEntityProducer.transferCopyEntitiesImpl user=5c77ee23-cb6e-4797-b35a-aa2c0422e75e lock=site.upd resource=/site/91642bd0-8cc1-4488-aa7e-092e2290c63b
org.sakaiproject.exception.PermissionException: user=5c77ee23-cb6e-4797-b35a-aa2c0422e75e lock=site.upd resource=/site/91642bd0-8cc1-4488-aa7e-092e2290c63b
        at org.sakaiproject.site.impl.BaseSiteService.unlock(BaseSiteService.java:246) ~[?:?]
        at org.sakaiproject.site.impl.BaseSiteService.save(BaseSiteService.java:931) ~[?:?]
        at org.sakaiproject.lessonbuildertool.service.LessonBuilderEntityProducer.transferCopyEntitiesImpl(LessonBuilderEntityProducer.java:1468) ~[?:?]
        at org.sakaiproject.lessonbuildertool.service.LessonBuilderEntityProducer.transferCopyEntities(LessonBuilderEntityProducer.java:1438) ~[?:?]
        at org.sakaiproject.sitemanage.impl.SiteManageServiceImpl$1.doInTransactionWithoutResult(SiteManageServiceImpl.java:587) ~[?:?]
        at org.springframework.transaction.support.TransactionCallbackWithoutResult.doInTransaction(TransactionCallbackWithoutResult.java:36) ~[spring-tx-5.3.18.jar:5.3.18]
        at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-5.3.18.jar:5.3.18]
        at org.sakaiproject.sitemanage.impl.SiteManageServiceImpl.transferCopyEntities(SiteManageServiceImpl.java:580) ~[?:?]
        at org.sakaiproject.sitemanage.impl.SiteManageServiceImpl.importToolsIntoSite(SiteManageServiceImpl.java:481) ~[?:?]
        at org.sakaiproject.sitemanage.impl.SiteManageServiceImpl.lambda$importToolsIntoSiteThread$0(SiteManageServiceImpl.java:155) ~[?:?]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]
        at java.lang.Thread.run(Thread.java:829) [?:?]{noformat}"
Gradebook â€“ Screen reader automatically reads aloud help content when focus lands on the Grades data table â€œKeyboard Navigationâ€ icon,Bug,Open,Sakai,software,"When attempting to tab into the Grades data table (from where the â€œBulk Editâ€ option appears)â€”focus is landing on the â€œKeyboard Navigationâ€ icon, which is prompting the screen reader to automatically read aloud the help content in its entirety.

Â 

This is problematic for several reasons:

Â 

1â€”The act of having the help content read aloud is happening without the screen reader user taking any explicit action to initiate it.

Â 

2â€”There is a lot of information being conveyed, way too much to be of any real use to a screen reader user who just happens upon this help content.

Â 

3â€”Based on extensive keyboard and screen reader testing, its unclear whether any of the keyboard tips and tricks that are described actually work.

Â 

(see attached demo video)

Â 

A more appropriate approach would be to:

Â 

A--Have the user first take some explicit action to select/activate the icon before any of the content gets read aloud;

Â 

B--Include some helper text for how users can access â€œKeyboard Navigationâ€ instructions, similar to how users can press the ALT+0 shortcut to open the CK Editor keyboard command help topics (which actually redirects you to an external page) and pressing the Escape key will close the help topics Â page and return focus to the â€œRich text editorâ€/place the cursor back into the text box

Â 

or C--Remove the â€œKeyboard Navigationâ€ icon altogether, since its impact for keyboard/screen reader users is negligible at best."
Assignments: Extension submit btn is disabled if instructor used 'Save' as opposed to 'Save and Release to Student',Bug,Verified,Sakai,software,"[https://sakaiproject.atlassian.net/browse/SAK-46968|https://sakaiproject.atlassian.net/browse/SAK-46968|smart-link]  allows for an Assignment extension. Its description and test plan call for the instructor to be able to enter the extension date/time in the grader and then select â€˜Saveâ€™.  However using only â€˜Saveâ€™ results in a disabled submit button when the user tries to submit under the extension (see attached image) - 

As seen in nightly 23 when I executed that test plan, the student cannot submit the extended assignment because the Submit button is disabled. i.e. the test plan for [https://sakaiproject.atlassian.net/browse/SAK-46968|https://sakaiproject.atlassian.net/browse/SAK-46968|smart-link] fails.

This may already be pointed in the SAK-46968 as the its test plan copied here shows red text in step 6 stating 

{color:#ff5630}â€œcurrently this does not work, the instructor has to save & release for the extension to become available to the studentâ€{color}

Should that SAK be re-opened as it should be considered a bug that a â€œreturnâ€ is needed to open the extension yet the student had not submitted. The studentâ€™s view shows â€˜Returnedâ€™ in the status when opening the assignment. This could be confusing to the student.

Providing the ability for an extension without first needing to â€œreturnâ€ could be used to grant an extension as an accommodation similar to the Exception option in Tests & Quizzes. Furthermore, the student would be able to see, when opening the assignment, the extension deadline as soon as it was granted be that before or after the assignmentâ€™s normal due date."
Syllabus: Padding needed for create by date - class meeting days,Bug,Open,Sakai,software,"In the UI changes made in the Syllabus tool, I did notice a minor padding issue. The days of the week are right next to their checkbox, rather than having the slight padding that the â€œDisplay dates on caldendarâ€ option has. This makes it a bit harder to read. "
Private Messages: Add a mailto link to the email footer,Improvement,Verified,Sakai,software,"This feature adds a mailto link to the senders' email when a private message is sent with the email out option.

This is the default email.

!image-20231130-144844.png|width=859,height=300!

This is the email after enabling the feature â€˜msgcntr.messages.footer.show.mailto.link=trueâ€™, it also displays the instance and site names, important when you have multiple contexts.

!image-20231130-150432.png|width=863,height=396!"
Regrading released rubric evaluation in assignment and cancel in grader and release all grades removes draft status of eval,Bug,Open,Sakai,software,"Steps to reproduce (see also attached video)

* create assignment with rubric grading
* student submits
* instructor grades using rubrics and releases to student
* instructor regrades assignment using rubrics, but clicks cancel in grader
* In submission overview page instructor clicks Release Grades
* student can see original grade, but changed and canceled rubric evaluation is visible to student."
Lessons: Cannot set scores with comma in subpages,Bug,Closed,Sakai,software,"When using Spanish, you cannot set points in the subpage settings using the comma.

!image-20231130-113521.png|width=964,height=575!"
Lessons: NPE when importing lessons from a site,Bug,Closed,Sakai,software,"Weâ€™ve seen this error many times when importing sites that contain lessons:

{noformat}org.sakaiproject.lessonbuildertool.service.LessonBuilderEntityProducer.transferCopyEntitiesImpl java.lang.NullPointerException{noformat}

In some cases the page object is null, this Jira fixes it."
Content: Add a warning when editing URL resource details,Improvement,Verified,Sakai,software,"Instructors usually confuse the â€˜web address URL' and the URL of a 'URL resourceâ€™, they think that editing this web adress replaces the link

!Captura de pantalla 2023-11-30 113548.png|width=680,height=341!

This feature adds a new warning to tell them that they should edit the content and not the details of the resource.

!Captura de pantalla 2023-11-30 114237.png|width=808,height=245!"
CKEditor: Add FmathEditor plugin to the editor,Feature Request,Closed,Sakai,software,"This feature adds the FMathEditor plugin to the CKEditor.

[https://ckeditor.com/cke4/addon/FMathEditor|https://ckeditor.com/cke4/addon/FMathEditor|smart-link] 

It adds a new option to the CkEditor and renders an equation editor:

!image-20231130-083832.png|width=1674,height=531!

!image-20231130-093344.png|width=1911,height=861!

It is disabled by default, you need to compile Sakai using the flag â€˜-Pckeditor-fmathâ€™ or â€˜-Dckeditor-fmathâ€™, itâ€™s not very consistent right now because it compiles the skin at a times.

!image-20231130-102431.png|width=897,height=401!"
Accessibility: Address insufficient color contrast issues with text/links on Gateway page,Bug,Closed,Sakai,software,"As part of our ongoing efforts to prepare for the Sakai 22 VPAT, we utilized the AXE Pro automated test tool to scan the various pages of our sample Course Site and it flagged several instances of text and links on the Sakai Gateway page that currently have insufficient color contrast (note: SAK-49244 specifically references the AXE Pro results from our scan of Â the 22.X branch, however, based on informal observations of the styling used on 24.X and 23.X, it appears that the new Trinity portal may have insufficient color contrast as well)

Â 

There are two separate types of color contrast issues involving two different elements, both of which I believe are links that appear on the Sakai Gateway page.

Â 

The first issue has to do with WCAG (Web Content Accessibility Guidelines) success criteria 1.4.1, and suggests that the color of the font used for the links lacks sufficient contrast from the surrounding text, and that styling should be used to add underlining to further help the link stand out for low-vision users.

Â 

The second, closely related issue is WCAG 1.4.3, which has to do with the foreground color of the text not having sufficient contrast from the background color being used.

Â 

I have attached an Excel spreadsheet with an excerpt from the AXE issues report which includes more detailed information about each of these specific instances"
WebJars: Upgrade CKEDITOR from 4.21.0 to 4.22.1 (Last update EOL),Bug,Closed,Sakai,software,"Updates to the latest supported CKEditor 4 release. 

We tried upgrading to 4.23.0 but a support license is required:

!image-20231130-075052.png|width=1784,height=124!

[https://ckeditor.com/docs/ckeditor4/latest/guide/dev_errors.html#invalid-lts-license-key|https://ckeditor.com/docs/ckeditor4/latest/guide/dev_errors.html#invalid-lts-license-key|smart-link] 

!image-20231130-082825.png|width=1676,height=701!"
CKEditor: Enable the codesnippet  plugin,Feature Request,Verified,Sakai,software,"The codesnippet plugin is bundled by the CkEditor by default, this feature enables the plugin to the CkEditor.

[https://ckeditor.com/docs/ckeditor4/latest/examples/codesnippet.html|https://ckeditor.com/docs/ckeditor4/latest/examples/codesnippet.html|smart-link] 

!image-20231129-133957.png|width=1066,height=466!

!image-20231129-134810.png|width=941,height=559!"
Assignments: Email notification for assignment released feedback,Bug,Open,Sakai,software,"When feedback is published for an assignment using the option ""Send Feedback to Multiple Students"" > ""Return feedback to selected students now"", students receive an email notification of the submitted assignment.

* Subject: â€œEmail notification for assignment submissionâ€

Perhaps it would be more appropriate to send an email with the message:

* Subject: â€œEmail notification for assignment released feedbackâ€
* Message: â€œA new comment has been added to assignment 'x'. To view the details, click here.

As it currently stands, teachers are not achieving their goal: to have students access the assignment's correction."
Elfinder: Calculating the folder size in large sites cause severe performance issues,Bug,Closed,Sakai,software,"Elfinder displays the folder sizes in a column, in sites with a huge number of folders and files it causes performance issues in every request, the data is not cached and does large DB queries.

!image-20231129-113752.png|width=1536,height=816!

This feature adds a new property to disable that calculation and always show a '-' symbol, the performance is greatly improved, and the folder size is already displayed in resources.

Also updates Elfinder from 2.1.59 to 2.1.65, smoke test elfinder because has security threats.

!image-20240109-125837.png|width=1755,height=864!"
Assignments: Improve NOTE in the dropdown feedback to multiple students,Feature Request,Verified,Sakai,software,"This involves modifying the note that appears in the dropdown 'Send feedback to multiple students,' under the 'Return feedback to selected students now' option to assist teachers in the correction task."
Sections: Restrict switching from manual to externally managed sections to instructors,Feature Request,Verified,Sakai,software,"When sections are managed manually, switching to externally can produce unexpected outcomes in the site, thatâ€™s why the option should be restricted to instructors.

!image-20231129-100641.png|width=1920,height=490!

After this feature instructors cannot switch to externally managed when sections are manual, but institutions must enable the property â€˜sections.restrict.externally.managedâ€™. Admins can do it anyway.

!image-20231129-101656.png|width=1105,height=460!"
Lessons: Improve styling when the file cannot be previewed,Improvement,Closed,Sakai,software,"When a file is embedded in Lessons it can be rendered, such as images, pdfs, videos, etc, however, when a file cannot be rendered, such as an excel or a word file, it displays a message like this:

!image-20231129-080108.png|width=1669,height=400!

This ticket adds styling for that message.

!image-20231129-081418.png|width=1318,height=431!"
Lessons: Deleting a subpage does not display any confirmation,Bug,Closed,Sakai,software,"In Lessons when you delete a subpage it displays a confirmation dialog:

!image-20231129-074436.png|width=1917,height=434!

However, when you edit the subpage thereâ€™s a delete button, and thereâ€™s no confirmation dialog, deletes the subpage without any confirmation.

UPV added a confirmation for that option, but I think that the button should be deleted because we already have a delete action next to the edit action.

!image-20231129-074552.png|width=810,height=607!"
Admin-users: upload csv file fails,Bug,Resolved,Sakai,software,"I have a csv file with the users that I add to the servers after a refresh. My upload works on 23x but is failing on 24x, stating the file is not readable.

!image-20231128-222624.png|width=942,height=260!

From the server logs today (11/29/2023):

{noformat}29-Nov-2023 19:11:43.230 WARN [http-nio-20313-exec-14] o.s.p.c.h.SiteHandler.doSite Post buffer bypass CTI=sakai.users URL=https://trunk-maria.nightly.sakaiproject.org/portal/site/~admin/tool/~admin-210/sakai.filepicker.helper/sakai.resource.type.helper.helper?sakai_action=doPost&flow=save

29-Nov-2023 19:11:47.944 INFO [pool-3-thread-1] o.s.a.i.DbAuthzGroupService.run RefreshAuthzGroupTask.run() refreshed 5 realms in 0.01 seconds, longest realm was /site/!gateway at 0.003 seconds

29-Nov-2023 19:12:28.131 INFO [[elasticsearch content indexer default]] o.s.s.c.a.c.ContentHostingContentProducer.getContent Digesting /content/user/admin/ags_users1.csv

29-Nov-2023 19:12:28.162 WARN [[elasticsearch content indexer default]] o.s.s.c.a.c.ContentHostingContentProducer.getContent Failed to digest /content/user/admin/ags_users1.csv with org.sakaiproject.search.component.adapter.contenthosting.XLContentDigester@330adf47 cause: java.lang.RuntimeException: Failed to read content for indexing 

29-Nov-2023 19:12:28.162 INFO [[elasticsearch content indexer default]] o.s.s.c.a.c.ContentHostingContentProducer.getContent Digested /content/user/admin/ags_users1.csv into 20 characters with Default Digester {noformat}"
"Content: Cannot download selected ZIP files for sites with comma, colon or semicolon in the title",Bug,Closed,Sakai,software,"When the site title contains a comma or semicolon, you can compress some selected resources folder but cannot download the file with the name and the extension.

!image-20231128-162640.png|width=1393,height=542!

Downloads a file without the name and the extension.

!image-20231128-162506.png|width=231,height=68!

And sometimes displays an error.

!image-20231128-162901.png|width=592,height=343!

After the fix it should work:

!image-20231128-164021.png|width=927,height=508!"
"Content: Cannot download ZIP files for sites with comma, colon or semicolon in the title",Bug,Closed,Sakai,software,"When the site title contains a comma or semicolon, you can compress the site folder but cannot download the file, it throws a 404 error.

!image-20231128-145212.png|width=1358,height=397!



!image-20231128-145154.png|width=634,height=173!

28-Nov-2023 16:15:48.554 WARN [http-nio-8080-exec-7] o.s.c.i.BaseContentService.commitResource Exception when trying to get the resource's data: java.lang.IllegalArgumentException: NTFS ADS separator (':') in file name is forbidden."
Portal: Cleanup unused connection-manager,Improvement,Verified,Sakai,software,"This adds the ability to hide the connection manager by an instance property, some institutions donâ€™t want to use this feature.

Thereâ€™s two commits, one commits adds the property, the second commit removes the feature because it was removed in Master but not in 22.x."
T&Q Event Log: Events are not localized,Bug,Closed,Sakai,software,"When an assessment is autosubmitted the event is always stored in English ignoring the instanceâ€™s locale.

!image-20231128-122636.png|width=1674,height=695!

!image-20231128-124104.png|width=1666,height=452!

As you can see the first item is in English while the others are in Spanish.

After the patch is correct, see the first and second rows:

!image-20231128-125545.png|width=1679,height=340!"
Lessons: .anon sites display an error in Oracle,Bug,Closed,Sakai,software,"In anonymous sites Lessons display an error in Oracle

!image-20231128-114503.png|width=1405,height=405!

The error does not happen in MySQL.

!image-20231128-114522.png|width=1145,height=360!

It is related to persistence.

{{28-Nov-2023 06:44:17.427 ERROR [http-nio-20113-exec-5] o.h.e.j.s.SqlExceptionHelper.logExceptions ORA-01400: cannot insert NULL into (""TRUNK"".""LESSON_BUILDER_LOG"".""USERID"")}}"
Update Apache commons lang 3.14.0,Bug,Closed,Sakai,software,[https://commons.apache.org/proper/commons-lang/changes-report.html#a3.14.0|https://commons.apache.org/proper/commons-lang/changes-report.html#a3.14.0|smart-link] 
Plus-samigo-iframe: focus is at the bottom of the iframe instead of the top after adding questions,Bug,Resolved,Sakai,software,"When adding questions from the question pool to samigo (plus), the focus afterward is at the bottom of the page (footer) when it should be at the top of the page."
"Plus site membership: If a student is set to inactive in the main site, their status does not get updated in the plus site",Bug,Closed,Sakai,software,"If a student is set to inactive in the main site, they should also be inactive in the Plus site, but the Plus site continues to have the student as active."
"Plus-samigo in iframe console errors: Uncaught DOMException: Permission denied to access property ""document"" on cross-origin object",Bug,Resolved,Sakai,software,"After launching the single samigo (plus) tool in an iframe, importing a question pool and clicking the pool name, the following error displays in the console. In the video, the iframe launch starts at 1:35.

{noformat}Uncaught DOMException: Permission denied to access property ""document"" on cross-origin object
    resizeFrame samigo-global.js:85
    <anonymous> samigo-global.js:161
    jQuery 10
    <anonymous> samigo-global.js:160
    jQuery 8
        i
        fireWith
        ready
        K
        promise
        <anonymous>
        <anonymous>
        <anonymous>
16 samigo-global.js:85
{noformat}"
Syllabus add drag n drop functionality to the Manage tab,Improvement,Open,Sakai,software,"When the Syllabus Tool UI was improved in [https://sakaiproject.atlassian.net/browse/SAK-48479|https://sakaiproject.atlassian.net/browse/SAK-48479|smart-link] the drag n drop functionality from the read only list view was removed for instructors.

It would be ideal to have this functionality added to the Manage tab, to make it quicker to reorder syllabus items. Currently the Manage tab has buttons to reorder (required for accessibility purposes) but drag n drop would be a nice addition as it is quicker to reorder when there are a lot of items."
Refactorize fixTypeAndId method on BaseContentService,Improvement,Open,Sakai,software,"*fixTypeAndId* method is really a disaster.

[https://github.com/sakaiproject/sakai/blob/master/kernel/kernel-impl/src/main/java/org/sakaiproject/content/impl/BaseContentService.java#L9070|https://github.com/sakaiproject/sakai/blob/master/kernel/kernel-impl/src/main/java/org/sakaiproject/content/impl/BaseContentService.java#L9070]"
Resources: Detect filetype on Jupyter Notebook,Bug,Verified,Sakai,software,"Filetype extension is wrong when trying upload this extension:

* Jupyter Notebook is: text/plain and should be: application/x-ipynb+json"
Update Tika Parsers and dependencies,Bug,Resolved,Sakai,software,Update Tika Parsers and dependencies
Grader-Assignment: Uncaught TypeError: Cannot read properties of null (reading 'displayGradingTab') console error,Bug,Open,Sakai,software,"Currently this problem is not on 23x. In a site with assignments, (NO rubrics), when grading an assignment and saving/releasing the grade, a console error displays:

{noformat}sakai-grader.js?version=ff578508:343  Uncaught TypeError: Cannot read properties of null (reading 'displayGradingTab')
    at SakaiGrader._closeRubric (sakai-grader.js?version=ff578508:343:47)
    at HTMLDivElement.<anonymous> (sakai-grader.js?version=ff578508:319:12)
    at Object.trigger (event-handler.js:292:15)
    at offcanvas.js:155:20
    at v (index.js:254:5)
    at HTMLDivElement.r (index.js:276:5){noformat}"
Plus: First launch of plus site error - o.s.p.ProviderServlet.doError OIDC KeySet did not contain key id (kid),Bug,Closed,Sakai,software,"Launching the plus site the very first time, (after server refresh, new instructor, new course), there is an error: 

23-Nov-2023 09:13:44.862 INFO [http-nio-20413-exec-14] o.s.p.ProviderServlet.doError OIDC KeySet did not contain key id (kid): [https://trunk-maria.nightly.sakaiproject.org/imsblis/lti13/keyset|https://trunk-maria.nightly.sakaiproject.org/imsblis/lti13/keyset]

Launching the plus site again, then loads the plus site and throws the user into the Home page, and the third launch then takes the user into the plus site.

The OIDC KeySet error should not display. I believe this only happens the very first time the tool is launched on a given server. Once an instructor has launched the tool and received the error, any other instructor can add the tool to their site, launch it, and not see the pink page with the error."
Externalize fullCalendar configuration,Feature Request,Closed,Sakai,software,"After the replacement of old Calendar by fullCalendar, some settings are not enabled anymore (for example the number of hours in page that I added in SAK-21242)

We have received complaints of the new Calendar being too high, so a lot of scrollbar is needed to use it.

fullCalendar has a lot of properties to configure [sizing|https://fullcalendar.io/docs/sizing]  and [views|https://fullcalendar.io/docs/timegrid-view] but currently they need to be hardcoded in sakai-calendar.js

I think that some of these properties (contentHeight, aspectRatio, TimeGrid.slotMinTimeâ€¦)  could be externalized to sakai.properties so every institution could personalize the tool."
Deal with multi-group Gradebook instances on external integrations,Improvement,Open,Sakai,software,"As part of the [https://sakaiproject.atlassian.net/browse/S2U-26|https://sakaiproject.atlassian.net/browse/S2U-26|smart-link] work Gradebook allows different instances for managing all the different options offered by the tool to a group site. The scope of that piece of work didnâ€™t cover external integrations, only ensuring they kept working as they used to with standard Gradebook-site instances.

In the future it will be necessary to work on extending this new feature to all the other tools. This ticket might be used for all of them or a different Jira could be created for each tool.

Some of the cases to deal with include: assignments, content-review, samigo, webservices, webapi, basiclti, msgcntr, attendance (contrib) and scorm-cloud (contrib).

Also please note the master version of gradebook is very different to the 22.x gradebook/edu-services one, so it will depend on whether [https://sakaiproject.atlassian.net/browse/S2U-26|https://sakaiproject.atlassian.net/browse/S2U-26|smart-link] is contributed to master and the approach/development will probably be a bit different anyway.

*Development sponsored by Universidad de Murcia*"
Plus Site-Assignments: Graded assignment not released displays 0/100 in main site GB,Bug,Open,Sakai,software,"I added the Plus Site tenant on trunk-mysql8.nightly, then added the external tool, users and course site on trunk-maria.nightly. I added an assignment in the Plus site, had students submit, and graded the assignment. For one student I released the grade, for the other student I only saved the grade and did not release.

For the student with the unreleased grade, the Plus GB is correct, but in the main site, the GB is displaying 0/100.

Iâ€™ve added the server logs for both released and unreleased assignment grading."
Plus Site-GB: Not released GB item shows up in main site GB,Bug,Open,Sakai,software,"I added the Plus Site tenant on trunk-mysql8.nightly, then added the external tool, users and course site on trunk-maria.nightly. In the Plus site, I added a few gradebook items, one which was not to be released to students. On the plus site, the item does not display for the students in the GB, but it is displaying in the main site."
T&Q Serving files from ShowMediaServlet with non-ascii characters causes a 500 error,Bug,Closed,Sakai,software,"This is not strictly a Sakai error and more a Tomcat error, fixed in versions 9.0.71 for the http11 connector.

[https://bz.apache.org/bugzilla/show_bug.cgi?id=66196|https://bz.apache.org/bugzilla/show_bug.cgi?id=66196|smart-link] 

And 9.0.73 for the AJP connector.

[https://bz.apache.org/bugzilla/show_bug.cgi?id=66512|https://bz.apache.org/bugzilla/show_bug.cgi?id=66512|smart-link] 

These two files seems similar but the name is different, one uses this character â€˜[https://www.codetable.net/decimal/769|https://www.codetable.net/decimal/769|smart-link] â€™ while the other one uses 'Ã­'.



[^GRE-150011.zip]

The file with the 769 character cannot be downloaded while accessing the submissions, while the other one works. In Tomcats before 9.0.71 thereâ€™s a 500 error, after that version thereâ€™s a warning and escapes the character.

This software change removes the non-ascii characters so Sakai works in versions before 9.0.71.

{noformat}21-Nov-2023 09:27:13.180 [0mINFO[m [http-nio-20022-exec-23] o.s.t.a.u.s.d.ShowMediaServlet.doPost ****2. setMimeType=null
21-Nov-2023 09:27:13.190 WARNING [http-nio-20022-exec-23] org.apache.coyote.http11.Http11Processor.prepareResponse The HTTP response header [Content-Disposition] with value [attachment;filename=""Eval2_RodriÃŒÂguez.nb"";] has been removed from the response because it is invalid
	java.lang.IllegalArgumentException: The Unicode character [ÃŒÂ] at code point [769] cannot be encoded as it is outside the permitted range of 0 to 255
		at org.apache.tomcat.util.buf.MessageBytes.toBytesSimple(MessageBytes.java:290)
		at org.apache.tomcat.util.buf.MessageBytes.toBytes(MessageBytes.java:261)
		at org.apache.coyote.http11.Http11OutputBuffer.write(Http11OutputBuffer.java:389)
		at org.apache.coyote.http11.Http11OutputBuffer.sendHeader(Http11OutputBuffer.java:368)
		at org.apache.coyote.http11.Http11Processor.prepareResponse(Http11Processor.java:1050)
		at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:375)
		at org.apache.coyote.Response.action(Response.java:207)
		at org.apache.coyote.http11.Http11OutputBuffer.doWrite(Http11OutputBuffer.java:187)
		at org.apache.coyote.Response.doWrite(Response.java:603)
		at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:338)
		at org.apache.catalina.connector.OutputBuffer.flushByteBuffer(OutputBuffer.java:784)
		at org.apache.catalina.connector.OutputBuffer.append(OutputBuffer.java:687)
		at org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:386)
		at org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:364)
		at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:97)
		at java.base/java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:81)
		at java.base/java.io.BufferedOutputStream.write(BufferedOutputStream.java:127)
		at java.base/java.io.FilterOutputStream.write(FilterOutputStream.java:108)
		at org.sakaiproject.tool.assessment.ui.servlet.delivery.ShowMediaServlet.doPost(ShowMediaServlet.java:226)
		at org.sakaiproject.tool.assessment.ui.servlet.delivery.ShowMediaServlet.doGet(ShowMediaServlet.java:84)
		at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
		at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
		at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:496)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
		at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:768)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
		at java.base/java.lang.Thread.run(Thread.java:829){noformat}"
Tests & Quizzes: Error on publishing test without viewing settings,Bug,Closed,Sakai,software,"If tests are created or imported, there is an error if the instructor tries to publish them without viewing settings. 

On the confirmation page, if the instructor clicks the Publish button, it will give an error that a gradebook item could not be created for the test, even if it is not set to create a gradebook item. If the instructor clicks Cancel and relaods the assessment list, the test is still published. If the instructor clicks the Publish button again, they will end up with multiple published copies of the test (with the same name).

From the logs: 

{{21-Nov-2023 16:31:33.220 WARN [http-nio-20313-exec-68] o.s.t.a.u.l.a.PublishAssessmentListener.publish nulljava.lang.NullPointerException: null	at org.sakaiproject.tool.assessment.ui.listener.author.PublishAssessmentListener.publish(PublishAssessmentListener.java:289) [classes/:?]	at org.sakaiproject.tool.assessment.ui.listener.author.PublishAssessmentListener.processAction(PublishAssessmentListener.java:197) [classes/:?]	at javax.faces.event.ActionEvent.processListener(ActionEvent.java:72) [jakarta.faces-2.3.18.jar:2.3.18]	at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:495) [jakarta.faces-2.3.18.jar:2.3.18]	at javax.faces.component.UICommand.broadcast(UICommand.java:211) [jakarta.faces-2.3.18.jar:2.3.18]	at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:847) [jakarta.faces-2.3.18.jar:2.3.18]	at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1396) [jakarta.faces-2.3.18.jar:2.3.18]	at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:58) [jakarta.faces-2.3.18.jar:2.3.18]	at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:76) [jakarta.faces-2.3.18.jar:2.3.18]	at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:177) [jakarta.faces-2.3.18.jar:2.3.18]	at javax.faces.webapp.FacesServlet.executeLifecyle(FacesServlet.java:707) [jakarta.faces-2.3.18.jar:2.3.18]	at javax.faces.webapp.FacesServlet.service(FacesServlet.java:451) [jakarta.faces-2.3.18.jar:2.3.18]	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) [catalina.jar:9.0.76]	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) [tomcat-websocket.jar:9.0.76]	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]	at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:450) [sakai-kernel-api-24-SNAPSHOT.jar:24-SNAPSHOT]	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661) [catalina.jar:9.0.76]	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425) [catalina.jar:9.0.76]	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:357) [catalina.jar:9.0.76]	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294) [catalina.jar:9.0.76]	at org.sakaiproject.jsf.util.SamigoJsfTool.dispatch(SamigoJsfTool.java:365) [classes/:?]	at org.sakaiproject.jsf2.util.JsfTool.doPost(JsfTool.java:249) [jsf2-tool-24-SNAPSHOT.jar:24-SNAPSHOT]	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) [servlet-api.jar:4.0.FR]	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) [servlet-api.jar:4.0.FR]	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) [catalina.jar:9.0.76]	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661) [catalina.jar:9.0.76]	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425) [catalina.jar:9.0.76]	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330) [catalina.jar:9.0.76]	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294) [catalina.jar:9.0.76]	at org.sakaiproject.tool.impl.ActiveToolComponent$MyActiveTool.forward(ActiveToolComponent.java:508) [sakai-kernel-impl-24-SNAPSHOT.jar:?]	at org.sakaiproject.portal.charon.SkinnableCharonPortal.forwardTool(SkinnableCharonPortal.java:1488) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]	at org.sakaiproject.portal.charon.handlers.SiteHandler.doToolBuffer(SiteHandler.java:1318) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]	at org.sakaiproject.portal.charon.handlers.SiteHandler.bufferContent(SiteHandler.java:1152) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]	at org.sakaiproject.portal.charon.handlers.SiteHandler.doSite(SiteHandler.java:520) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]	at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:290) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]	at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:188) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]	at org.sakaiproject.portal.charon.handlers.WorksiteHandler.doPost(WorksiteHandler.java:69) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]	at org.sakaiproject.portal.charon.SkinnableCharonPortal.doPost(SkinnableCharonPortal.java:1161) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) [servlet-api.jar:4.0.FR]	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) [servlet-api.jar:4.0.FR]	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) [catalina.jar:9.0.76]	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]	at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:500) [sakai-kernel-api-24-SNAPSHOT.jar:24-SNAPSHOT]	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) [tomcat-websocket.jar:9.0.76]	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) [catalina.jar:9.0.76]	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) [catalina.jar:9.0.76]	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) [catalina.jar:9.0.76]	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) [catalina.jar:9.0.76]	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) [catalina.jar:9.0.76]	at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:768) [catalina.jar:9.0.76]	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) [catalina.jar:9.0.76]	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) [catalina.jar:9.0.76]	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) [tomcat-coyote.jar:9.0.76]	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) [tomcat-coyote.jar:9.0.76]	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) [tomcat-coyote.jar:9.0.76]	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) [tomcat-coyote.jar:9.0.76]	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) [tomcat-coyote.jar:9.0.76]	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-util.jar:9.0.76]	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-util.jar:9.0.76]	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-util.jar:9.0.76]	at java.lang.Thread.run(Thread.java:829) [?:?]21-Nov-2023 16:31:33.221 1100 [http-nio-20313-exec-68] com.sun.faces.context.ExceptionHandlerImpl.log JSF1073: javax.faces.event.AbortProcessingException caught during processing of INVOKE_APPLICATION 5 : UIComponent-ClientId=publishAssessmentForm:publish, Message=java.lang.NullPointerException21-Nov-2023 16:31:33.221 1100 [http-nio-20313-exec-68] com.sun.faces.context.ExceptionHandlerImpl.log java.lang.NullPointerException	javax.faces.event.AbortProcessingException: java.lang.NullPointerException		at org.sakaiproject.tool.assessment.ui.listener.author.PublishAssessmentListener.publish(PublishAssessmentListener.java:380)		at org.sakaiproject.tool.assessment.ui.listener.author.PublishAssessmentListener.processAction(PublishAssessmentListener.java:197)		at javax.faces.event.ActionEvent.processListener(ActionEvent.java:72)		at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:495)		at javax.faces.component.UICommand.broadcast(UICommand.java:211)		at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:847)		at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1396)		at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:58)		at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:76)		at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:177)		at javax.faces.webapp.FacesServlet.executeLifecyle(FacesServlet.java:707)		at javax.faces.webapp.FacesServlet.service(FacesServlet.java:451)		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)		at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:450)		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661)		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425)		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:357)		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294)		at org.sakaiproject.jsf.util.SamigoJsfTool.dispatch(SamigoJsfTool.java:365)		at org.sakaiproject.jsf2.util.JsfTool.doPost(JsfTool.java:249)		at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)		at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)		at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661)		at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425)		at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330)		at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294)		at org.sakaiproject.tool.impl.ActiveToolComponent$MyActiveTool.forward(ActiveToolComponent.java:508)		at org.sakaiproject.portal.charon.SkinnableCharonPortal.forwardTool(SkinnableCharonPortal.java:1488)		at org.sakaiproject.portal.charon.handlers.SiteHandler.doToolBuffer(SiteHandler.java:1318)		at org.sakaiproject.portal.charon.handlers.SiteHandler.bufferContent(SiteHandler.java:1152)		at org.sakaiproject.portal.charon.handlers.SiteHandler.doSite(SiteHandler.java:520)		at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:290)		at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:188)		at org.sakaiproject.portal.charon.handlers.WorksiteHandler.doPost(WorksiteHandler.java:69)		at org.sakaiproject.portal.charon.SkinnableCharonPortal.doPost(SkinnableCharonPortal.java:1161)		at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)		at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)		at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:500)		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)		at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:768)		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)		at java.base/java.lang.Thread.run(Thread.java:829)	Caused by: java.lang.NullPointerException		at org.sakaiproject.tool.assessment.ui.listener.author.PublishAssessmentListener.publish(PublishAssessmentListener.java:289)		... 69 more}}"
Tests & Quizzes: Error message for minimum point value ,Bug,Open,Sakai,software,"If a user enters an invalid value for a test questionâ€™s minimum point value, the error messages are not friendly. 



At the top of the question: itemForm:minPoints:answerminptr: 's' must be a number consisting of one or more digits.

Below the Minimum Point Value field: itemForm:minPoints:answerminptr: 's' must be a number between 4.9E-324 and 1.7976931348623157E308 Example: 1999999"
Tests & Quizzes: Markup text test error on publish,Bug,Resolved,Sakai,software,"A test newly created using markup text behaves oddly if an instructor selects Publish from the Actions menu without ever viewing the Settings page. 

On attempting to publish, it gives an error that a gradebook item can not be created. The instructor can click Cancel, but on reloading the Tests & Quizzes assessment list, the test is published with the default settings (which on Trunk/Master, does not check the option to create a gradebook item). If the instructor clicks the Publish button again, it publishes the test multiple times (with the same name)



In the server logs: 

{{21-Nov-2023 16:13:29.607 1100 [http-nio-20313-exec-52] com.sun.faces.context.ExceptionHandlerImpl.log JSF1073: javax.faces.event.AbortProcessingException caught during processing of INVOKE_APPLICATION 5 : UIComponent-ClientId=publishAssessmentForm:publish, Message=java.lang.NullPointerException21-Nov-2023 16:13:29.607 1100 [http-nio-20313-exec-52] com.sun.faces.context.ExceptionHandlerImpl.log java.lang.NullPointerException	javax.faces.event.AbortProcessingException: java.lang.NullPointerException		}}

{{at org.sakaiproject.tool.assessment.ui.listener.author.PublishAssessmentListener.publish(PublishAssessmentListener.java:380)		}}
{{at org.sakaiproject.tool.assessment.ui.listener.author.PublishAssessmentListener.processAction(PublishAssessmentListener.java:197)		}}
{{at javax.faces.event.ActionEvent.processListener(ActionEvent.java:72)		}}
{{at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:495)		}}
{{at javax.faces.component.UICommand.broadcast(UICommand.java:211)		}}
{{at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:847)		}}
{{at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1396)		}}
{{at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:58)		}}
{{at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:76)		}}
{{at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:177)		}}
{{at javax.faces.webapp.FacesServlet.executeLifecyle(FacesServlet.java:707)		}}
{{at javax.faces.webapp.FacesServlet.service(FacesServlet.java:451)		}}
{{at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)		}}
{{at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)		}}
{{at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)		}}
{{at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)		}}
{{at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)		}}
{{at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:450)		}}
{{at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)		}}
{{at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)		}}
{{at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661)		}}
{{at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425)		}}
{{at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:357)		}}
{{at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294)		}}
{{at org.sakaiproject.jsf.util.SamigoJsfTool.dispatch(SamigoJsfTool.java:365)		}}
{{at org.sakaiproject.jsf2.util.JsfTool.doPost(JsfTool.java:249)		}}
{{at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)		}}
{{at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)		}}
{{at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)		}}
{{at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)		}}
{{at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661)		}}
{{at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425)		}}
{{at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330)		}}
{{at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294)		}}
{{at org.sakaiproject.tool.impl.ActiveToolComponent$MyActiveTool.forward(ActiveToolComponent.java:508)		}}
{{at org.sakaiproject.portal.charon.SkinnableCharonPortal.forwardTool(SkinnableCharonPortal.java:1488)		}}
{{at org.sakaiproject.portal.charon.handlers.SiteHandler.doToolBuffer(SiteHandler.java:1318)		}}
{{at org.sakaiproject.portal.charon.handlers.SiteHandler.bufferContent(SiteHandler.java:1152)		}}
{{at org.sakaiproject.portal.charon.handlers.SiteHandler.doSite(SiteHandler.java:520)		}}
{{at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:290)		}}
{{at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:188)		}}
{{at org.sakaiproject.portal.charon.handlers.WorksiteHandler.doPost(WorksiteHandler.java:69)		}}
{{at org.sakaiproject.portal.charon.SkinnableCharonPortal.doPost(SkinnableCharonPortal.java:1161)		}}
{{at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)		}}
{{at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)		}}
{{at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)		}}
{{at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)		}}
{{at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:500)		}}
{{at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)		}}
{{at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)		}}
{{at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)		}}
{{at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)		}}
{{at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)		}}
{{at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)		}}
{{at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)		}}
{{at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)		}}
{{at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)		}}
{{at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)		}}
{{at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:768)		}}
{{at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)		}}
{{at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)		}}
{{at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)		}}
{{at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)		}}
{{at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)		}}
{{at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)		}}
{{at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)		}}
{{at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)		}}
{{at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)		}}
{{at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)		}}
{{at java.base/java.lang.Thread.run(Thread.java:829)	Caused by: java.lang.NullPointerException		}}
{{at org.sakaiproject.tool.assessment.ui.listener.author.PublishAssessmentListener.publish(PublishAssessmentListener.java:289)		... 69 more}}"
Plus: Improve Launch Logic and use Executor Pattern For NRPS Retrieval,Bug,Closed,Sakai,software,"While investigating several other of the linked JIRAs, I did a detailed review and testing of the Plus ""first launch"" code because I thought those JIRAs were caused by my code.  After all the investigation of those JIRAs it turns out the tutorial was the problem all along.

But during the review, in hopes of catching whatever error was happening, I strengthened some areas of the first launch code.

Some error messages have been improved, some error messages have been added, some extra checking has been added to catch inconsistencies in new site setup earlier, and the initial roster pull has been moved from a Thread in ProviderServlet to an Executor in the PlusServiceImpl - following the example in RefreshAuthZGroups.

So while it was working before and there is no user visible change, these changes should improve the long term performance and reliability of Plus launches."
"Plus: (duplicate, the same JIRA was saved twice) Improve Launch and Use Executor Pattern For NRPS Retrieval",Bug,Closed,Sakai,software,This was a mistakenly filed duplicate of [https://sakaiproject.atlassian.net/browse/SAK-49486|https://sakaiproject.atlassian.net/browse/SAK-49486|smart-link] and should be closed.  Or rather should never been filed ðŸ™‚ 
Tests & Quizzes > Settings > Exceptions > Add Duplicate Functionality,Feature Request,Open,Sakai,software,"Imagine you are an instructor teaching a large class (100+ students).Â 

You host knowledge checks/quizzes/exams in the Tests & Quizzes tool. For a given exam you may have something like:

* 3-4 student athletes who get an extra day to complete the exam.
* 1 student with a family emergency who gets an extra week to complete the exam.
* 2 students whom you want to extend the exam deadline given random, unplanned circumstances or issues.Â 
* 3 students who have the normal deadline but need time and a half on the exam.
* 2 students who have the normal deadline but need double the time on the exam.
* 1 person who gets time and a half, but also a deadline extension on the exam because he or she is out sick.

These are a lot of exceptions to create.Â 

For each exception, you must make new entries for the available date, the due date, the time limit, and the late submission deadline. You should remember to proofread all of these as you go, because you may have made a mistake somewhere. If you get interrupted at any point during this process and forget to click â€œSave,â€ you may lose some or all of this work.

With each new exam, you feel like you are drowning in exceptions and you need ways to speed up and/or make the exception creation process more efficient.Â 

To that end, I propose new functionality that would allow instructors to duplicate the exception settings of an existing exception. This way, instructors can capitalize on the hard work theyâ€™ve already done for an existing exception, and then make minor adjustments as needed for the duplicated exception.

In *Step 1* (see screenshot), an instructor could click a new â€œDuplicateâ€ button next to an existing exception whose configuration they wish to mirror.

As *Step 2* (see screenshot) shows, once the instructor clicks the â€œDuplicateâ€ button, the exception parameters (_except the user/group_) of the duplicated exception populates in the â€œAdd New Exceptionâ€ fields. From here, the instructor needs only select a different user/group and fine-tune any needed parameters.

For example, say an instructor wishes to keep the exam window of an existing exception the same (i.e. Available Date, Due Date, and Late Submission Date), and only make an adjustment to student/group user(s) and the time-limit. This process would allow the instructor to quickly duplicate the multiple entries of the existing exception and then simply update the intended user(s) and time-limit.

Note that, in this proposal, the â€œDuplicateâ€ button isnâ€™t technically _duplicating_ _an_ _exception_, per se. All itâ€™s doing is auto-filling the â€œAdd New Exceptionâ€ fields with the configuration of the chosen exception to be duplicated.Â 

Once the instructor is finished with the edits, the instructor can just click â€œAdd New Exception.â€"
Autoremoval of folders is not working with the new permissions,Bug,Closed,Sakai,software,"[https://sakaiproject.atlassian.net/browse/SAK-46030|https://sakaiproject.atlassian.net/browse/SAK-46030|smart-link] changed the permissions of Dropbox, isolating them from Resources permissions.

In BaseContentService, in the method createDropboxCollection there is [some code|https://github.com/sakaiproject/sakai/blob/b9416148a257e174bb0167727baa54e99991e682/kernel/kernel-impl/src/main/java/org/sakaiproject/content/impl/BaseContentService.java#L10064] that tries to delete the folders of every non existing user in the site. Before the change, if the current user had the content.delete.any permission, the folders were deleted.

This behaviour has changed with the current permissions. The needed permission is dropbox.delete.any right now. However, this permission is disabled in [other code|https://github.com/sakaiproject/sakai/blob/b9416148a257e174bb0167727baa54e99991e682/kernel/kernel-impl/src/main/java/org/sakaiproject/content/impl/DropboxAuthzHandler.java#L125] of DropboxAuthzHandler, not allowing â€œdestructive permissionsâ€.

This causes that the folders are not deleted and logs reflects a WARN in every attempt:

{noformat}BaseContentService.createDropboxCollection createDropboxCollection(): Unable to delete collection due to lack of permission{noformat}

The exception says that â€œcontent.delete.anyâ€ is needed, but this permission is not used. The checked permission is â€œdropbox.delete.anyâ€ but is tagged as a â€œdestructive permissionâ€ and not allowed.

Just allowing the destructive permissions (sending true as the last parameter of isAuthorizedOnEntity method) restores the old behaviour, but Iâ€™m afraid this could break other things.

I think that [~accountid:557058:3f0964c4-a9d3-4cc7-9473-78b4f46c68ad] should take a look, as he developed the new permissions.

Maybe [https://sakaiproject.atlassian.net/browse/SAK-47731|https://sakaiproject.atlassian.net/browse/SAK-47731|smart-link] could be also related to this change, but Iâ€™m not sure."
T&Q: More instructions for calculated questions about decimals,Feature Request,Verified,Sakai,software,"This feature adds more instructions to calculated questions about decimals.

Before:

!pre.png|width=983,height=380!

After:

!image-20231120-135505.png|width=1673,height=593!

It adds a 5th step warning about decimals."
T&Q: Clearer instructions when the assessment is being edited,Feature Request,Closed,Sakai,software,"When an assessment is being edited the instructor needs to republish it. 

Sometimes instructors lose submissions because the option is confused, this feature adds a text to clarify the checkbox behavior.

Before:

!pre.png|width=1271,height=197!

After:

!after.png|width=1236,height=155!

UPDATE: Closing this as comes from long time ago where the information was no present in the UI and there was no confirmation:

!image-20231214-095614.png|width=1661,height=542!"
"T&Q: Report question pool events (Add, copy, move, grant, revoke)",Feature Request,Verified,Sakai,software,"This feature adds more events to actions on question pools such as add, copy, move, grant and revoke.

!image-20231120-102828.png|width=1282,height=168!"
T&Q: Show a message when loading submissions,Feature Request,Verified,Sakai,software,"When browsing assessment submissions in large classes loading submissions can take a while when switching from â€˜All submissionsâ€™ and â€˜Highest submissionsâ€™, some instructors just donâ€™t wait and they refresh the tool, starting over again.

This simple feature adds a message and an spinner when swiching from views.

Example:

!image-20231120-095943.png|width=831,height=297!"
T&Q: Duplicate controls in SAM Lite,Feature Request,Verified,Sakai,software,"This feature duplicates the buttons in Samigo Lite. Seems that instructors sometimes put very very long assessments and they have to scroll to the bottom of the page to go next, thatâ€™s why UPV duplicated the buttons above the text area.

Before:

!pre.png|width=1271,height=587!

After:

!after.png|width=1252,height=635!"
Update Apache commons compress 1.25.0,Bug,Closed,Sakai,software,[https://commons.apache.org/proper/commons-compress/changes-report.html#a1.25.0|https://commons.apache.org/proper/commons-compress/changes-report.html#a1.25.0|smart-link] 
"Plus: When using 2 different servers, on first launch the instructor is sent to ""Home"" on the Plus server",Bug,Resolved,Sakai,software,"All previous testing of the Sakai Plus Site was done with the tenant, course and plus site all being on the same server.

With the tenant being on one server, (I used mysql8), the tool and course added to a different server, (I used maria), the first launch of the plus site briefly displays the dashboard for the plus site, then kicks the instructor out of the plus site to the â€œHomeâ€ page on that server.

Iâ€™m attaching the log files for both tests - the same server and using 2 servers, in case there are any clues why there is a difference.

This is not a bug ðŸ˜ž - This is how the tutorial works - when the very first launch for a brand new user is not to the /portal URL, the tutorial foreces the user to navigate to /portal and then displays the tutorial.

The solution for Plus servers is just to turn the tutorial off in sakai.properties.

*portal.use.tutorial=false*

Or for plus folks - just accept the tutorial as is and then navigate to the right site afterwards.

If folks really feel strongly - feel free to file a Jira on tutorial."
"Tests & Quizzes - Background Color Picker - Set Default Color to White, Align Picker with Input Box",Bug,Open,Sakai,software,"h1. Issue

First, we are grateful to the community for making the background color for Tests & Quizzes available again! This is an optional feature (see SAK-49293). While reviewing this feature, we see two concerns/areas for improvement. 

# *Picker Default Color*. The pickerâ€™s default color seems to be black (#000000). We are worried that some professors may think that they need to set or change the color, otherwise the background will be black. This isnâ€™t true, of course. The color will only change if a Hex value is present in the input field. But we foresee possible confusion by some professors (and unnecessary selection of a color which may impact user skin selections).
# *Picker Location Offset*. The pickerâ€™s location is below the box. This is not an ideal placement. It would be more intuitive for the input box and the picker to be in alignment.

h1. Proposals

# *Change Picker Default Color to White* (#ffffff)
## We would like the default color for the picker to match the default color for the assessment (which is generally white (#ffffff)). Our intent is to avoid faculty confusion that the background will be black (#000000) and they think they need to set a color (when they donâ€™t need to unless they want a special color).
## Another option would be to add a system property or option for an institution to set the starting color of the picker. Perhaps a school might want to set the color to match a university brand color or something.
# *Align Picker with the Input Box*
## Please move the picker to appear to the right of the input box for the Hex value. This looks more professional, and itâ€™s more intuitive for the tool to align with the field that will be affected by it. 

Thank you!"
T&Q Include the editor in the student's rationale (Multiple Choice),Feature Request,Closed,Sakai,software,"The feature adds the option to the students to use the editor in the rationale field when answering multiple choice questions.

Iâ€™m not enchanted with the current UI, I contributed as itâ€™s present in UPV, but I believe we should improve it. Weâ€™ve done something similar in a S2U ticket.

[https://github.com/sakaiproject/sakai/commit/f0151bf07426ffaa328ec7a0c5eba4f8b2eedf76#diff-f87b5fbb8655475fa889ade790ee4df677d67aeac46352a152439dadfde029d4R171|https://github.com/sakaiproject/sakai/commit/f0151bf07426ffaa328ec7a0c5eba4f8b2eedf76#diff-f87b5fbb8655475fa889ade790ee4df677d67aeac46352a152439dadfde029d4R171|smart-link] 

[https://github.com/sakaiproject/sakai/commit/f0151bf07426ffaa328ec7a0c5eba4f8b2eedf76#diff-7970622b3992260296bc39c53bf0905a5aba44eb8464720ef3d28bd5efd2bb68R102|https://github.com/sakaiproject/sakai/commit/f0151bf07426ffaa328ec7a0c5eba4f8b2eedf76#diff-7970622b3992260296bc39c53bf0905a5aba44eb8464720ef3d28bd5efd2bb68R102|smart-link] 

Looks better updating the current CSS because â€˜toggle_link_containerâ€™ is aligned on the right side.

!image-20231117-131501.png|width=564,height=425!



Before:

!before.png|width=720,height=524!

After:

!after.png|width=1225,height=597!

After toggled:

!after_toggled.png|width=1189,height=578!

After improve the UI:

!image-20231214-093920.png|width=1147,height=916!"
Forums: Email notifications are sent from a wrong address,Bug,Closed,Sakai,software,"When forums send email notifications they are sent with a wrong â€˜fromâ€™ address, it takes the value from the translation files which is wrong, it should take the from address from the property.

[https://github.com/sakaiproject/sakai/blame/master/msgcntr/messageforums-app/src/java/org/sakaiproject/tool/messageforums/ForumsEmailService.java#L104|https://github.com/sakaiproject/sakai/blame/master/msgcntr/messageforums-app/src/java/org/sakaiproject/tool/messageforums/ForumsEmailService.java#L104]

This has been reported for at least three institutions including some folks in the sakai-dev.

Some evidences.

An email sent from private messages (Sent correctly through the SMTP server)

!image-20231117-115334.png|width=865,height=284!

An email sent from forums (Not sent through the SMTP server)

!image-20231117-115404.png|width=856,height=266!

You can see in the second email that the FROM address is no-reply@localhost instead of â€˜goodsender@server.comâ€™"
T&Q Ability to export the student scores,Feature Request,Verified,Sakai,software,"Provides a feature to download the student submissions and the scores in Excel format.

I contributed this as is, Iâ€™m not a big fan of the button close to the cancel button, I think it must be moved.

!image-20231117-121817.png|width=959,height=208!

(Update) Now the button is close to the filters, in a similar position of the assignments tool:

!image-20231214-084620.png|width=1688,height=687!



!image-20231117-121827.png|width=614,height=799!"
T&Q Include question text and score when exporting responses,Feature Request,Verified,Sakai,software,"When the responses are exported in T&Q they donâ€™t contain the students' response and the score.

!image-20231117-095938.png|width=1791,height=67!

This feature adds that information to the excel file.

!image-20231117-095902.png|width=1834,height=69!"
Private Messages: When a new PM is sent report the sendEmail option to the event,Feature Request,Verified,Sakai,software,"When a private message is sent thereâ€™s a new event reported, but it does not contain information if the message was sent to the email or not. This feature adds this information to the event.

!image-20231117-080836.png|width=1329,height=131!

In this screenshot you can see the difference with and without the feature."
Private Messages: BCC should not display the undisclosed recipients label,Feature Request,Closed,Sakai,software,"When a private message is sent using the BCC field, the email states â€˜undisclosed recipientsâ€™, revealing to the destinatary that it has other people in the email.

This feature adds a new property to hide this label."
Plus-Single tool: iframe and new window not resizing as pages change in samigo,Bug,Closed,Sakai,software,"The htm resize test passed, but when launching the Plus single tool samigo, whether in an iframe or in a new page, the page does not resize when navigating to samigo pages that have a different page height."
Plus-Single tool launch displays the incorrect page the first time around,Bug,Resolved,Sakai,software,"I added the tenant on mysql8, having the tool launch in a new window. The tool was added to maria, then added to a site.

24x: [https://trunk-maria.nightly.sakaiproject.org/,|https://trunk-maria.nightly.sakaiproject.org/,] build: eed8c796

First launch: OIDC KeySet did not contain key id (kid): [https://trunk-maria.nightly.sakaiproject.org/imsblis/lti13/keyset|https://trunk-maria.nightly.sakaiproject.org/imsblis/lti13/keyset] - {color:#bf2600}incorrect{color}

Second launch: instructor gets sent to the mysql8 server and the Dashboard displays - {color:#bf2600}incorrect{color}

Third launch: Assessment page on mysql8 displays

Every subsequent launch will now load the Assessments page

Launching the tool in an iframe:

I will need to test tomorrow after the server resets and I start with the users and brand new sites again for the OIDC error.

Currently, a new instructor with a new site receives the Dashboard from the Plus site in the iframe - {color:#bf2600}incorrect{color}

The next launch loads the assessments page (correct) and will launch the assessments page every time after that.

Error that displays in the console on the launch that displays the Dashboard page (incorrect behavior): 
TypeError: this.baseI18n is undefined (see attached file)"
Add an option for students to be able to download all of their submissions across courses,Feature Request,Open,Sakai,software,"Students often want a way to download all of their own assignment submissions across courses in bulk. Essentially, we need a way for an individual user to select and download all of their own file attachments/submissions for all sites in which they a member. (Other LMSs like [Canvas |https://community.canvaslms.com/t5/Student-Guide/How-do-I-download-assignment-submissions-from-all-my-courses/ta-p/298]let users do this.) 

It would be really nice if there were a way to do this in Sakai. Iâ€™m attaching a rough mockup of what the UI for this might look like and where it could be located. Iâ€™m thinking that putting the option within the Account Menu might make sense, but it could also potentially live within Preferences or Profile.

Iâ€™ve added several components to this Jira, since students submit files in a number of different places, and while Assignments would be the primary place to look for submissions, they might also exist in other tools. We would need to figure out if it is possible to include other tools besides Assignments in the download. If it is possible to include things like Discussion posts/attachments, Tests & Quizzes submissions, etc. then we might also want to include an option to select the tool in addition to the type of submission. (Iâ€™ve only included type in my image below.) Or, at a minimum, if it is only feasible to make this work in Assignments, then some explanatory text at the top should tell users exactly what is included, in order to set appropriate expectations. 

*Link to get to the Download My Submissions Screen:*

!download-submissions-link-mockup.jpg|width=460,height=902!



*Download submissions selection UI:*

!download-submissions-UI-mockup.jpg|width=91.66666666666666%!



*Example file structure of what the resulting zip file download might look like:*

!download-submissions-zip-folders.jpg|width=297,height=516!"
T&Q Ability to print the full exam on the same page,Feature Request,Verified,Sakai,software,"This allow users to print the full exam on the same page instead of splitting the exam by parts.

!image-20231116-162807.png|width=1320,height=209!"
Realms Improve performance in Oracle,Improvement,Closed,Sakai,software,Improves the performance when counting realms (getCountRealmRoleFunctionSql)
T&Q Ability to set the rounding decimals when grading,Feature Request,Closed,Sakai,software,"T&Q uses 2 decimals for rounding scores by default, this value is hardcoded in the source. UPV has been using 4 decimals for many years, institutions might want to use 4 decimals instead of 2."
T&Q The event 'sam.assessment.graded.auto' does not contain any info,Feature Request,Verified,Sakai,software,"When the assessment is submitted by the student the event â€˜sam.assessment.graded.autoâ€™ provides zero information, this feature request adds more information to the event."
T&Q: Rare bug when copying images between questions from question pools,Bug,Closed,Sakai,software,Weâ€™ve seen a bug when copying images between questions from question pools.
T&Q: Report an event when an instructor allows assessment retakes,Feature Request,Verified,Sakai,software,"Sometimes instructors allow students to retake specific exams, and thereâ€™s no evidence in the event log about the action.

UPV has found this event very useful when doing support and analyzing support tickets, for that reason they log this event since 2010-ish."
Contributions from UPV to Sakai Master (Umbrella),Feature Request,In Progress,Sakai,software,"UPV is a long time contributor and Sakai adopter, we have many custom patches that we want to contribute to Sakai Master, weâ€™ve been migrating these patches in every upgrade for more than 10 years.

We all understand that the community might want to discuss them and make a casting, accepting and rejecting depending on what value provides and technical implications, feel free to weigh in in the contributions and express pros/cons.

UPV is willing to provide support to these tickets from the technical and pedagogical perspective."
Restore FontAwesome in Sakai 23 - Also restore the RTE FontAwesome Plug In,Bug,Resolved,Sakai,software,"Please put fontawesome back into Sakai 23.  I understand that we switched all the Sakai markup to Bootstrap 5.0 Icons but there are likely > 100,000 HTML documents in Sakai that include Fontawesome icons.  There is no need to break these.   We should accept the fact that we will include fontawesome and the fontawesome picker in Sakai as backwards compatibility forever.

We _could_ make a property that is â€œinclude fontawesomeâ€ that should definately default to â€œinclude fontawesomeâ€ out of the box.  Thinking abut the new customers who will be starting with Sakai 23 - I see no reason not to let them use fontawesome in their user-entered HTML forever."
Lessons: Upgrade pdf-js from 2.9.359 to 4.0.189 ,Bug,Verified,Sakai,software,"When [https://sakaiproject.atlassian.net/browse/SAK-49445|https://sakaiproject.atlassian.net/browse/SAK-49445|smart-link] was contributed it only upgraded the webcomponents use of pdf-js but not Lessons. 

This caused Lessons to fail rendering PDFs because itâ€™s using the same viewer.

!image-20231116-123726.png|width=1903,height=725!"
"Plus-samigo, 2 servers, student ends up in plus site after quiz submission with no way to get back to the main site",Bug,Resolved,Sakai,software,"I created the tenant on trunk-mysql8.nightly and added the tool on trunk-maria.nightly. The site was created on trunk-maria.nightly.

Neither the instructor or student should have access to the Plus site because this was a single tool added. The student entered their site on maria, took the quiz, submitted and after hitting Continue, ended up on the mysql8 server with no way to get back to the main site."
"Plus: Single tool, 2 servers, date picker not available: Uncaught DOMException: Failed to read a named property 'sakai' from 'Window': Blocked a frame with origin ""https://trunk-mysql8.nightly.sakaiproject.org"" from accessing a cross-origin frame.",Bug,Resolved,Sakai,software,"I created the tenant on trunk-mysql8.nightly and added the tool on trunk-maria.nightly. The site was created on trunk-maria.nightly and the tool opens in an iframe.

The first part of the video shows the initial launch for the instructor ( [https://sakaiproject.atlassian.net/browse/SAK-49443|https://sakaiproject.atlassian.net/browse/SAK-49443|smart-link] ), the instructor then imported a question pool and created a quiz. Clicking on settings, there was a console error and no date pickers:

{noformat} lang-datepicker.js:1877  Uncaught DOMException: Failed to read a named property 'sakai' from 'Window': Blocked a frame with origin ""https://trunk-mysql8.nightly.sakaiproject.org"" from accessing a cross-origin frame.
    at Plugin.init (https://trunk-mysql8.nightly.sakaiproject.org/library/js/lang-datepicker/lang-datepicker.js:1877:24)
    at new Plugin (https://trunk-mysql8.nightly.sakaiproject.org/library/js/lang-datepicker/lang-datepicker.js:1550:7)
    at HTMLInputElement.<anonymous> (https://trunk-mysql8.nightly.sakaiproject.org/library/js/lang-datepicker/lang-datepicker.js:1922:42)
    at Function.each (https://trunk-mysql8.nightly.sakaiproject.org/library/webjars/jquery/1.12.4/jquery.min.js?version=44920543:2:2881)
    at a.fn.init.each (https://trunk-mysql8.nightly.sakaiproject.org/library/webjars/jquery/1.12.4/jquery.min.js?version=44920543:2:846)
    at $.fn.<computed> [as sakaiDateTimePicker] (https://trunk-mysql8.nightly.sakaiproject.org/library/js/lang-datepicker/lang-datepicker.js:1920:15)
    at localDatePicker (https://trunk-mysql8.nightly.sakaiproject.org/library/js/lang-datepicker/lang-datepicker.js:1931:23)
    at HTMLDocument.<anonymous> (https://trunk-mysql8.nightly.sakaiproject.org/portal/plus/e8ace096-8a3c-4949-bb4d-eef09dd9dfbf/tool/9195cfa7-5f2b-41a8-89a1-1b8b6b1111ae/jsf/author/editAssessment:187:11)
    at i (https://trunk-mysql8.nightly.sakaiproject.org/library/webjars/jquery/1.12.4/jquery.min.js?version=44920543:2:27449)
    at Object.fireWith [as resolveWith] (https://trunk-mysql8.nightly.sakaiproject.org/library/webjars/jquery/1.12.4/jquery.min.js?version=44920543:2:28213){noformat}"
Lessons: Subpage with illegal characters modal freezes,Bug,Closed,Sakai,software,"If a user creates a subpage with one of the forbidden characters - | [ ] ^ ` \ { } - an error appears, but the modal is entirely disabled. No fields or buttons can be clicked or modified. The only way out of it is to refresh the page. 

!image-20231115-170727.png|width=797,height=412!

This only happens on 23 and master - not on 22."
Handle Height Setting and Auto Resize in LTI Left Nav Tool,Bug,Closed,Sakai,software,"The External Tool that we add to the left navigation does not handle the height setting correctly and does not handle the auto-resize post message from within the tool.

I tested and this is also a problem with 22-x"
Handle Height Setting and Auto Resize in LTI Left Nav Tool,Bug,Closed,Sakai,software,The External Tool that we add to the left navigation does not handle the height setting correctly and does not handle the auto-resize post message from within the tool.
Webcomponents: Build is broken in Master.,Bug,Verified,Sakai,software,"The webcomponents folder cannot be compiled an deployed in Master (8bb179bb1a12775d16a61736d9b92fba26096ccf)

{noformat}[INFO] Analyzing 116 files...
[INFO]
[INFO] D:/workspace/sakai-apereo/webcomponents/tool/src/main/frontend/js/sakai-button.js
[INFO]
[INFO]     This tag isn't closed.
[INFO]     32:  <slot>
[INFO]     no-unclosed-tag
[INFO]
[INFO]
[INFO] D:/workspace/sakai-apereo/webcomponents/tool/src/main/frontend/js/sakai-course-card.js
[INFO]
[INFO]     You are binding a non-primitive type 'never'. This could result in binding the string ""[object Object]"". Use '.' binding instead?
[INFO]     214:  .map(t => html`<div><a href=""${this._toolUrls[t]}""
[INFO]     no-complex-attribute-binding
[INFO]
[INFO]
[INFO]     You are binding a non-primitive type 'never'. This could result in binding the string ""[object Object]"". Use '.' binding instead?
[INFO]     214:  ooltip`]}""><sakai-icon type=""${t}"" size=""small"" ha
[INFO]     no-complex-attribute-binding
[INFO]
[INFO]
[INFO] D:/workspace/sakai-apereo/webcomponents/tool/src/main/frontend/js/sakai-dialog-content.js
[INFO]
[INFO]     This tag isn't closed.
[INFO]     47:  <div id=""container"">
[INFO]     no-unclosed-tag
[INFO]
[INFO]
[INFO] D:/workspace/sakai-apereo/webcomponents/tool/src/main/frontend/js/sakai-home-dashboard.js
[INFO]
[INFO]     This tag isn't closed. Custom elements cannot be self closing.
[INFO]     156:  <sakai-widget-panel
[INFO]     no-unclosed-tag
[INFO]
[INFO]
[INFO] D:/workspace/sakai-apereo/webcomponents/tool/src/main/frontend/js/sakai-lti-iframe.js
[INFO]
[INFO]     The 'allowfullscreen' attribute is of boolean type but you are not using a boolean binding. Change to boolean binding?
[INFO]     133:  allowfullscreen=""true"" webkitallo
[INFO]     no-boolean-in-attribute-binding
[INFO]
[INFO]
[INFO] D:/workspace/sakai-apereo/webcomponents/tool/src/main/frontend/js/sakai-pageable-element.js
[INFO]
[INFO]     This attribute binds the type 'number | undefined' which can end up binding the string 'undefined'. Use the 'ifDefined' directive?
[INFO]     101:  d=""pager""><sakai-pager count=""${this.count}"" curren
[INFO]     no-nullable-attribute-binding
[INFO]
[INFO]
[INFO] D:/workspace/sakai-apereo/webcomponents/tool/src/main/frontend/js/sakai-permissions.js
[INFO]
[INFO]     This tag isn't closed. Custom elements cannot be self closing.
[INFO]     167:  <sakai-group-picker id=""permissions
[INFO]     no-unclosed-tag
[INFO]
[INFO]
[INFO]     You are assigning the primitive 'string' to a non-primitive type 'any[]'. Use '.' binding instead?
[INFO]     167:  issions-group-picker"" groups=""${JSON.stringify(thi
[INFO]     no-complex-attribute-binding
[INFO]
[INFO]
[INFO] D:/workspace/sakai-apereo/webcomponents/tool/src/main/frontend/js/sakai-pronunciation-player.js
[INFO]
[INFO]     This attribute binds the type 'string | undefined' which can end up binding the string 'undefined'. Use the 'ifDefined' directive?
[INFO]     51:  src=""${this.src}""
[INFO]     no-nullable-attribute-binding
[INFO]
[INFO]
[INFO] D:/workspace/sakai-apereo/webcomponents/tool/src/main/frontend/js/sakai-submission-messager.js
[INFO]
[INFO]     This tag isn't closed.
[INFO]     63:  <option value=""1"" ?selected=$
[INFO]     no-unclosed-tag
[INFO]
[INFO]
[INFO]     This tag isn't closed.
[INFO]     64:  <option value=""2"">${this.i18n
[INFO]     no-unclosed-tag
[INFO]
[INFO]
[INFO]     This tag isn't closed.
[INFO]     65:  <option value=""3"">${this.i18n
[INFO]     no-unclosed-tag
[INFO]
[INFO]
[INFO]     This attribute binds the type 'string | undefined' which can end up binding the string 'undefined'. Use the 'ifDefined' directive?
[INFO]     76:  group-id=""${this.groupId}""
[INFO]     no-nullable-attribute-binding
[INFO]
[INFO]
[INFO] D:/workspace/sakai-apereo/webcomponents/tool/src/main/frontend/js/sakai-user-photo.js
[INFO]
[INFO]     This attribute binds the type 'string | undefined' which can end up binding the string 'undefined'. Use the 'ifDefined' directive?
[INFO]     70:  <img src=""${this.url}"" alt=""${if
[INFO]     no-nullable-attribute-binding
[INFO]
[INFO]
[INFO]     This attribute binds the type 'string | undefined' which can end up binding the string 'undefined'. Use the 'ifDefined' directive?
[INFO]     75:  <div id=""${this.generatedId}""
[INFO]     no-nullable-attribute-binding
[INFO]
[INFO]
[INFO]   ? 16 problems in 10 files (16 errors, 0 warnings){noformat}



Environment: 

Apache Maven 3.9.1 (2e178502fcdbffc201671fb2537d0cb4b4cc58f8)
Maven home: D:\opt\maven3
Java version: 11.0.18, vendor: Oracle Corporation, runtime: D:\opt\java11
Default locale: es_ES, platform encoding: Cp1252
OS name: ""windows 10"", version: ""10.0"", arch: ""amd64"", family: ""windows""

Updated environment:

{noformat}D:\workspace\sakai-apereo>mvn -version
Apache Maven 3.9.5 (57804ffe001d7215b5e7bcb531cf83df38f93546)
Maven home: D:\opt\maven3
Java version: 11.0.20, vendor: Oracle Corporation, runtime: D:\opt\java11
Default locale: es_ES, platform encoding: UTF-8
OS name: ""windows 10"", version: ""10.0"", arch: ""amd64"", family: ""windows""{noformat}"
T&Q: Statistics issues ,Bug,Open,Sakai,software,"Retesting the issues reported in [https://sakaiproject.atlassian.net/browse/SAK-47559|https://sakaiproject.atlassian.net/browse/SAK-47559|smart-link]

No bar for incorrect answers is covered in [https://sakaiproject.atlassian.net/browse/SAK-48816|https://sakaiproject.atlassian.net/browse/SAK-48816|smart-link]

Problems not addressed in the other Jiras, but were reported in [SAK-47559], which only covered adding back some code:

*Accessibility* from [~accountid:6164f6bd07ac3c00687375f2] - For the â€œ*Final Grade Distribution*â€ on the â€œStatisticsâ€ page, the ranges are still being reported as â€œStarting with X less than Yâ€ which probably needs to be updated in the ARIA??

*Accessibility - Completeness graph* from [~accountid:6164f6bd07ac3c00687375f2] - In the â€œQuestionsâ€ section, the graphs for the â€œCompletenessâ€ field are reported as â€œprogress barâ€--it sounds like these are either green or blue to indicate â€œcorrectâ€ or â€œincorrectâ€ responses so wondering if that should be reflected in the alt text that gets read out by the screen reader? (i.e. â€œ33 green progress barâ€ or â€œ66 blue progress barâ€)

*Hotspot from* [~accountid:70121:edd71bdf-212f-4544-92f7-2fc8fb688af3] - Statistics shows â€œNo Responsesâ€ at the bottom of the graph, where all of the other questions show â€œX responses, Y% Answered Correctlyâ€. There were responses, and correct responses for the questions.

*Accessibility issue for Hot Spot* from [~accountid:6164f6bd07ac3c00687375f2] - The progress bars for the â€œHot Spotâ€ questions are still being reported as â€œ0 progress barâ€ even though it shows that there are responses for these. Moreover, it says â€œNo responsesâ€ down under the table so somethingâ€™s still not right??

*Matrix Survey* Questions from [~accountid:70121:edd71bdf-212f-4544-92f7-2fc8fb688af3] - Matrix Survey - All bars at 100%, not proportional to the number of responses out of the total number of responses. Is this expected?

*Accessibility issue for Matrix of Survey* from [~accountid:6164f6bd07ac3c00687375f2] - Questions with multiple responses are confusing, because some of the choices have a single response, but others have two or three, but they all say â€œ100 progress barâ€ (I know on one of my previous comments in Jira I questioned why one of the responses was labeled â€œ300 progress barâ€ but now Iâ€™m starting to understand that this was just a way to verbally describe the difference between a bar graph that was 1 unit long vs. a bar graph that was 3 units long, or 300% longer)

The bars for correct answers that were missing after the accidental removal of code are present again, (though purple but addressed in [SAK-48816])."
Changing Passwords in Admin is Broken,Bug,Closed,Sakai,software,"when you log in to nightly in an attempt to change a password, you get a trace back error in your browser console and the â€œUpdate Detailsâ€ never activates.

{panel:bgColor=#deebff}
* {noformat}Uncaught TypeError: pwcur is undefined
    validateCurrentPassword https://trunk-maria.nightly.sakaiproject.org/admin-tools/js/userEditValidation.js?version=defdc46f:132
    <anonymous> https://trunk-maria.nightly.sakaiproject.org/admin-tools/js/userEditValidation.js?version=defdc46f:150{noformat}
{panel}

Does not happen on 23-x."
Grader & Document Viewer: Upgrade pdf.js to use the latest features (4.0.189),Improvement,Verified,Sakai,software,"Since 2021 and [https://sakaiproject.atlassian.net/browse/SAK-45895|https://sakaiproject.atlassian.net/browse/SAK-45895|smart-link] Sakai is using the pdf.js version 2.9.359.

The version is not affected by any security issue but since then there are many many releases with improvements and bug fixes. 

[https://github.com/mozilla/pdf.js/releases|https://github.com/mozilla/pdf.js/releases|smart-link]

It would be good to have these improvements adopting 4.0.189 (Nov 2023).

And there are two good reasons:

* 4.0.189 shows the pdf.js in other languages like Spanish, currently itâ€™s always in english.
* Allows instructors to make annotations and upload images to the PDF, they can download the edited PDF and upload it to the submission with comments."
Plus: Launching Tests & Quizzes as a single tool - tutorial issue,Bug,Closed,Sakai,software,"After setting up a Plus tenant on one server for a single tool (samigo), adding the tool to a course on a different server, and launching the tool for a second or more times, (first time has a lot of errors and doesnâ€™t really work [https://sakaiproject.atlassian.net/browse/SAK-49443|https://sakaiproject.atlassian.net/browse/SAK-49443|smart-link] ), there are issues trying to work in the Tests & Quizzes tool.

The first issue is the iframe which does not expand so it is not possible to create a quiz and actually be able to add questions. This affects samigo being launched within an iframe in a course or in a new window.

Also, the tutorial pops up on first launch.

Once the tool has been launched for the second (or more times), the console errors continue but they are different from the initial launch.

Screenshots of the errors with info where in the code it fails:

[https://docs.google.com/document/d/1BYTyY5JVV7Gpr7BiWOYziUZUkxnxDNjp5m11TRNHyrY/edit|https://docs.google.com/document/d/1BYTyY5JVV7Gpr7BiWOYziUZUkxnxDNjp5m11TRNHyrY/edit|smart-link] 

*iframe console errors*:

{noformat}VM12444 tutorial.js:40  Uncaught TypeError: Cannot read properties of null (reading 'classList')
    at runTutorial (VM12444 tutorial.js:40:22)
    at VM12444 tutorial.js:55:9{noformat}

Samigo loads in an iframe

{noformat}mainIndex:855  Uncaught TypeError: Cannot read properties of null (reading 'querySelector')
    at mainIndex:855:34
(anonymous) @ mainIndex:855{noformat}

Click Add and enter a title for the quiz, then create

{noformat}VM9295 authorIndex_container:4  Uncaught TypeError: Cannot read properties of null (reading 'querySelector')
    at VM9295 authorIndex_container:4:34{noformat}

{noformat}VM9597 createAssessment_title:4  Uncaught TypeError: Cannot read properties of null (reading 'querySelector')
    at VM9597 createAssessment_title:4:34{noformat}

*Samigo loads in a new window*

Almost every action has the same type error

{noformat}Uncaught TypeError: portal.container is null
    <anonymous> https://trunk-mysql8.nightly.sakaiproject.org/portal/plus/3e3edeaf-dfbd-489c-8912-1fc4f0ef0026/tool/877fa6b0-e4f9-421f-a2eb-56aaefb16aa4/jsf/index/mainIndex:803{noformat}"
"Plus: Single tool launch, portal issues",Bug,Resolved,Sakai,software,"Setting up a single Plus tool (samigo) to launch in a site as an external tool has several issues. I set the tenant up on [https://trunk-mysql8.nightly.sakaiproject.org/portal/|https://trunk-mysql8.nightly.sakaiproject.org/portal/] and the instructor, students and site on [https://trunk-maria.nightly.sakaiproject.org/|https://trunk-maria.nightly.sakaiproject.org/]  

[~accountid:557058:718cd3f6-5ff9-42fa-8914-b4224aff1730] the launch url that is automatically entered from the dynamic registration:

[https://trunk-mysql8.nightly.sakaiproject.org/plus/sakai/sakai.samigo|https://trunk-mysql8.nightly.sakaiproject.org/plus/sakai/sakai.samigo] 

* On the very first launch in the site, samigo loads and then just switches to display the home > overview page
* There are multiple console errors
* On the second launch, it actually loads the assessments page but there are still a couple of console errors

Errors in the console ([https://docs.google.com/document/d/1NakUcYJAIMpQDgVqK9XtmCK6xPWagtY1kYOsw1Xb5sE/edit|https://docs.google.com/document/d/1NakUcYJAIMpQDgVqK9XtmCK6xPWagtY1kYOsw1Xb5sE/edit|smart-link] screen shots of where the errors are in each file )  :

{noformat}VM12538 mainIndex:4  Uncaught TypeError: Cannot read properties of null (reading 'querySelector')
    at VM12538 mainIndex:4:34myworkspace_info.html:9  Uncaught DOMException: Failed to read a named property 'document' from 'Window': Blocked a frame with origin ""https://trunk-mysql8.nightly.sakaiproject.org"" from accessing a cross-origin frame.
    at https://trunk-mysql8.nightly.sakaiproject.org/library/content/myworkspace_info.html:9:22{noformat}

{noformat}sakai-iframe-copy-classes.js:5  Uncaught DOMException: Failed to read a named property 'document' from 'Window': Blocked a frame with origin ""https://trunk-mysql8.nightly.sakaiproject.org"" from accessing a cross-origin frame.
    at MutationObserver.<anonymous> (https://trunk-mysql8.nightly.sakaiproject.org/library/js/sakai-iframe-copy-classes.js:5:48){noformat}

{noformat}sakai-portal-utils.js?version=defdc46f:3  Uncaught DOMException: Failed to read a named property 'portal' from 'Window': Blocked a frame with origin ""https://trunk-mysql8.nightly.sakaiproject.org"" from accessing a cross-origin frame.
    at getOffsetFromServerMillis (https://trunk-mysql8.nightly.sakaiproject.org/webcomponents/sakai-portal-utils.js?version=defdc46f:3:58)
    at set epochMillis [as epochMillis] (https://trunk-mysql8.nightly.sakaiproject.org/webcomponents/sakai-date-picker.js?version=defdc46f:60:48)
    at SakaiDatePicker._attributeToProperty (https://trunk-mysql8.nightly.sakaiproject.org/webcomponents/assets/@lion/core/node_modules/lit-element/lib/updating-element.js?version=defdc46f:417:22)
    at SakaiDatePicker.attributeChangedCallback (https://trunk-mysql8.nightly.sakaiproject.org/webcomponents/assets/@lion/core/node_modules/lit-element/lib/updating-element.js?version=defdc46f:372:12)
    at AttributeCommitter.commit (https://trunk-mysql8.nightly.sakaiproject.org/webcomponents/assets/lit-html/lib/parts.js?version=defdc46f:99:20)
    at AttributePart.commit (https://trunk-mysql8.nightly.sakaiproject.org/webcomponents/assets/lit-html/lib/parts.js?version=defdc46f:131:20)
    at TemplateInstance.update (https://trunk-mysql8.nightly.sakaiproject.org/webcomponents/assets/lit-html/lib/template-instance.js?version=defdc46f:38:14)
    at NodePart.__commitTemplateResult (https://trunk-mysql8.nightly.sakaiproject.org/webcomponents/assets/lit-html/lib/parts.js?version=defdc46f:259:16)
    at NodePart.commit (https://trunk-mysql8.nightly.sakaiproject.org/webcomponents/assets/lit-html/lib/parts.js?version=defdc46f:208:12)
    at TemplateInstance.update (https://trunk-mysql8.nightly.sakaiproject.org/webcomponents/assets/lit-html/lib/template-instance.js?version=defdc46f:38:14){noformat}

{noformat}sakai-portal-utils.js?version=defdc46f:3  Uncaught (in promise) DOMException: Failed to read a named property 'portal' from 'Window': Blocked a frame with origin ""https://trunk-mysql8.nightly.sakaiproject.org"" from accessing a cross-origin frame.
    at getOffsetFromServerMillis (https://trunk-mysql8.nightly.sakaiproject.org/webcomponents/sakai-portal-utils.js?version=defdc46f:3:58)
    at set epochMillis [as epochMillis] (https://trunk-mysql8.nightly.sakaiproject.org/webcomponents/sakai-date-picker.js?version=defdc46f:60:48)
    at SakaiTasksCreateTask.firstUpdated (https://trunk-mysql8.nightly.sakaiproject.org/webcomponents/tasks/sakai-tasks-create-task.js?version=defdc46f:176:30)
    at SakaiTasksCreateTask.performUpdate (https://trunk-mysql8.nightly.sakaiproject.org/webcomponents/assets/lit-element/lib/updating-element.js?version=defdc46f:551:14)
    at SakaiTasksCreateTask._enqueueUpdate (https://trunk-mysql8.nightly.sakaiproject.org/webcomponents/assets/lit-element/lib/updating-element.js?version=defdc46f:489:25){noformat}"
Gradebook: Keyboard navigation does not reach column headers,Bug,Closed,Sakai,software,"Description: Column headers for the gradebook table are unreachable via keyboard navigation. Hence, following three features are not accessible:

* Sorting scores via the keyboard
* The entire dropdown menu for a drop down item (edit item details, quick entry..etc)

Refer to video for demo. "
T&Q: Answers not aligned in MC&MS,Bug,Verified,Sakai,software,"Some answers are not aligned with the options when previewing or doing exams. Seems that comes from an old Jira [https://github.com/sakaiproject/sakai/pull/4443|https://github.com/sakaiproject/sakai/pull/4443|smart-link] 

The author view:

!question_author.png|width=1264,height=571!

The preview:

!question_preview.png|width=811,height=531!

Before the fix:

!image-20231110-122718.png|width=406,height=524!





After the fix:

!image-20231110-122812.png|width=1621,height=570!



*Important: There is a known issue on this fix, the has css selector is disabled in Firefox by a property, only works with Firefox enabling the flag.*

[https://caniuse.com/css-has|https://caniuse.com/css-has|smart-link] "
"Modify the default behaviour of the ""mark as read"" in the forums tool.",Feature Request,Open,Sakai,software,"This is a suggestion made to us by a group of teachers in our institution and we thought it was quite reasonable.

In some of our subjects we make quite a lot of use of the Virtual Classroom Forum, and I wanted to suggest a change to the 'Mark as read' functionality, which I think could improve the user experience for teachers and students.

As the tool is currently configured, it is not enough to read a message for it to be marked as read, but you have to click on the 'Mark as read' sign. In other words, the default option is that the message is not marked as read, even if it has been opened for viewing.

Naturally, most people who use the tool do not take the trouble to mark as read every message they have read, and this has two undesirable consequences:

(1) When a teacher checks the number of messages that a student has read, he/she sees the number of messages that he/she has clicked on as read, instead of the number of messages that he/she has opened and presumably actually read. So, if a student does not take the trouble to mark as read each message that he/she has actually read, it may appear to the teacher that he/she has not read any of them, which may result in an unfair assessment of his/her attention to the Forum.

If the aim is to avoid the mischievousness of students opening messages and closing them quickly, without having actually read them, it should be pointed out that this mischievousness is not avoided by the requirement to 'mark as read'. This is so for two quite obvious reasons: firstly, because a student can open messages and mark them as read quickly, without reading them. And secondly, because the tool itself allows one to stand at the top of a conversation and mark all messages as read one after the other, without even opening them.

(2) The second undesirable consequence of the current configuration is that when a person (whether teacher or student) opens a message in the Forum, the number of people who have read it is indicated. But this number, once again, does not correspond to the people who have opened that message and presumably have in fact read it, but corresponds to the people who have clicked on those messages as read.

The result is that a message may appear as having been read by 2 participants when in fact it has been read by 25. I therefore suggest that the default option of the tool should be that when a message is opened and the text is displayed, it is automatically marked as read.

And along with this suggestion, I would like to make an additional and complementary suggestion, and that is that the little boxes that currently allow you to 'Mark as read' messages, be changed to precisely the opposite, 'Mark as unread', for the special case in which someone wants to highlight a message to read it again later.

Moreover, this change is more in line with the reality of the words themselves: if I open a message to read it, it is normal to assume that I have read it. The requirement to mark it as read is, in my view, an excessive and unjustified burden.

Finally, it should be noted that in other communication tools, such as email managers or wassaps, it is unthinkable that the tool would require you to mark every message you open as read. The default option is 'message open = message read'. And the special option is that there is a procedure to 'mark as unread' a particular message, despite having opened it, because you want to remember it for whatever reason.

Thanks."
Support Bulgarian,Feature Request,Verified,Sakai,software,"The Bulgarian translation has been contributed to 100% in November 2023, update the translation files."
Update the Romanian translation,Feature Request,Verified,Sakai,software,"The Romanian translation has been updated to 100% in November 2023, update the translation files."
Tests and Quizzes: Anonymous Submission Status,Bug,Open,Sakai,software,"When creating a test and making submissions anonymous, a duplicate â€œViewâ€ window appears when going into the â€œQuestionsâ€ tab. "
Site Import: Import is 3x slower because how Rubrics are copied in Tests & Quizzes,Bug,Closed,Sakai,software,"Some questions in T&Q can have an associated Rubric for grading, since the insertion of the Rubrics tool the import process copies the rubrics associated to the questions, thatâ€™s totally fine and desirable.

However the import process now takes 3x times more than before and this is huge in big sites with many exams with many questions, and thatâ€™s caused by the way it gets the association to the question, it queries the table once per question, per exam, in our case takes around 0.7 seconds per question.

[https://github.com/sakaiproject/sakai/blob/25aaf85df156eb1cc5714423ec664b126d2fa782/samigo/samigo-services/src/java/org/sakaiproject/tool/assessment/facade/AssessmentFacadeQueries.java#L1679|https://github.com/sakaiproject/sakai/blob/25aaf85df156eb1cc5714423ec664b126d2fa782/samigo/samigo-services/src/java/org/sakaiproject/tool/assessment/facade/AssessmentFacadeQueries.java#L1679]

These are some numbers for a site with 150 exams and zero rubrics attached to the exams, this site is not using Rubrics but the import process does the queries anyway.

Including Rubrics takes *3429.83 seconds (57 minutes).*

{noformat}-----------Copying site 7324be52-d4e1-4847-8c2a-40e2acaccfa8
-----Resources copied = 32.983
-----Gradebook copied = 0.104
-----sakai.schedule copied = 0.442
-----sakai.assignment.grades copied = 25.882
-----sakai.forums copied = 0.792
-----sakai.poll copied = 0.025
-----sakai.chat copied = 0.024
-----sakai.announcements copied = 0.118
-----sakai.samigo copied = 2700.73
-----Siteinfo copied = 0.046
-----sakai.schedule references copied en = 1.077
-----sakai.assignment.grades references copied en = 1.807
-----sakai.forums references copied en = 0.017
-----sakai.resources references copied en = 0.01
-----sakai.poll references copied en = 0
-----sakai.gradebookng references copied en = 0
-----sakai.chat references copied en = 0
-----sakai.announcements references copied en = 0.095
-----sakai.samigo references copied en = 664.958
-----sakai.iframe.site references copied en = 0.029
-----[GRA_12574_2023] merged context = 0.195
-----------Site 7324be52-d4e1-4847-8c2a-40e2acaccfa8 copied en=3429.834{noformat}

Commenting the rubrics line, not copying rubrics (The site doesnâ€™t have them anyway):

{noformat}-----------Copying site 644fcfe4-d1cd-4307-95df-252dfc1a57b8
-----Resources copied = 11.844
-----Gradebook copied = 0.08
-----sakai.schedule copied = 0.398
-----sakai.assignment.grades copied = 24.412
-----sakai.forums copied = 0.409
-----sakai.poll copied = 0.02
-----sakai.chat copied = 0.03
-----sakai.announcements copied = 0.1
-----sakai.samigo copied = 370.54
-----Siteinfo copied = 0.046
-----sakai.schedule references copied en = 1.043
-----sakai.assignment.grades references copied en = 1.715
-----sakai.forums references copied en = 0.012
-----sakai.resources references copied en = 0.004
-----sakai.poll references copied en = 0
-----sakai.gradebookng references copied en = 0
-----sakai.chat references copied en = 0
-----sakai.announcements references copied en = 0.092
-----sakai.samigo references copied en = 682.929
-----sakai.iframe.site references copied en = 0.027
-----[GRA_12574_2023] merged context = 0.269
-----------Site 644fcfe4-d1cd-4307-95df-252dfc1a57b8 copied en=1094.384
{noformat}

*It takes 1094.384 seconds, around 18 minutes.*

The Rubrics portion, even if the site has or does not have Rubrics, has a big performance impact on the site import."
Gradebook: Unable to grade with weighted Rubrics - Empty modal,Bug,Open,Sakai,software,"Attempting to grade a gradebook item with a weighted rubric, the modal is empty and there are two console errors: 

{noformat}GET https://trunk-mysql.nightly.sakaiproject.org/api/sites/b3730698-d9e4-4a9b-9â€¦bc-dfac-41b1-8be1-2fc46bf72b8d/owners/49ebb3bc-dfac-41b1-8be1-2fc46bf72b8d 404 (Not Found){noformat}

{noformat}apiGetEvaluation@sakai-rubrics-api-miâ€¦version=3008cc01:35(anonymous)@sakai-rubric-gradingâ€¦ersion=3008cc01:557Promise.then (async)_getRubric@sakai-rubric-gradingâ€¦ersion=3008cc01:555(anonymous)@sakai-rubric-gradingâ€¦ersion=3008cc01:549Promise.then (async)_getAssociation@sakai-rubric-gradingâ€¦ersion=3008cc01:545set evaluatedItemId@sakai-rubric-gradingâ€¦version=3008cc01:96_attributeToProperty@updating-element.js?version=3008cc01:496attributeChangedCallback@updating-element.js?version=3008cc01:441ja@jquery.js:4631n.parseHTML@jquery.js:10569a.fn.init@jquery-migrate.min.js?version=3008cc01:2n@jquery.js:75replace@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1(anonymous)@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1run@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1d@jquery.js:529FunctionsExecuter.processNext@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1FunctionsExecuter.start@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1FunctionsExecuter.notify@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1d@jquery.js:529onScriptReady@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1load (async)(anonymous)@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1run@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1d@jquery.js:529FunctionsExecuter.processNext@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1FunctionsExecuter.start@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1FunctionsExecuter.notify@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1d@jquery.js:529onScriptReady@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1load (async)(anonymous)@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1run@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1d@jquery.js:529FunctionsExecuter.processNext@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1FunctionsExecuter.start@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1complete@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1i@jquery.js:3232fireWith@jquery.js:3362y@jquery.js:9855c@jquery.js:10311XMLHttpRequest.send (async)send@jquery.js:10254ajax@jquery.js:9738doAjax@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1(anonymous)@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1d@jquery.js:529schedule@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1schedule@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1ajax@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1(anonymous)@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1dispatch@jquery.js:5226r.handle@jquery.js:4878trigger@jquery.js:5130a.event.trigger@jquery-migrate.min.js?version=3008cc01:2(anonymous)@jquery.js:5860each@jquery.js:370each@jquery.js:137trigger@jquery.js:5859GbGradeTable.ajax@gradebook-gbgrade-taâ€¦ersion=3008cc01:668(anonymous)@gradebook-gbgrade-taâ€¦rsion=3008cc01:1120dispatch@jquery.js:5226r.handle@jquery.js:4878{noformat}

{noformat}sakai-rubric-gradingâ€¦ersion=3008cc01:239 Uncaught (in promise) TypeError: Cannot read properties of undefined (reading 'toLocaleString')
    at sakai-rubric-gradingâ€¦ion=3008cc01:239:51
    at Array.map (<anonymous>)
    at SakaiRubricGrading.render (sakai-rubric-gradingâ€¦ion=3008cc01:167:27)
    at SakaiRubricGrading.update (lit-element.js?version=3008cc01:239:33)
    at SakaiRubricGrading.performUpdate (updating-element.js?â€¦ion=3008cc01:633:14)
    at SakaiRubricGrading._enqueueUpdate (updating-element.js?â€¦ion=3008cc01:577:25){noformat}

{noformat}(anonymous)@sakai-rubric-gradingâ€¦ersion=3008cc01:239render@sakai-rubric-gradingâ€¦ersion=3008cc01:167update@lit-element.js?version=3008cc01:239performUpdate@updating-element.js?version=3008cc01:633_enqueueUpdate@updating-element.js?version=3008cc01:577await in _enqueueUpdate (async)requestUpdateInternal@updating-element.js?version=3008cc01:539set@updating-element.js?version=3008cc01:235(anonymous)@sakai-rubric-gradingâ€¦ersion=3008cc01:558Promise.then (async)(anonymous)@sakai-rubric-gradingâ€¦ersion=3008cc01:557Promise.then (async)_getRubric@sakai-rubric-gradingâ€¦ersion=3008cc01:555(anonymous)@sakai-rubric-gradingâ€¦ersion=3008cc01:549Promise.then (async)_getAssociation@sakai-rubric-gradingâ€¦ersion=3008cc01:545set evaluatedItemId@sakai-rubric-gradingâ€¦version=3008cc01:96_attributeToProperty@updating-element.js?version=3008cc01:496attributeChangedCallback@updating-element.js?version=3008cc01:441ja@jquery.js:4631n.parseHTML@jquery.js:10569a.fn.init@jquery-migrate.min.js?version=3008cc01:2n@jquery.js:75replace@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1(anonymous)@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1run@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1d@jquery.js:529FunctionsExecuter.processNext@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1FunctionsExecuter.start@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1FunctionsExecuter.notify@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1d@jquery.js:529onScriptReady@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1load (async)(anonymous)@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1run@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1d@jquery.js:529FunctionsExecuter.processNext@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1FunctionsExecuter.start@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1FunctionsExecuter.notify@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1d@jquery.js:529onScriptReady@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1load (async)(anonymous)@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1run@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1d@jquery.js:529FunctionsExecuter.processNext@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1FunctionsExecuter.start@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1complete@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1i@jquery.js:3232fireWith@jquery.js:3362y@jquery.js:9855c@jquery.js:10311XMLHttpRequest.send (async)send@jquery.js:10254ajax@jquery.js:9738doAjax@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1(anonymous)@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1d@jquery.js:529schedule@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1schedule@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1ajax@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1(anonymous)@wicket-ajax-jquery.mâ€¦8A178E6C4F30A6.js:1dispatch@jquery.js:5226r.handle@jquery.js:4878trigger@jquery.js:5130a.event.trigger@jquery-migrate.min.js?version=3008cc01:2(anonymous)@jquery.js:5860each@jquery.js:370each@jquery.js:137trigger@jquery.js:5859GbGradeTable.ajax@gradebook-gbgrade-taâ€¦ersion=3008cc01:668(anonymous)@gradebook-gbgrade-taâ€¦rsion=3008cc01:1120dispatch@jquery.js:5226r.handle@jquery.js:4878{noformat}

The rubric will appear if you select Rubric Preview / Statistics from the item menu, just not when you select Grade Rubric from the cell menu. 

-This also affects grading from the Discussions tool.-"
Site Import: Excessive logging when importing sites with T&Q,Bug,Closed,Sakai,software,"When importing a site with many assessments the process fills the log with many useless lines.



{noformat}08-nov.-2023 14:28:50.565 INFO [pool-10-thread-1] o.s.t.a.s.a.AssessmentEntityProducer.updateEntityReferences Migration - now update
08-nov.-2023 14:28:50.705 INFO [pool-10-thread-1] o.s.t.a.s.a.AssessmentEntityProducer.updateEntityReferences Migration - now update
08-nov.-2023 14:28:50.813 INFO [pool-10-thread-1] o.s.t.a.s.a.AssessmentEntityProducer.updateEntityReferences Migration - now update
08-nov.-2023 14:28:50.919 INFO [pool-10-thread-1] o.s.t.a.s.a.AssessmentEntityProducer.updateEntityReferences Migration - now update
08-nov.-2023 14:28:51.029 INFO [pool-10-thread-1] o.s.t.a.s.a.AssessmentEntityProducer.updateEntityReferences Migration - now update
08-nov.-2023 14:28:51.140 INFO [pool-10-thread-1] o.s.t.a.s.a.AssessmentEntityProducer.updateEntityReferences Migration - now update
08-nov.-2023 14:28:51.315 INFO [pool-10-thread-1] o.s.t.a.s.a.AssessmentEntityProducer.updateEntityReferences Migration - now update
08-nov.-2023 14:28:51.395 INFO [pool-10-thread-1] o.s.t.a.s.a.AssessmentEntityProducer.updateEntityReferences Migration - now update
08-nov.-2023 14:28:51.475 INFO [pool-10-thread-1] o.s.t.a.s.a.AssessmentEntityProducer.updateEntityReferences Migration - now update
08-nov.-2023 14:28:51.555 INFO [pool-10-thread-1] o.s.t.a.s.a.AssessmentEntityProducer.updateEntityReferences Migration - now update
08-nov.-2023 14:28:51.636 INFO [pool-10-thread-1] o.s.t.a.s.a.AssessmentEntityProducer.updateEntityReferences Migration - now update
08-nov.-2023 14:28:51.771 INFO [pool-10-thread-1] o.s.t.a.s.a.AssessmentEntityProducer.updateEntityReferences Migration - now update
08-nov.-2023 14:28:51.877 INFO [pool-10-thread-1] o.s.t.a.s.a.AssessmentEntityProducer.updateEntityReferences Migration - now update
08-nov.-2023 14:28:52.015 INFO [pool-10-thread-1] o.s.t.a.s.a.AssessmentEntityProducer.updateEntityReferences Migration - now update
08-nov.-2023 14:28:52.148 INFO [pool-10-thread-1] o.s.t.a.s.a.AssessmentEntityProducer.updateEntityReferences Migration - now update
08-nov.-2023 14:28:52.313 INFO [pool-10-thread-1] o.s.t.a.s.a.AssessmentEntityProducer.updateEntityReferences Migration - now update
08-nov.-2023 14:28:52.393 INFO [pool-10-thread-1] o.s.t.a.s.a.AssessmentEntityProducer.updateEntityReferences Migration - now update
08-nov.-2023 14:28:52.474 INFO [pool-10-thread-1] o.s.t.a.s.a.AssessmentEntityProducer.updateEntityReferences Migration - now update
08-nov.-2023 14:28:52.612 INFO [pool-10-thread-1] o.s.t.a.s.a.AssessmentEntityProducer.updateEntityReferences Migration - now update
08-nov.-2023 14:28:52.719 INFO [pool-10-thread-1] o.s.t.a.s.a.AssessmentEntityProducer.updateEntityReferences Migration - now update
08-nov.-2023 14:28:52.825 INFO [pool-10-thread-1] o.s.t.a.s.a.AssessmentEntityProducer.updateEntityReferences Migration - now update
08-nov.-2023 14:28:52.934 INFO [pool-10-thread-1] o.s.t.a.s.a.AssessmentEntityProducer.updateEntityReferences Migration - now update
{noformat}"
Apply lit-analyzer to all of the webcomponents,Improvement,Verified,Sakai,software,"Apply lit-analyzer to all of the web components. We currently run lit-analyzer across a subset of our webcomponents, the conversations js. This ticket will apply lit-analyzer to all of our web components and this will help us spot and fix some hard to notice issues."
Assignments: Add option to view external tool to classic grader,Feature Request,Open,Sakai,software,"If an instructor has an LTI assignment and attempts to go in to grade as they normally do, the classic grader has no way to view the external tool and the student submissions. 

Can we add a â€œlaunch external toolâ€ button to the classic grader for LTI assignments that would allow the instructor to access the student submissions from the normal grading workflow? It looks like the Sakai Grader opens the external tool within the preview window, so an instructor who is using the Sakai Grader can access student submissions. "
Assignments: Allow Grader to be used for LTI assignment types,Feature Request,Open,Sakai,software,"If an assignment is set up as an LTI / External Tool submission, the classic grader can still be used to provide scores and feedback, outside of the LTI tool. This includes rubrics.

However, the Sakai Grader is disabled for LTI assignments. I would like this to be re-enabled to allow instructors to be able to use the Grader to provide feedback to students, as many LTI tools just have scores, not qualitative feedback. This would also allow instructors to use a Rubric to grade an assignment that is configured as an LTI tool."
Lessons: import from site containing url encoded resource fails,Bug,Open,Sakai,software,"* Create test site with tools lessons and resources
* upload file with id containing a special character e.g. space
* in lessons tool add text and link uploaded resource file
* create new site with tools lessons and resources
* import only lessons  into new site
* resource file is not copied to new site and link in lessons results in 404"
"Roster: JSON doesn't include email address, and both JSON/roster UI fail to log last time visited or total visits",Bug,Closed,Sakai,software,"When making the rest call <[https://<server>/direct/roster-membership/<site_id>/get-membership.json>,|https://<server>/direct/roster-membership/<site_id>/get-membership.json>,] the userâ€™s email, lastVisitTime, or totalSiteVisits are not being returned in the json.

When viewing the roster as the instructor, Total Visits and Last Visits do not display the correct information."
Incorrect sort on Submission Status -> Date,Bug,Closed,Sakai,software,Submission Status â†’ Sort by date does a string sort not a date sort
"Create a sakai-reorderer component, initially for rubrics.",Bug,Verified,Sakai,software,"Create a sakai-reorderer component, initially for rubrics. Eventually, when it has proved its worth in rubrics, weâ€™ll hopefully be able to use it in other projects."
Add configuration option to remove labelling on the trinity site list,Bug,Closed,Sakai,software,"This will add a new configuration option:

*portal.siteList.siteLabels=true | false*

The default is â€œtrueâ€ - exactly the same as 23.0.  If this is set to â€œfalseâ€, it simply suppresses the labels for â€œRecent Sitesâ€, â€œPinned Sitesâ€, and the â€œNo Pinned Sitesâ€ message.  The sites are in the exactly the same order - the pin / unpin keeps working exactly the same. Until the user pins a site, there is just a â€œrecentâ€ list ordered by most recently used.  Once sites are pinned, they move aove the recent sites."
"Announcements: Merged announcements do not display on user Home tools, Bullhorns, or in course Dashboard (22x & 21x)",Bug,In Progress,Sakai,software,"This is related to [https://sakaiproject.atlassian.net/browse/SAK-49341|https://sakaiproject.atlassian.net/browse/SAK-49341|smart-link] and [https://sakaiproject.atlassian.net/browse/SAK-49391|https://sakaiproject.atlassian.net/browse/SAK-49391|smart-link] 

Since the code is different between 24/23 & 22/21, the behavior is a little bit different also for 22/21.

The Dashboard needs to be enabled as an admin > sites.

After merging announcements and having a student log into site 2 that is not part of site 1, there is a stacktrace, the student is able to view the announcement on the site Overview page and the Announcements page, but do not see it on the Dashboard, their Home Overview/Dashboard page, or in Bullhorns:
22x and 21x:


{noformat}04-Nov-2023 10:56:40.478 WARN [http-nio-20022-exec-40] o.s.a.i.DbAnnouncementService.getViewableAnnouncementsForSite Failed to add announcements from site /announcement/channel/8993db9b-c2f4-46f8-8ee9-2835a5e4a45a/main
org.sakaiproject.exception.PermissionException: user=9ea48932-057e-471c-845f-a11c2e5cc5a8 lock=annc.read resource=/announcement/channel/25997fde-7220-406d-b70c-b78755d0a461/main
	at org.sakaiproject.message.util.BaseMessage.unlock(BaseMessage.java:458) ~[sakai-message-util-22-SNAPSHOT.jar:22-SNAPSHOT]
	at org.sakaiproject.message.util.BaseMessage.getChannel(BaseMessage.java:550) ~[sakai-message-util-22-SNAPSHOT.jar:22-SNAPSHOT]
	at org.sakaiproject.announcement.impl.BaseAnnouncementService.getAnnouncementChannel(BaseAnnouncementService.java:1019) ~[sakai-announcement-impl-22-SNAPSHOT.jar:?]
	at org.sakaiproject.announcement.impl.BaseAnnouncementService.getMessages(BaseAnnouncementService.java:1084) ~[sakai-announcement-impl-22-SNAPSHOT.jar:?]
	at org.sakaiproject.announcement.impl.DbAnnouncementService.getViewableAnnouncementsForSite(DbAnnouncementService.java:643) [sakai-announcement-impl-22-SNAPSHOT.jar:?]
	at org.sakaiproject.webapi.controllers.AnnouncementsController.getSiteAnnouncements(AnnouncementsController.java:103) [classes/:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) [spring-web-5.3.18.jar:5.3.18]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) [spring-web-5.3.18.jar:5.3.18]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) [spring-webmvc-5.3.18.jar:?]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) [spring-webmvc-5.3.18.jar:?]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) [spring-webmvc-5.3.18.jar:?]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) [spring-webmvc-5.3.18.jar:?]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) [spring-webmvc-5.3.18.jar:?]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) [spring-webmvc-5.3.18.jar:?]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.18.jar:?]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) [spring-webmvc-5.3.18.jar:?]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529) [servlet-api.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.18.jar:?]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) [servlet-api.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) [tomcat-websocket.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]
	at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:496) [sakai-kernel-api-22-SNAPSHOT.jar:22-SNAPSHOT]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) [catalina.jar:9.0.76]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) [catalina.jar:9.0.76]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) [catalina.jar:9.0.76]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) [catalina.jar:9.0.76]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) [catalina.jar:9.0.76]
	at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:768) [catalina.jar:9.0.76]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) [catalina.jar:9.0.76]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) [catalina.jar:9.0.76]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) [tomcat-coyote.jar:9.0.76]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) [tomcat-coyote.jar:9.0.76]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) [tomcat-coyote.jar:9.0.76]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) [tomcat-coyote.jar:9.0.76]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) [tomcat-coyote.jar:9.0.76]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-util.jar:9.0.76]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-util.jar:9.0.76]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-util.jar:9.0.76]
	at java.lang.Thread.run(Thread.java:829) [?:?]{noformat}"
SiteInfo during site creation and after selecting a roster from cm it is not attached,Bug,Verified,Sakai,software,While creating a new site using CM data the site doesnâ€™t contain the participants from selected roster.
Lessons: Unable to modify content links,Bug,Verified,Sakai,software,"Unable to modify links in Lesson after a recent deployment.  Clicking on the Edit icon for any content link results in the following browser console error:



{noformat}show-page.js?version=a00c5dfe:1778 Uncaught TypeError: Assignment to constant variable.
    at copyText (show-page.js?version=a00c5dfe:1778:26)
    at HTMLAnchorElement.<anonymous> (show-page.js?version=a00c5dfe:1781:13)
    at HTMLAnchorElement.dispatch (jquery.js:5226:27)
    at r.handle (jquery.js:4878:28){noformat}"
Lessons: omitting the title when adding a sub page locks the whole screen,Bug,Resolved,Sakai,software,"thereâ€™s a movie attachment highlighting the problem which is â€¦.

If you try to add a subpage but forget to add a page title then the whole page locks up and one cannot click on any links or buttons anywhere without re-loading the page entirely."
Date Manager: Clear Date button not appearing on 22.x,Bug,Open,Sakai,software,"[https://sakaiproject.atlassian.net/browse/SAK-49082|https://sakaiproject.atlassian.net/browse/SAK-49082|smart-link] fixed a number of issues with null dates in date manager, and added a clear dates button for all date fields. This was merged to 22.x, and QA testing passed for all null date issues. However, the clear date button does not appear in 22.x. There are no errors or warnings in the console. 

It would be very nice if we could determine why the new clear button is not appearing for users in 22.x and make it available for them."
Gradebook: Grades column width distortion when sitenav collapsed,Bug,Open,Sakai,software,"Distortions to the Grades table occur immediately upon collapsing the site navigation. This bug is affecting both 24.x and 23.x. Refer to the attached screencast and the test plan for details.

Such distortions did not occur with 22.x and prior upon collapsing the tool menu."
Rubrics: Students canâ€™t view rubric comments when rubric is in modal window,Bug,In Progress,Sakai,software,"In the student view the popovers for rubric comments in Gradebook are displayed behind the modal containing the rubric. To be read, they need to display in front of the rubric modal.

Refer to the attached screencast.

This bug is affecting both 24.x and 23.x.

Updated - This occurs in the Gradebook (Seanâ€™s original issue) and in Assignments if the student clicks on the rubric icon next to the assignment title. In the main Assignment feedback and Tests & Quizzes feedback, the rubric isnâ€™t in a modal and the comments appear above the rubric as expected."
Lessons: Shared pages should display an indicator,Feature Request,Open,Sakai,software,"When a lesson page is shared thereâ€™s no indicator in the main page, this can be dangerous and confusing for instructors because editing the items in one page edit the items in the other page, they are the same page.

!image-20231102-161804.png|width=676,height=274!

But when you try to â€˜Add items from another pageâ€™, it shows that the page is shared which is correct.

!image-20231102-161853.png|width=363,height=305!

Both pages are the same page, the main Lessons page should reflect this."
Joinable Sets: Display a message when the group is full,Bug,Resolved,Sakai,software,"This is a copy of [https://sakaiproject.atlassian.net/browse/SAK-49051|https://sakaiproject.atlassian.net/browse/SAK-49051|smart-link], it improves the behavior to show the message when fails via SiteAction or fails via transaction."
"Portal: Unpublished ""Official"" sites display and are pinned for the student (incorrect behavior)",Bug,Verified,Sakai,software,"Unpublished sites are not working correctly on trunk. (23x isnâ€™t working as expected either, but there are different issues.)

As an admin, I created a site with sections and left it unpublished. 

Logging in as instructor1, the site is pinned and the instructor is able to access the site. ({color:#006644}*Correct behavior*{color})

Logging in as a student, the site is pinned ({color:#bf2600}*Incorrect behavior*{color}) and when the student clicks on the link, the site is not available.

As an instructor, I manually created a site, left it unpublished and it was pinned immediately. ({color:#006644}*Correct behavior*{color})

I added a couple of students. A student logged in and did not see the site listed. ({color:#006644}*Correct behavior*{color})

For both of the sites, as the student, I checked â€œView All Sitesâ€, Home > Sites, Organize Pinned, and Preferences. The views are correct there in both cases,"
Assignments - Lessons: Datepickers missing when attempting to create a new assignment within lesson page,Bug,Open,Sakai,software,"From within Lessons if attempting to add a new Assignment the assignment page does not render the datepickers for open, due, accept until.  

Recreate by:

Within in lessons page > add content > link to an assignment > create new assignment using assignments > add

the result is the Add new assignment page with missing datepickers:

!MissingDatePickersFromLessons.png|width=1237,height=1100!"
update Apache Commons Text 1.11.0,Bug,Closed,Sakai,software,[https://commons.apache.org/proper/commons-text/changes-report.html#a1.11.0|https://commons.apache.org/proper/commons-text/changes-report.html#a1.11.0|smart-link] 
Tests & Quizzes: Export or print student submission,Feature Request,Resolved,Sakai,software,"Currently, there is not an easy way for instructors to export or print a single studentâ€™s test submission. This would be useful in case an instructor needs a hardcopy of the submission for documentation. Printing the page is very ugly (see attached PDF, printed from Sakai 24/25). 

I would like to suggest a print view for the student submission that includes the question, answers, answer key, student response, feedback, and scores. See the test plan for the full list to include. This could be on the grade by student page. "
Samigo when creating a multiple choice question with answer level feedback RTE will not show,Bug,Verified,Sakai,software,"Occurs when setting up a multiple choice question with answer level feedback.

The RTE (CKEditor) throws an exception because multiple editors canâ€™t have the same id

{noformat}ckeditor.js?version=22b:19 [CKEDITOR] Error code: editor-element-conflict. {editorName: 'itemForm:questionAnswerFeedback_textinput'}
(anonymous) @ ckeditor.js?version=22b:19
k @ ckeditor.js?version=22b:10
(anonymous) @ ckeditor.js?version=22b:12
window.CKEDITOR.window.CKEDITOR.dom.CKEDITOR.error @ ckeditor.js?version=22b:19
CKEDITOR.editor._getEditorElement @ ckeditor.js?version=22b:281
a @ ckeditor.js?version=22b:347
CKEDITOR.replace @ ckeditor.js?version=22b:352
sakai.editor.editors.ckeditor.launch @ ckeditor.launch.js?version=22b:757
chef_setupformattedtextarea @ samigo-global.js:39
show_editor @ samigo-global.js:5
(anonymous) @ authoring.js:676
each @ jquery.js:370
each @ jquery.js:137
show_multiple_text @ authoring.js:673
onclick @ editAssessment:1671
ckeditor.js?version=22b:19 [CKEDITOR] For more information about this error go to https://ckeditor.com/docs/ckeditor4/latest/guide/dev_errors.html#editor-element-conflict{noformat}

Regression from SAK-41964"
Rubric-Discussions: Console errors and unable to add a comment in rubric,Bug,Resolved,Sakai,software,"Believe the new issues are caused by the new pop-up comment window in rubrics: [https://sakaiproject.atlassian.net/browse/SAK-49370|https://sakaiproject.atlassian.net/browse/SAK-49370|smart-link]

If 49370 is merged to 23x, then this fix needs to merge to 23x.

When trying to grade a discussion topic with a rubric, there is a console error, then when trying to add a comment in the rubric, there is another console error and there is no pop-up to add a comment.

Clicking grade for a student in discussion topic with rubric

{noformat}sakai-rubric-grading-comment.js?version=88eaaa7f:44  Uncaught (in promise) TypeError: Cannot read properties of undefined (reading 'launch')
    at SakaiRubricGradingComment.setupEditor (sakai-rubric-grading-comment.js?version=88eaaa7f:44:32)
    at SakaiRubricGradingComment.firstUpdated (sakai-rubric-grading-comment.js?version=88eaaa7f:79:10)
    at SakaiRubricGradingComment.performUpdate (updating-element.js?version=88eaaa7f:650:14)
    at SakaiRubricGradingComment._enqueueUpdate (updating-element.js?version=88eaaa7f:577:25)
{noformat}

Attempting to add a comment in the discussion topic rubric

sakai-rubric-grading-comment.js?version=88eaaa7f:39  Uncaught ReferenceError: bootstrap is not defined
    at SakaiRubricGradingComment._toggleModal (sakai-rubric-grading-comment.js?version=88eaaa7f:39:5)
    at EventPart.handleEvent (parts.js?version=88eaaa7f:532:18)
    at EventPart.__boundHandleEvent (parts.js?version=88eaaa7f:494:41)
_toggleModal @ sakai-rubric-grading-comment.js?version=88eaaa7f:39
handleEvent @ parts.js?version=88eaaa7f:532
EventPart.__boundHandleEvent @ parts.js?version=88eaaa7f:494"
Empty submission preventing 0 grade from getting to gradebook,Bug,Closed,Sakai,software,"If a user opens an exam but did nothing, an empty submission is created in the database (forGrade=0, status=1, attemptdate=date, submittedDate=null).  

This happens if the Student opens the assessment and abandons it (ie. just closing browser or refreshing tool). 

After the exam is closed and autosubmit job has run, the instructor is unable to manually score the student to push a 0 to the gradebook. The status=5 submission effectively blocks the manual score from going to the gradebook (or is it the 0 matches the existing 0 thus no score is sent)?"
While grading using the assignments grading interface noticed a NumberFormatException,Bug,Closed,Sakai,software,"While grading an assignment that is allowed an extension the following stack trace appears:

{noformat}WARN [http-nio2-8080-exec-9] o.s.c.VelocityPortletPaneledAction.actionDispatch Exception calling method doAssignment_form java.lang.reflect.InvocationTargetException (Caused by java.lang.NumberFormatException: null)
java.lang.reflect.InvocationTargetException: null
        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]
        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
        at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]
        at org.sakaiproject.cheftool.VelocityPortletPaneledAction.actionDispatch(VelocityPortletPaneledAction.java:757) [sakai-velocity-tool-24-SNAPSHOT.jar:24-SNAPSHOT]
        at org.sakaiproject.cheftool.VelocityPortletPaneledAction.processAction(VelocityPortletPaneledAction.java:566) [sakai-velocity-tool-24-SNAPSHOT.jar:24-SNAPSHOT]
        at org.sakaiproject.cheftool.ToolServlet.doGet(ToolServlet.java:228) [sakai-velocity-tool-24-SNAPSHOT.jar:24-SNAPSHOT]
        at org.sakaiproject.cheftool.VelocityPortletPaneledAction.doGet(VelocityPortletPaneledAction.java:1098) [sakai-velocity-tool-24-SNAPSHOT.jar:24-SNAPSHOT]
        at org.sakaiproject.cheftool.ToolServlet.doPost(ToolServlet.java:152) [sakai-velocity-tool-24-SNAPSHOT.jar:24-SNAPSHOT]
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) [servlet-api.jar:4.0.FR]
        at org.sakaiproject.vm.ComponentServlet.service(ComponentServlet.java:56) [sakai-velocity-tool-24-SNAPSHOT.jar:24-SNAPSHOT]
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) [servlet-api.jar:4.0.FR]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) [catalina.jar:9.0.74]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.74]
        at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:450) [sakai-kernel-api-24-SNAPSHOT.jar:24-SNAPSHOT]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.74]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.74]
        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661) [catalina.jar:9.0.74]
        at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425) [catalina.jar:9.0.74]
        at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330) [catalina.jar:9.0.74]
        at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294) [catalina.jar:9.0.74]
        at org.sakaiproject.tool.impl.ActiveToolComponent$MyActiveTool.forward(ActiveToolComponent.java:508) [sakai-kernel-impl-24-SNAPSHOT.jar:?]
        at org.sakaiproject.portal.charon.SkinnableCharonPortal.forwardTool(SkinnableCharonPortal.java:1485) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]
        at org.sakaiproject.portal.charon.handlers.SiteHandler.doToolBuffer(SiteHandler.java:1313) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]
        at org.sakaiproject.portal.charon.handlers.SiteHandler.bufferContent(SiteHandler.java:1147) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]
        at org.sakaiproject.portal.charon.handlers.SiteHandler.doSite(SiteHandler.java:517) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]
        at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:287) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]
        at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:185) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]
        at org.sakaiproject.portal.charon.handlers.WorksiteHandler.doPost(WorksiteHandler.java:69) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]
        at org.sakaiproject.portal.charon.SkinnableCharonPortal.doPost(SkinnableCharonPortal.java:1158) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) [servlet-api.jar:4.0.FR]
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) [servlet-api.jar:4.0.FR]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) [catalina.jar:9.0.74]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.74]
        at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:500) [sakai-kernel-api-24-SNAPSHOT.jar:24-SNAPSHOT]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.74]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.74]
        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) [tomcat-websocket.jar:9.0.74]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.74]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.74]
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) [catalina.jar:9.0.74]
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) [catalina.jar:9.0.74]
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) [catalina.jar:9.0.74]
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) [catalina.jar:9.0.74]
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) [catalina.jar:9.0.74]
        at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:673) [catalina.jar:9.0.74]
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) [catalina.jar:9.0.74]
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) [catalina.jar:9.0.74]
        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) [tomcat-coyote.jar:9.0.74]
        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) [tomcat-coyote.jar:9.0.74]
        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) [tomcat-coyote.jar:9.0.74]
        at org.apache.tomcat.util.net.Nio2Endpoint$SocketProcessor.doRun(Nio2Endpoint.java:1713) [tomcat-coyote.jar:9.0.74]
        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) [tomcat-coyote.jar:9.0.74]
        at org.apache.tomcat.util.net.AbstractEndpoint.processSocket(AbstractEndpoint.java:1265) [tomcat-coyote.jar:9.0.74]
        at org.apache.tomcat.util.net.Nio2Endpoint$Nio2SocketWrapper$2.completed(Nio2Endpoint.java:641) [tomcat-coyote.jar:9.0.74]
        at org.apache.tomcat.util.net.Nio2Endpoint$Nio2SocketWrapper$2.completed(Nio2Endpoint.java:619) [tomcat-coyote.jar:9.0.74]
        at sun.nio.ch.Invoker.invokeUnchecked(Invoker.java:127) [?:?]
        at sun.nio.ch.Invoker$2.run(Invoker.java:219) [?:?]
        at sun.nio.ch.AsynchronousChannelGroupImpl$1.run(AsynchronousChannelGroupImpl.java:112) [?:?]
        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-util.jar:9.0.74]
        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-util.jar:9.0.74]
        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-util.jar:9.0.74]
        at java.lang.Thread.run(Thread.java:829) [?:?]
Caused by: java.lang.NumberFormatException: null
        at java.lang.Integer.parseInt(Integer.java:614) ~[?:?]
        at java.lang.Integer.valueOf(Integer.java:983) ~[?:?]
        at org.sakaiproject.assignment.tool.AssignmentAction.readAllowExtensionParams(AssignmentAction.java:11897) ~[classes/:?]
        at org.sakaiproject.assignment.tool.AssignmentAction.readGradeForm(AssignmentAction.java:11777) ~[classes/:?]
        at org.sakaiproject.assignment.tool.AssignmentAction.doPrev_back_next_submission(AssignmentAction.java:4454) ~[classes/:?]
        at org.sakaiproject.assignment.tool.AssignmentAction.doAssignment_form(AssignmentAction.java:11093) ~[classes/:?]
        ... 63 more{noformat}"
Update Apache Commons IO 2.15.0,Bug,Closed,Sakai,software,"[https://commons.apache.org/proper/commons-io/changes-report.html#a2.15.0|https://commons.apache.org/proper/commons-io/changes-report.html#a2.15.0|smart-link] 

h3. Release 2.15.0 â€“ 2023-10-21

||Type||Changes||By||
|!fix.gif|width=20,height=20,alt=""Fix""!|XmlStreamReader encoding match RE is too strict. Fixes [IO-810|https://issues.apache.org/jira/browse/IO-810]. Thanks to Laurence Gonsalves.|[sebb|https://commons.apache.org/proper/commons-io/team-list.html#sebb]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Javadoc in FileUtils does not reflect code for thrown exceptions. Fixes [IO-810|https://issues.apache.org/jira/browse/IO-810]. Thanks to Gregor Dschung, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Javadoc should mention closing Streams based on file resources. Fixes [IO-812|https://issues.apache.org/jira/browse/IO-812]. Thanks to Adam Rauch, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|In tests, Files.walk() direct and indirect callers fail to close the returned Stream. Fixes [IO-811|https://issues.apache.org/jira/browse/IO-811]. Thanks to Adam Rauch, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|FileUtils.listFiles(File, String[], boolean) fails to close its internal Stream. Fixes [IO-811|https://issues.apache.org/jira/browse/IO-811]. Thanks to Adam Rauch, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|FileUtils.iterateFiles(File, String[], boolean) fails to close its internal Stream. Fixes [IO-811|https://issues.apache.org/jira/browse/IO-811]. Thanks to Adam Rauch, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|StreamIterator fails to close its internal Stream. Fixes [IO-811|https://issues.apache.org/jira/browse/IO-811]. Thanks to Adam Rauch, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Don't throw UncheckedIOException #491. Fixes [IO-814|https://issues.apache.org/jira/browse/IO-814]. Thanks to Elliotte Rusty Harold, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Don't write a BOM on every (or any) line #492. Fixes [IO-414|https://issues.apache.org/jira/browse/IO-414]. Thanks to Elliotte Rusty Harold, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|RandomAccessFileMode.create(Path) provides a better NullPointerException message. Fixes [IO-814|https://issues.apache.org/jira/browse/IO-814]. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Improve performance of PathUtils.fileContentEquals(Path, Path, LinkOption[], OpenOption[]) by about 60%, see PathUtilsContentEqualsBenchmark. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Improve performance of PathUtils.fileContentEquals(Path, Path) by about 60%, see PathUtilsContentEqualsBenchmark. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Improve performance of FileUtils.contentEquals(File, File) by about 60%, see PathUtilsContentEqualsBenchmark. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Remove unused test code #494. Thanks to Elliotte Rusty Harold.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|[Javadoc] IOUtils#contentEquals does not throw NullPointerException #496. Thanks to sebbASF.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fix CodeQL warnings in UnsynchronizedBufferedInputStream: Implicit narrowing conversion in compound assignment. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|MessageDigestCalculatingInputStream.MessageDigestMaintainingObserver.MessageDigestMaintainingObserver(MessageDigest) now throws a NullPointerException if the MessageDigest is null. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|MessageDigestCalculatingInputStream.MessageDigestCalculatingInputStream(InputStream, MessageDigest) now throws a NullPointerException if the MessageDigest is null. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|UnsynchronizedBufferedInputStream.read(byte[], int, int) does not use buffer. Fixes [IO-816|https://issues.apache.org/jira/browse/IO-816]. Thanks to Andreas Loth, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add org.apache.commons.io.channels.FileChannels. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add RandomAccessFiles#contentEquals(RandomAccessFile, RandomAccessFile). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add RandomAccessFiles#reset(RandomAccessFile). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add PathUtilsContentEqualsBenchmark. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add org.apache.commons.io.StreamIterator. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add MessageDigestInputStream and deprecate MessageDigestCalculatingInputStream. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump org.apache.commons:commons-parent from 62 to 64. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|"
Gradebook/Test and Quizzes: Editing quiz name does not change it in gradebook,Bug,Resolved,Sakai,software,Editing the name of a published quiz does not change it in the gradebook. 
"T&Q: Rubric selections and comments not saved correctly if graded through questions tab, console error: Uncaught RangeError: Maximum call stack size exceeded.",Bug,Resolved,Sakai,software,"Iâ€™ve had mixed results when grading through the Questions tab. Sometimes the rubric selections are saved and other times theyâ€™re not.  Comments are not kept when added through the questions tab, and when grading  new student, clicking on the comments icon will load the comment from a previous student. There is also a console error when trying to add a comment to the rubric through questions. The score is passed, though, even if sent to the GB.

Clicking on a studentâ€™s name on the Total Scores page and loading the entire quiz does not seem to cause any problems when grading the rubric.

I made this critical, but I can see this being a blocker. If an instructor uses the Questions tab for grading, they will not have a clue that selections may/may not display to the student, and that comments do not get saved at all.

Console error when adding a comment to a rubric from the questions tab:

{noformat}focustrap.js:102  Uncaught RangeError: Maximum call stack size exceeded.
    at Ut._handleFocusin (focustrap.js:102:19)
    at HTMLDocument.<anonymous> (focustrap.js:72:60)
    at HTMLDocument.i (event-handler.js:98:15)
    at HTMLButtonElement.trigger (jquery.js:5415:12)
    at Object.trigger (jquery.js:5094:60)
    at a.event.trigger (jquery-migrate.min.js?version=39a9a433:2:8275)
    at HTMLButtonElement.<anonymous> (jquery.js:5860:17)
    at Function.each (jquery.js:370:19)
    at a.fn.init.each (jquery.js:137:17)
    at a.fn.init.trigger (jquery.js:5859:15)
{noformat}"
T&Q: NPE when trying to import an xml file to the Question Pool,Bug,Verified,Sakai,software,"I have an xml file I use for importing a question pool and now this file is resulting in a NPE stack trace and I receive an error on the page:

There was an error importing this assessment. Ensure that the file is correctly formatted IMS QTI.

{noformat}25-Oct-2023 18:11:24.633 ERROR [http-nio-20313-exec-27] o.s.t.a.q.h.AuthoringHelper.createImportedQuestionPool null

java.lang.NullPointerException: null

	at org.sakaiproject.tool.assessment.qti.helper.ExtractionHelper.addCalculatedQuestionAnswers(ExtractionHelper.java:2900) ~[samigo-qti-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.tool.assessment.qti.helper.ExtractionHelper.updateItem(ExtractionHelper.java:1656) ~[samigo-qti-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.tool.assessment.qti.helper.ExtractionHelper.updateItem(ExtractionHelper.java:1542) ~[samigo-qti-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.tool.assessment.qti.helper.AuthoringHelper.createImportedQuestionPool(AuthoringHelper.java:875) [samigo-qti-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.tool.assessment.qti.helper.AuthoringHelper.createImportedQuestionPool(AuthoringHelper.java:777) [samigo-qti-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.tool.assessment.services.qti.QTIService.createImportedQuestionPool(QTIService.java:185) [samigo-qti-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.tool.assessment.ui.bean.qti.XMLImportBean.createImportedQuestionPool(XMLImportBean.java:574) [classes/:?]

	at org.sakaiproject.tool.assessment.ui.bean.qti.XMLImportBean.processPoolFile(XMLImportBean.java:604) [classes/:?]

	at org.sakaiproject.tool.assessment.ui.bean.qti.XMLImportBean.importPool(XMLImportBean.java:521) [classes/:?]

	at org.sakaiproject.tool.assessment.ui.bean.qti.XMLImportBean.importPool(XMLImportBean.java:499) [classes/:?]

	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]

	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]

	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]

	at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]

	at org.apache.el.parser.AstValue.invoke(AstValue.java:252) [jasper-el.jar:9.0.76]

	at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:266) [jasper-el.jar:9.0.76]

	at com.sun.faces.application.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:66) [jakarta.faces-2.3.18.jar:2.3.18]

	at javax.faces.component.MethodBindingValueChangeListener.processValueChange(MethodBindingValueChangeListener.java:73) [jakarta.faces-2.3.18.jar:2.3.18]

	at javax.faces.event.ValueChangeEvent.processListener(ValueChangeEvent.java:131) [jakarta.faces-2.3.18.jar:2.3.18]

	at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:495) [jakarta.faces-2.3.18.jar:2.3.18]

	at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:812) [jakarta.faces-2.3.18.jar:2.3.18]

	at javax.faces.component.UIViewRoot.processValidators(UIViewRoot.java:1312) [jakarta.faces-2.3.18.jar:2.3.18]

	at com.sun.faces.lifecycle.ProcessValidationsPhase.execute(ProcessValidationsPhase.java:53) [jakarta.faces-2.3.18.jar:2.3.18]

	at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:76) [jakarta.faces-2.3.18.jar:2.3.18]

	at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:177) [jakarta.faces-2.3.18.jar:2.3.18]

	at javax.faces.webapp.FacesServlet.executeLifecyle(FacesServlet.java:707) [jakarta.faces-2.3.18.jar:2.3.18]

	at javax.faces.webapp.FacesServlet.service(FacesServlet.java:451) [jakarta.faces-2.3.18.jar:2.3.18]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) [tomcat-websocket.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:450) [sakai-kernel-api-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:357) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294) [catalina.jar:9.0.76]

	at org.sakaiproject.jsf.util.SamigoJsfTool.dispatch(SamigoJsfTool.java:365) [classes/:?]

	at org.sakaiproject.jsf2.util.JsfTool.doPost(JsfTool.java:249) [jsf2-tool-24-SNAPSHOT.jar:24-SNAPSHOT]

	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) [servlet-api.jar:4.0.FR]

	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) [servlet-api.jar:4.0.FR]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294) [catalina.jar:9.0.76]

	at org.sakaiproject.tool.impl.ActiveToolComponent$MyActiveTool.forward(ActiveToolComponent.java:508) [sakai-kernel-impl-24-SNAPSHOT.jar:?]

	at org.sakaiproject.portal.charon.SkinnableCharonPortal.forwardTool(SkinnableCharonPortal.java:1485) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.portal.charon.handlers.SiteHandler.doToolBuffer(SiteHandler.java:1313) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.portal.charon.handlers.SiteHandler.bufferContent(SiteHandler.java:1147) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.portal.charon.handlers.SiteHandler.doSite(SiteHandler.java:517) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:287) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.portal.charon.handlers.SiteHandler.doGet(SiteHandler.java:185) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.portal.charon.handlers.WorksiteHandler.doPost(WorksiteHandler.java:69) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.sakaiproject.portal.charon.SkinnableCharonPortal.doPost(SkinnableCharonPortal.java:1158) [sakai-portal-impl-24-SNAPSHOT.jar:24-SNAPSHOT]

	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) [servlet-api.jar:4.0.FR]

	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) [servlet-api.jar:4.0.FR]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:500) [sakai-kernel-api-24-SNAPSHOT.jar:24-SNAPSHOT]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) [tomcat-websocket.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) [catalina.jar:9.0.76]

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) [catalina.jar:9.0.76]

	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) [catalina.jar:9.0.76]

	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) [catalina.jar:9.0.76]

	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) [catalina.jar:9.0.76]

	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) [catalina.jar:9.0.76]

	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) [catalina.jar:9.0.76]

	at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:768) [catalina.jar:9.0.76]

	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) [catalina.jar:9.0.76]

	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) [catalina.jar:9.0.76]

	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) [tomcat-coyote.jar:9.0.76]

	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) [tomcat-coyote.jar:9.0.76]

	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) [tomcat-coyote.jar:9.0.76]

	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) [tomcat-coyote.jar:9.0.76]

	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) [tomcat-coyote.jar:9.0.76]

	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-util.jar:9.0.76]

	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-util.jar:9.0.76]

	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-util.jar:9.0.76]

	at java.lang.Thread.run(Thread.java:829) [?:?]{noformat}"
"Rubrics-GB: scores are not passed to GB, multiple console errors",Bug,Resolved,Sakai,software,"Believe the new issues are caused by the new pop-up comment window in rubrics: [https://sakaiproject.atlassian.net/browse/SAK-49370|https://sakaiproject.atlassian.net/browse/SAK-49370|smart-link] 

If 49370 is merged to 23x, then this fix needs to merge to 23x.

When grading a rubric attached to a GB item, the score is not passed to the GB and there are multiple console errors. I added a comment when grading the rubric and thatâ€™s when the wicket error displayed. 

{noformat}wicket-ajax-jquery.min-ver-5A00F2783FA172481F8A178E6C4F30A6.js:1  Wicket.Ajax:  Wicket.Ajax.Call.processEvaluation: Exception evaluating javascript: TypeError: Failed to execute 'appendChild' on 'Node': parameter 1 is not of type 'Node'., text: (function(){GbGradeTable.instance.setDataAtCell(rubricGradingRow, rubricGradingCol, rubricGradingPoints.toString());})();(function(){var win;
{noformat}

Uncaught TypeError: Failed to execute 'appendChild' on 'Node': parameter 1 is not of type 'Node'.

{noformat}gradebook-gbgrade-table.js?version=39a9a433:321  Uncaught TypeError: Failed to execute 'appendChild' on 'Node': parameter 1 is not of type 'Node'.
    at GbGradeTable.replaceContents (gradebook-gbgrade-table.js?version=39a9a433:321:11)
    at t.default.afterGetColHeader (gradebook-gbgrade-table.js?version=39a9a433:833:20)
    at e.value (handsontable.full.min.js?version=39a9a433:29:43457)
    at t.default.runHooks (handsontable.full.min.js?version=39a9a433:29:194868)
    at f.appendColHeader (handsontable.full.min.js?version=39a9a433:35:121186)
    at handsontable.full.min.js?version=39a9a433:29:203986
    at r (handsontable.full.min.js?version=39a9a433:29:14495)
    at handsontable.full.min.js?version=39a9a433:29:203916
    at Map.forEach (<anonymous>)
    at e.value (handsontable.full.min.js?version=39a9a433:29:203881){noformat}

handsontable.full.min.js?version=39a9a433:29  Uncaught TypeError: Cannot read properties of null (reading 'startColumn')

{noformat}handsontable.full.min.js?version=39a9a433:29  Uncaught TypeError: Cannot read properties of null (reading 'startColumn')
    at e.value (handsontable.full.min.js?version=39a9a433:29:278309)
    at e.value (handsontable.full.min.js?version=39a9a433:29:265341)
    at e.value (handsontable.full.min.js?version=39a9a433:29:263820)
    at e.value (handsontable.full.min.js?version=39a9a433:29:263507)
    at e.value (handsontable.full.min.js?version=39a9a433:29:243244)
    at f.scrollViewport (handsontable.full.min.js?version=39a9a433:35:119995)
    at e.<anonymous> (handsontable.full.min.js?version=39a9a433:29:166518)
    at handsontable.full.min.js?version=39a9a433:29:125190
    at r (handsontable.full.min.js?version=39a9a433:29:14495)
    at e.runLocalHooks (handsontable.full.min.js?version=39a9a433:29:125148){noformat}"
Enhance Log Messages for Improved Turnitin Error Detection,Improvement,Resolved,Sakai,software,"Modify the logs to obtain maximum possible information allowing us to identify errors in Turnitin.

# The method is ""getInstructorInfo"" (not ""getAbsoluteInstructorInfo"").
# Include the site that fails in the log.
# Exception details are not necessary. The error message is self-explanatory or should always be displayed."
Enhance Log Messages for Improved Turnitin Error Detection,Improvement,Resolved,Contrib: TurnItIn,software,"Modify the logs to obtain maximum possible information allowing us to identify errors in Turnitin.

# The method is ""getInstructorInfo"" (not ""getAbsoluteInstructorInfo"").
# Include the site that fails in the log.
# Exception details are not necessary. The error message is self-explanatory or should always be displayed."
Assignments-Grader: Console error as soon as the instructor enters a grade - Cannot read properties of undefined (reading 'match'),Bug,Closed,Sakai,software,"This is the same issue as in [https://sakaiproject.atlassian.net/browse/SAK-49316|https://sakaiproject.atlassian.net/browse/SAK-49316|smart-link] 

As son as the instructor enters a score in the grader, the following console error displays:

{noformat}sakai-grader.js?version=b35d2d60:706  Uncaught TypeError: Cannot read properties of undefined (reading 'match')
    at SakaiGrader._validateGradeInput (sakai-grader.js?version=b35d2d60:706:23)
    at EventPart.handleEvent (parts.js?version=b35d2d60:532:18)
    at EventPart.__boundHandleEvent (parts.js?version=b35d2d60:494:41)
_validateGradeInput @ sakai-grader.js?version=b35d2d60:706
handleEvent @ parts.js?version=b35d2d60:532
EventPart.__boundHandleEvent @ parts.js?version=b35d2d60:494{noformat}"
Improvements in SkinnableCharonPortal class,Improvement,Verified,Sakai,software,"Improve the servlet SkinnableCharonPortal which handles the url /portal

* Adds autowiring of spring components
* remove PageFilter as it was never used
* prefer initialization of config when servlet is initialized vs runtime
* add generics where missing
* code simplification"
Discussion: acessing topic settings while not logged in results in exception,Bug,Open,Sakai,software,"Steps to reproduce:

* get link for a topics settings (dfReviseTopicSettingsAttach) e.g. https://trunk-maria.nightly.sakaiproject.org/portal/site/RGOP_481O_3994/tool/be613949-9cf4-4b2f-8374-aabef23b6f7d/dfReviseTopicSettingsAttach
* Log out and access link
* After giving the credentials  an error page is displayed

Note: The error seems to be caused by the  HttpServletRequest object not having any param values attached to it. "
Create site from template doesn't display the course name unless the browser window is stretched wide,Bug,Closed,Sakai,software,"When I tested trunk a couple of days ago to verify [https://sakaiproject.atlassian.net/browse/SAK-49373|https://sakaiproject.atlassian.net/browse/SAK-49373|smart-link] , I did not see an issue with the course name displaying. I noticed the issue when trying to verify 23x, then checked trunk and now both require the browser window to be stretched in order to see the course name."
Add Word Count and Keyword criteria to Minimum Point Value in Short Answer Essay questions,Feature Request,Open,Sakai,software,"The Minimum Point Value option that is currently available in Test & Quizzes Short Answer questions is quite useful for assigning points to student submissions just for attempting the question. Since this type of question must otherwise be manually scored, the Minimum Point Value saves valuable time for instructors. 

See image below of the current UI for this feature: 

!min-pt-value-current.jpg|width=75%!

However, the Minimum Point Value would be a much more useful feature if it also included the ability to set some basic criteria for the content of the submission, such as Word Count and Keywords. Instructors may still want to review and adjust the points awarded, but having these additional options makes the auto-scoring of the student submissions a little bit smarter.

Many instructors specify word count for essay questions, and this would allow them to enter the word count minimum in order for the points to be awarded. 

In addition, the ability to optionally include a set of comma-delimited keywords would also allow instructors to make sure that certain required text content is at least mentioned in the submission before awarding the points. 

Below is the proposed UI with the two additional (optional) criteria:

!min-pt-value-proposed.jpg|width=83.33333333333334%!"
Forums: cannot be cast to class org.sakaiproject.api.app.messageforums.DiscussionTopic,Bug,Closed,Sakai,software,"Not sure how to reproduce the issue, we found some forums that couldnâ€™t be accessed because thereâ€™s a class cast exception.

{noformat}20-oct.-2023 09:34:48.216 ERROR [ajp-nio-0.0.0.0-8681-exec-18] o.s.c.a.m.u.DiscussionForumManagerImpl.hasNextTopic class org.sakaiproject.component.app.messageforums.dao.hibernate.TopicImpl$HibernateProxy$Ty3yjfw9 cannot be cast to class org.sakaiproject.api.app.messageforums.DiscussionTopic (org.sakaiproject.component.app.messageforums.dao.hibernate.TopicImpl$HibernateProxy$Ty3yjfw9 and org.sakaiproject.api.app.messageforums.DiscussionTopic are in unnamed module of loader java.net.URLClassLoader @6d7b4f4c)
20-oct.-2023 09:34:48.268 ERROR [ajp-nio-0.0.0.0-8681-exec-18] o.s.t.m.DiscussionForumTool.resetTopicById class org.sakaiproject.component.app.messageforums.dao.hibernate.TopicImpl$HibernateProxy$Ty3yjfw9 cannot be cast to class org.sakaiproject.api.app.messageforums.DiscussionTopic (org.sakaiproject.component.app.messageforums.dao.hibernate.TopicImpl$HibernateProxy$Ty3yjfw9 and org.sakaiproject.api.app.messageforums.DiscussionTopic are in unnamed module of loader java.net.URLClassLoader @6d7b4f4c)
java.lang.ClassCastException: class org.sakaiproject.component.app.messageforums.dao.hibernate.TopicImpl$HibernateProxy$Ty3yjfw9 cannot be cast to class org.sakaiproject.api.app.messageforums.DiscussionTopic (org.sakaiproject.component.app.messageforums.dao.hibernate.TopicImpl$HibernateProxy$Ty3yjfw9 and org.sakaiproject.api.app.messageforums.DiscussionTopic are in unnamed module of loader java.net.URLClassLoader @6d7b4f4c)
        at org.sakaiproject.component.app.messageforums.ui.DiscussionForumManagerImpl.hasPreviousTopic(DiscussionForumManagerImpl.java:797) ~[?:?]
        at jdk.internal.reflect.GeneratedMethodAccessor4226.invoke(Unknown Source) ~[?:?]
        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
        at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) ~[spring-aop-5.3.18.jar:5.3.18]
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) ~[spring-aop-5.3.18.jar:5.3.18]{noformat}

In DiscussionForumManagerImpl there are four methods sensible to this.

* hasNextTopic
* hasPreviousTopic
* getNextTopic
* getPreviousTopic

Only â€˜hasNextTopicâ€™ handles this exception correctly, the other three methods donâ€™t. "
"LTI - 21x: With unlimited submissions, the instructor no longer sees the LTI grading screen",Bug,Open,Sakai,software,"21x: When the instructor allows unlimited submissions for an LTI assignment, the instructor is unable to grade a submission."
"LTI: Even though debug mode is not on when adding a tool, when a user launches the tool they get the ""Proceed with LTI 1.3 launch"" button",Bug,Open,Sakai,software,"On 23x, after adding the LTI store, (and even individual tools), when the instructor launches the tool, they first get the debug information and have to press the â€œProceed with LTI 1.3 launchâ€. Debug mode is not on when adding the tool and the settings on 23x are the same as on 24x, yet 24x just launches the tool without the debug info, while 23x always shows the debug info. 

Debug info should not display unless the tool has the option enabled when adding the tool."
"I am unable to deploy Sakai 22 version,Tomcat9 does not allowing war deployment",Bug,Resolved,Sakai,software,"Not able to deploy .

Build success."
Grader: Peer info popover does not display,Bug,Resolved,Sakai,software,"When an instructor is presented the averaged score from peer evaluators, an info icon link (#peer-info) appears to the right of the Grade field in Grader. This link is intended to display a popover when clicked, but nothing displays. Refer to the attached screencast, PeerInfoPopoverNotWorking.mp4.

The en-us message is â€œYou are able to accept or override the averaged peer review grade in this section. Once this grade is released, this is the grade that will appear in the gradebook.â€

The icon is also underlined. This could be fixed by adding the class â€œtext-decoration-noneâ€ to the anchor element that has id=â€peer-infoâ€."
"Announcements: Merged announcements do not appear on user Home tools, Bullhorns",Bug,Resolved,Sakai,software,"If an instructor merges announcements from another site, the students in the class see the merged announcements on the course Overview, the course Dashboard, and the course Announcements tool. The announcement does NOT appear on the user Overview, user Dashboard, or user Announcements.  

This seems wrong, since Iâ€™ve mostly heard of instructors using the merge option to save time sending announcements to multiple sites. It seems reasonable that they would exepect the students in the second site to see the announcements the same as they would one created for that class. "
"When selecting attachment only in an assignment, the grader still shows ""Inline Submission"" in the gradable area",Bug,Verified,Sakai,software,"When selecting attachment only in an assignment, the grader still shows ""Inline Submission"" in the gradable area. â€œInline Submissionâ€ should not display."
Discussions/Rubrics: Criteria wonâ€™t expand in Criteria Summary,Bug,Closed,Sakai,software,"In the grading modal in Discussions, the rubric criteria in the Criteria Summary wonâ€™t expand. See the attached screencast, Discussions-CriteriaCannotExpand.mp4."
Dont fetch /api/users/undefined/grades,Bug,Closed,Sakai,software,I see lots of calls to /api/users/undefined/grades
Gradebook: Grade Rubric option unavailable for hidden item scenarios,Bug,Closed,Sakai,software,"The option to grade with a rubric in Gradebook is prevented when gradebook items are hidden and then new rubrics are added to the site. The result is that â€˜Grade Rubricâ€™ is unavailable within a cell for an item associated with a rubric.

The test plan describes a simplified, boiled down version of a general problem Iâ€™ve observed, though the test plan reproduces the problem reliably. That said, there may be exceptions to the following statements of related behavior Iâ€™ve generally observed.

The order of hiding gradebook items and then adding new rubrics seems to be key to causing this bug. After those user events, the missing â€˜Grade Rubricâ€™ option bug seems to persist when gradebook items are hidden which is very common for gradebooks with more than a handful of items (so as to workaround horizontal scrolling, etc.)

To workaround the problem, the instructor seems to need to â€˜Show Allâ€™ the items. Then the gradebook item(s) associated with rubrics seem to have the â€˜Grade Rubricâ€™ option available for their cells. Hiding items again causes the â€˜Grade Rubricâ€™ option to again disappear."
Gradebook/Rubrics: Display problem with Grading Rubric tab,Bug,Open,Sakai,software,"The rubric displayed in the Grading Rubric tab of a modal in Gradebook will no longer display after accessing either of the two tabs: Student Summary and Criteria Summary. The modal in question displays when selecting â€œRubric Preview/Statisticsâ€ for a gradebook item that uses a rubric.

Refer to the test plan for more details."
Assignments: Some chars in assignment title affect download all submissions,Bug,Closed,Sakai,software,"Downloading all submissions from an assignment with a special character in its title wonâ€™t work as expected. We found cases with the {{â†’}} character.

!image-20231019-155908.png|width=351,height=280!



*1.* The downloaded zip will use the assignment id instead of its title as filename (verifiable in master).

*2.* In some cases it can lead to not downloading the file at all (issue found at UPV).

The following error is thrown:

!image-20231019-155940.png|width=1906,height=137!"
SiteNav: tool list expansion error with special character period,Bug,Closed,Sakai,software,"Steps to reproduce:

* create site with site id containing â€œ. â€œ character
* visit site
* in SiteNav click on button to expand/collapse tool list
* Nothing happens

console error message: Uncaught DOMException: Document.querySelector: '#recent-site-<siteId>-page-list' is not a valid selector"
Lessons: Item name on the dialog is missing when adding a Learning app if the option selected is Open in New Window ,Bug,Closed,Sakai,software,Item name on the dialog is missing when adding a Learning app if the option selected is Open in New Window 
Missing header Samigo,Bug,Verified,Sakai,software,Missing header : *SAK-42608*
T&Q: Numeric response question > Uncaught TypeError: $(...).popover is not a function,Bug,Closed,Sakai,software,"The numeric response question was not fixed in [https://sakaiproject.atlassian.net/browse/SAK-48578|https://sakaiproject.atlassian.net/browse/SAK-48578|smart-link] and the pop-over console error is still displaying:

{noformat}Uncaught TypeError: $(...).popover is not a function
    <anonymous> finInputValidator.js:63
    timer finInputValidator.js:119
    setTimeout handler*throttle/< finInputValidator.js:118
    jQuery 10
    <anonymous> finInputValidator.js:50
    jQuery 8
finInputValidator.js:63:15
    <anonymous> finInputValidator.js:63
    timer finInputValidator.js:119
    (Async: setTimeout handler)
    throttle finInputValidator.js:118
    jQuery 10
    <anonymous> finInputValidator.js:50
    jQuery 8{noformat}

{noformat}Uncaught TypeError: $(...).popover is not a function
    <anonymous> finInputValidator.js:46
    jQuery 10
    <anonymous> finInputValidator.js:44
    jQuery 8
finInputValidator.js:46:15
    <anonymous> https://trunk-maria.nightly.sakaiproject.org/samigo-app/js/finInputValidator.js:46
    jQuery 10
    <anonymous> https://trunk-maria.nightly.sakaiproject.org/samigo-app/js/finInputValidator.js:44
    jQuery 8{noformat}"
PR_CONNECT_RESET_ERROR while grading samigo submission and viewing uploaded files with node behind F5 load balancer,Bug,Open,Sakai,software,"see discussion on the sakai-dev forum:  [https://groups.google.com/a/apereo.org/g/sakai-dev/c/3zWwy1PoPhs/|https://groups.google.com/a/apereo.org/g/sakai-dev/c/3zWwy1PoPhs/|smart-link] 

We recently upgraded our F5 load balancer to 17.x and users started contacting us that they were seeing   a PR_CONNECT_RESET_ERROR while grading samigo submission and viewing uploaded files.

The F5 load balancer logs showed an error like:  

""http_handle_pipelined_data - Invalid action:0x108000 Server sends too much data.â€

[https://my.f5.com/manage/s/article/K42151600|https://my.f5.com/manage/s/article/K42151600]  

that article mentions, that the content-length header may not match the body of the response."
Tests & Quizzes: View filter needs updated to work with new test status,Bug,Closed,Sakai,software,"The View filter for Tests & Quizzes does not pick up the new Published status options from [https://sakaiproject.atlassian.net/browse/SAK-47864|https://sakaiproject.atlassian.net/browse/SAK-47864|smart-link]. View: Drafts picks up all the Working Copy (Draft) tests, but the Published -All, Active (Published), and Closed (Published) options do not display any. Will need to rename the options to match the new status and add the Scheduled (Published) option."
Allow one-click unsubscribe from email notifications,Bug,Open,Sakai,software,"The GMail team indicates that they will begin blocking email from large senders (> 5000 per day) that donâ€™t provide a one-click unsubscribe option.

One-click unsubscribe is extremely problematic for an LMS delivering crucial information or for an emergency-info system hosted by an academic institution.

A possible workflow for complying:

# Provide a one-click unsubscribe option in every email sent
# Warn the user the next time they login to Sakai that email is disabled. Provide link to re-enable
# Begin warning instructors that email has not been sent to XX, YY, ZZ because they disabled"
Messages. Error when moving a message to a different folder,Bug,Closed,Sakai,software,"Error when moving a message. Message should be sent to a role or group

{noformat}org.sakaiproject.portal.api.PortalHandlerException: org.sakaiproject.tool.api.ToolException: javax.servlet.ServletException: java.lang.NullPointerException
    at org.sakaiproject.portal.charon.handlers.ToolHandler.doPost(ToolHandler.java:73)
caused by: org.sakaiproject.tool.api.ToolException: javax.servlet.ServletException: java.lang.NullPointerException
    at org.sakaiproject.portal.charon.SkinnableCharonPortal.forwardTool(SkinnableCharonPortal.java:1485)
caused by: javax.servlet.ServletException: java.lang.NullPointerException
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:451)
caused by: javax.faces.el.EvaluationException: java.lang.NullPointerException
    at com.sun.faces.application.ActionListenerImpl.getNavigationOutcome(ActionListenerImpl.java:82)
caused by: java.lang.NullPointerException
    at org.sakaiproject.component.app.messageforums.ui.PrivateMessageManagerImpl.movePvtMsgTopic(PrivateMessageManagerImpl.java:621)
    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:566)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
    at com.sun.proxy.$Proxy327.movePvtMsgTopic(null:-1)
    at org.sakaiproject.tool.messageforums.PrivateMessagesTool.processPvtMsgMoveMessage(PrivateMessagesTool.java:3949)
    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:566)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:252)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:266)
    at org.apache.jasper.el.JspMethodExpression.invoke(JspMethodExpression.java:80)
    at com.sun.faces.application.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:66)
    at com.sun.faces.application.ActionListenerImpl.getNavigationOutcome(ActionListenerImpl.java:82)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:71)
    at javax.faces.component.UICommand.broadcast(UICommand.java:222)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:847)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1396)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:58)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:76)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:177)
    at javax.faces.webapp.FacesServlet.executeLifecyle(FacesServlet.java:707)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:451)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
    at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:450)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:357)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294)
    at org.sakaiproject.tool.messageforums.MessageForumsFilePickerServlet.dispatch(MessageForumsFilePickerServlet.java:171)
    at org.sakaiproject.jsf2.util.JsfTool.doPost(JsfTool.java:249)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
    at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:450)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294)
    at org.sakaiproject.tool.impl.ActiveToolComponent$MyActiveTool.forward(ActiveToolComponent.java:508)
    at org.sakaiproject.portal.charon.SkinnableCharonPortal.forwardTool(SkinnableCharonPortal.java:1485)
    at org.sakaiproject.portal.charon.handlers.ToolHandler.doTool(ToolHandler.java:200)
    at org.sakaiproject.portal.charon.handlers.ToolHandler.doGet(ToolHandler.java:96)
    at org.sakaiproject.portal.charon.handlers.ToolHandler.doPost(ToolHandler.java:73)
    at org.sakaiproject.portal.charon.SkinnableCharonPortal.doPost(SkinnableCharonPortal.java:1158)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
    at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:500)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
    at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:768)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
    at java.lang.Thread.run(Thread.java:829)


user: 244e3750-f778-4d48-94e7-90a9c7642eee

usage-session: 0ca29a93-d601-4c27-868d-fee61ac4cef6

time: Oct 18, 2023, 7:07:48 AM EDT{noformat}"
Lessons: warnings in server logs every time the instructor clicks on Lessons,Bug,Open,Sakai,software,"I donâ€™t see this when a student launches the Lessons page, but every time the instructor launches the Lessons page, the following warning display on the server:

17-Oct-2023 17:27:52.594 INFO [http-nio-20313-exec-1] o.s.l.t.p.ShowPageProducer.getUserDisplayName Owner #: null does not have an associated user.
17-Oct-2023 17:27:52.635 WARN [http-nio-20313-exec-1] PonderUtilCore.processComponent Submitting name for csrf28 not set by previous fixup"
"Changing default Display Options when ""Add Learning App""",Bug,Closed,Sakai,software,"With the actually Default Option: Open in New Lessons tool Page with 'next' and 'back' buttons
there are some cookies problems on IOS.

Open in New Window should be the default option.

!image-20231017-120736.png|width=388,height=138!"
Preferences: prefs.css is not found on 24 & 23,Bug,Closed,Sakai,software,"This may have been missed with the portal updates on 24 & 23 since the console error is not on 22. When loading Preferences > Sites, there is a console error:

{noformat}hidden:1047 
GET https://trunk-maria.nightly.sakaiproject.org/sakai-user-tool-prefs/css/prefs.css net::ERR_ABORTED 404 (Not Found){noformat}"
"Create site from template with ""Continue with no roster"" ends up in stacktrace",Bug,Closed,Sakai,software,"sitemanage.continueWithNoRoster=true must be enabled

{noformat}caused by: java.lang.NullPointerException
    at org.sakaiproject.site.tool.SiteAction.getOrderedToolList(SiteAction.java:6255)
    at org.sakaiproject.site.tool.SiteAction.getTools(SiteAction.java:6186)
    at org.sakaiproject.site.tool.SiteAction.buildContextForTemplate(SiteAction.java:1798)
    at org.sakaiproject.site.tool.SiteAction.buildMainPanelContext(SiteAction.java:1398)
    at org.sakaiproject.site.tool.SiteAction.buildShortcutPanelContext(SiteAction.java:1323)
    at jdk.internal.reflect.GeneratedMethodAccessor7683.invoke(null:-1)
    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:566)
    at org.sakaiproject.cheftool.VelocityPortletPaneledAction.toolModeDispatch(VelocityPortletPaneledAction.java:409)
    at org.sakaiproject.site.tool.SiteAction.toolModeDispatch(SiteAction.java:14934)
    at org.sakaiproject.cheftool.ToolServlet.doGet(ToolServlet.java:234)
    at org.sakaiproject.cheftool.VelocityPortletPaneledAction.doGet(VelocityPortletPaneledAction.java:1098)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:670)
    at org.sakaiproject.vm.ComponentServlet.service(ComponentServlet.java:56)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:779)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
    at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:447)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:711)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:459)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:353)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:313)
    at org.sakaiproject.tool.impl.ActiveToolComponent$MyActiveTool.forward(ActiveToolComponent.java:508)
    at org.sakaiproject.portal.charon.SkinnableCharonPortal.forwardTool(SkinnableCharonPortal.java:1502)
    at org.sakaiproject.portal.charon.handlers.ToolHandler.doTool(ToolHandler.java:200)
    at org.sakaiproject.portal.charon.handlers.ToolHandler.doGet(ToolHandler.java:96)
    at org.sakaiproject.portal.charon.SkinnableCharonPortal.doGet(SkinnableCharonPortal.java:861)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:670)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:779)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
    at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:496)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189){noformat}"
Discussions: accessing Notifications (dfWatchSettings) with direct link does not keep default settings,Bug,Open,Sakai,software,"Testing [https://sakaiproject.atlassian.net/browse/SAK-49351|https://sakaiproject.atlassian.net/browse/SAK-49351|smart-link] , the missing key issue is resolved, but the default settings for notifications are not kept in this case. Once 49351 is merged to the other servers, they will have this issue also."
Rubrics-Grader-Assignment: There is a remove {} link when grading rubrics in assignments - {} braces should not show and there shouldn't even be a remove link when not graded,Bug,In Progress,Sakai,software,"This does not happen every time, but seems to happen after a student has been graded, affecting other student grading screens even if not graded. If a student without a submission is graded, the â€œRemove {color:#bf2600}*{}*{color}â€ link shows immediately after clicking Done.

Win10: Chrome, Edge, Firefox

When the instructor has graded a student using a rubric a â€œRemove {color:#bf2600}*{}*{color}â€ link appears beside the rubric icon with the curly braces. "
"Assignments-Grader-Rubrics: Adding a comment has the pop-up too far to the right, Done button is cut off",Bug,Closed,Sakai,software,"When grading a rubric in assignments using the Sakai Grader, when adding a comment the pop-up window is too far to the right, hiding the Done button."
Assignments-Peer Reviews-Rubrics: Students are able to see how peers have graded them when they grade a peer review,Bug,Open,Sakai,software,"Testing [https://sakaiproject.atlassian.net/browse/S2U-34|https://sakaiproject.atlassian.net/browse/S2U-34|smart-link] on trunk. For peer reviews, if a student has already been reviewed, they can see the grade their peer(s) assigned using the drop-down for Student Summary or Criteria Summary.

This is related to the other ticket filed: [https://sakaiproject.atlassian.net/browse/SAK-49367|https://sakaiproject.atlassian.net/browse/SAK-49367|smart-link] If there is a reason why a student should have those options, (which I wouldnâ€™t think they should), then this needs to be fixed so they cannot see peer grading before the instructor has released the assignment. 

There is another case that needs to be corrected: the self-review section for the instructor using the old grader should probably not show the Summary tabs."
Assignments > Self-report: Instructor unable to view the graded rubric (new grader),Feature Request,Open,Sakai,software,"Testing [https://sakaiproject.atlassian.net/browse/S2U-34|https://sakaiproject.atlassian.net/browse/S2U-34|smart-link] since it is on trunk. I created an assignment with a rubric and allowing students to self-report. After a couple of students graded their own assignments and submitted, the instructor graded. 

Using the Sakai Grader, the â€œgradedâ€ rubric does not display the score the students set for themselves or have the selected cells highlighted. There are some console errors but I believe they are related to rubrics and donâ€™t have anything to do with this feature.

If the instructor selects Student Summary or Criteria Summary from the drop-down, they are able to see the scores the students assigned to themselves. 

Since this has been merged to trunk, I would expect the instructor to be able to use the Sakai Grader.

Using the classic grader, the instructor does see the studentâ€™s self-graded rubric and is able to grade the instructorâ€™s rubric. Verified the student sees both rubrics on the released assignment."
Assignments: Self-report rubric is displaying options the student shouldn't have,Bug,Resolved,Sakai,software,"Testing [https://sakaiproject.atlassian.net/browse/S2U-34|https://sakaiproject.atlassian.net/browse/S2U-34|smart-link] since it is on trunk,

Assignments now have the option to allow students to self-report with a rubric. When the student opens the assignment, the rubric has a drop-down with the following options: Grading Rubric, Student Summary and Criteria Summary. I do not believe studentâ€™s should have a drop-down, they should just be able to grade their own rubric.

After submitting the assignments and reopening it, the rubric displays with 3 tabs:  Grading Rubric, Student Summary and Criteria Summary. Clicking on Student Summary or Criteria Summary displays â€œNo students have been evaluated yet.â€ Clicking the Grading Rubric tab no longer displays the rubric. I do not think the students should have the Student Summary and Criteria Summary tabs."
Allow DASHBOARD to be an importable tool with it's content and settings,Bug,Open,Sakai,software,"!Screenshot 2023-10-13 at 4.57.44 PM.png|width=1511,height=838!

With the change in Dashboard from a stealth tool, institutions using the Import/Replace process to pull content in from other course sites must copy and paste the content directly from the originating site to the new site as well as modify the Layout settings in the new site."
Logo incorrect on xlogin page with custom skin,Bug,Closed,Sakai,software,"When creating a custom skin, the logo on the xlogin page uses the default sakai logo. "
Lessons: Cannot reorder items when some items have null sakaiId,Bug,Resolved,Sakai,software,"Weâ€™ve witnessed some lessons than canâ€™t be reordered because items have a null sakaiId.

{noformat}13-oct.-2023 13:51:52.859 INFO [pool-3-thread-1] o.s.a.i.DbAuthzGroupService.run RefreshAuthzGroupTask.run() refreshed 2 realms in 0.313 seconds, longest realm was /site/GRA_12272_2023 at 0.308 seconds
13-oct.-2023 13:52:11.205 WARN [ajp-nio-0.0.0.0-8681-exec-6] PonderUtilCore.handleLevel1Error Exception rendering view:
java.lang.NullPointerException: null
        at org.sakaiproject.lessonbuildertool.tool.producers.ReorderProducer.getImageSourceDecoratorFromMimeType(ReorderProducer.java:415) ~[classes/:?]
        at org.sakaiproject.lessonbuildertool.tool.producers.ReorderProducer.getImageSourceDecorator(ReorderProducer.java:381) ~[classes/:?]
        at org.sakaiproject.lessonbuildertool.tool.producers.ReorderProducer.fillComponents(ReorderProducer.java:210) ~[classes/:?]
        at uk.org.ponder.rsf.view.support.ViewCollector.fillComponents(ViewCollector.java:56) ~[rsf-core-1.3.jar:?]
        at uk.org.ponder.rsf.view.support.LayoutCollector.fillComponents(LayoutCollector.java:68) ~[rsf-core-1.3.jar:?]
 {noformat}

After handling the null value correctly they work fine.

Sorry I donâ€™t have more data about the issue, but itâ€™s worth fixing it than leaving it opened."
Update Lombok 1.18.30,Bug,Closed,Sakai,software,"h3. v1.18.30 (September 20th, 2023)

* PLATFORM: Initial JDK21 support added. [Issue #3393|https://github.com/projectlombok/lombok/issues/3393].
* BUGFIX: Any {{@Helper}} class directly in a method (and not nested more deeply) wouldn't work. [Issue #3370|https://github.com/projectlombok/lombok/issues/3370].
* BUGFIX: If using the module system and lombok is on the runtime classpath (shouldn't be, but happens), you'd get a split package error: {{Package org.objectweb.asm in both module lombok and module org.objectweb.asm}}. [Issue #3474|https://github.com/projectlombok/lombok/issues/3474]
* BUGFIX: Lombok wasn't properly copying the annotations it should be copying when generating methods in {{record}}s. [Issue #3315|https://github.com/projectlombok/lombok/issues/3315].
* BUGFIX: Delomboking anything with {{@lombok.Singular}} in it wouldn't remove that annotation. [Issue #1377|https://github.com/projectlombok/lombok/issues/1377].
* BUGFIX: Calling extension methods such that automatic widening is applied (i.e. calling {{void ext(long arg)}} with an {{int}}) would fail at runtime. [Issue #3463|https://github.com/projectlombok/lombok/issues/3463].
* BUGFIX: Extension methods can now be used in records. [Issue #3450|https://github.com/projectlombok/lombok/issues/3450].
* BUGFIX: {{@Getter(lazy=true)}} with complicated initialization expressions would fail on javac. [Issue #3314|https://github.com/projectlombok/lombok/issues/3314].
* BUGFIX: Using the maven surefire plugin with a {{module-info.java}} based project would fail with a {{SurefireBooterForkException}}. [Issue #3474|https://github.com/projectlombok/lombok/issues/3474]."
Update UnboundID LDAP SDK for Java 6.0.10,Bug,Closed,Sakai,software,"h1. UnboundID LDAP SDK for Java 6.0.10

[Latest|https://github.com/pingidentity/ldapsdk/releases/latest]

Compare

!12702251?s=40&v=4|width=40,height=40,alt=""@dirmgr""!

[dirmgr|https://github.com/dirmgr] released this 3 weeks ago

Â· [2 commits |https://github.com/pingidentity/ldapsdk/compare/6.0.10...master]to master since this release

[6.0.10|https://github.com/pingidentity/ldapsdk/tree/6.0.10]

{{51b3c7f}}

We have just released version 6.0.10 of the [UnboundID LDAP SDK for Java|https://github.com/pingidentity/ldapsdk]. It is available for download from [GitHub|https://github.com/pingidentity/ldapsdk/releases] and [SourceForge|https://sourceforge.net/projects/ldap-sdk/files/], and it is available in the [Maven Central Repository|https://central.sonatype.com/artifact/com.unboundid/unboundid-ldapsdk/6.0.10]. You can find the release notes for the 6.0.10 release (and all previous versions) at [https://docs.ldap.com/ldap-sdk/docs/release-notes.html|https://docs.ldap.com/ldap-sdk/docs/release-notes.html|smart-link] , but hereâ€™s a summary of the changes:

* We added a new {{ReusableReferralConnector}} interface that makes it possible to create referral connectors that can be reused for following multiple referrals. Weâ€™ve added a new {{PooledReferralConnector}} implementation that uses connection pools for improved performance when following multiple referrals.
* We fixed an issue in which the {{parallel-update}} tool could write malformed data to the reject log file when multiple write operations were rejected concurrently.
* We added a {{PLAINBindRequest.encodeCredentials}} method that can be used to retrieve the encoded credentials for a SASL PLAIN bind request.
* We added {{JSONNumber.getValueAsInteger}} and {{getValueAsLong}} methods that will return the value of a JSON number as an {{Integer}} or {{Long}}, but only if the conversion can be made losslessly. The methods will return {{null}} if the value is a floating-point number, or if the value is outside the supported range for the data type.
* We added a {{StaticUtils.getBacktrace}} method that can be used to retrieve a compact, single-line string representation of a stack trace representing the code location from which the method was called.
* We added support for a new Ping-proprietary â€œaccess log fieldâ€ request control, which can be used to indicate that the server should include a specified set of name-value pairs in the access log message for the associated operation. We also updated the {{ldapsearch}} and {{ldapmodify}} tools to add a new {{--accessLogField}} argument to include this control in requests.
* We added support for a new Ping-proprietary â€œgenerate access tokenâ€ request control that can be included in a bind request to indicate that the server should include an access token in a corresponding response control included in the response to a successful bind operation. That access token can be used to authenticate to the Ping Identity Directory Server with the OAUTHBEARER SASL mechanism. This may be especially useful when initially authenticating to the Directory Server with a mechanism that relies on single-use credentials (e.g., UNBOUNDID-TOTP, UNBOUNDID-DELIVERED-OTP, or UNBOUNDID-YUBIKEY-OTP) because it allows you to establish multiple connections (e.g., using a connection pool or to replace connections that are no longer valid). We also updated the {{ldapsearch}} and {{ldapmodify}} tools to add a new {{--generateAccessToken}} argument to request that the server return an access token in the bind response.
* We updated support for the {{ds-pwp-state-json}} virtual attribute to include the {{has-password-encoded-with-non-current-settings}} field, which may indicate whether the user has a password that is encoded with settings that are different from the current configuration for the associated password storage scheme, and the {{non-current-password-storage-scheme-settings-explanations}} field, which may explain the ways in which the password encoding differs from the current configuration.
* We updated the documentation to include the latest versions of draft-ietf-kitten-scram-2fa, draft-melnikov-scram-bis, and draft-melnikov-scram-sha3-512 in the set of LDAP-related specifications."
Assignments: Sites with long siteIds cannot be assigned to groups.,Bug,Open,Sakai,software,"If the siteId is long you cannot assign assignments to groups, this happened in one of our instances.

The siteId in this case was â€˜ICDA2-AR-ANALISIS_Y_EVALUACION_DE_INVERSIONES-2023-2â€™.

This is the error shown in the logs.

{noformat}Caused by: com.mysql.jdbc.MysqlDataTruncation: Data truncation: Data too long for column 'GROUP_ID' at row 1
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3974) ~[mysql-connector-java-5.1.46.jar:5.1.46]
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3912) ~[mysql-connector-java-5.1.46.jar:5.1.46]
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2530) ~[mysql-connector-java-5.1.46.jar:5.1.46]
	at com.mysql.jdbc.ServerPreparedStatement.serverExecute(ServerPreparedStatement.java:1283) ~[mysql-connector-java-5.1.46.jar:5.1.46]
	at com.mysql.jdbc.ServerPreparedStatement.executeInternal(ServerPreparedStatement.java:783) ~[mysql-connector-java-5.1.46.jar:5.1.46]
	at com.mysql.jdbc.PreparedStatement.executeUpdateInternal(PreparedStatement.java:2079) ~[mysql-connector-java-5.1.46.jar:5.1.46]
	at com.mysql.jdbc.PreparedStatement.executeUpdateInternal(PreparedStatement.java:2013) ~[mysql-connector-java-5.1.46.jar:5.1.46]
	at com.mysql.jdbc.PreparedStatement.executeLargeUpdate(PreparedStatement.java:5104) ~[mysql-connector-java-5.1.46.jar:5.1.46]
	at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1998) ~[mysql-connector-java-5.1.46.jar:5.1.46]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-4.0.3.jar:?]{noformat}

Leaves the assignment in an unconsistent status and the groups locked.

!image-20231013-110144.png|width=1702,height=398!



!image-20231013-110105.png|width=1463,height=290!"
Site Info: Parent site has no sub site link,Bug,Open,Sakai,software,"This is working correctly in 22x. In 24 and 23, when setting the parent course, there is no sub site link and both courses continue to display in the navigation. Possibly this is why the issue with breadcrumbs in [https://sakaiproject.atlassian.net/browse/SAK-49165|https://sakaiproject.atlassian.net/browse/SAK-49165|smart-link] exists?

See [https://trunk-maria.nightly.sakaiproject.org/portal/help/TOCDisplay/content.hlp?docId=howdoilinktoaparentsite|https://trunk-maria.nightly.sakaiproject.org/portal/help/TOCDisplay/content.hlp?docId=howdoilinktoaparentsite|smart-link] 

There were some lines in the server logs:

Site 101: b506ef27-d490-418b-bad3-81d434a1f1ed
Site 201: da5fa074-a419-4876-8db8-202fd1aaff85

{noformat}11-Oct-2023 19:18:17.932 INFO [http-nio-20313-exec-24] o.s.c.s.s.SectionManagerImpl.syncSections Synchronizing internal sections with externally defined sections in site da5fa074-a419-4876-8db8-202fd1aaff85

11-Oct-2023 19:18:18.018 INFO [http-nio-20313-exec-24] o.s.c.s.s.SectionManagerImpl.syncSections Synchronizing internal sections with externally defined sections in site da5fa074-a419-4876-8db8-202fd1aaff85

11-Oct-2023 19:18:18.169 INFO [http-nio-20313-exec-24] o.s.c.s.s.SectionManagerImpl.syncSections Synchronizing internal sections with externally defined sections in site da5fa074-a419-4876-8db8-202fd1aaff85

11-Oct-2023 19:18:18.239 INFO [http-nio-20313-exec-24] o.s.c.s.s.SectionManagerImpl.syncSections Synchronizing internal sections with externally defined sections in site da5fa074-a419-4876-8db8-202fd1aaff85
{noformat}"
When editing Preferences locks are not being cleared,Bug,Closed,Sakai,software,"Warnings about duplicate locks are appearing in the logs for Preferemces.

{noformat}01-Oct-2023 09:28:43.148 WARN [http-nio-20313-exec-18] o.s.d.i.BasicSqlService.dbWriteCount Sql.dbWrite(): recordAlreadyExists: true, failQuiet: 1, : error code: 1062, sql: insert into SAKAI_LOCKS (TABLE_NAME,RECORD_ID,LOCK_TIME,USAGE_SESSION_ID) values (?, ?, ?, ?), binds:  SAKAI_PREFERENCES -541706085 - 23058466-078f-46ea-a7ce-b2ab167766c5 20231001132843126 dcfaa64f-ae89-42a7-a462-bd3eeeacee4d, error: java.sql.SQLIntegrityConstraintViolationException: (conn=69459) Duplicate entry 'SAKAI_PREFERENCES--541706085 - 23058466-078f-46ea-a7ce-b2ab16...' for key 'SAKAI_LOCKS_INDEX'
01-Oct-2023 09:28:43.148 WARN [http-nio-20313-exec-2] o.s.d.i.BasicSqlService.dbWriteCount Sql.dbWrite(): recordAlreadyExists: true, failQuiet: 1, : error code: 1062, sql: insert into SAKAI_LOCKS (TABLE_NAME,RECORD_ID,LOCK_TIME,USAGE_SESSION_ID) values (?, ?, ?, ?), binds:  SAKAI_PREFERENCES -541706085 - 23058466-078f-46ea-a7ce-b2ab167766c5 20231001132843126 dcfaa64f-ae89-42a7-a462-bd3eeeacee4d, error: java.sql.SQLIntegrityConstraintViolationException: (conn=69467) Duplicate entry 'SAKAI_PREFERENCES--541706085 - 23058466-078f-46ea-a7ce-b2ab16...' for key 'SAKAI_LOCKS_INDEX'{noformat}

This indicates that the locks are not being cleared on the previous edit for preferences.

Itâ€™s not clear which action has not been clearing the locks, so in this issue we go through all the locations preferences are being edited and ensure that the edit is either canceled on an exception or that it is committed in finally. "
"Gradebook > Grade Release Rules > Points: Highlight color of preview needs to be adjusted, dark mode is unreadable",Bug,Closed,Sakai,software,"When going to Gradebook > Settings > Grade Release Rules and checking the Points checkbox, a Preview is shown with a bright blue background. This makes it hard to see the text and it is much worse when using dark mode."
Update Apache Tomcat  9.0.81,Bug,Closed,Sakai,software,"h3. Tomcat 9.0.81 Released

The Apache Tomcat Project is proud to announce the release of version 9.0.81 of Apache Tomcat. This release implements specifications that are part of the Java EE 8 platform. The notable changes compared to 9.0.81 include:

* Update Tomcat Native to 1.2.39 to pick up Windows binaries built with OpenSSL 3.0.11.
* Provide a lifecycle listener that will automatically reload TLS configurations a set time before the certificate is due to expire. This is intended to be used with third-party tools that regularly renew TLS certificates.
* Improve performance of EL expressions in JSPs that use implicit objects.
* Several improvements to thread safety and recycling cleanup.

Full details of these changes, and all the other changes, are available in the [Tomcat 9 changelog|https://tomcat.apache.org/tomcat-9.0-doc/changelog.html#Tomcat_9.0.81_(remm)]"
Samigo: Export pool and clicking Cancel displays a console error - SPNR is not defined,Bug,Verified,Sakai,software,"The ability to export a Question Pool is now on trunk, thanks to [https://sakaiproject.atlassian.net/browse/S2U-25|https://sakaiproject.atlassian.net/browse/S2U-25|smart-link]. However, there is a console error when clicking Cancel on the export page.

{noformat}editPool:1156  Uncaught ReferenceError: SPNR is not defined
    at HTMLInputElement.onclick (/portal/site/4e9030ef-43a3-42cf-be8a-bb64c125a592/tool/a16f12f1-ac36-436d-97c8-2068960d75e1/jsf/questionpool/editPool:1156:277){noformat}"
No ability to delete files from drop box,Bug,Resolved,Sakai,software,"Somehow organizers in project sites do not have permission to delete files from dropbox, once files are distributed, which is inconvenient if a file is accidentally uploaded that is not the correct one.



This feature is available in the regular sites, just not project sites.  Our instructors and staff love using project sites.



!image-20231009-201255.png|width=1621,height=481!"
Assignments: New event for student saving peer review,Improvement,Resolved,Sakai,software,"I noticed this when reviewing event logs for a student where there was a peer assessment. There did not appear to be an event for the student saving a peer assessment. There was the asn.read.submission when the student viewed their assigned peer review. There was a content.new event if they uploaded a file for feedback. But there was not an event that was clear when they saved the peer review.

I propose two events - asn.save.peer and asn.submit.peer (or whichever codes work best, I was trying to follow the existing asn.save.submission and asn.submit.submission).

asn.save.peer - Student clicks the Save button on the peer assessment

asn.submit.peer - Student clicks the Submit button on the peer assessment"
Discussion: acessing some tabs directly while not not logged in results in MissingResourceException,Bug,Closed,Sakai,software,"Steps to reproduce:

* get link for Notifications (dfWatchSettings) or Template Settings (dfTemplateSettings) Tab in Discussion tool: e.g. https://trunk-maria.nightly.sakaiproject.org/portal/site/VUXM_112S_1480/tool/4c37cfa9-ccfe-4c08-87c6-e26888c14541/discussionForum/area/dfTemplateSettings
* Log out and access link.
* After giving the credentials the page appears with missing key exceptions (see attachment)"
Roster: Parsing a potentially infinite object to JSON,Bug,Closed,Sakai,software,"A USER which has an attribute createBy or modifiedBy that is not a String (with the ID of the user) is another USER object that in turn... and so on to infinity... 

It will be throwing the JPA object directly to parse to JSON... and of course as in JPA that is lazy... if you don't ask for the createBy property it will NEVER create that second user... But when parsing to JSON the parser does look for ALL THE PROPERTIES...

It is possible that ROSTER does not use the createdBy or the modifiedBy of the user for anything, but it spends hours of CPU in mapping recursively to JSON.

!image-20231009-090734.png|width=938,height=999!"
Samigo: Console errors on Event Logs page if there are no quizzes available,Bug,Verified,Sakai,software,"If there are no quizzes available to display on the Event Logs page, loading the page displays a console error. Currently this is not an issue on 23 & 22. Believe this is  side affect of [https://sakaiproject.atlassian.net/browse/S2U-24|https://sakaiproject.atlassian.net/browse/S2U-24|smart-link] 

{noformat}dataTables.js:24  Table with id eventLogId:eventLogTable not found
setupDataTable @ dataTables.js:24
(anonymous) @ mainIndex:145
i @ jquery.js:3232
fireWith @ jquery.js:3362
ready @ jquery.js:3582
K @ jquery.js:3617{noformat}"
Samigo: Event Log > Filter by assessment drop-down not wide enough,Bug,Open,Sakai,software,Believe this is a side affect of [https://sakaiproject.atlassian.net/browse/S2U-24|https://sakaiproject.atlassian.net/browse/S2U-24|smart-link] The drop-down on the Event Logs page for Filter by Assessment is not wide enough to accommodate the text â€œAll assessmentsâ€.
GB: Import csv or excel file console error - Cannot read properties of undefined (reading 'charAt'),Bug,Open,Sakai,software,"When importing a GB file (doesnâ€™t matter if itâ€™s csv or xlsx) there is a console error. The grade imports, but the console error is there whether the file is imported or the user clicks to cancel.

{noformat}VM1393 vendor.bundle.js:2  Uncaught TypeError: Cannot read properties of undefined (reading 'charAt')
    at o (VM1393 vendor.bundle.js:2:255657)
    at VM1393 vendor.bundle.js:2:255703
    at 38338 (VM1393 vendor.bundle.js:2:255815)
    at r (VM1394 content.bundle.js:61:107850)
    at 14387 (VM1393 vendor.bundle.js:2:243998)
    at r (VM1394 content.bundle.js:61:107850)
    at 73141 (VM1393 vendor.bundle.js:2:252307)
    at r (VM1394 content.bundle.js:61:107850)
    at 9212 (VM1393 vendor.bundle.js:2:251795)
    at r (VM1394 content.bundle.js:61:107850)
{noformat}"
External Tools (LTI): Add custom icon input too wide,Bug,Closed,Sakai,software,"On 24 & 23, when adding an LTI tool, the Choose a custom icon text field is extremely wide compared to the rest of the fields on the page. On 22x, the field is the same size as the other text fields. Also, once an icon has been selected, it is not possible to clear the text field (also affects 22x). 

Not sure why there is such a difference between 24 & 22, the html code looks to be the same:
24x:
<div id=""div_fa_icon"" class=""input-group iconpicker-container""><span class=""input-group-addon""><i class=""fa ""></i></span><input type=""text"" id=""fa_icon"" name=""fa_icon"" size=""40"" style=""border:1px solid #555;padding:5px;font-size:1em;width:300px"" value="""" readonly="""" class=""form-control icp icp-auto iconpicker-element iconpicker-input""></div>

22x:
<div id=""div_fa_icon"" class=""input-group iconpicker-container""><span class=""input-group-addon""><i class=""fa ""></i></span><input type=""text"" id=""fa_icon"" name=""fa_icon"" size=""40"" style=""border:1px solid #555;padding:5px;font-size:1em;width:300px"" value="""" readonly="""" class=""form-control icp icp-auto iconpicker-element iconpicker-input""></div>"
LTI: Stacktrace when trying to add a Learning App in Lessons,Bug,Closed,Sakai,software,"Adding a Learning App and trying to launch the lti â€œstoreâ€ gives an internal server error. This was working a couple of weeks ago, so not sure what changed. 22x is fine.

{noformat}07-Oct-2023 11:24:33.793 WARN [http-nio-20023-exec-40] o.s.p.u.ErrorReporter.logAndMail Bug Report bug-id: c4718c46-cc9e-4067-aa60-864aa49c2dc0 user: 1f435576-fc8c-4c3c-ac49-11b08a98f654 usage-session: 65ceae9d-04af-4a85-840f-c59234abad36 time: Oct 7, 2023, 11:24:33 AM EDT user comment: null stack trace

org.sakaiproject.portal.api.PortalHandlerException: org.sakaiproject.tool.api.ToolException: java.lang.reflect.InvocationTargetException

    at org.sakaiproject.portal.charon.SkinnableCharonPortal.doGet(SkinnableCharonPortal.java:817)

caused by: org.sakaiproject.tool.api.ToolException: java.lang.reflect.InvocationTargetException

    at org.sakaiproject.cheftool.ToolServlet.doGet(ToolServlet.java:234)

caused by: java.lang.reflect.InvocationTargetException

    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)

caused by: java.lang.StringIndexOutOfBoundsException: String index out of range: 63

    at java.lang.StringLatin1.charAt(StringLatin1.java:47)

    at java.lang.String.charAt(String.java:693)

    at org.tsugi.util.Base62.encode(Base62.java:61)

    at org.sakaiproject.blti.tool.LTIAdminTool.buildContentConfigPanelContext(LTIAdminTool.java:2561)

    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)

    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)

    at java.lang.reflect.Method.invoke(Method.java:566)

    at org.sakaiproject.cheftool.VelocityPortletPaneledAction.toolModeDispatch(VelocityPortletPaneledAction.java:409)

    at org.sakaiproject.cheftool.ToolServlet.doGet(ToolServlet.java:234)

    at org.sakaiproject.cheftool.VelocityPortletPaneledAction.doGet(VelocityPortletPaneledAction.java:1098)

    at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)

    at org.sakaiproject.vm.ComponentServlet.service(ComponentServlet.java:56)

    at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)

    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)

    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)

    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661)

    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425)

    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330)

    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294)

    at org.sakaiproject.tool.impl.ActiveToolComponent$MyActiveTool.help(ActiveToolComponent.java:578)

    at org.sakaiproject.cheftool.ToolServlet.sendToHelper(ToolServlet.java:675)

    at org.sakaiproject.cheftool.ToolServlet.doGet(ToolServlet.java:219)

    at org.sakaiproject.cheftool.VelocityPortletPaneledAction.doGet(VelocityPortletPaneledAction.java:1098)

    at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)

    at org.sakaiproject.vm.ComponentServlet.service(ComponentServlet.java:56)

    at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)

    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)

    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)

    at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:450)

    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)

    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)

    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661)

    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:425)

    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:330)

    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294)

    at org.sakaiproject.tool.impl.ActiveToolComponent$MyActiveTool.forward(ActiveToolComponent.java:508)

    at org.sakaiproject.portal.charon.SkinnableCharonPortal.forwardTool(SkinnableCharonPortal.java:1482)

    at org.sakaiproject.portal.charon.handlers.ToolHandler.doTool(ToolHandler.java:200)

    at org.sakaiproject.portal.charon.handlers.ToolHandler.doGet(ToolHandler.java:96)

    at org.sakaiproject.portal.charon.SkinnableCharonPortal.doGet(SkinnableCharonPortal.java:817)

    at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)

    at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)

    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)

    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)

    at org.sakaiproject.util.RequestFilter.doFilter(RequestFilter.java:500)

    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)

    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)

    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)

    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)

    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)

    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)

    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)

    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)

    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)

    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)

    at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:768)

    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)

    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)

    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)

    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)

    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)

    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)

    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)

    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)

    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)

    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)

    at java.lang.Thread.run(Thread.java:829){noformat}"
Update Apache Commons Net 3.10.0,Bug,Closed,Sakai,software,"[https://commons.apache.org/proper/commons-net/changes-report.html#a3.10.0|https://commons.apache.org/proper/commons-net/changes-report.html#a3.10.0|smart-link] 



h3. Release 3.10.0 â€“ 2023-10-01

||Type||Changes||By||
|!add.gif|width=20,height=20,alt=""Add""!|Add and use DatagramSocketClient.setDefaultTimeout(Duration) and deprecate DatagramSocketClient.setDefaultTimeout(int). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add and use TFTP.DEFAULT_TIMEOUT_DURATION and deprecate org.apache.commons.net.tftp.TFTP.DEFAULT_TIMEOUT. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add and use DatagramSocketClient#getSoTimeoutDuration(). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add and use DatagramSocketClient#setSoTimeout(Duration). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add and use DatagramSocketClient.checkOpen(). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add TelnetClient.sendAYT(Duration). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|TFTPServer implements AutoCloseable. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|DatagramSocketClient implements AutoCloseable. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add IMAP package tests, include junit-jupiter-params artifact #166. Thanks to KuKa, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add Base64 missing tests and documentation fixes #161. Thanks to KuKa, Bruno P. Kinoshita.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add FTPFile tests and fix Javadoc typos #162. Thanks to KuKa, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add IMAPReply tests and documentation fixes #165. Thanks to KuKa, Gary Gregory, Bruno P. Kinoshita.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Delegate host resolution to Socket.connect() #138. Fixes [NET-650|https://issues.apache.org/jira/browse/NET-650]. Thanks to Matthew McGillis, exceptionfactory, sebbASF.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Fixes many grammar issues and typos in JavaDoc and code comments #141. Thanks to Martin Wiesner, Gary Gregory, sebbASF.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Remove redundant (null) initializations and other clean ups #155. Thanks to Martin Wiesner, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|TFTPServer.setMaxTimeoutRetries() now throws IllegalArgumentException instead of RuntimeException. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|TFTPServer.setSocketTimeout() now throws IllegalArgumentException instead of RuntimeException. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|FTPCommand.checkArray() now throws IllegalStateException instead of RuntimeException. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|org.apache.commons.net.nntp.Threader now throws IllegalStateException instead of RuntimeException. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|POP3Command static initializer now throws IllegalStateException instead of RuntimeException. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|SMTPCommand static initializer now throws IllegalStateException instead of RuntimeException. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|SubnetUtils.SubnetInfo.getPreviousAddress() now throws IllegalStateException instead of RuntimeException. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|IMAPExportMbox.MboxListener.chunkReceived(IMAP) now throws UncheckedIOException instead of RuntimeException. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|IMAPUtils.imapLogin(URI, int, ProtocolCommandListener) now throws IOException instead of RuntimeException while maintaining method signature source compatibility. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|[StepSecurity] ci: Harden GitHub Actions #156. Thanks to step-security-bot, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Javadoc for FtpClient.setControlKeepAliveReplyTimeout(Duration) says timeout is in milliseconds. Fixes [NET-722|https://issues.apache.org/jira/browse/NET-722]. Thanks to David Costanzo, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Change class org.apache.commons.net.ftp.parser.MVSFTPEntryParser to support more datasets #182. Thanks to haegar9766, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Bulletproof TFTPServerPathTest #173. Thanks to Jakub Kupczyk, Bruno P. Kinoshita, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Deprecate org.apache.commons.net.util.Base64 in favor of java.util.Base64. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Replace use of org.apache.commons.net.util.Base64 with java.util.Base64 in org.apache.commons.net.ftp. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Replace use of org.apache.commons.net.util.Base64 with java.util.Base64 in org.apache.commons.net.imap. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Replace use of org.apache.commons.net.util.Base64 with java.util.Base64 in org.apache.commons.net.pop3. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Replace use of org.apache.commons.net.util.Base64 with java.util.Base64 in org.apache.commons.net.smtp. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump commons-parent from 54 to 62 #132, #137, #153. Thanks to Dependabot.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump commons-io from 2.11.0 to 2.14.0. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-net/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump commons-lang3 from 3.12.0 to 3.13.0. Thanks to Gary Gregory.| |"
Info icon in Worksite Setup tool shows incorrect site information,Bug,Verified,Sakai,software,"This does not occur on 23.x or Trunk at this time.

In Worksite Setup, if you hover over the info icon, it displays â€œMore information on this site.â€ However, if you click on the info icon to display more information on the site, it always shows the information for the site at the top of the list on the screen, regardless of which site info icon you select.

In the images below, you will see that the information for the first site in the list is displayed, even when info for a site further down the list is selected.

!2023-10-06_12-36-49.jpg|width=1112,height=599!

!2023-10-06_12-37-05.jpg|width=1077,height=681!"
Contrast Issues with Lessons Subpage Button Text,Bug,Closed,Sakai,software,"If you create subpages in Lessons and have them display as buttons, and you change the button color to something other than the default, the text contrast on the button label is problematic. 

If you are viewing the site in light mode, the light colored buttons are legible because the black text on the light colors (for example, gold or blue) has sufficient contrast. However, dark button colors (such as black or dark navy) have illegible text, since the black button labels do not adjust to the color of the button. See image below.

!lessons-subpage-buttons-lightmode.jpg|width=709,height=665!

However, if you switch to view the site in dark mode, now the colors are reversed and the light colored buttons have insufficient contrast, while the dark colored buttons are legible.

!Snag_16dc6bb.png|width=535,height=475!

The button label text needs to observe the color selected for the button and provide text with sufficient contrast for the button, rather than changing to the same color as the default page text when light/dark mode is selected. "
NPE viewing dashboard containing announcements merged from site user isn't a member of,Bug,Closed,Sakai,software,"{noformat}java.lang.NullPointerException: null                                                                                                                                                                                             
        at org.sakaiproject.webapi.controllers.AnnouncementsController.getSiteAnnouncements(AnnouncementsController.java:104) [classes/:?]
        at jdk.internal.reflect.GeneratedMethodAccessor5959.invoke(Unknown Source) ~[?:?]
        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
        at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]
        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) [spring-web-5.3.18.jar:5.3.18]{noformat}

This was caused by the fix in SAK-47863"
Instructor would like to see multiple submissions in the new grader interface,Feature Request,Resolved,Sakai,software,"Instructor would like to see the ability to see all the resubmission documents in the new grader interface as is in the old grader interface.

Here is what the old grader interface looks like.

!image-20231005-183418.png|width=562,height=224!"
"The ""Access: exam_name"" group is not created in Lessons with prerequisites unless a teacher navigates through the involved Lessons first. The exam remains inaccessible.",Bug,Closed,Sakai,software,"When importing content from one site to another, which is a common practice at the beginning of a course, when Lessons are structured with prerequisites and linked to exams, the instructor must navigate through each page of the Lesson so that students can access the exams. If this is not done, when the first student reaches an exam that has prerequisites, Sakai assigns the group ""Access: exam_name"" to that exam, but this group either gets deleted or is not created.

The exam becomes inaccessible to students (You do not have permission to access this assessment. Please contact your instructor if you have any questions.) and displays an error message for the instructor (Students are not able to take this assessment because the groups it was released to have been deleted. You must publish a new copy of this assessment.) Only when the instructor navigates to the Lessons page containing the exam does the ""Access"" group get created.

This behavior leads to issues for instructors who use this system. It shouldn't be necessary for the instructor to navigate through all the content for the ""Access"" group to be created."
Assignments: Missing cells in peer-review rows in assignment table ,Bug,Closed,Sakai,software,Peer review related rows in assignment table are missing cells. Also the open date cells not hide on small screens for this rows. 
Lessons: Lesson endpoint does not include format field of the BREAK type,Feature Request,Verified,Sakai,software,"The endpoint located at {{/direct/lessons/lesson/{lessonId}.json}} which provides an array of lesson item does not include relevant information for break items. The missing field is the {{format}}, which distinguished sections from columns. This property should be surfaced as with the other lesson items that have custom attributes. Check the test plan to see the actual and expected json representations."
Portal: DOMException: Failed to register a ServiceWorker,Bug,Open,Sakai,software,"Iâ€™m not seeing the gateway errors on 24 or 22, only on 23. 

After logging in, 24 and 23 have the errors.

When launching [https://qa23-maria.nightly.sakaiproject.org/portal|https://qa23-maria.nightly.sakaiproject.org/portal] without logging in, there is a console error and at the same time I see an error and warnings in the server logs.

After logging in, there are more errors.

*Console Error (not logged in):*

{noformat}portal:1  Uncaught (in promise) DOMException: Failed to register a ServiceWorker: The document is in an invalid state.
Promise.then (async)
(anonymous) @ sakai-message-broker.js?version=371ed6fa:105{noformat}

*Server Logs (not logged in):*


{noformat}03-Oct-2023 17:51:26.054 ERROR [http-nio-20023-exec-12] o.s.p.c.SkinnableCharonPortal.startPageContext Failed to set profile urls on render context: org.sakaiproject.exception.IdUnusedException id: ~

03-Oct-2023 17:51:26.054 WARN [http-nio-20023-exec-12] o.s.p.c.h.SiteHandler.doSite Exception caught whilst setting selectedPage property: org.sakaiproject.exception.PermissionException: user=null lock=prefs.upd resource=/prefs/null id: /prefs/null

03-Oct-2023 17:51:26.054 WARN [http-nio-20023-exec-12] o.s.p.c.h.SiteHandler.doSite Exception caught whilst setting selectedPage property: org.sakaiproject.exception.PermissionException: user=null lock=prefs.upd resource=/prefs/null id: /prefs/null

03-Oct-2023 17:51:26.063 WARN [http-nio-20023-exec-12] o.s.m.i.UserMessagingServiceImpl.getNotifications No current user{noformat}

*Console errors (logged in):*

{noformat}sakai-message-broker.js?version=371ed6fa:97  Failed to register service worker InvalidStateError: Failed to register a ServiceWorker: The document is in an invalid state.
(anonymous) @ sakai-message-broker.js?version=371ed6fa:97
Promise.catch (async)
(anonymous) @ sakai-message-broker.js?version=371ed6fa:95
(anonymous) @ sakai-message-broker.js?version=371ed6fa:48
portal:1  Uncaught (in promise) undefined
Promise.then (async)
(anonymous) @ sakai-message-broker.js?version=371ed6fa:102
portal:1  Uncaught (in promise) undefined
Promise.then (async)
registerForNotifications @ sui-notifications.js?version=371ed6fa:56
(anonymous) @ sui-notifications.js?version=371ed6fa:50
Promise.then (async)
loadInitialNotifications @ sui-notifications.js?version=371ed6fa:47
attributeChangedCallback @ sui-notifications.js?version=371ed6fa:30
(anonymous) @ sui-notifications.js?version=371ed6fa:252{noformat}

*Server logs (logged in):*

{noformat}03-Oct-2023 17:52:20.787 ERROR [http-nio-20023-exec-3] o.s.p.c.SkinnableCharonPortal.startPageContext Failed to set profile urls on render context: org.sakaiproject.exception.IdUnusedException id: ~

03-Oct-2023 17:52:20.788 WARN [http-nio-20023-exec-3] o.s.p.c.h.SiteHandler.doSite Exception caught whilst setting selectedPage property: org.sakaiproject.exception.PermissionException: user=null lock=prefs.upd resource=/prefs/null id: /prefs/null

03-Oct-2023 17:52:20.788 WARN [http-nio-20023-exec-3] o.s.p.c.h.SiteHandler.doSite Exception caught whilst setting selectedPage property: org.sakaiproject.exception.PermissionException: user=null lock=prefs.upd resource=/prefs/null id: /prefs/null

03-Oct-2023 17:52:20.799 WARN [http-nio-20023-exec-3] o.s.m.i.UserMessagingServiceImpl.getNotifications No current user

6{noformat}"
"User Activity Report incorrectly says student submission read was ""Instructor on behalf of""",Bug,Resolved,Sakai,software,"User Activity Report for a student assignment submission read says that the submitter was â€œInstructor on behalf ofâ€

This is because the submitter is empty "
"Ability to email all sites in which you are instructor, or to merge sites via email tool",Feature Request,Open,Sakai,software,"Iâ€™ve gotten a request from a few instructors that they would like to have the ability to email, through bridges, more than one section, or course site, in which they are listed as the instructor of record.  I know announcements can be merged, but it would be nice to have this functionality in the email tool.  "
Portal: Can not navigate between tools of unpinned site.,Bug,Closed,Sakai,software,"If you go on a site that is not in the recent sites already and that is not pinned, there is no way to navigate to the sites tools, because it is not displayed on the left side at all"
Portal: Can not re-pin sites ,Bug,Closed,Sakai,software,"After unpinning a site I find it in the recent sites. When I pin the site it moves back to the pinned section, but when refreshing the page, it is still unpinned. This issue might be related to project sites. I attached a video of my local instance because the connection to trunk is to slow, but I reproduced it there as well."
Roster Card Game: Ability to switch to a different group without losing the progress made with the current group,Feature Request,Open,Sakai,software,"In a site with several groups, if the instructor accesses the Name That Face tab in the Roster, they have 2 options:

* From all site participants
* From group members

If a group is selected, the page loads with a student from that group. The text below the image and buttons:

You have learned 0 of 1 student names (from group 24x-Team-2)

If the instructor wants to switch to another group, they have to either click Reset the game and lose all progress made so far, or click the Overview tab and then go back to the Name That Face tab.

When groups are involved, it would be nice to have a drop-down on that page allowing the instructor to select another group without losing their progress."
"Roster Card game: when clicking to reset the game, students in the pop-up should be students'",Bug,Verified,Sakai,software,"In the roster card game, when clicking to reset the game, the pop-up has the following:

â€œâ€¦for the {color:#bf2600}students{color} namesâ€¦â€

This should be â€œâ€¦for the students{color:#bf2600}'{color} namesâ€¦â€

!image-20231002-225710.png|width=507,height=319!"
userNotification: display error with long titles,Bug,Open,Sakai,software,"Create e.g. announcement/assignment with a long title (e.g. > 55 chars and no spaces in between).

The resulting notification does not properly display the title, which is not wrapped inside the HTML element  and does not fit (See attachment). If spaces are present the title is wrapped.

"
Cannot change / add profile photo with profile2.avatar.initials.enabled=false,Bug,Open,Sakai,software,"Using the {{profile2.avatar.initials.enabled=false}} the default profile image for users will show the same image for everyone instead of the initials of the users name. This beaks the new webcomponent based editor. as it's not rendered when the image object ({{ProfileImage.java}}) has the property {{isDefault}} set to true. I want to note that since [https://sakaiproject.atlassian.net/browse/SAK-41754|https://sakaiproject.atlassian.net/browse/SAK-41754|smart-link] was introduced the {{isDefault}} property was not really used (without setting {{profile2.avatar.initials.enabled}}), since using the initials will also have {{isDefault=false}}.

I think this case should either be handled, or the property should be removed together with a cleanup in ProfileImageLogic in case it is not used.

As you can see in the screenshot the default image does also not display really well (round). I suppose it is not used much.

Decription copied from SAK-49311:

Clicking on â€œChange Pictureâ€ in Profile does nothing (other than throw JS error on the console). 

modal.js:157 Uncaught TypeError: Cannot read properties of undefined (reading 'backdrop')

at ne._initializeBackDrop (modal.js:157:39)

at new ne (modal.js:68:27)

at ne.getOrCreateInstance (base-component.js:65:41)

at HTMLButtonElement.<anonymous> (modal.js:360:22)

at HTMLDocument.s (event-handler.js:118:19)"
Update Apache Commons IO 2.14.0,Bug,Closed,Sakai,software,"[https://commons.apache.org/proper/commons-io/changes-report.html#a2.14.0|https://commons.apache.org/proper/commons-io/changes-report.html#a2.14.0|smart-link] 

h3. Release 2.14.0 â€“ 2023-09-24

||Type||Changes||By||
|!fix.gif|width=20,height=20,alt=""Fix""!|ReaderInputStream.read() throws an exception instead of returning -1 when called again after returning -1. Fixes [IO-799|https://issues.apache.org/jira/browse/IO-799]. Thanks to Jeroen van der Vegt, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|FileUtils.forceMkdirParent() Javadoc is incorrect. Fixes [IO-804|https://issues.apache.org/jira/browse/IO-804]. Thanks to Elliotte Rusty Harold, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|[StepSecurity] ci: Harden GitHub Actions #461. Thanks to step-security-bot, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|MagicNumberFileFilter.accept(Path, BasicFileAttributes) doesn't set its byteOffset before reading. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Javadoc improvements. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Spelling #468. Thanks to Josh Soref, Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!fix.gif|width=20,height=20,alt=""Fix""!|Use assertThrows #475. Thanks to Jakub Kupczyk.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add DeferredFileOutputStream.getPath(). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add FileCleaningTracker.track(Path, Object[, FileDeleteStrategy]). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add IOUtils.skip[Fully](InputStream, long, Supplier<byte[]>). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add FilesUncheck.find(Path, int, BiPredicate%lt;Path, BasicFileAttributes>, FileVisitOption...) Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add IOIntSupplier. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add IOLongSupplier. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add Uncheck.getAsInt(IOIntSupplier [, Supplier<String>]). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add Uncheck.getAsLong(IOLongSupplier [, Supplier<String>]). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add Uncheck.run(IORunnable, Supplier<String>) Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add Uncheck.get(IOSupplier, Supplier<String>) Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|IOFileFilter now also extends java.nio.file.PathMatcher. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add PathMatcherFileFilter to adapt java.nio.file.PathMatcher. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add ThresholdingOutputStream.getOutputStream() and deprecate getStream(). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add DeferredFileOutputStream.Builder.setOutputFile(Path). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add DeferredFileOutputStream.Builder.setDirectory(Path). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add AbstractStreamBuilder.setBufferSizeChecker(IntToIntFunction). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!add.gif|width=20,height=20,alt=""Add""!|Add AbstractStreamBuilder.setBufferSizeMax(int). Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump jimfs from 1.2 to 1.3.0 #465 (tests). Thanks to Dependabot.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump commons-parent from 58 to 62. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|
|!update.gif|width=20,height=20,alt=""Update""!|Bump commons-lang3 from 3.12 to 3.13.0. Thanks to Gary Gregory.|[ggregory|https://commons.apache.org/proper/commons-io/team-list.html#ggregory]|"
Roster: o.s.r.t.e.RosterSiteEntityProvider.getMembership Invalid page size: NaN,Bug,Verified,Sakai,software,"This currently is only affecting 24x and I suspect it has something to do with the â€œroster card gameâ€. This issue was fixed for 24 & 23 in [https://sakaiproject.atlassian.net/browse/SAK-48373|https://sakaiproject.atlassian.net/browse/SAK-48373|smart-link], before the â€œroster card gameâ€ was introduced. 

23x is not displaying any errors in the server logs but also does not have the roster card game.

24x server logs:

{noformat}01-Oct-2023 11:03:42.713 ERROR [http-nio-20313-exec-48] o.s.r.t.e.RosterSiteEntityProvider.getMembership Invalid page size: NaN. Falling back to default page size of 10.
{noformat}

Roster Card Game Jiras: [https://sakaiproject.atlassian.net/issues/?jql=project %3D SAK AND component %3D Roster AND text ~ ""card game"" ORDER BY updated DESC%2C created DESC|https://sakaiproject.atlassian.net/issues/?jql=project%20%3D%20SAK%20AND%20component%20%3D%20Roster%20AND%20text%20~%20%22card%20game%22%20ORDER%20BY%20updated%20DESC%2C%20created%20DESC]"
Dashboard: Edit Dashboard > Image fails on first attempt,Bug,Verified,Sakai,software,"The first attempt at editing the image in Dashboard fails. The page behaves as if itâ€™s trying to load the pop-up to change the image, but it doesnâ€™t show, the page is â€œfrozenâ€, and the user has to reload the page. The next attempt does display the pop-up."
Site Info: images/icons should not display in the navigation,Bug,Resolved,Sakai,software,"If you look at the comments in [https://sakaiproject.atlassian.net/browse/SAK-48364|https://sakaiproject.atlassian.net/browse/SAK-48364|smart-link] , for 24 & 23, the icon is no longer expected to display in the navigation.

So for 24 & 23 (and going forward), the URL entered in Site Info > Edit Site Info > *Icon URL* actually affects the image in the Dashboard and would not be an icon, but an actual image. 

In the Dashboard > Edit Dashboard, you can change the image, but this also affects the Site Info > Icon URL. 

Since it seems the decision was made to not have an icon display in the navigation, the link between the Dashboard image/Icon URL in site info edit should be disconnected from creating an icon in the navigation for 24 & 23, and only update the image for the Dashboard.

Christinaâ€™s comments in the linked Jira:

{quote}For the T&L Discussion - this site icon is also tied to the Dashboard layout 2 course image. Adding an image to the Dashboard puts <https://<server>/access/content/group/<siteID>/site_icon_image.png> in the course icon URL field, and removing the URL is how you can reset the Dashboard image back to the default city image.

I think the icon not appearing above the tool menu was a desired behavior because in 22, initially any Dashboard course image also appeared in the site icon area. The two use the same image and you couldnâ€™t have one without the other.{quote}"
LTI Assignments: Unable to view submissions when using the arrows to move between students when grading,Bug,Closed,Sakai,software,"This could be a real pain for instructors in larger classes. If an assignment uses an LTI tool and the instructor wants to grade submissions:

* The submissions page displays all the submissions correctly
* If the instructor clicks on a studentâ€™s name, the studentâ€™s submission displays and the instructor can grade
* {color:#bf2600}If the instructor then uses the arrows to navigate between students (with or without the option enabled to only navigate between students with a submission), the instructor sees the upload page for the external tool instead of the studentâ€™s submission{color}

Iâ€™m also attaching a screenshot from the browserâ€™s network tab which displays an issue with oidc_auth? in one line and in the following line it seems to be fine. I donâ€™t know if this has anything to do with the issue, but thought I would include it just in case."
Update Apache Poi 5.2.4,Bug,Closed,Sakai,software,"h2. Version 5.2.4 (2023-09-28)

h3. Summary

* Discontinued the binary packages to reduce maintenance overhead, please rebuild the sources locally or use Maven Central for binary files
* Upgrade log4j-api dependency to 2.20.0
* Upgrade xmlsec dependency to 3.0.2
* Upgrade batik dependency to 1.17
* Upgrade pdfbox dependency to 2.0.29, graphics2d to 0.43
* Upgrade commons-codec dependency to 1.16.0
* Upgrade commons-compress dependency to 1.24.0
* Upgrade commons-io dependency to 2.13.0
* Upgrade curvesapi dependency to 1.08
* Upgrade SparseBitSet dependency to 1.3
* Use jdk18on versions of bouncycastle jars (v1.76)

h3. Changes

||Type||Bug||Module||Description||
|!fix (b27672db-fa4f-438a-9711-20ce4d88869f).png|width=20,height=20,alt=""fix""!|[47950|https://bz.apache.org/bugzilla/show_bug.cgi?id=47950]|POI_Overall|make stream/directory name lookup in OLE2 case insensitive|
|!fix (8ff9c608-025d-4960-9db9-9821c2d8572b).png|width=20,height=20,alt=""fix""!|[66521|https://bz.apache.org/bugzilla/show_bug.cgi?id=66521]|POI_Overall|Provide a utility to clear all thread-locals to avoid reports of memory-leaks in web-application containers|
|!fix.png|width=20,height=20,alt=""fix""!|[66436|https://bz.apache.org/bugzilla/show_bug.cgi?id=66436]|POI_Overall|Fix handling padding when decrypting data|
|!fix (cb8c11f2-ed2c-496c-954d-d85caa34bbb0).png|width=20,height=20,alt=""fix""!|[54373|https://bz.apache.org/bugzilla/show_bug.cgi?id=54373]|XSSF|Include alpha/transparency value when creating an XSSFColor from an AWT Color object|
|!fix (a359ee6e-e804-4261-bf3f-8f5f28c0c617).png|width=20,height=20,alt=""fix""!|[62272|https://bz.apache.org/bugzilla/show_bug.cgi?id=62272]|XSSF|Include alpha/transparency value when setting a color-value for a font|
|!fix (51d221e0-85fb-4978-bd1a-3dc7d56c98fe).png|width=20,height=20,alt=""fix""!|[65260|https://bz.apache.org/bugzilla/show_bug.cgi?id=65260]|SXSSF|Fix graceful handling of missing font-system on the operating system|
|!fix (ee08a916-19b0-44be-8d99-ff666a5fd3e5).png|width=20,height=20,alt=""fix""!|[65543|https://bz.apache.org/bugzilla/show_bug.cgi?id=65543]|HSSF|Incomplete Shared String Tables were causing read failures|
|!fix (b6643619-9031-46f7-9915-730d65c42f8c).png|width=20,height=20,alt=""fix""!|[66257|https://bz.apache.org/bugzilla/show_bug.cgi?id=66257]|XSSF|NullPointerException in XSSFReader$SheetIterator.next()|
|!fix (2f262ea0-cffe-4836-b36e-c5a4bfcf1ab4).png|width=20,height=20,alt=""fix""!|[66278|https://bz.apache.org/bugzilla/show_bug.cgi?id=66278]|XSLF|Multiple gradient stops at the exact same location causing a rendering failure|
|!add (a784b009-cf7a-474b-ad99-b7cf3d80db10).png|width=20,height=20,alt=""add""!|[66301|https://bz.apache.org/bugzilla/show_bug.cgi?id=66301]|HSMF|Add a method to properly write the header necessary for a MSG attachment|
|!fix (acbf9e49-b942-44f1-ae71-afa63052ee55).png|width=20,height=20,alt=""fix""!|[66306|https://bz.apache.org/bugzilla/show_bug.cgi?id=66306]|XSLF|Make XSLFDiagramGroupShape public|
|!fix (2293fda4-cbf2-4644-a0c5-5ab86d654988).png|width=20,height=20,alt=""fix""!|[66312|https://bz.apache.org/bugzilla/show_bug.cgi?id=66312]|XWPF|Inserting paragraph into table from cursor|
|!add.png|width=20,height=20,alt=""add""!|[66347|https://bz.apache.org/bugzilla/show_bug.cgi?id=66347]|XWPF|Add theme support to XWPF|
|!fix (3794d150-3527-4e2b-b456-84fd91808e92).png|width=20,height=20,alt=""fix""!|[66365|https://bz.apache.org/bugzilla/show_bug.cgi?id=66365]|XSSF|Fix issue where cells with formulas and cached results of string type do not properly support shared strings|
|!fix (4af1dd12-e676-4f47-a13f-ae7717e9ef15).png|width=20,height=20,alt=""fix""!|[66399|https://bz.apache.org/bugzilla/show_bug.cgi?id=66399]|XSLF|Text run highlight colors were ignored|
|!fix (79c72577-1ac4-4226-b71d-48c03285f94c).png|width=20,height=20,alt=""fix""!|[66401|https://bz.apache.org/bugzilla/show_bug.cgi?id=66401]|SS_Common|Fix parsing formulas with sheet-names which contain single quotes|
|!fix (6eb68281-a883-4aa7-9d3b-c66541575114).png|width=20,height=20,alt=""fix""!|[66418|https://bz.apache.org/bugzilla/show_bug.cgi?id=66418]|XSSF|Fix performance issue with XSSFSheet.groupRow|
|!fix (f1b24c7b-0041-438d-8d50-92033bb926b6).png|width=20,height=20,alt=""fix""!|[66433|https://bz.apache.org/bugzilla/show_bug.cgi?id=66433]|SS_Common|Improve boolean functions empty cell handling|
|!fix (33489a39-b659-460c-a98b-70440e49d8af).png|width=20,height=20,alt=""fix""!|[66473|https://bz.apache.org/bugzilla/show_bug.cgi?id=66473]|SXSSF|Fix performance issue with SXSSFCell.getColumnIndex()|
|!fix (fed0ef9f-0603-4561-94c3-b603224b83c1).png|width=20,height=20,alt=""fix""!|[66475|https://bz.apache.org/bugzilla/show_bug.cgi?id=66475]|POI_Overall|SignatureConfig: remove ThreadLocals and deprecated code associated with them|
|!fix (e8eddcaa-cc41-4468-a341-5ca81cfc3987).png|width=20,height=20,alt=""fix""!|[66514|https://bz.apache.org/bugzilla/show_bug.cgi?id=66514]|POI_Overall|Remove support for zip/tgz release artifacts|
|!fix (fd4d1012-c8e1-499b-bd39-25faa6d318b0).png|width=20,height=20,alt=""fix""!|[66532|https://bz.apache.org/bugzilla/show_bug.cgi?id=66532]|SXSSF|Improve performance of SheetDataWriter outputEscapedString|
|!fix (65b449e2-3f17-4106-9a37-822d5afa718b).png|width=20,height=20,alt=""fix""!|[66584|https://bz.apache.org/bugzilla/show_bug.cgi?id=66584]|OOXML|Ensure ZipPackage closes input stream when exceptions happen|
|!fix (8f106af1-564e-415b-ab2d-06e4f0344fdb).png|width=20,height=20,alt=""fix""!|[66614|https://bz.apache.org/bugzilla/show_bug.cgi?id=66614]|SS_Common|Issue where OFFSET function applies limits that should only apply to xls format spreadsheets|
|!fix (f251317c-2ae1-418f-a624-6dfe2ff66455).png|width=20,height=20,alt=""fix""!|[66644|https://bz.apache.org/bugzilla/show_bug.cgi?id=66644]|POI_Overall|Make jar build reproducible|
|!fix (1a046b70-c0ba-4715-95f1-1e5189d533fb).png|width=20,height=20,alt=""fix""!|[66661|https://bz.apache.org/bugzilla/show_bug.cgi?id=66661]|XSSF|Fix issue with adding table formulas|
|!fix (b251afb4-ea2f-4814-a098-77819c34f720).png|width=20,height=20,alt=""fix""!|[66988|https://bz.apache.org/bugzilla/show_bug.cgi?id=66988]|XWPF|XWPFTableCell: make setText fully replace the text and add appendText method to append|
|!fix (29605548-b17c-4500-9407-d0640f93b869).png|width=20,height=20,alt=""fix""!|[67005|https://bz.apache.org/bugzilla/show_bug.cgi?id=67005]|XSLF|Basic for reading audio files in pptx files|
|!fix (70a7ccc0-8828-4a84-9a51-4372d761caaf).png|width=20,height=20,alt=""fix""!|[67396|https://bz.apache.org/bugzilla/show_bug.cgi?id=67396]|OOXML|Set standalone=""yes"" in XML declarations when writing OOXML format files|"
LTI Group Submission: Instructor unable to view submissions ,Bug,Open,Sakai,software,"If the instructor added an LTI assignment for group submission, the instructor is unable to view and grade submissions."
LTI Assignment > Group Submission: Students are unable to see the submitted document,Bug,Open,Sakai,software,"Even with unlimited submissions allowed for an assignment, if one group member submits, the other group members are unable to see the submission."
Rubrics: Shared draft rubric should have Draft label,Bug,Verified,Sakai,software,"If an instructor shares a draft rubric, it doesnâ€™t have the Draft label in the Publicly Shared Rubrics section. However, if another instructor copies that rubric to their site, it remains a draft. If a rubric keeps the draft status when shared & copied, it should have the Draft label in the Publicly Shared Rubrics section"
Web link does not display correctly in Dark Mode,Bug,Closed,Sakai,software,The web content tool is not adapted to Sakai's dark mode when linking a resources folder. The icon selector has not been adapted either.
Assignments: Status in assignment incorrect if instructor grades a student's draft,Bug,Open,Sakai,software,"This can be tested on trunk with inline text, but will need to wait until after [https://sakaiproject.atlassian.net/browse/SAK-49242|https://sakaiproject.atlassian.net/browse/SAK-49242|smart-link] has been merged to the other servers.

If the student has a draft assignment, after the due/accept date, the instructor is able to view a studentâ€™s draft and grade it. If the instructor grades the draft and releases the grade, the student will see â€œReturnedâ€ on the assignments page, but once they open the assignment, the status shows as â€œSubmittedâ€."
Assignments-Grader: Console error as soon as the instructor enters a grade - Cannot read properties of undefined (reading 'match'),Bug,Resolved,Sakai,software,"This is the same error as in [https://sakaiproject.atlassian.net/browse/SAK-46454|https://sakaiproject.atlassian.net/browse/SAK-46454|smart-link] 

It only shows up now when grading, (navigating between students with a submission works now and no errors). Iâ€™ve cleared my browser cache but it still displays.

{noformat}sakai-grader.js?version=be4b0fbc:705  Uncaught TypeError: Cannot read properties of undefined (reading 'match')
    at SakaiGrader._validateGradeInput (sakai-grader.js?version=be4b0fbc:705:23)
    at EventPart.handleEvent (parts.js?version=be4b0fbc:532:18)
    at EventPart.__boundHandleEvent (parts.js?version=be4b0fbc:494:41){noformat}"
AssignmentEntityProvider.getGradableForSite returns an http 500 when encountering invalid attachments,Bug,Closed,Sakai,software,"When grading an assignment with Sakai Grader the grader will attempt to load the userâ€™s submission but an http 500 error is received



{noformat}27-Sep-2023 16:54:24.599 INFO [http-apr-8477-exec-43] o.s.a.e.AssignmentEntityProvider.lambda$submissionToMap$8 There was an attachment on submission 4ca4af71-1a6b-474b-8ca2-71960c6021eb that was invalid
27-Sep-2023 16:54:24.600 ERROR [http-apr-8477-exec-43] o.s.e.i.e.SakaiExternalIntegrationProvider.handleEntityError Direct request failure: RuntimeException:Fatal error trying to execute custom action method: gradable:list:getGradableForSite:Direct request failure: RuntimeException:Fatal error trying to execute custom action method: gradable:list:getGradableForSite:{noformat}"
Section Info: Section won't be unlocked after deleting its associated assignment,Bug,Open,Sakai,software,"Sections canâ€™t be edited after they are associated to an assignment.
The issue comes when deleting the assignment as the section isnâ€™t _unlocked_, preventing editing it or assigning users."
Imported test with long title can't be previewed nor published,Bug,Open,Sakai,software,"Tests with long titles that imported using QTI canâ€™t be published

The problem detected is that the column COMMENTS in table SAM_ASSESSMENTBASE_T can be 4000 char long but the same column in SAM_PUBLISHEDASSESSMENT_T is only 255 characters long (and apparently to preview a test or to publish it this column is copied)

Reproduced in nightly server importing a test with long title, error in catalina log is {{SqlExceptionHelper.logExceptions Data truncation: Data too long for column 'COMMENTS' at row 1}}"
Lessons: 'Require this item' doesn't remain checked on some items completed by the instructor,Improvement,Closed,Sakai,software,"On Lessons you can edit an item and set it as required. For some item types â€˜Require this item' will show as unchecked the second time you access to the edit view, if it has been completed by the instructor (showing a check icon instead of an asterisk before the item).

It is confusing as the checkbox doesnâ€™t reflect the real state of the item.

This issue happens when a required subpage is empty or contains items that arenâ€™t required.
Also after completing a required assignment item."
Cannot change / add profile photo,Bug,Verified,Sakai,software,"Clicking on â€œChange Pictureâ€ in Profile does nothing (other than throw JS error on the console). 

{color:#ff5630}modal.js:157 Uncaught TypeError: Cannot read properties of undefined (reading 'backdrop'){color}
{color:#ff5630}    at ne._initializeBackDrop (modal.js:157:39){color}
{color:#ff5630}    at new ne (modal.js:68:27){color}
{color:#ff5630}    at ne.getOrCreateInstance (base-component.js:65:41){color}
{color:#ff5630}    at HTMLButtonElement.<anonymous> (modal.js:360:22){color}
{color:#ff5630}    at HTMLDocument.s (event-handler.js:118:19){color}"
LTI-Assignments: Improve Group Support (umbrella),Bug,Open,Sakai,software,This is an umbrella item to track a series of JIRAs to enable and then improve Assignments support.  These will be merged into master as they complete should be merged into 23.x as a group. 
Undefined portal variable not catched propertly in editor,Bug,Resolved,Sakai,software,"We have had an issue in our Evaluation System tool. When we use it in MyWorkspace, CKEditor doesnâ€™t load because a javascript stacktrace is thrown.

Uncaught ReferenceError: portal is not defined

The reason is in ckeditor.launch.js file, where this code doesnâ€™t catch propertly the undefined variable:

if (collectionId.startsWith('/user/') && portal && portal.siteId)

In the same file there are other places where the portal variable is checked, this is the way:

if (collectionId.startsWith('/user/') && typeof portal != 'undefined' && portal.siteId)

After this change everything keeps on working and our issue doesnâ€™t happen anymore."
Grader: Navigating between submissions with student submission is not filtering correctly.,Bug,Closed,Sakai,software,"Some instructors reported that navigating between submissions with student submission is not working as expected, the instructos goes to submissions without submission.

This might be caused by [https://sakaiproject.atlassian.net/browse/SAK-48697|https://sakaiproject.atlassian.net/browse/SAK-48697|smart-link] or [https://sakaiproject.atlassian.net/browse/SAK-49010|https://sakaiproject.atlassian.net/browse/SAK-49010|smart-link] but I still donâ€™t know the cause.



!SAK-49308.gif|width=1915,height=913!"
Sign-up: apply global style for Request Field Asterisks,Sub-task,Open,Sakai,software,"Found while testing [https://sakaiproject.atlassian.net/browse/SAK-49286|https://sakaiproject.atlassian.net/browse/SAK-49286|smart-link]

Creating a sign-up event has many fields with asterisks, but they do not use the global style"
